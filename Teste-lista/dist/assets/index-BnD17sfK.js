(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();function OT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var qT={exports:{}},ju={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $I=Symbol.for("react.transitional.element"),XI=Symbol.for("react.fragment");function BT(t,e,n){var i=null;if(n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),"key"in e){n={};for(var o in e)o!=="key"&&(n[o]=e[o])}else n=e;return e=n.ref,{$$typeof:$I,type:t,key:i,ref:e!==void 0?e:null,props:n}}ju.Fragment=XI;ju.jsx=BT;ju.jsxs=BT;qT.exports=ju;var R=qT.exports,FT={exports:{}},te={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nh=Symbol.for("react.transitional.element"),WI=Symbol.for("react.portal"),ZI=Symbol.for("react.fragment"),jI=Symbol.for("react.strict_mode"),eR=Symbol.for("react.profiler"),tR=Symbol.for("react.consumer"),nR=Symbol.for("react.context"),iR=Symbol.for("react.forward_ref"),oR=Symbol.for("react.suspense"),sR=Symbol.for("react.memo"),GT=Symbol.for("react.lazy"),rR=Symbol.for("react.activity"),Sg=Symbol.iterator;function aR(t){return t===null||typeof t!="object"?null:(t=Sg&&t[Sg]||t["@@iterator"],typeof t=="function"?t:null)}var zT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},HT=Object.assign,YT={};function zs(t,e,n){this.props=t,this.context=e,this.refs=YT,this.updater=n||zT}zs.prototype.isReactComponent={};zs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};zs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function JT(){}JT.prototype=zs.prototype;function Mh(t,e,n){this.props=t,this.context=e,this.refs=YT,this.updater=n||zT}var xh=Mh.prototype=new JT;xh.constructor=Mh;HT(xh,zs.prototype);xh.isPureReactComponent=!0;var Ag=Array.isArray;function td(){}var De={H:null,A:null,T:null,S:null},KT=Object.prototype.hasOwnProperty;function bh(t,e,n){var i=n.ref;return{$$typeof:Nh,type:t,key:e,ref:i!==void 0?i:null,props:n}}function lR(t,e){return bh(t.type,e,t.props)}function Dh(t){return typeof t=="object"&&t!==null&&t.$$typeof===Nh}function uR(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Cg=/\/+/g;function rf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?uR(""+t.key):e.toString(36)}function cR(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(td,td):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function Qo(t,e,n,i,o){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var r=!1;if(t===null)r=!0;else switch(s){case"bigint":case"string":case"number":r=!0;break;case"object":switch(t.$$typeof){case Nh:case WI:r=!0;break;case GT:return r=t._init,Qo(r(t._payload),e,n,i,o)}}if(r)return o=o(t),r=i===""?"."+rf(t,0):i,Ag(o)?(n="",r!=null&&(n=r.replace(Cg,"$&/")+"/"),Qo(o,e,n,"",function(c){return c})):o!=null&&(Dh(o)&&(o=lR(o,n+(o.key==null||t&&t.key===o.key?"":(""+o.key).replace(Cg,"$&/")+"/")+r)),e.push(o)),1;r=0;var a=i===""?".":i+":";if(Ag(t))for(var u=0;u<t.length;u++)i=t[u],s=a+rf(i,u),r+=Qo(i,e,n,s,o);else if(u=aR(t),typeof u=="function")for(t=u.call(t),u=0;!(i=t.next()).done;)i=i.value,s=a+rf(i,u++),r+=Qo(i,e,n,s,o);else if(s==="object"){if(typeof t.then=="function")return Qo(cR(t),e,n,i,o);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return r}function fl(t,e,n){if(t==null)return t;var i=[],o=0;return Qo(t,i,"","",function(s){return e.call(n,s,o++)}),i}function fR(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ig=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},dR={map:fl,forEach:function(t,e,n){fl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return fl(t,function(){e++}),e},toArray:function(t){return fl(t,function(e){return e})||[]},only:function(t){if(!Dh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};te.Activity=rR;te.Children=dR;te.Component=zs;te.Fragment=ZI;te.Profiler=eR;te.PureComponent=Mh;te.StrictMode=jI;te.Suspense=oR;te.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=De;te.__COMPILER_RUNTIME={__proto__:null,c:function(t){return De.H.useMemoCache(t)}};te.cache=function(t){return function(){return t.apply(null,arguments)}};te.cacheSignal=function(){return null};te.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var i=HT({},t.props),o=t.key;if(e!=null)for(s in e.key!==void 0&&(o=""+e.key),e)!KT.call(e,s)||s==="key"||s==="__self"||s==="__source"||s==="ref"&&e.ref===void 0||(i[s]=e[s]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var r=Array(s),a=0;a<s;a++)r[a]=arguments[a+2];i.children=r}return bh(t.type,o,i)};te.createContext=function(t){return t={$$typeof:nR,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:tR,_context:t},t};te.createElement=function(t,e,n){var i,o={},s=null;if(e!=null)for(i in e.key!==void 0&&(s=""+e.key),e)KT.call(e,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(o[i]=e[i]);var r=arguments.length-2;if(r===1)o.children=n;else if(1<r){for(var a=Array(r),u=0;u<r;u++)a[u]=arguments[u+2];o.children=a}if(t&&t.defaultProps)for(i in r=t.defaultProps,r)o[i]===void 0&&(o[i]=r[i]);return bh(t,s,o)};te.createRef=function(){return{current:null}};te.forwardRef=function(t){return{$$typeof:iR,render:t}};te.isValidElement=Dh;te.lazy=function(t){return{$$typeof:GT,_payload:{_status:-1,_result:t},_init:fR}};te.memo=function(t,e){return{$$typeof:sR,type:t,compare:e===void 0?null:e}};te.startTransition=function(t){var e=De.T,n={};De.T=n;try{var i=t(),o=De.S;o!==null&&o(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(td,Ig)}catch(s){Ig(s)}finally{e!==null&&n.types!==null&&(e.types=n.types),De.T=e}};te.unstable_useCacheRefresh=function(){return De.H.useCacheRefresh()};te.use=function(t){return De.H.use(t)};te.useActionState=function(t,e,n){return De.H.useActionState(t,e,n)};te.useCallback=function(t,e){return De.H.useCallback(t,e)};te.useContext=function(t){return De.H.useContext(t)};te.useDebugValue=function(){};te.useDeferredValue=function(t,e){return De.H.useDeferredValue(t,e)};te.useEffect=function(t,e){return De.H.useEffect(t,e)};te.useEffectEvent=function(t){return De.H.useEffectEvent(t)};te.useId=function(){return De.H.useId()};te.useImperativeHandle=function(t,e,n){return De.H.useImperativeHandle(t,e,n)};te.useInsertionEffect=function(t,e){return De.H.useInsertionEffect(t,e)};te.useLayoutEffect=function(t,e){return De.H.useLayoutEffect(t,e)};te.useMemo=function(t,e){return De.H.useMemo(t,e)};te.useOptimistic=function(t,e){return De.H.useOptimistic(t,e)};te.useReducer=function(t,e,n){return De.H.useReducer(t,e,n)};te.useRef=function(t){return De.H.useRef(t)};te.useState=function(t){return De.H.useState(t)};te.useSyncExternalStore=function(t,e,n){return De.H.useSyncExternalStore(t,e,n)};te.useTransition=function(){return De.H.useTransition()};te.version="19.2.0";FT.exports=te;var pe=FT.exports;const hR=OT(pe);var QT={exports:{}},ec={},$T={exports:{}},XT={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,W){var Z=z.length;z.push(W);e:for(;0<Z;){var ve=Z-1>>>1,Oe=z[ve];if(0<o(Oe,W))z[ve]=W,z[Z]=Oe,Z=ve;else break e}}function n(z){return z.length===0?null:z[0]}function i(z){if(z.length===0)return null;var W=z[0],Z=z.pop();if(Z!==W){z[0]=Z;e:for(var ve=0,Oe=z.length,mn=Oe>>>1;ve<mn;){var Pn=2*(ve+1)-1,gn=z[Pn],Nt=Pn+1,$t=z[Nt];if(0>o(gn,Z))Nt<Oe&&0>o($t,gn)?(z[ve]=$t,z[Nt]=Z,ve=Nt):(z[ve]=gn,z[Pn]=Z,ve=Pn);else if(Nt<Oe&&0>o($t,Z))z[ve]=$t,z[Nt]=Z,ve=Nt;else break e}}return W}function o(z,W){var Z=z.sortIndex-W.sortIndex;return Z!==0?Z:z.id-W.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var r=Date,a=r.now();t.unstable_now=function(){return r.now()-a}}var u=[],c=[],h=1,p=null,m=3,_=!1,x=!1,D=!1,V=!1,C=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function b(z){for(var W=n(c);W!==null;){if(W.callback===null)i(c);else if(W.startTime<=z)i(c),W.sortIndex=W.expirationTime,e(u,W);else break;W=n(c)}}function k(z){if(D=!1,b(z),!x)if(n(u)!==null)x=!0,B||(B=!0,P());else{var W=n(c);W!==null&&ut(k,W.startTime-z)}}var B=!1,A=-1,S=5,T=-1;function w(){return V?!0:!(t.unstable_now()-T<S)}function M(){if(V=!1,B){var z=t.unstable_now();T=z;var W=!0;try{e:{x=!1,D&&(D=!1,E(A),A=-1),_=!0;var Z=m;try{t:{for(b(z),p=n(u);p!==null&&!(p.expirationTime>z&&w());){var ve=p.callback;if(typeof ve=="function"){p.callback=null,m=p.priorityLevel;var Oe=ve(p.expirationTime<=z);if(z=t.unstable_now(),typeof Oe=="function"){p.callback=Oe,b(z),W=!0;break t}p===n(u)&&i(u),b(z)}else i(u);p=n(u)}if(p!==null)W=!0;else{var mn=n(c);mn!==null&&ut(k,mn.startTime-z),W=!1}}break e}finally{p=null,m=Z,_=!1}W=void 0}}finally{W?P():B=!1}}}var P;if(typeof I=="function")P=function(){I(M)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,Ue=N.port2;N.port1.onmessage=M,P=function(){Ue.postMessage(null)}}else P=function(){C(M,0)};function ut(z,W){A=C(function(){z(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(z){switch(m){case 1:case 2:case 3:var W=3;break;default:W=m}var Z=m;m=W;try{return z()}finally{m=Z}},t.unstable_requestPaint=function(){V=!0},t.unstable_runWithPriority=function(z,W){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var Z=m;m=z;try{return W()}finally{m=Z}},t.unstable_scheduleCallback=function(z,W,Z){var ve=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?ve+Z:ve):Z=ve,z){case 1:var Oe=-1;break;case 2:Oe=250;break;case 5:Oe=1073741823;break;case 4:Oe=1e4;break;default:Oe=5e3}return Oe=Z+Oe,z={id:h++,callback:W,priorityLevel:z,startTime:Z,expirationTime:Oe,sortIndex:-1},Z>ve?(z.sortIndex=Z,e(c,z),n(u)===null&&z===n(c)&&(D?(E(A),A=-1):D=!0,ut(k,Z-ve))):(z.sortIndex=Oe,e(u,z),x||_||(x=!0,B||(B=!0,P()))),z},t.unstable_shouldYield=w,t.unstable_wrapCallback=function(z){var W=m;return function(){var Z=m;m=W;try{return z.apply(this,arguments)}finally{m=Z}}}})(XT);$T.exports=XT;var pR=$T.exports,WT={exports:{}},wt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mR=pe;function ZT(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function mi(){}var It={d:{f:mi,r:function(){throw Error(ZT(522))},D:mi,C:mi,L:mi,m:mi,X:mi,S:mi,M:mi},p:0,findDOMNode:null},gR=Symbol.for("react.portal");function yR(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gR,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}var Fr=mR.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function tc(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}wt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=It;wt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(ZT(299));return yR(t,e,null,n)};wt.flushSync=function(t){var e=Fr.T,n=It.p;try{if(Fr.T=null,It.p=2,t)return t()}finally{Fr.T=e,It.p=n,It.d.f()}};wt.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,It.d.C(t,e))};wt.prefetchDNS=function(t){typeof t=="string"&&It.d.D(t)};wt.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,i=tc(n,e.crossOrigin),o=typeof e.integrity=="string"?e.integrity:void 0,s=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?It.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:i,integrity:o,fetchPriority:s}):n==="script"&&It.d.X(t,{crossOrigin:i,integrity:o,fetchPriority:s,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};wt.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=tc(e.as,e.crossOrigin);It.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&It.d.M(t)};wt.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,i=tc(n,e.crossOrigin);It.d.L(t,n,{crossOrigin:i,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};wt.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=tc(e.as,e.crossOrigin);It.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else It.d.m(t)};wt.requestFormReset=function(t){It.d.r(t)};wt.unstable_batchedUpdates=function(t,e){return t(e)};wt.useFormState=function(t,e,n){return Fr.H.useFormState(t,e,n)};wt.useFormStatus=function(){return Fr.H.useHostTransitionStatus()};wt.version="19.2.0";function jT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(jT)}catch(t){console.error(t)}}jT(),WT.exports=wt;var _R=WT.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tt=pR,eE=pe,vR=_R;function O(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function tE(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Da(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function nE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function iE(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Rg(t){if(Da(t)!==t)throw Error(O(188))}function TR(t){var e=t.alternate;if(!e){if(e=Da(t),e===null)throw Error(O(188));return e!==t?null:t}for(var n=t,i=e;;){var o=n.return;if(o===null)break;var s=o.alternate;if(s===null){if(i=o.return,i!==null){n=i;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return Rg(o),t;if(s===i)return Rg(o),e;s=s.sibling}throw Error(O(188))}if(n.return!==i.return)n=o,i=s;else{for(var r=!1,a=o.child;a;){if(a===n){r=!0,n=o,i=s;break}if(a===i){r=!0,i=o,n=s;break}a=a.sibling}if(!r){for(a=s.child;a;){if(a===n){r=!0,n=s,i=o;break}if(a===i){r=!0,i=s,n=o;break}a=a.sibling}if(!r)throw Error(O(189))}}if(n.alternate!==i)throw Error(O(190))}if(n.tag!==3)throw Error(O(188));return n.stateNode.current===n?t:e}function oE(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=oE(t),e!==null)return e;t=t.sibling}return null}var Pe=Object.assign,ER=Symbol.for("react.element"),dl=Symbol.for("react.transitional.element"),Dr=Symbol.for("react.portal"),ts=Symbol.for("react.fragment"),sE=Symbol.for("react.strict_mode"),nd=Symbol.for("react.profiler"),rE=Symbol.for("react.consumer"),Fn=Symbol.for("react.context"),Ph=Symbol.for("react.forward_ref"),id=Symbol.for("react.suspense"),od=Symbol.for("react.suspense_list"),Vh=Symbol.for("react.memo"),gi=Symbol.for("react.lazy"),sd=Symbol.for("react.activity"),SR=Symbol.for("react.memo_cache_sentinel"),wg=Symbol.iterator;function Cr(t){return t===null||typeof t!="object"?null:(t=wg&&t[wg]||t["@@iterator"],typeof t=="function"?t:null)}var AR=Symbol.for("react.client.reference");function rd(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===AR?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ts:return"Fragment";case nd:return"Profiler";case sE:return"StrictMode";case id:return"Suspense";case od:return"SuspenseList";case sd:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case Dr:return"Portal";case Fn:return t.displayName||"Context";case rE:return(t._context.displayName||"Context")+".Consumer";case Ph:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Vh:return e=t.displayName||null,e!==null?e:rd(t.type)||"Memo";case gi:e=t._payload,t=t._init;try{return rd(t(e))}catch{}}return null}var Pr=Array.isArray,X=eE.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye=vR.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,go={pending:!1,data:null,method:null,action:null},ad=[],ns=-1;function bn(t){return{current:t}}function lt(t){0>ns||(t.current=ad[ns],ad[ns]=null,ns--)}function Re(t,e){ns++,ad[ns]=t.current,t.current=e}var An=bn(null),la=bn(null),Ni=bn(null),iu=bn(null);function ou(t,e){switch(Re(Ni,e),Re(la,t),Re(An,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?Py(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=Py(e),t=RS(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}lt(An),Re(An,t)}function Rs(){lt(An),lt(la),lt(Ni)}function ld(t){t.memoizedState!==null&&Re(iu,t);var e=An.current,n=RS(e,t.type);e!==n&&(Re(la,t),Re(An,n))}function su(t){la.current===t&&(lt(An),lt(la)),iu.current===t&&(lt(iu),va._currentValue=go)}var af,Ng;function lo(t){if(af===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);af=e&&e[1]||"",Ng=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+af+t+Ng}var lf=!1;function uf(t,e){if(!t||lf)return"";lf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(e){var p=function(){throw Error()};if(Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(_){var m=_}Reflect.construct(t,[],p)}else{try{p.call()}catch(_){m=_}t.call(p.prototype)}}else{try{throw Error()}catch(_){m=_}(p=t())&&typeof p.catch=="function"&&p.catch(function(){})}}catch(_){if(_&&m&&typeof _.stack=="string")return[_.stack,m.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=i.DetermineComponentFrameRoot(),r=s[0],a=s[1];if(r&&a){var u=r.split(`
`),c=a.split(`
`);for(o=i=0;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;for(;o<c.length&&!c[o].includes("DetermineComponentFrameRoot");)o++;if(i===u.length||o===c.length)for(i=u.length-1,o=c.length-1;1<=i&&0<=o&&u[i]!==c[o];)o--;for(;1<=i&&0<=o;i--,o--)if(u[i]!==c[o]){if(i!==1||o!==1)do if(i--,o--,0>o||u[i]!==c[o]){var h=`
`+u[i].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=i&&0<=o);break}}}finally{lf=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?lo(n):""}function CR(t,e){switch(t.tag){case 26:case 27:case 5:return lo(t.type);case 16:return lo("Lazy");case 13:return t.child!==e&&e!==null?lo("Suspense Fallback"):lo("Suspense");case 19:return lo("SuspenseList");case 0:case 15:return uf(t.type,!1);case 11:return uf(t.type.render,!1);case 1:return uf(t.type,!0);case 31:return lo("Activity");default:return""}}function Mg(t){try{var e="",n=null;do e+=CR(t,n),n=t,t=t.return;while(t);return e}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var ud=Object.prototype.hasOwnProperty,Uh=tt.unstable_scheduleCallback,cf=tt.unstable_cancelCallback,IR=tt.unstable_shouldYield,RR=tt.unstable_requestPaint,Gt=tt.unstable_now,wR=tt.unstable_getCurrentPriorityLevel,aE=tt.unstable_ImmediatePriority,lE=tt.unstable_UserBlockingPriority,ru=tt.unstable_NormalPriority,NR=tt.unstable_LowPriority,uE=tt.unstable_IdlePriority,MR=tt.log,xR=tt.unstable_setDisableYieldValue,Pa=null,zt=null;function Si(t){if(typeof MR=="function"&&xR(t),zt&&typeof zt.setStrictMode=="function")try{zt.setStrictMode(Pa,t)}catch{}}var Ht=Math.clz32?Math.clz32:PR,bR=Math.log,DR=Math.LN2;function PR(t){return t>>>=0,t===0?32:31-(bR(t)/DR|0)|0}var hl=256,pl=262144,ml=4194304;function uo(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function nc(t,e,n){var i=t.pendingLanes;if(i===0)return 0;var o=0,s=t.suspendedLanes,r=t.pingedLanes;t=t.warmLanes;var a=i&134217727;return a!==0?(i=a&~s,i!==0?o=uo(i):(r&=a,r!==0?o=uo(r):n||(n=a&~t,n!==0&&(o=uo(n))))):(a=i&~s,a!==0?o=uo(a):r!==0?o=uo(r):n||(n=i&~t,n!==0&&(o=uo(n)))),o===0?0:e!==0&&e!==o&&!(e&s)&&(s=o&-o,n=e&-e,s>=n||s===32&&(n&4194048)!==0)?e:o}function Va(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function VR(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cE(){var t=ml;return ml<<=1,!(ml&62914560)&&(ml=4194304),t}function ff(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ua(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function UR(t,e,n,i,o,s){var r=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var a=t.entanglements,u=t.expirationTimes,c=t.hiddenUpdates;for(n=r&~n;0<n;){var h=31-Ht(n),p=1<<h;a[h]=0,u[h]=-1;var m=c[h];if(m!==null)for(c[h]=null,h=0;h<m.length;h++){var _=m[h];_!==null&&(_.lane&=-536870913)}n&=~p}i!==0&&fE(t,i,0),s!==0&&o===0&&t.tag!==0&&(t.suspendedLanes|=s&~(r&~e))}function fE(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var i=31-Ht(e);t.entangledLanes|=e,t.entanglements[i]=t.entanglements[i]|1073741824|n&261930}function dE(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Ht(n),o=1<<i;o&e|t[i]&e&&(t[i]|=e),n&=~o}}function hE(t,e){var n=e&-e;return n=n&42?1:Lh(n),n&(t.suspendedLanes|e)?0:n}function Lh(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function kh(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function pE(){var t=ye.p;return t!==0?t:(t=window.event,t===void 0?32:kS(t.type))}function xg(t,e){var n=ye.p;try{return ye.p=t,e()}finally{ye.p=n}}var Zi=Math.random().toString(36).slice(2),ht="__reactFiber$"+Zi,Ut="__reactProps$"+Zi,Hs="__reactContainer$"+Zi,cd="__reactEvents$"+Zi,LR="__reactListeners$"+Zi,kR="__reactHandles$"+Zi,bg="__reactResources$"+Zi,La="__reactMarker$"+Zi;function Oh(t){delete t[ht],delete t[Ut],delete t[cd],delete t[LR],delete t[kR]}function is(t){var e=t[ht];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Hs]||n[ht]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Oy(t);t!==null;){if(n=t[ht])return n;t=Oy(t)}return e}t=n,n=t.parentNode}return null}function Ys(t){if(t=t[ht]||t[Hs]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function Vr(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(O(33))}function ps(t){var e=t[bg];return e||(e=t[bg]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function rt(t){t[La]=!0}var mE=new Set,gE={};function Do(t,e){ws(t,e),ws(t+"Capture",e)}function ws(t,e){for(gE[t]=e,t=0;t<e.length;t++)mE.add(e[t])}var OR=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Dg={},Pg={};function qR(t){return ud.call(Pg,t)?!0:ud.call(Dg,t)?!1:OR.test(t)?Pg[t]=!0:(Dg[t]=!0,!1)}function Pl(t,e,n){if(qR(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var i=e.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function gl(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function Vn(t,e,n,i){if(i===null)t.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+i)}}function Wt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function yE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function BR(t,e,n){var i=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var o=i.get,s=i.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(r){n=""+r,s.call(this,r)}}),Object.defineProperty(t,e,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(r){n=""+r},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function fd(t){if(!t._valueTracker){var e=yE(t)?"checked":"value";t._valueTracker=BR(t,e,""+t[e])}}function _E(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=yE(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function au(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var FR=/[\n"\\]/g;function en(t){return t.replace(FR,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function dd(t,e,n,i,o,s,r,a){t.name="",r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"?t.type=r:t.removeAttribute("type"),e!=null?r==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+Wt(e)):t.value!==""+Wt(e)&&(t.value=""+Wt(e)):r!=="submit"&&r!=="reset"||t.removeAttribute("value"),e!=null?hd(t,r,Wt(e)):n!=null?hd(t,r,Wt(n)):i!=null&&t.removeAttribute("value"),o==null&&s!=null&&(t.defaultChecked=!!s),o!=null&&(t.checked=o&&typeof o!="function"&&typeof o!="symbol"),a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?t.name=""+Wt(a):t.removeAttribute("name")}function vE(t,e,n,i,o,s,r,a){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(t.type=s),e!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||e!=null)){fd(t);return}n=n!=null?""+Wt(n):"",e=e!=null?""+Wt(e):n,a||e===t.value||(t.value=e),t.defaultValue=e}i=i??o,i=typeof i!="function"&&typeof i!="symbol"&&!!i,t.checked=a?t.checked:!!i,t.defaultChecked=!!i,r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(t.name=r),fd(t)}function hd(t,e,n){e==="number"&&au(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function ms(t,e,n,i){if(t=t.options,e){e={};for(var o=0;o<n.length;o++)e["$"+n[o]]=!0;for(n=0;n<t.length;n++)o=e.hasOwnProperty("$"+t[n].value),t[n].selected!==o&&(t[n].selected=o),o&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Wt(n),e=null,o=0;o<t.length;o++){if(t[o].value===n){t[o].selected=!0,i&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function TE(t,e,n){if(e!=null&&(e=""+Wt(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+Wt(n):""}function EE(t,e,n,i){if(e==null){if(i!=null){if(n!=null)throw Error(O(92));if(Pr(i)){if(1<i.length)throw Error(O(93));i=i[0]}n=i}n==null&&(n=""),e=n}n=Wt(e),t.defaultValue=n,i=t.textContent,i===n&&i!==""&&i!==null&&(t.value=i),fd(t)}function Ns(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var GR=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vg(t,e,n){var i=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":i?t.setProperty(e,n):typeof n!="number"||n===0||GR.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function SE(t,e,n){if(e!=null&&typeof e!="object")throw Error(O(62));if(t=t.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||e!=null&&e.hasOwnProperty(i)||(i.indexOf("--")===0?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="");for(var o in e)i=e[o],e.hasOwnProperty(o)&&n[o]!==i&&Vg(t,o,i)}else for(var s in e)e.hasOwnProperty(s)&&Vg(t,s,e[s])}function qh(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zR=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),HR=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Vl(t){return HR.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Gn(){}var pd=null;function Bh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var os=null,gs=null;function Ug(t){var e=Ys(t);if(e&&(t=e.stateNode)){var n=t[Ut]||null;e:switch(t=e.stateNode,e.type){case"input":if(dd(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+en(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var o=i[Ut]||null;if(!o)throw Error(O(90));dd(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(e=0;e<n.length;e++)i=n[e],i.form===t.form&&_E(i)}break e;case"textarea":TE(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&ms(t,!!n.multiple,e,!1)}}}var df=!1;function AE(t,e,n){if(df)return t(e,n);df=!0;try{var i=t(e);return i}finally{if(df=!1,(os!==null||gs!==null)&&(pc(),os&&(e=os,t=gs,gs=os=null,Ug(e),t)))for(e=0;e<t.length;e++)Ug(t[e])}}function ua(t,e){var n=t.stateNode;if(n===null)return null;var i=n[Ut]||null;if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(O(231,e,typeof n));return n}var Qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),md=!1;if(Qn)try{var Ir={};Object.defineProperty(Ir,"passive",{get:function(){md=!0}}),window.addEventListener("test",Ir,Ir),window.removeEventListener("test",Ir,Ir)}catch{md=!1}var Ai=null,Fh=null,Ul=null;function CE(){if(Ul)return Ul;var t,e=Fh,n=e.length,i,o="value"in Ai?Ai.value:Ai.textContent,s=o.length;for(t=0;t<n&&e[t]===o[t];t++);var r=n-t;for(i=1;i<=r&&e[n-i]===o[s-i];i++);return Ul=o.slice(t,1<i?1-i:void 0)}function Ll(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function yl(){return!0}function Lg(){return!1}function Lt(t){function e(n,i,o,s,r){this._reactName=n,this._targetInst=o,this.type=i,this.nativeEvent=s,this.target=r,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?yl:Lg,this.isPropagationStopped=Lg,this}return Pe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=yl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=yl)},persist:function(){},isPersistent:yl}),e}var Po={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ic=Lt(Po),ka=Pe({},Po,{view:0,detail:0}),YR=Lt(ka),hf,pf,Rr,oc=Pe({},ka,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Rr&&(Rr&&t.type==="mousemove"?(hf=t.screenX-Rr.screenX,pf=t.screenY-Rr.screenY):pf=hf=0,Rr=t),hf)},movementY:function(t){return"movementY"in t?t.movementY:pf}}),kg=Lt(oc),JR=Pe({},oc,{dataTransfer:0}),KR=Lt(JR),QR=Pe({},ka,{relatedTarget:0}),mf=Lt(QR),$R=Pe({},Po,{animationName:0,elapsedTime:0,pseudoElement:0}),XR=Lt($R),WR=Pe({},Po,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ZR=Lt(WR),jR=Pe({},Po,{data:0}),Og=Lt(jR),ew={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=nw[t])?!!e[t]:!1}function Gh(){return iw}var ow=Pe({},ka,{key:function(t){if(t.key){var e=ew[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ll(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?tw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gh,charCode:function(t){return t.type==="keypress"?Ll(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ll(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),sw=Lt(ow),rw=Pe({},oc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qg=Lt(rw),aw=Pe({},ka,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gh}),lw=Lt(aw),uw=Pe({},Po,{propertyName:0,elapsedTime:0,pseudoElement:0}),cw=Lt(uw),fw=Pe({},oc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),dw=Lt(fw),hw=Pe({},Po,{newState:0,oldState:0}),pw=Lt(hw),mw=[9,13,27,32],zh=Qn&&"CompositionEvent"in window,Gr=null;Qn&&"documentMode"in document&&(Gr=document.documentMode);var gw=Qn&&"TextEvent"in window&&!Gr,IE=Qn&&(!zh||Gr&&8<Gr&&11>=Gr),Bg=" ",Fg=!1;function RE(t,e){switch(t){case"keyup":return mw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ss=!1;function yw(t,e){switch(t){case"compositionend":return wE(e);case"keypress":return e.which!==32?null:(Fg=!0,Bg);case"textInput":return t=e.data,t===Bg&&Fg?null:t;default:return null}}function _w(t,e){if(ss)return t==="compositionend"||!zh&&RE(t,e)?(t=CE(),Ul=Fh=Ai=null,ss=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return IE&&e.locale!=="ko"?null:e.data;default:return null}}var vw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!vw[t.type]:e==="textarea"}function NE(t,e,n,i){os?gs?gs.push(i):gs=[i]:os=i,e=Iu(e,"onChange"),0<e.length&&(n=new ic("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var zr=null,ca=null;function Tw(t){AS(t,0)}function sc(t){var e=Vr(t);if(_E(e))return t}function zg(t,e){if(t==="change")return e}var ME=!1;if(Qn){var gf;if(Qn){var yf="oninput"in document;if(!yf){var Hg=document.createElement("div");Hg.setAttribute("oninput","return;"),yf=typeof Hg.oninput=="function"}gf=yf}else gf=!1;ME=gf&&(!document.documentMode||9<document.documentMode)}function Yg(){zr&&(zr.detachEvent("onpropertychange",xE),ca=zr=null)}function xE(t){if(t.propertyName==="value"&&sc(ca)){var e=[];NE(e,ca,t,Bh(t)),AE(Tw,e)}}function Ew(t,e,n){t==="focusin"?(Yg(),zr=e,ca=n,zr.attachEvent("onpropertychange",xE)):t==="focusout"&&Yg()}function Sw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return sc(ca)}function Aw(t,e){if(t==="click")return sc(e)}function Cw(t,e){if(t==="input"||t==="change")return sc(e)}function Iw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Kt=typeof Object.is=="function"?Object.is:Iw;function fa(t,e){if(Kt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var o=n[i];if(!ud.call(e,o)||!Kt(t[o],e[o]))return!1}return!0}function Jg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Kg(t,e){var n=Jg(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Jg(n)}}function bE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?bE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function DE(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=au(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=au(t.document)}return e}function Hh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var Rw=Qn&&"documentMode"in document&&11>=document.documentMode,rs=null,gd=null,Hr=null,yd=!1;function Qg(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;yd||rs==null||rs!==au(i)||(i=rs,"selectionStart"in i&&Hh(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Hr&&fa(Hr,i)||(Hr=i,i=Iu(gd,"onSelect"),0<i.length&&(e=new ic("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=rs)))}function ao(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var as={animationend:ao("Animation","AnimationEnd"),animationiteration:ao("Animation","AnimationIteration"),animationstart:ao("Animation","AnimationStart"),transitionrun:ao("Transition","TransitionRun"),transitionstart:ao("Transition","TransitionStart"),transitioncancel:ao("Transition","TransitionCancel"),transitionend:ao("Transition","TransitionEnd")},_f={},PE={};Qn&&(PE=document.createElement("div").style,"AnimationEvent"in window||(delete as.animationend.animation,delete as.animationiteration.animation,delete as.animationstart.animation),"TransitionEvent"in window||delete as.transitionend.transition);function Vo(t){if(_f[t])return _f[t];if(!as[t])return t;var e=as[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in PE)return _f[t]=e[n];return t}var VE=Vo("animationend"),UE=Vo("animationiteration"),LE=Vo("animationstart"),ww=Vo("transitionrun"),Nw=Vo("transitionstart"),Mw=Vo("transitioncancel"),kE=Vo("transitionend"),OE=new Map,_d="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");_d.push("scrollEnd");function hn(t,e){OE.set(t,e),Do(e,[t])}var lu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Xt=[],ls=0,Yh=0;function rc(){for(var t=ls,e=Yh=ls=0;e<t;){var n=Xt[e];Xt[e++]=null;var i=Xt[e];Xt[e++]=null;var o=Xt[e];Xt[e++]=null;var s=Xt[e];if(Xt[e++]=null,i!==null&&o!==null){var r=i.pending;r===null?o.next=o:(o.next=r.next,r.next=o),i.pending=o}s!==0&&qE(n,o,s)}}function ac(t,e,n,i){Xt[ls++]=t,Xt[ls++]=e,Xt[ls++]=n,Xt[ls++]=i,Yh|=i,t.lanes|=i,t=t.alternate,t!==null&&(t.lanes|=i)}function Jh(t,e,n,i){return ac(t,e,n,i),uu(t)}function Uo(t,e){return ac(t,null,null,e),uu(t)}function qE(t,e,n){t.lanes|=n;var i=t.alternate;i!==null&&(i.lanes|=n);for(var o=!1,s=t.return;s!==null;)s.childLanes|=n,i=s.alternate,i!==null&&(i.childLanes|=n),s.tag===22&&(t=s.stateNode,t===null||t._visibility&1||(o=!0)),t=s,s=s.return;return t.tag===3?(s=t.stateNode,o&&e!==null&&(o=31-Ht(n),t=s.hiddenUpdates,i=t[o],i===null?t[o]=[e]:i.push(e),e.lane=n|536870912),s):null}function uu(t){if(50<jr)throw jr=0,qd=null,Error(O(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var us={};function xw(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bt(t,e,n,i){return new xw(t,e,n,i)}function Kh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Hn(t,e){var n=t.alternate;return n===null?(n=Bt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function BE(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function kl(t,e,n,i,o,s){var r=0;if(i=t,typeof t=="function")Kh(t)&&(r=1);else if(typeof t=="string")r=U1(t,n,An.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case sd:return t=Bt(31,n,e,o),t.elementType=sd,t.lanes=s,t;case ts:return yo(n.children,o,s,e);case sE:r=8,o|=24;break;case nd:return t=Bt(12,n,e,o|2),t.elementType=nd,t.lanes=s,t;case id:return t=Bt(13,n,e,o),t.elementType=id,t.lanes=s,t;case od:return t=Bt(19,n,e,o),t.elementType=od,t.lanes=s,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Fn:r=10;break e;case rE:r=9;break e;case Ph:r=11;break e;case Vh:r=14;break e;case gi:r=16,i=null;break e}r=29,n=Error(O(130,t===null?"null":typeof t,"")),i=null}return e=Bt(r,n,e,o),e.elementType=t,e.type=i,e.lanes=s,e}function yo(t,e,n,i){return t=Bt(7,t,i,e),t.lanes=n,t}function vf(t,e,n){return t=Bt(6,t,null,e),t.lanes=n,t}function FE(t){var e=Bt(18,null,null,0);return e.stateNode=t,e}function Tf(t,e,n){return e=Bt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var $g=new WeakMap;function tn(t,e){if(typeof t=="object"&&t!==null){var n=$g.get(t);return n!==void 0?n:(e={value:t,source:e,stack:Mg(e)},$g.set(t,e),e)}return{value:t,source:e,stack:Mg(e)}}var cs=[],fs=0,cu=null,da=0,Zt=[],jt=0,Fi=null,Tn=1,En="";function qn(t,e){cs[fs++]=da,cs[fs++]=cu,cu=t,da=e}function GE(t,e,n){Zt[jt++]=Tn,Zt[jt++]=En,Zt[jt++]=Fi,Fi=t;var i=Tn;t=En;var o=32-Ht(i)-1;i&=~(1<<o),n+=1;var s=32-Ht(e)+o;if(30<s){var r=o-o%5;s=(i&(1<<r)-1).toString(32),i>>=r,o-=r,Tn=1<<32-Ht(e)+o|n<<o|i,En=s+t}else Tn=1<<s|n<<o|i,En=t}function Qh(t){t.return!==null&&(qn(t,1),GE(t,1,0))}function $h(t){for(;t===cu;)cu=cs[--fs],cs[fs]=null,da=cs[--fs],cs[fs]=null;for(;t===Fi;)Fi=Zt[--jt],Zt[jt]=null,En=Zt[--jt],Zt[jt]=null,Tn=Zt[--jt],Zt[jt]=null}function zE(t,e){Zt[jt++]=Tn,Zt[jt++]=En,Zt[jt++]=Fi,Tn=e.id,En=e.overflow,Fi=t}var pt=null,xe=null,ce=!1,Mi=null,nn=!1,vd=Error(O(519));function Gi(t){var e=Error(O(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ha(tn(e,t)),vd}function Xg(t){var e=t.stateNode,n=t.type,i=t.memoizedProps;switch(e[ht]=t,e[Ut]=i,n){case"dialog":oe("cancel",e),oe("close",e);break;case"iframe":case"object":case"embed":oe("load",e);break;case"video":case"audio":for(n=0;n<ya.length;n++)oe(ya[n],e);break;case"source":oe("error",e);break;case"img":case"image":case"link":oe("error",e),oe("load",e);break;case"details":oe("toggle",e);break;case"input":oe("invalid",e),vE(e,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":oe("invalid",e);break;case"textarea":oe("invalid",e),EE(e,i.value,i.defaultValue,i.children)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||i.suppressHydrationWarning===!0||IS(e.textContent,n)?(i.popover!=null&&(oe("beforetoggle",e),oe("toggle",e)),i.onScroll!=null&&oe("scroll",e),i.onScrollEnd!=null&&oe("scrollend",e),i.onClick!=null&&(e.onclick=Gn),e=!0):e=!1,e||Gi(t,!0)}function Wg(t){for(pt=t.return;pt;)switch(pt.tag){case 5:case 31:case 13:nn=!1;return;case 27:case 3:nn=!0;return;default:pt=pt.return}}function Jo(t){if(t!==pt)return!1;if(!ce)return Wg(t),ce=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||Hd(t.type,t.memoizedProps)),n=!n),n&&xe&&Gi(t),Wg(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(O(317));xe=ky(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(O(317));xe=ky(t)}else e===27?(e=xe,ji(t.type)?(t=Qd,Qd=null,xe=t):xe=e):xe=pt?an(t.stateNode.nextSibling):null;return!0}function So(){xe=pt=null,ce=!1}function Ef(){var t=Mi;return t!==null&&(Dt===null?Dt=t:Dt.push.apply(Dt,t),Mi=null),t}function ha(t){Mi===null?Mi=[t]:Mi.push(t)}var Td=bn(null),Lo=null,zn=null;function _i(t,e,n){Re(Td,e._currentValue),e._currentValue=n}function Yn(t){t._currentValue=Td.current,lt(Td)}function Ed(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Sd(t,e,n,i){var o=t.child;for(o!==null&&(o.return=t);o!==null;){var s=o.dependencies;if(s!==null){var r=o.child;s=s.firstContext;e:for(;s!==null;){var a=s;s=o;for(var u=0;u<e.length;u++)if(a.context===e[u]){s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Ed(s.return,n,t),i||(r=null);break e}s=a.next}}else if(o.tag===18){if(r=o.return,r===null)throw Error(O(341));r.lanes|=n,s=r.alternate,s!==null&&(s.lanes|=n),Ed(r,n,t),r=null}else r=o.child;if(r!==null)r.return=o;else for(r=o;r!==null;){if(r===t){r=null;break}if(o=r.sibling,o!==null){o.return=r.return,r=o;break}r=r.return}o=r}}function Js(t,e,n,i){t=null;for(var o=e,s=!1;o!==null;){if(!s){if(o.flags&524288)s=!0;else if(o.flags&262144)break}if(o.tag===10){var r=o.alternate;if(r===null)throw Error(O(387));if(r=r.memoizedProps,r!==null){var a=o.type;Kt(o.pendingProps.value,r.value)||(t!==null?t.push(a):t=[a])}}else if(o===iu.current){if(r=o.alternate,r===null)throw Error(O(387));r.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(t!==null?t.push(va):t=[va])}o=o.return}t!==null&&Sd(e,t,n,i),e.flags|=262144}function fu(t){for(t=t.firstContext;t!==null;){if(!Kt(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ao(t){Lo=t,zn=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function gt(t){return HE(Lo,t)}function _l(t,e){return Lo===null&&Ao(t),HE(t,e)}function HE(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},zn===null){if(t===null)throw Error(O(308));zn=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else zn=zn.next=e;return n}var bw=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,i){t.push(i)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},Dw=tt.unstable_scheduleCallback,Pw=tt.unstable_NormalPriority,Qe={$$typeof:Fn,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xh(){return{controller:new bw,data:new Map,refCount:0}}function Oa(t){t.refCount--,t.refCount===0&&Dw(Pw,function(){t.controller.abort()})}var Yr=null,Ad=0,Ms=0,ys=null;function Vw(t,e){if(Yr===null){var n=Yr=[];Ad=0,Ms=Ep(),ys={status:"pending",value:void 0,then:function(i){n.push(i)}}}return Ad++,e.then(Zg,Zg),e}function Zg(){if(--Ad===0&&Yr!==null){ys!==null&&(ys.status="fulfilled");var t=Yr;Yr=null,Ms=0,ys=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function Uw(t,e){var n=[],i={status:"pending",value:null,reason:null,then:function(o){n.push(o)}};return t.then(function(){i.status="fulfilled",i.value=e;for(var o=0;o<n.length;o++)(0,n[o])(e)},function(o){for(i.status="rejected",i.reason=o,o=0;o<n.length;o++)(0,n[o])(void 0)}),i}var jg=X.S;X.S=function(t,e){oS=Gt(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&Vw(t,e),jg!==null&&jg(t,e)};var _o=bn(null);function Wh(){var t=_o.current;return t!==null?t:Ie.pooledCache}function Ol(t,e){e===null?Re(_o,_o.current):Re(_o,e.pool)}function YE(){var t=Wh();return t===null?null:{parent:Qe._currentValue,pool:t}}var Ks=Error(O(460)),Zh=Error(O(474)),lc=Error(O(542)),du={then:function(){}};function ey(t){return t=t.status,t==="fulfilled"||t==="rejected"}function JE(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(Gn,Gn),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,ny(t),t;default:if(typeof e.status=="string")e.then(Gn,Gn);else{if(t=Ie,t!==null&&100<t.shellSuspendCounter)throw Error(O(482));t=e,t.status="pending",t.then(function(i){if(e.status==="pending"){var o=e;o.status="fulfilled",o.value=i}},function(i){if(e.status==="pending"){var o=e;o.status="rejected",o.reason=i}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,ny(t),t}throw vo=e,Ks}}function co(t){try{var e=t._init;return e(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(vo=n,Ks):n}}var vo=null;function ty(){if(vo===null)throw Error(O(459));var t=vo;return vo=null,t}function ny(t){if(t===Ks||t===lc)throw Error(O(483))}var _s=null,pa=0;function vl(t){var e=pa;return pa+=1,_s===null&&(_s=[]),JE(_s,t,e)}function wr(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function Tl(t,e){throw e.$$typeof===ER?Error(O(525)):(t=Object.prototype.toString.call(e),Error(O(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function KE(t){function e(C,E){if(t){var I=C.deletions;I===null?(C.deletions=[E],C.flags|=16):I.push(E)}}function n(C,E){if(!t)return null;for(;E!==null;)e(C,E),E=E.sibling;return null}function i(C){for(var E=new Map;C!==null;)C.key!==null?E.set(C.key,C):E.set(C.index,C),C=C.sibling;return E}function o(C,E){return C=Hn(C,E),C.index=0,C.sibling=null,C}function s(C,E,I){return C.index=I,t?(I=C.alternate,I!==null?(I=I.index,I<E?(C.flags|=67108866,E):I):(C.flags|=67108866,E)):(C.flags|=1048576,E)}function r(C){return t&&C.alternate===null&&(C.flags|=67108866),C}function a(C,E,I,b){return E===null||E.tag!==6?(E=vf(I,C.mode,b),E.return=C,E):(E=o(E,I),E.return=C,E)}function u(C,E,I,b){var k=I.type;return k===ts?h(C,E,I.props.children,b,I.key):E!==null&&(E.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===gi&&co(k)===E.type)?(E=o(E,I.props),wr(E,I),E.return=C,E):(E=kl(I.type,I.key,I.props,null,C.mode,b),wr(E,I),E.return=C,E)}function c(C,E,I,b){return E===null||E.tag!==4||E.stateNode.containerInfo!==I.containerInfo||E.stateNode.implementation!==I.implementation?(E=Tf(I,C.mode,b),E.return=C,E):(E=o(E,I.children||[]),E.return=C,E)}function h(C,E,I,b,k){return E===null||E.tag!==7?(E=yo(I,C.mode,b,k),E.return=C,E):(E=o(E,I),E.return=C,E)}function p(C,E,I){if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return E=vf(""+E,C.mode,I),E.return=C,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case dl:return I=kl(E.type,E.key,E.props,null,C.mode,I),wr(I,E),I.return=C,I;case Dr:return E=Tf(E,C.mode,I),E.return=C,E;case gi:return E=co(E),p(C,E,I)}if(Pr(E)||Cr(E))return E=yo(E,C.mode,I,null),E.return=C,E;if(typeof E.then=="function")return p(C,vl(E),I);if(E.$$typeof===Fn)return p(C,_l(C,E),I);Tl(C,E)}return null}function m(C,E,I,b){var k=E!==null?E.key:null;if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return k!==null?null:a(C,E,""+I,b);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case dl:return I.key===k?u(C,E,I,b):null;case Dr:return I.key===k?c(C,E,I,b):null;case gi:return I=co(I),m(C,E,I,b)}if(Pr(I)||Cr(I))return k!==null?null:h(C,E,I,b,null);if(typeof I.then=="function")return m(C,E,vl(I),b);if(I.$$typeof===Fn)return m(C,E,_l(C,I),b);Tl(C,I)}return null}function _(C,E,I,b,k){if(typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint")return C=C.get(I)||null,a(E,C,""+b,k);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case dl:return C=C.get(b.key===null?I:b.key)||null,u(E,C,b,k);case Dr:return C=C.get(b.key===null?I:b.key)||null,c(E,C,b,k);case gi:return b=co(b),_(C,E,I,b,k)}if(Pr(b)||Cr(b))return C=C.get(I)||null,h(E,C,b,k,null);if(typeof b.then=="function")return _(C,E,I,vl(b),k);if(b.$$typeof===Fn)return _(C,E,I,_l(E,b),k);Tl(E,b)}return null}function x(C,E,I,b){for(var k=null,B=null,A=E,S=E=0,T=null;A!==null&&S<I.length;S++){A.index>S?(T=A,A=null):T=A.sibling;var w=m(C,A,I[S],b);if(w===null){A===null&&(A=T);break}t&&A&&w.alternate===null&&e(C,A),E=s(w,E,S),B===null?k=w:B.sibling=w,B=w,A=T}if(S===I.length)return n(C,A),ce&&qn(C,S),k;if(A===null){for(;S<I.length;S++)A=p(C,I[S],b),A!==null&&(E=s(A,E,S),B===null?k=A:B.sibling=A,B=A);return ce&&qn(C,S),k}for(A=i(A);S<I.length;S++)T=_(A,C,S,I[S],b),T!==null&&(t&&T.alternate!==null&&A.delete(T.key===null?S:T.key),E=s(T,E,S),B===null?k=T:B.sibling=T,B=T);return t&&A.forEach(function(M){return e(C,M)}),ce&&qn(C,S),k}function D(C,E,I,b){if(I==null)throw Error(O(151));for(var k=null,B=null,A=E,S=E=0,T=null,w=I.next();A!==null&&!w.done;S++,w=I.next()){A.index>S?(T=A,A=null):T=A.sibling;var M=m(C,A,w.value,b);if(M===null){A===null&&(A=T);break}t&&A&&M.alternate===null&&e(C,A),E=s(M,E,S),B===null?k=M:B.sibling=M,B=M,A=T}if(w.done)return n(C,A),ce&&qn(C,S),k;if(A===null){for(;!w.done;S++,w=I.next())w=p(C,w.value,b),w!==null&&(E=s(w,E,S),B===null?k=w:B.sibling=w,B=w);return ce&&qn(C,S),k}for(A=i(A);!w.done;S++,w=I.next())w=_(A,C,S,w.value,b),w!==null&&(t&&w.alternate!==null&&A.delete(w.key===null?S:w.key),E=s(w,E,S),B===null?k=w:B.sibling=w,B=w);return t&&A.forEach(function(P){return e(C,P)}),ce&&qn(C,S),k}function V(C,E,I,b){if(typeof I=="object"&&I!==null&&I.type===ts&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case dl:e:{for(var k=I.key;E!==null;){if(E.key===k){if(k=I.type,k===ts){if(E.tag===7){n(C,E.sibling),b=o(E,I.props.children),b.return=C,C=b;break e}}else if(E.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===gi&&co(k)===E.type){n(C,E.sibling),b=o(E,I.props),wr(b,I),b.return=C,C=b;break e}n(C,E);break}else e(C,E);E=E.sibling}I.type===ts?(b=yo(I.props.children,C.mode,b,I.key),b.return=C,C=b):(b=kl(I.type,I.key,I.props,null,C.mode,b),wr(b,I),b.return=C,C=b)}return r(C);case Dr:e:{for(k=I.key;E!==null;){if(E.key===k)if(E.tag===4&&E.stateNode.containerInfo===I.containerInfo&&E.stateNode.implementation===I.implementation){n(C,E.sibling),b=o(E,I.children||[]),b.return=C,C=b;break e}else{n(C,E);break}else e(C,E);E=E.sibling}b=Tf(I,C.mode,b),b.return=C,C=b}return r(C);case gi:return I=co(I),V(C,E,I,b)}if(Pr(I))return x(C,E,I,b);if(Cr(I)){if(k=Cr(I),typeof k!="function")throw Error(O(150));return I=k.call(I),D(C,E,I,b)}if(typeof I.then=="function")return V(C,E,vl(I),b);if(I.$$typeof===Fn)return V(C,E,_l(C,I),b);Tl(C,I)}return typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint"?(I=""+I,E!==null&&E.tag===6?(n(C,E.sibling),b=o(E,I),b.return=C,C=b):(n(C,E),b=vf(I,C.mode,b),b.return=C,C=b),r(C)):n(C,E)}return function(C,E,I,b){try{pa=0;var k=V(C,E,I,b);return _s=null,k}catch(A){if(A===Ks||A===lc)throw A;var B=Bt(29,A,null,C.mode);return B.lanes=b,B.return=C,B}finally{}}}var Co=KE(!0),QE=KE(!1),yi=!1;function jh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Cd(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function xi(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function bi(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,ge&2){var o=i.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),i.pending=e,e=uu(t),qE(t,null,n),e}return ac(t,i,e,n),uu(t)}function Jr(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,dE(t,n)}}function Sf(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var o=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var r={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?o=s=r:s=s.next=r,n=n.next}while(n!==null);s===null?o=s=e:s=s.next=e}else o=s=e;n={baseState:i.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var Id=!1;function Kr(){if(Id){var t=ys;if(t!==null)throw t}}function Qr(t,e,n,i){Id=!1;var o=t.updateQueue;yi=!1;var s=o.firstBaseUpdate,r=o.lastBaseUpdate,a=o.shared.pending;if(a!==null){o.shared.pending=null;var u=a,c=u.next;u.next=null,r===null?s=c:r.next=c,r=u;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==r&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=u))}if(s!==null){var p=o.baseState;r=0,h=c=u=null,a=s;do{var m=a.lane&-536870913,_=m!==a.lane;if(_?(ue&m)===m:(i&m)===m){m!==0&&m===Ms&&(Id=!0),h!==null&&(h=h.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var x=t,D=a;m=e;var V=n;switch(D.tag){case 1:if(x=D.payload,typeof x=="function"){p=x.call(V,p,m);break e}p=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=D.payload,m=typeof x=="function"?x.call(V,p,m):x,m==null)break e;p=Pe({},p,m);break e;case 2:yi=!0}}m=a.callback,m!==null&&(t.flags|=64,_&&(t.flags|=8192),_=o.callbacks,_===null?o.callbacks=[m]:_.push(m))}else _={lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=_,u=p):h=h.next=_,r|=m;if(a=a.next,a===null){if(a=o.shared.pending,a===null)break;_=a,a=_.next,_.next=null,o.lastBaseUpdate=_,o.shared.pending=null}}while(!0);h===null&&(u=p),o.baseState=u,o.firstBaseUpdate=c,o.lastBaseUpdate=h,s===null&&(o.shared.lanes=0),Hi|=r,t.lanes=r,t.memoizedState=p}}function $E(t,e){if(typeof t!="function")throw Error(O(191,t));t.call(e)}function XE(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)$E(n[t],e)}var xs=bn(null),hu=bn(0);function iy(t,e){t=Zn,Re(hu,t),Re(xs,e),Zn=t|e.baseLanes}function Rd(){Re(hu,Zn),Re(xs,xs.current)}function ep(){Zn=hu.current,lt(xs),lt(hu)}var Qt=bn(null),rn=null;function vi(t){var e=t.alternate;Re(ze,ze.current&1),Re(Qt,t),rn===null&&(e===null||xs.current!==null||e.memoizedState!==null)&&(rn=t)}function wd(t){Re(ze,ze.current),Re(Qt,t),rn===null&&(rn=t)}function WE(t){t.tag===22?(Re(ze,ze.current),Re(Qt,t),rn===null&&(rn=t)):Ti()}function Ti(){Re(ze,ze.current),Re(Qt,Qt.current)}function qt(t){lt(Qt),rn===t&&(rn=null),lt(ze)}var ze=bn(0);function pu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Jd(n)||Kd(n)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var $n=0,ne=null,Ae=null,Je=null,mu=!1,vs=!1,Io=!1,gu=0,ma=0,Ts=null,Lw=0;function Be(){throw Error(O(321))}function tp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Kt(t[n],e[n]))return!1;return!0}function np(t,e,n,i,o,s){return $n=s,ne=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,X.H=t===null||t.memoizedState===null?N0:hp,Io=!1,s=n(i,o),Io=!1,vs&&(s=jE(e,n,i,o)),ZE(t),s}function ZE(t){X.H=ga;var e=Ae!==null&&Ae.next!==null;if($n=0,Je=Ae=ne=null,mu=!1,ma=0,Ts=null,e)throw Error(O(300));t===null||$e||(t=t.dependencies,t!==null&&fu(t)&&($e=!0))}function jE(t,e,n,i){ne=t;var o=0;do{if(vs&&(Ts=null),ma=0,vs=!1,25<=o)throw Error(O(301));if(o+=1,Je=Ae=null,t.updateQueue!=null){var s=t.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}X.H=M0,s=e(n,i)}while(vs);return s}function kw(){var t=X.H,e=t.useState()[0];return e=typeof e.then=="function"?qa(e):e,t=t.useState()[0],(Ae!==null?Ae.memoizedState:null)!==t&&(ne.flags|=1024),e}function ip(){var t=gu!==0;return gu=0,t}function op(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function sp(t){if(mu){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}mu=!1}$n=0,Je=Ae=ne=null,vs=!1,ma=gu=0,Ts=null}function Ct(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Je===null?ne.memoizedState=Je=t:Je=Je.next=t,Je}function He(){if(Ae===null){var t=ne.alternate;t=t!==null?t.memoizedState:null}else t=Ae.next;var e=Je===null?ne.memoizedState:Je.next;if(e!==null)Je=e,Ae=t;else{if(t===null)throw ne.alternate===null?Error(O(467)):Error(O(310));Ae=t,t={memoizedState:Ae.memoizedState,baseState:Ae.baseState,baseQueue:Ae.baseQueue,queue:Ae.queue,next:null},Je===null?ne.memoizedState=Je=t:Je=Je.next=t}return Je}function uc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function qa(t){var e=ma;return ma+=1,Ts===null&&(Ts=[]),t=JE(Ts,t,e),e=ne,(Je===null?e.memoizedState:Je.next)===null&&(e=e.alternate,X.H=e===null||e.memoizedState===null?N0:hp),t}function cc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return qa(t);if(t.$$typeof===Fn)return gt(t)}throw Error(O(438,String(t)))}function rp(t){var e=null,n=ne.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var i=ne.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(e={data:i.data.map(function(o){return o.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=uc(),ne.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),i=0;i<t;i++)n[i]=SR;return e.index++,n}function Xn(t,e){return typeof e=="function"?e(t):e}function ql(t){var e=He();return ap(e,Ae,t)}function ap(t,e,n){var i=t.queue;if(i===null)throw Error(O(311));i.lastRenderedReducer=n;var o=t.baseQueue,s=i.pending;if(s!==null){if(o!==null){var r=o.next;o.next=s.next,s.next=r}e.baseQueue=o=s,i.pending=null}if(s=t.baseState,o===null)t.memoizedState=s;else{e=o.next;var a=r=null,u=null,c=e,h=!1;do{var p=c.lane&-536870913;if(p!==c.lane?(ue&p)===p:($n&p)===p){var m=c.revertLane;if(m===0)u!==null&&(u=u.next={lane:0,revertLane:0,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),p===Ms&&(h=!0);else if(($n&m)===m){c=c.next,m===Ms&&(h=!0);continue}else p={lane:0,revertLane:c.revertLane,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},u===null?(a=u=p,r=s):u=u.next=p,ne.lanes|=m,Hi|=m;p=c.action,Io&&n(s,p),s=c.hasEagerState?c.eagerState:n(s,p)}else m={lane:p,revertLane:c.revertLane,gesture:c.gesture,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},u===null?(a=u=m,r=s):u=u.next=m,ne.lanes|=p,Hi|=p;c=c.next}while(c!==null&&c!==e);if(u===null?r=s:u.next=a,!Kt(s,t.memoizedState)&&($e=!0,h&&(n=ys,n!==null)))throw n;t.memoizedState=s,t.baseState=r,t.baseQueue=u,i.lastRenderedState=s}return o===null&&(i.lanes=0),[t.memoizedState,i.dispatch]}function Af(t){var e=He(),n=e.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=t;var i=n.dispatch,o=n.pending,s=e.memoizedState;if(o!==null){n.pending=null;var r=o=o.next;do s=t(s,r.action),r=r.next;while(r!==o);Kt(s,e.memoizedState)||($e=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function e0(t,e,n){var i=ne,o=He(),s=ce;if(s){if(n===void 0)throw Error(O(407));n=n()}else n=e();var r=!Kt((Ae||o).memoizedState,n);if(r&&(o.memoizedState=n,$e=!0),o=o.queue,lp(i0.bind(null,i,o,t),[t]),o.getSnapshot!==e||r||Je!==null&&Je.memoizedState.tag&1){if(i.flags|=2048,bs(9,{destroy:void 0},n0.bind(null,i,o,n,e),null),Ie===null)throw Error(O(349));s||$n&127||t0(i,e,n)}return n}function t0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ne.updateQueue,e===null?(e=uc(),ne.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function n0(t,e,n,i){e.value=n,e.getSnapshot=i,o0(e)&&s0(t)}function i0(t,e,n){return n(function(){o0(e)&&s0(t)})}function o0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Kt(t,n)}catch{return!0}}function s0(t){var e=Uo(t,2);e!==null&&Vt(e,t,2)}function Nd(t){var e=Ct();if(typeof t=="function"){var n=t;if(t=n(),Io){Si(!0);try{n()}finally{Si(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xn,lastRenderedState:t},e}function r0(t,e,n,i){return t.baseState=n,ap(t,Ae,typeof i=="function"?i:Xn)}function Ow(t,e,n,i,o){if(dc(t))throw Error(O(485));if(t=e.action,t!==null){var s={payload:o,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(r){s.listeners.push(r)}};X.T!==null?n(!0):s.isTransition=!1,i(s),n=e.pending,n===null?(s.next=e.pending=s,a0(e,s)):(s.next=n.next,e.pending=n.next=s)}}function a0(t,e){var n=e.action,i=e.payload,o=t.state;if(e.isTransition){var s=X.T,r={};X.T=r;try{var a=n(o,i),u=X.S;u!==null&&u(r,a),oy(t,e,a)}catch(c){Md(t,e,c)}finally{s!==null&&r.types!==null&&(s.types=r.types),X.T=s}}else try{s=n(o,i),oy(t,e,s)}catch(c){Md(t,e,c)}}function oy(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){sy(t,e,i)},function(i){return Md(t,e,i)}):sy(t,e,n)}function sy(t,e,n){e.status="fulfilled",e.value=n,l0(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,a0(t,n)))}function Md(t,e,n){var i=t.pending;if(t.pending=null,i!==null){i=i.next;do e.status="rejected",e.reason=n,l0(e),e=e.next;while(e!==i)}t.action=null}function l0(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function u0(t,e){return e}function ry(t,e){if(ce){var n=Ie.formState;if(n!==null){e:{var i=ne;if(ce){if(xe){t:{for(var o=xe,s=nn;o.nodeType!==8;){if(!s){o=null;break t}if(o=an(o.nextSibling),o===null){o=null;break t}}s=o.data,o=s==="F!"||s==="F"?o:null}if(o){xe=an(o.nextSibling),i=o.data==="F!";break e}}Gi(i)}i=!1}i&&(e=n[0])}}return n=Ct(),n.memoizedState=n.baseState=e,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u0,lastRenderedState:e},n.queue=i,n=I0.bind(null,ne,i),i.dispatch=n,i=Nd(!1),s=dp.bind(null,ne,!1,i.queue),i=Ct(),o={state:e,dispatch:null,action:t,pending:null},i.queue=o,n=Ow.bind(null,ne,o,s,n),o.dispatch=n,i.memoizedState=t,[e,n,!1]}function ay(t){var e=He();return c0(e,Ae,t)}function c0(t,e,n){if(e=ap(t,e,u0)[0],t=ql(Xn)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var i=qa(e)}catch(r){throw r===Ks?lc:r}else i=e;e=He();var o=e.queue,s=o.dispatch;return n!==e.memoizedState&&(ne.flags|=2048,bs(9,{destroy:void 0},qw.bind(null,o,n),null)),[i,s,t]}function qw(t,e){t.action=e}function ly(t){var e=He(),n=Ae;if(n!==null)return c0(e,n,t);He(),e=e.memoizedState,n=He();var i=n.queue.dispatch;return n.memoizedState=t,[e,i,!1]}function bs(t,e,n,i){return t={tag:t,create:n,deps:i,inst:e,next:null},e=ne.updateQueue,e===null&&(e=uc(),ne.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function f0(){return He().memoizedState}function Bl(t,e,n,i){var o=Ct();ne.flags|=t,o.memoizedState=bs(1|e,{destroy:void 0},n,i===void 0?null:i)}function fc(t,e,n,i){var o=He();i=i===void 0?null:i;var s=o.memoizedState.inst;Ae!==null&&i!==null&&tp(i,Ae.memoizedState.deps)?o.memoizedState=bs(e,s,n,i):(ne.flags|=t,o.memoizedState=bs(1|e,s,n,i))}function uy(t,e){Bl(8390656,8,t,e)}function lp(t,e){fc(2048,8,t,e)}function Bw(t){ne.flags|=4;var e=ne.updateQueue;if(e===null)e=uc(),ne.updateQueue=e,e.events=[t];else{var n=e.events;n===null?e.events=[t]:n.push(t)}}function d0(t){var e=He().memoizedState;return Bw({ref:e,nextImpl:t}),function(){if(ge&2)throw Error(O(440));return e.impl.apply(void 0,arguments)}}function h0(t,e){return fc(4,2,t,e)}function p0(t,e){return fc(4,4,t,e)}function m0(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function g0(t,e,n){n=n!=null?n.concat([t]):null,fc(4,4,m0.bind(null,e,t),n)}function up(){}function y0(t,e){var n=He();e=e===void 0?null:e;var i=n.memoizedState;return e!==null&&tp(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function _0(t,e){var n=He();e=e===void 0?null:e;var i=n.memoizedState;if(e!==null&&tp(e,i[1]))return i[0];if(i=t(),Io){Si(!0);try{t()}finally{Si(!1)}}return n.memoizedState=[i,e],i}function cp(t,e,n){return n===void 0||$n&1073741824&&!(ue&261930)?t.memoizedState=e:(t.memoizedState=n,t=rS(),ne.lanes|=t,Hi|=t,n)}function v0(t,e,n,i){return Kt(n,e)?n:xs.current!==null?(t=cp(t,n,i),Kt(t,e)||($e=!0),t):!($n&42)||$n&1073741824&&!(ue&261930)?($e=!0,t.memoizedState=n):(t=rS(),ne.lanes|=t,Hi|=t,e)}function T0(t,e,n,i,o){var s=ye.p;ye.p=s!==0&&8>s?s:8;var r=X.T,a={};X.T=a,dp(t,!1,e,n);try{var u=o(),c=X.S;if(c!==null&&c(a,u),u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=Uw(u,i);$r(t,e,h,Yt(t))}else $r(t,e,i,Yt(t))}catch(p){$r(t,e,{then:function(){},status:"rejected",reason:p},Yt())}finally{ye.p=s,r!==null&&a.types!==null&&(r.types=a.types),X.T=r}}function Fw(){}function xd(t,e,n,i){if(t.tag!==5)throw Error(O(476));var o=E0(t).queue;T0(t,o,e,go,n===null?Fw:function(){return S0(t),n(i)})}function E0(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:go,baseState:go,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xn,lastRenderedState:go},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xn,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function S0(t){var e=E0(t);e.next===null&&(e=t.alternate.memoizedState),$r(t,e.next.queue,{},Yt())}function fp(){return gt(va)}function A0(){return He().memoizedState}function C0(){return He().memoizedState}function Gw(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=Yt();t=xi(n);var i=bi(e,t,n);i!==null&&(Vt(i,e,n),Jr(i,e,n)),e={cache:Xh()},t.payload=e;return}e=e.return}}function zw(t,e,n){var i=Yt();n={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},dc(t)?R0(e,n):(n=Jh(t,e,n,i),n!==null&&(Vt(n,t,i),w0(n,e,i)))}function I0(t,e,n){var i=Yt();$r(t,e,n,i)}function $r(t,e,n,i){var o={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(dc(t))R0(e,o);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var r=e.lastRenderedState,a=s(r,n);if(o.hasEagerState=!0,o.eagerState=a,Kt(a,r))return ac(t,e,o,0),Ie===null&&rc(),!1}catch{}finally{}if(n=Jh(t,e,o,i),n!==null)return Vt(n,t,i),w0(n,e,i),!0}return!1}function dp(t,e,n,i){if(i={lane:2,revertLane:Ep(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},dc(t)){if(e)throw Error(O(479))}else e=Jh(t,n,i,2),e!==null&&Vt(e,t,2)}function dc(t){var e=t.alternate;return t===ne||e!==null&&e===ne}function R0(t,e){vs=mu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function w0(t,e,n){if(n&4194048){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,dE(t,n)}}var ga={readContext:gt,use:cc,useCallback:Be,useContext:Be,useEffect:Be,useImperativeHandle:Be,useLayoutEffect:Be,useInsertionEffect:Be,useMemo:Be,useReducer:Be,useRef:Be,useState:Be,useDebugValue:Be,useDeferredValue:Be,useTransition:Be,useSyncExternalStore:Be,useId:Be,useHostTransitionStatus:Be,useFormState:Be,useActionState:Be,useOptimistic:Be,useMemoCache:Be,useCacheRefresh:Be};ga.useEffectEvent=Be;var N0={readContext:gt,use:cc,useCallback:function(t,e){return Ct().memoizedState=[t,e===void 0?null:e],t},useContext:gt,useEffect:uy,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,Bl(4194308,4,m0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Bl(4194308,4,t,e)},useInsertionEffect:function(t,e){Bl(4,2,t,e)},useMemo:function(t,e){var n=Ct();e=e===void 0?null:e;var i=t();if(Io){Si(!0);try{t()}finally{Si(!1)}}return n.memoizedState=[i,e],i},useReducer:function(t,e,n){var i=Ct();if(n!==void 0){var o=n(e);if(Io){Si(!0);try{n(e)}finally{Si(!1)}}}else o=e;return i.memoizedState=i.baseState=o,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:o},i.queue=t,t=t.dispatch=zw.bind(null,ne,t),[i.memoizedState,t]},useRef:function(t){var e=Ct();return t={current:t},e.memoizedState=t},useState:function(t){t=Nd(t);var e=t.queue,n=I0.bind(null,ne,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:up,useDeferredValue:function(t,e){var n=Ct();return cp(n,t,e)},useTransition:function(){var t=Nd(!1);return t=T0.bind(null,ne,t.queue,!0,!1),Ct().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var i=ne,o=Ct();if(ce){if(n===void 0)throw Error(O(407));n=n()}else{if(n=e(),Ie===null)throw Error(O(349));ue&127||t0(i,e,n)}o.memoizedState=n;var s={value:n,getSnapshot:e};return o.queue=s,uy(i0.bind(null,i,s,t),[t]),i.flags|=2048,bs(9,{destroy:void 0},n0.bind(null,i,s,n,e),null),n},useId:function(){var t=Ct(),e=Ie.identifierPrefix;if(ce){var n=En,i=Tn;n=(i&~(1<<32-Ht(i)-1)).toString(32)+n,e="_"+e+"R_"+n,n=gu++,0<n&&(e+="H"+n.toString(32)),e+="_"}else n=Lw++,e="_"+e+"r_"+n.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:fp,useFormState:ry,useActionState:ry,useOptimistic:function(t){var e=Ct();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=dp.bind(null,ne,!0,n),n.dispatch=e,[t,e]},useMemoCache:rp,useCacheRefresh:function(){return Ct().memoizedState=Gw.bind(null,ne)},useEffectEvent:function(t){var e=Ct(),n={impl:t};return e.memoizedState=n,function(){if(ge&2)throw Error(O(440));return n.impl.apply(void 0,arguments)}}},hp={readContext:gt,use:cc,useCallback:y0,useContext:gt,useEffect:lp,useImperativeHandle:g0,useInsertionEffect:h0,useLayoutEffect:p0,useMemo:_0,useReducer:ql,useRef:f0,useState:function(){return ql(Xn)},useDebugValue:up,useDeferredValue:function(t,e){var n=He();return v0(n,Ae.memoizedState,t,e)},useTransition:function(){var t=ql(Xn)[0],e=He().memoizedState;return[typeof t=="boolean"?t:qa(t),e]},useSyncExternalStore:e0,useId:A0,useHostTransitionStatus:fp,useFormState:ay,useActionState:ay,useOptimistic:function(t,e){var n=He();return r0(n,Ae,t,e)},useMemoCache:rp,useCacheRefresh:C0};hp.useEffectEvent=d0;var M0={readContext:gt,use:cc,useCallback:y0,useContext:gt,useEffect:lp,useImperativeHandle:g0,useInsertionEffect:h0,useLayoutEffect:p0,useMemo:_0,useReducer:Af,useRef:f0,useState:function(){return Af(Xn)},useDebugValue:up,useDeferredValue:function(t,e){var n=He();return Ae===null?cp(n,t,e):v0(n,Ae.memoizedState,t,e)},useTransition:function(){var t=Af(Xn)[0],e=He().memoizedState;return[typeof t=="boolean"?t:qa(t),e]},useSyncExternalStore:e0,useId:A0,useHostTransitionStatus:fp,useFormState:ly,useActionState:ly,useOptimistic:function(t,e){var n=He();return Ae!==null?r0(n,Ae,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:rp,useCacheRefresh:C0};M0.useEffectEvent=d0;function Cf(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Pe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var bd={enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Yt(),o=xi(i);o.payload=e,n!=null&&(o.callback=n),e=bi(t,o,i),e!==null&&(Vt(e,t,i),Jr(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Yt(),o=xi(i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=bi(t,o,i),e!==null&&(Vt(e,t,i),Jr(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Yt(),i=xi(n);i.tag=2,e!=null&&(i.callback=e),e=bi(t,i,n),e!==null&&(Vt(e,t,n),Jr(e,t,n))}};function cy(t,e,n,i,o,s,r){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,r):e.prototype&&e.prototype.isPureReactComponent?!fa(n,i)||!fa(o,s):!0}function fy(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&bd.enqueueReplaceState(e,e.state,null)}function Ro(t,e){var n=e;if("ref"in e){n={};for(var i in e)i!=="ref"&&(n[i]=e[i])}if(t=t.defaultProps){n===e&&(n=Pe({},n));for(var o in t)n[o]===void 0&&(n[o]=t[o])}return n}function x0(t){lu(t)}function b0(t){console.error(t)}function D0(t){lu(t)}function yu(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(i){setTimeout(function(){throw i})}}function dy(t,e,n){try{var i=t.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function Dd(t,e,n){return n=xi(n),n.tag=3,n.payload={element:null},n.callback=function(){yu(t,e)},n}function P0(t){return t=xi(t),t.tag=3,t}function V0(t,e,n,i){var o=n.type.getDerivedStateFromError;if(typeof o=="function"){var s=i.value;t.payload=function(){return o(s)},t.callback=function(){dy(e,n,i)}}var r=n.stateNode;r!==null&&typeof r.componentDidCatch=="function"&&(t.callback=function(){dy(e,n,i),typeof o!="function"&&(Di===null?Di=new Set([this]):Di.add(this));var a=i.stack;this.componentDidCatch(i.value,{componentStack:a!==null?a:""})})}function Hw(t,e,n,i,o){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(e=n.alternate,e!==null&&Js(e,n,o,!0),n=Qt.current,n!==null){switch(n.tag){case 31:case 13:return rn===null?Su():n.alternate===null&&Fe===0&&(Fe=3),n.flags&=-257,n.flags|=65536,n.lanes=o,i===du?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([i]):e.add(i),Uf(t,i,o)),!1;case 22:return n.flags|=65536,i===du?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([i]):n.add(i)),Uf(t,i,o)),!1}throw Error(O(435,n.tag))}return Uf(t,i,o),Su(),!1}if(ce)return e=Qt.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=o,i!==vd&&(t=Error(O(422),{cause:i}),ha(tn(t,n)))):(i!==vd&&(e=Error(O(423),{cause:i}),ha(tn(e,n))),t=t.current.alternate,t.flags|=65536,o&=-o,t.lanes|=o,i=tn(i,n),o=Dd(t.stateNode,i,o),Sf(t,o),Fe!==4&&(Fe=2)),!1;var s=Error(O(520),{cause:i});if(s=tn(s,n),Zr===null?Zr=[s]:Zr.push(s),Fe!==4&&(Fe=2),e===null)return!0;i=tn(i,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=o&-o,n.lanes|=t,t=Dd(n.stateNode,i,t),Sf(n,t),!1;case 1:if(e=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(Di===null||!Di.has(s))))return n.flags|=65536,o&=-o,n.lanes|=o,o=P0(o),V0(o,t,n,i),Sf(n,o),!1}n=n.return}while(n!==null);return!1}var pp=Error(O(461)),$e=!1;function ft(t,e,n,i){e.child=t===null?QE(e,null,n,i):Co(e,t.child,n,i)}function hy(t,e,n,i,o){n=n.render;var s=e.ref;if("ref"in i){var r={};for(var a in i)a!=="ref"&&(r[a]=i[a])}else r=i;return Ao(e),i=np(t,e,n,r,s,o),a=ip(),t!==null&&!$e?(op(t,e,o),Wn(t,e,o)):(ce&&a&&Qh(e),e.flags|=1,ft(t,e,i,o),e.child)}function py(t,e,n,i,o){if(t===null){var s=n.type;return typeof s=="function"&&!Kh(s)&&s.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=s,U0(t,e,s,i,o)):(t=kl(n.type,null,i,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!mp(t,o)){var r=s.memoizedProps;if(n=n.compare,n=n!==null?n:fa,n(r,i)&&t.ref===e.ref)return Wn(t,e,o)}return e.flags|=1,t=Hn(s,i),t.ref=e.ref,t.return=e,e.child=t}function U0(t,e,n,i,o){if(t!==null){var s=t.memoizedProps;if(fa(s,i)&&t.ref===e.ref)if($e=!1,e.pendingProps=i=s,mp(t,o))t.flags&131072&&($e=!0);else return e.lanes=t.lanes,Wn(t,e,o)}return Pd(t,e,n,i,o)}function L0(t,e,n,i){var o=i.children,s=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if(e.flags&128){if(s=s!==null?s.baseLanes|n:n,t!==null){for(i=e.child=t.child,o=0;i!==null;)o=o|i.lanes|i.childLanes,i=i.sibling;i=o&~s}else i=0,e.child=null;return my(t,e,s,n,i)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&Ol(e,s!==null?s.cachePool:null),s!==null?iy(e,s):Rd(),WE(e);else return i=e.lanes=536870912,my(t,e,s!==null?s.baseLanes|n:n,n,i)}else s!==null?(Ol(e,s.cachePool),iy(e,s),Ti(),e.memoizedState=null):(t!==null&&Ol(e,null),Rd(),Ti());return ft(t,e,o,n),e.child}function Ur(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function my(t,e,n,i,o){var s=Wh();return s=s===null?null:{parent:Qe._currentValue,pool:s},e.memoizedState={baseLanes:n,cachePool:s},t!==null&&Ol(e,null),Rd(),WE(e),t!==null&&Js(t,e,i,!0),e.childLanes=o,null}function Fl(t,e){return e=_u({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function gy(t,e,n){return Co(e,t.child,null,n),t=Fl(e,e.pendingProps),t.flags|=2,qt(e),e.memoizedState=null,t}function Yw(t,e,n){var i=e.pendingProps,o=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(ce){if(i.mode==="hidden")return t=Fl(e,i),e.lanes=536870912,Ur(null,t);if(wd(e),(t=xe)?(t=NS(t,nn),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Fi!==null?{id:Tn,overflow:En}:null,retryLane:536870912,hydrationErrors:null},n=FE(t),n.return=e,e.child=n,pt=e,xe=null)):t=null,t===null)throw Gi(e);return e.lanes=536870912,null}return Fl(e,i)}var s=t.memoizedState;if(s!==null){var r=s.dehydrated;if(wd(e),o)if(e.flags&256)e.flags&=-257,e=gy(t,e,n);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(O(558));else if($e||Js(t,e,n,!1),o=(n&t.childLanes)!==0,$e||o){if(i=Ie,i!==null&&(r=hE(i,n),r!==0&&r!==s.retryLane))throw s.retryLane=r,Uo(t,r),Vt(i,t,r),pp;Su(),e=gy(t,e,n)}else t=s.treeContext,xe=an(r.nextSibling),pt=e,ce=!0,Mi=null,nn=!1,t!==null&&zE(e,t),e=Fl(e,i),e.flags|=4096;return e}return t=Hn(t.child,{mode:i.mode,children:i.children}),t.ref=e.ref,e.child=t,t.return=e,t}function Gl(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(O(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function Pd(t,e,n,i,o){return Ao(e),n=np(t,e,n,i,void 0,o),i=ip(),t!==null&&!$e?(op(t,e,o),Wn(t,e,o)):(ce&&i&&Qh(e),e.flags|=1,ft(t,e,n,o),e.child)}function yy(t,e,n,i,o,s){return Ao(e),e.updateQueue=null,n=jE(e,i,n,o),ZE(t),i=ip(),t!==null&&!$e?(op(t,e,s),Wn(t,e,s)):(ce&&i&&Qh(e),e.flags|=1,ft(t,e,n,s),e.child)}function _y(t,e,n,i,o){if(Ao(e),e.stateNode===null){var s=us,r=n.contextType;typeof r=="object"&&r!==null&&(s=gt(r)),s=new n(i,s),e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=bd,e.stateNode=s,s._reactInternals=e,s=e.stateNode,s.props=i,s.state=e.memoizedState,s.refs={},jh(e),r=n.contextType,s.context=typeof r=="object"&&r!==null?gt(r):us,s.state=e.memoizedState,r=n.getDerivedStateFromProps,typeof r=="function"&&(Cf(e,n,r,i),s.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(r=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),r!==s.state&&bd.enqueueReplaceState(s,s.state,null),Qr(e,i,s,o),Kr(),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308),i=!0}else if(t===null){s=e.stateNode;var a=e.memoizedProps,u=Ro(n,a);s.props=u;var c=s.context,h=n.contextType;r=us,typeof h=="object"&&h!==null&&(r=gt(h));var p=n.getDerivedStateFromProps;h=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function",a=e.pendingProps!==a,h||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a||c!==r)&&fy(e,s,i,r),yi=!1;var m=e.memoizedState;s.state=m,Qr(e,i,s,o),Kr(),c=e.memoizedState,a||m!==c||yi?(typeof p=="function"&&(Cf(e,n,p,i),c=e.memoizedState),(u=yi||cy(e,n,u,i,m,c,r))?(h||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=c),s.props=i,s.state=c,s.context=r,i=u):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{s=e.stateNode,Cd(t,e),r=e.memoizedProps,h=Ro(n,r),s.props=h,p=e.pendingProps,m=s.context,c=n.contextType,u=us,typeof c=="object"&&c!==null&&(u=gt(c)),a=n.getDerivedStateFromProps,(c=typeof a=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(r!==p||m!==u)&&fy(e,s,i,u),yi=!1,m=e.memoizedState,s.state=m,Qr(e,i,s,o),Kr();var _=e.memoizedState;r!==p||m!==_||yi||t!==null&&t.dependencies!==null&&fu(t.dependencies)?(typeof a=="function"&&(Cf(e,n,a,i),_=e.memoizedState),(h=yi||cy(e,n,h,i,m,_,u)||t!==null&&t.dependencies!==null&&fu(t.dependencies))?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,_,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,_,u)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||r===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||r===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=_),s.props=i,s.state=_,s.context=u,i=h):(typeof s.componentDidUpdate!="function"||r===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||r===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),i=!1)}return s=i,Gl(t,e),i=(e.flags&128)!==0,s||i?(s=e.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:s.render(),e.flags|=1,t!==null&&i?(e.child=Co(e,t.child,null,o),e.child=Co(e,null,n,o)):ft(t,e,n,o),e.memoizedState=s.state,t=e.child):t=Wn(t,e,o),t}function vy(t,e,n,i){return So(),e.flags|=256,ft(t,e,n,i),e.child}var If={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Rf(t){return{baseLanes:t,cachePool:YE()}}function wf(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=Ft),t}function k0(t,e,n){var i=e.pendingProps,o=!1,s=(e.flags&128)!==0,r;if((r=s)||(r=t!==null&&t.memoizedState===null?!1:(ze.current&2)!==0),r&&(o=!0,e.flags&=-129),r=(e.flags&32)!==0,e.flags&=-33,t===null){if(ce){if(o?vi(e):Ti(),(t=xe)?(t=NS(t,nn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Fi!==null?{id:Tn,overflow:En}:null,retryLane:536870912,hydrationErrors:null},n=FE(t),n.return=e,e.child=n,pt=e,xe=null)):t=null,t===null)throw Gi(e);return Kd(t)?e.lanes=32:e.lanes=536870912,null}var a=i.children;return i=i.fallback,o?(Ti(),o=e.mode,a=_u({mode:"hidden",children:a},o),i=yo(i,o,n,null),a.return=e,i.return=e,a.sibling=i,e.child=a,i=e.child,i.memoizedState=Rf(n),i.childLanes=wf(t,r,n),e.memoizedState=If,Ur(null,i)):(vi(e),Vd(e,a))}var u=t.memoizedState;if(u!==null&&(a=u.dehydrated,a!==null)){if(s)e.flags&256?(vi(e),e.flags&=-257,e=Nf(t,e,n)):e.memoizedState!==null?(Ti(),e.child=t.child,e.flags|=128,e=null):(Ti(),a=i.fallback,o=e.mode,i=_u({mode:"visible",children:i.children},o),a=yo(a,o,n,null),a.flags|=2,i.return=e,a.return=e,i.sibling=a,e.child=i,Co(e,t.child,null,n),i=e.child,i.memoizedState=Rf(n),i.childLanes=wf(t,r,n),e.memoizedState=If,e=Ur(null,i));else if(vi(e),Kd(a)){if(r=a.nextSibling&&a.nextSibling.dataset,r)var c=r.dgst;r=c,i=Error(O(419)),i.stack="",i.digest=r,ha({value:i,source:null,stack:null}),e=Nf(t,e,n)}else if($e||Js(t,e,n,!1),r=(n&t.childLanes)!==0,$e||r){if(r=Ie,r!==null&&(i=hE(r,n),i!==0&&i!==u.retryLane))throw u.retryLane=i,Uo(t,i),Vt(r,t,i),pp;Jd(a)||Su(),e=Nf(t,e,n)}else Jd(a)?(e.flags|=192,e.child=t.child,e=null):(t=u.treeContext,xe=an(a.nextSibling),pt=e,ce=!0,Mi=null,nn=!1,t!==null&&zE(e,t),e=Vd(e,i.children),e.flags|=4096);return e}return o?(Ti(),a=i.fallback,o=e.mode,u=t.child,c=u.sibling,i=Hn(u,{mode:"hidden",children:i.children}),i.subtreeFlags=u.subtreeFlags&65011712,c!==null?a=Hn(c,a):(a=yo(a,o,n,null),a.flags|=2),a.return=e,i.return=e,i.sibling=a,e.child=i,Ur(null,i),i=e.child,a=t.child.memoizedState,a===null?a=Rf(n):(o=a.cachePool,o!==null?(u=Qe._currentValue,o=o.parent!==u?{parent:u,pool:u}:o):o=YE(),a={baseLanes:a.baseLanes|n,cachePool:o}),i.memoizedState=a,i.childLanes=wf(t,r,n),e.memoizedState=If,Ur(t.child,i)):(vi(e),n=t.child,t=n.sibling,n=Hn(n,{mode:"visible",children:i.children}),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n)}function Vd(t,e){return e=_u({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function _u(t,e){return t=Bt(22,t,null,e),t.lanes=0,t}function Nf(t,e,n){return Co(e,t.child,null,n),t=Vd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Ty(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Ed(t.return,e,n)}function Mf(t,e,n,i,o,s){var r=t.memoizedState;r===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:o,treeForkCount:s}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=n,r.tailMode=o,r.treeForkCount=s)}function O0(t,e,n){var i=e.pendingProps,o=i.revealOrder,s=i.tail;i=i.children;var r=ze.current,a=(r&2)!==0;if(a?(r=r&1|2,e.flags|=128):r&=1,Re(ze,r),ft(t,e,i,n),i=ce?da:0,!a&&t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ty(t,n,e);else if(t.tag===19)Ty(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(o){case"forwards":for(n=e.child,o=null;n!==null;)t=n.alternate,t!==null&&pu(t)===null&&(o=n),n=n.sibling;n=o,n===null?(o=e.child,e.child=null):(o=n.sibling,n.sibling=null),Mf(e,!1,o,n,s,i);break;case"backwards":case"unstable_legacy-backwards":for(n=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&pu(t)===null){e.child=o;break}t=o.sibling,o.sibling=n,n=o,o=t}Mf(e,!0,n,null,s,i);break;case"together":Mf(e,!1,null,null,void 0,i);break;default:e.memoizedState=null}return e.child}function Wn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Hi|=e.lanes,!(n&e.childLanes))if(t!==null){if(Js(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(O(153));if(e.child!==null){for(t=e.child,n=Hn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Hn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function mp(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&fu(t)))}function Jw(t,e,n){switch(e.tag){case 3:ou(e,e.stateNode.containerInfo),_i(e,Qe,t.memoizedState.cache),So();break;case 27:case 5:ld(e);break;case 4:ou(e,e.stateNode.containerInfo);break;case 10:_i(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,wd(e),null;break;case 13:var i=e.memoizedState;if(i!==null)return i.dehydrated!==null?(vi(e),e.flags|=128,null):n&e.child.childLanes?k0(t,e,n):(vi(e),t=Wn(t,e,n),t!==null?t.sibling:null);vi(e);break;case 19:var o=(t.flags&128)!==0;if(i=(n&e.childLanes)!==0,i||(Js(t,e,n,!1),i=(n&e.childLanes)!==0),o){if(i)return O0(t,e,n);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Re(ze,ze.current),i)break;return null;case 22:return e.lanes=0,L0(t,e,n,e.pendingProps);case 24:_i(e,Qe,t.memoizedState.cache)}return Wn(t,e,n)}function q0(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)$e=!0;else{if(!mp(t,n)&&!(e.flags&128))return $e=!1,Jw(t,e,n);$e=!!(t.flags&131072)}else $e=!1,ce&&e.flags&1048576&&GE(e,da,e.index);switch(e.lanes=0,e.tag){case 16:e:{var i=e.pendingProps;if(t=co(e.elementType),e.type=t,typeof t=="function")Kh(t)?(i=Ro(t,i),e.tag=1,e=_y(null,e,t,i,n)):(e.tag=0,e=Pd(null,e,t,i,n));else{if(t!=null){var o=t.$$typeof;if(o===Ph){e.tag=11,e=hy(null,e,t,i,n);break e}else if(o===Vh){e.tag=14,e=py(null,e,t,i,n);break e}}throw e=rd(t)||t,Error(O(306,e,""))}}return e;case 0:return Pd(t,e,e.type,e.pendingProps,n);case 1:return i=e.type,o=Ro(i,e.pendingProps),_y(t,e,i,o,n);case 3:e:{if(ou(e,e.stateNode.containerInfo),t===null)throw Error(O(387));i=e.pendingProps;var s=e.memoizedState;o=s.element,Cd(t,e),Qr(e,i,null,n);var r=e.memoizedState;if(i=r.cache,_i(e,Qe,i),i!==s.cache&&Sd(e,[Qe],n,!0),Kr(),i=r.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:r.cache},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){e=vy(t,e,i,n);break e}else if(i!==o){o=tn(Error(O(424)),e),ha(o),e=vy(t,e,i,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(xe=an(t.firstChild),pt=e,ce=!0,Mi=null,nn=!0,n=QE(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(So(),i===o){e=Wn(t,e,n);break e}ft(t,e,i,n)}e=e.child}return e;case 26:return Gl(t,e),t===null?(n=By(e.type,null,e.pendingProps,null))?e.memoizedState=n:ce||(n=e.type,t=e.pendingProps,i=Ru(Ni.current).createElement(n),i[ht]=e,i[Ut]=t,yt(i,n,t),rt(i),e.stateNode=i):e.memoizedState=By(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return ld(e),t===null&&ce&&(i=e.stateNode=MS(e.type,e.pendingProps,Ni.current),pt=e,nn=!0,o=xe,ji(e.type)?(Qd=o,xe=an(i.firstChild)):xe=o),ft(t,e,e.pendingProps.children,n),Gl(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&ce&&((o=i=xe)&&(i=S1(i,e.type,e.pendingProps,nn),i!==null?(e.stateNode=i,pt=e,xe=an(i.firstChild),nn=!1,o=!0):o=!1),o||Gi(e)),ld(e),o=e.type,s=e.pendingProps,r=t!==null?t.memoizedProps:null,i=s.children,Hd(o,s)?i=null:r!==null&&Hd(o,r)&&(e.flags|=32),e.memoizedState!==null&&(o=np(t,e,kw,null,null,n),va._currentValue=o),Gl(t,e),ft(t,e,i,n),e.child;case 6:return t===null&&ce&&((t=n=xe)&&(n=A1(n,e.pendingProps,nn),n!==null?(e.stateNode=n,pt=e,xe=null,t=!0):t=!1),t||Gi(e)),null;case 13:return k0(t,e,n);case 4:return ou(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Co(e,null,i,n):ft(t,e,i,n),e.child;case 11:return hy(t,e,e.type,e.pendingProps,n);case 7:return ft(t,e,e.pendingProps,n),e.child;case 8:return ft(t,e,e.pendingProps.children,n),e.child;case 12:return ft(t,e,e.pendingProps.children,n),e.child;case 10:return i=e.pendingProps,_i(e,e.type,i.value),ft(t,e,i.children,n),e.child;case 9:return o=e.type._context,i=e.pendingProps.children,Ao(e),o=gt(o),i=i(o),e.flags|=1,ft(t,e,i,n),e.child;case 14:return py(t,e,e.type,e.pendingProps,n);case 15:return U0(t,e,e.type,e.pendingProps,n);case 19:return O0(t,e,n);case 31:return Yw(t,e,n);case 22:return L0(t,e,n,e.pendingProps);case 24:return Ao(e),i=gt(Qe),t===null?(o=Wh(),o===null&&(o=Ie,s=Xh(),o.pooledCache=s,s.refCount++,s!==null&&(o.pooledCacheLanes|=n),o=s),e.memoizedState={parent:i,cache:o},jh(e),_i(e,Qe,o)):(t.lanes&n&&(Cd(t,e),Qr(e,null,null,n),Kr()),o=t.memoizedState,s=e.memoizedState,o.parent!==i?(o={parent:i,cache:i},e.memoizedState=o,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=o),_i(e,Qe,i)):(i=s.cache,_i(e,Qe,i),i!==o.cache&&Sd(e,[Qe],n,!0))),ft(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(O(156,e.tag))}function Un(t){t.flags|=4}function xf(t,e,n,i,o){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(o&335544128)===o)if(t.stateNode.complete)t.flags|=8192;else if(uS())t.flags|=8192;else throw vo=du,Zh}else t.flags&=-16777217}function Ey(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!DS(e))if(uS())t.flags|=8192;else throw vo=du,Zh}function El(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?cE():536870912,t.lanes|=e,Ds|=e)}function Nr(t,e){if(!ce)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Ne(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var o=t.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags&65011712,i|=o.flags&65011712,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags,i|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function Kw(t,e,n){var i=e.pendingProps;switch($h(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ne(e),null;case 1:return Ne(e),null;case 3:return n=e.stateNode,i=null,t!==null&&(i=t.memoizedState.cache),e.memoizedState.cache!==i&&(e.flags|=2048),Yn(Qe),Rs(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Jo(e)?Un(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ef())),Ne(e),null;case 26:var o=e.type,s=e.memoizedState;return t===null?(Un(e),s!==null?(Ne(e),Ey(e,s)):(Ne(e),xf(e,o,null,i,n))):s?s!==t.memoizedState?(Un(e),Ne(e),Ey(e,s)):(Ne(e),e.flags&=-16777217):(t=t.memoizedProps,t!==i&&Un(e),Ne(e),xf(e,o,t,i,n)),null;case 27:if(su(e),n=Ni.current,o=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&Un(e);else{if(!i){if(e.stateNode===null)throw Error(O(166));return Ne(e),null}t=An.current,Jo(e)?Xg(e):(t=MS(o,i,n),e.stateNode=t,Un(e))}return Ne(e),null;case 5:if(su(e),o=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&Un(e);else{if(!i){if(e.stateNode===null)throw Error(O(166));return Ne(e),null}if(s=An.current,Jo(e))Xg(e);else{var r=Ru(Ni.current);switch(s){case 1:s=r.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:s=r.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":s=r.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":s=r.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":s=r.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof i.is=="string"?r.createElement("select",{is:i.is}):r.createElement("select"),i.multiple?s.multiple=!0:i.size&&(s.size=i.size);break;default:s=typeof i.is=="string"?r.createElement(o,{is:i.is}):r.createElement(o)}}s[ht]=e,s[Ut]=i;e:for(r=e.child;r!==null;){if(r.tag===5||r.tag===6)s.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break e;for(;r.sibling===null;){if(r.return===null||r.return===e)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}e.stateNode=s;e:switch(yt(s,o,i),o){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&Un(e)}}return Ne(e),xf(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,n),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==i&&Un(e);else{if(typeof i!="string"&&e.stateNode===null)throw Error(O(166));if(t=Ni.current,Jo(e)){if(t=e.stateNode,n=e.memoizedProps,i=null,o=pt,o!==null)switch(o.tag){case 27:case 5:i=o.memoizedProps}t[ht]=e,t=!!(t.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||IS(t.nodeValue,n)),t||Gi(e,!0)}else t=Ru(t).createTextNode(i),t[ht]=e,e.stateNode=t}return Ne(e),null;case 31:if(n=e.memoizedState,t===null||t.memoizedState!==null){if(i=Jo(e),n!==null){if(t===null){if(!i)throw Error(O(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(O(557));t[ht]=e}else So(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ne(e),t=!1}else n=Ef(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return e.flags&256?(qt(e),e):(qt(e),null);if(e.flags&128)throw Error(O(558))}return Ne(e),null;case 13:if(i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(o=Jo(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(O(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(O(317));o[ht]=e}else So(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ne(e),o=!1}else o=Ef(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=o),o=!0;if(!o)return e.flags&256?(qt(e),e):(qt(e),null)}return qt(e),e.flags&128?(e.lanes=n,e):(n=i!==null,t=t!==null&&t.memoizedState!==null,n&&(i=e.child,o=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(o=i.alternate.memoizedState.cachePool.pool),s=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==o&&(i.flags|=2048)),n!==t&&n&&(e.child.flags|=8192),El(e,e.updateQueue),Ne(e),null);case 4:return Rs(),t===null&&Sp(e.stateNode.containerInfo),Ne(e),null;case 10:return Yn(e.type),Ne(e),null;case 19:if(lt(ze),i=e.memoizedState,i===null)return Ne(e),null;if(o=(e.flags&128)!==0,s=i.rendering,s===null)if(o)Nr(i,!1);else{if(Fe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=pu(t),s!==null){for(e.flags|=128,Nr(i,!1),t=s.updateQueue,e.updateQueue=t,El(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)BE(n,t),n=n.sibling;return Re(ze,ze.current&1|2),ce&&qn(e,i.treeForkCount),e.child}t=t.sibling}i.tail!==null&&Gt()>Tu&&(e.flags|=128,o=!0,Nr(i,!1),e.lanes=4194304)}else{if(!o)if(t=pu(s),t!==null){if(e.flags|=128,o=!0,t=t.updateQueue,e.updateQueue=t,El(e,t),Nr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!ce)return Ne(e),null}else 2*Gt()-i.renderingStartTime>Tu&&n!==536870912&&(e.flags|=128,o=!0,Nr(i,!1),e.lanes=4194304);i.isBackwards?(s.sibling=e.child,e.child=s):(t=i.last,t!==null?t.sibling=s:e.child=s,i.last=s)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Gt(),t.sibling=null,n=ze.current,Re(ze,o?n&1|2:n&1),ce&&qn(e,i.treeForkCount),t):(Ne(e),null);case 22:case 23:return qt(e),ep(),i=e.memoizedState!==null,t!==null?t.memoizedState!==null!==i&&(e.flags|=8192):i&&(e.flags|=8192),i?n&536870912&&!(e.flags&128)&&(Ne(e),e.subtreeFlags&6&&(e.flags|=8192)):Ne(e),n=e.updateQueue,n!==null&&El(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),i=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),i!==n&&(e.flags|=2048),t!==null&&lt(_o),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),Yn(Qe),Ne(e),null;case 25:return null;case 30:return null}throw Error(O(156,e.tag))}function Qw(t,e){switch($h(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Yn(Qe),Rs(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return su(e),null;case 31:if(e.memoizedState!==null){if(qt(e),e.alternate===null)throw Error(O(340));So()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(qt(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(O(340));So()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return lt(ze),null;case 4:return Rs(),null;case 10:return Yn(e.type),null;case 22:case 23:return qt(e),ep(),t!==null&&lt(_o),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return Yn(Qe),null;case 25:return null;default:return null}}function B0(t,e){switch($h(e),e.tag){case 3:Yn(Qe),Rs();break;case 26:case 27:case 5:su(e);break;case 4:Rs();break;case 31:e.memoizedState!==null&&qt(e);break;case 13:qt(e);break;case 19:lt(ze);break;case 10:Yn(e.type);break;case 22:case 23:qt(e),ep(),t!==null&&lt(_o);break;case 24:Yn(Qe)}}function Ba(t,e){try{var n=e.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var o=i.next;n=o;do{if((n.tag&t)===t){i=void 0;var s=n.create,r=n.inst;i=s(),r.destroy=i}n=n.next}while(n!==o)}}catch(a){Ee(e,e.return,a)}}function zi(t,e,n){try{var i=e.updateQueue,o=i!==null?i.lastEffect:null;if(o!==null){var s=o.next;i=s;do{if((i.tag&t)===t){var r=i.inst,a=r.destroy;if(a!==void 0){r.destroy=void 0,o=e;var u=n,c=a;try{c()}catch(h){Ee(o,u,h)}}}i=i.next}while(i!==s)}}catch(h){Ee(e,e.return,h)}}function F0(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{XE(e,n)}catch(i){Ee(t,t.return,i)}}}function G0(t,e,n){n.props=Ro(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(i){Ee(t,e,i)}}function Xr(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var i=t.stateNode;break;case 30:i=t.stateNode;break;default:i=t.stateNode}typeof n=="function"?t.refCleanup=n(i):n.current=i}}catch(o){Ee(t,e,o)}}function Sn(t,e){var n=t.ref,i=t.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(o){Ee(t,e,o)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(o){Ee(t,e,o)}else n.current=null}function z0(t){var e=t.type,n=t.memoizedProps,i=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(o){Ee(t,t.return,o)}}function bf(t,e,n){try{var i=t.stateNode;g1(i,t.type,n,e),i[Ut]=e}catch(o){Ee(t,t.return,o)}}function H0(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ji(t.type)||t.tag===4}function Df(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||H0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ji(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ud(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Gn));else if(i!==4&&(i===27&&ji(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(Ud(t,e,n),t=t.sibling;t!==null;)Ud(t,e,n),t=t.sibling}function vu(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(i===27&&ji(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(vu(t,e,n),t=t.sibling;t!==null;)vu(t,e,n),t=t.sibling}function Y0(t){var e=t.stateNode,n=t.memoizedProps;try{for(var i=t.type,o=e.attributes;o.length;)e.removeAttributeNode(o[0]);yt(e,i,n),e[ht]=t,e[Ut]=n}catch(s){Ee(t,t.return,s)}}var Bn=!1,Ke=!1,Pf=!1,Sy=typeof WeakSet=="function"?WeakSet:Set,st=null;function $w(t,e){if(t=t.containerInfo,Gd=xu,t=DE(t),Hh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var o=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var r=0,a=-1,u=-1,c=0,h=0,p=t,m=null;t:for(;;){for(var _;p!==n||o!==0&&p.nodeType!==3||(a=r+o),p!==s||i!==0&&p.nodeType!==3||(u=r+i),p.nodeType===3&&(r+=p.nodeValue.length),(_=p.firstChild)!==null;)m=p,p=_;for(;;){if(p===t)break t;if(m===n&&++c===o&&(a=r),m===s&&++h===i&&(u=r),(_=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=_}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(zd={focusedElem:t,selectionRange:n},xu=!1,st=e;st!==null;)if(e=st,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,st=t;else for(;st!==null;){switch(e=st,s=e.alternate,t=e.flags,e.tag){case 0:if(t&4&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)o=t[n],o.ref.impl=o.nextImpl;break;case 11:case 15:break;case 1:if(t&1024&&s!==null){t=void 0,n=e,o=s.memoizedProps,s=s.memoizedState,i=n.stateNode;try{var x=Ro(n.type,o);t=i.getSnapshotBeforeUpdate(x,s),i.__reactInternalSnapshotBeforeUpdate=t}catch(D){Ee(n,n.return,D)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)Yd(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Yd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(O(163))}if(t=e.sibling,t!==null){t.return=e.return,st=t;break}st=e.return}}function J0(t,e,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:kn(t,n),i&4&&Ba(5,n);break;case 1:if(kn(t,n),i&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(r){Ee(n,n.return,r)}else{var o=Ro(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(o,e,t.__reactInternalSnapshotBeforeUpdate)}catch(r){Ee(n,n.return,r)}}i&64&&F0(n),i&512&&Xr(n,n.return);break;case 3:if(kn(t,n),i&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{XE(t,e)}catch(r){Ee(n,n.return,r)}}break;case 27:e===null&&i&4&&Y0(n);case 26:case 5:kn(t,n),e===null&&i&4&&z0(n),i&512&&Xr(n,n.return);break;case 12:kn(t,n);break;case 31:kn(t,n),i&4&&$0(t,n);break;case 13:kn(t,n),i&4&&X0(t,n),i&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=o1.bind(null,n),C1(t,n))));break;case 22:if(i=n.memoizedState!==null||Bn,!i){e=e!==null&&e.memoizedState!==null||Ke,o=Bn;var s=Ke;Bn=i,(Ke=e)&&!s?On(t,n,(n.subtreeFlags&8772)!==0):kn(t,n),Bn=o,Ke=s}break;case 30:break;default:kn(t,n)}}function K0(t){var e=t.alternate;e!==null&&(t.alternate=null,K0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&Oh(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Ve=null,bt=!1;function Ln(t,e,n){for(n=n.child;n!==null;)Q0(t,e,n),n=n.sibling}function Q0(t,e,n){if(zt&&typeof zt.onCommitFiberUnmount=="function")try{zt.onCommitFiberUnmount(Pa,n)}catch{}switch(n.tag){case 26:Ke||Sn(n,e),Ln(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Ke||Sn(n,e);var i=Ve,o=bt;ji(n.type)&&(Ve=n.stateNode,bt=!1),Ln(t,e,n),ea(n.stateNode),Ve=i,bt=o;break;case 5:Ke||Sn(n,e);case 6:if(i=Ve,o=bt,Ve=null,Ln(t,e,n),Ve=i,bt=o,Ve!==null)if(bt)try{(Ve.nodeType===9?Ve.body:Ve.nodeName==="HTML"?Ve.ownerDocument.body:Ve).removeChild(n.stateNode)}catch(s){Ee(n,e,s)}else try{Ve.removeChild(n.stateNode)}catch(s){Ee(n,e,s)}break;case 18:Ve!==null&&(bt?(t=Ve,Uy(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),Ls(t)):Uy(Ve,n.stateNode));break;case 4:i=Ve,o=bt,Ve=n.stateNode.containerInfo,bt=!0,Ln(t,e,n),Ve=i,bt=o;break;case 0:case 11:case 14:case 15:zi(2,n,e),Ke||zi(4,n,e),Ln(t,e,n);break;case 1:Ke||(Sn(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"&&G0(n,e,i)),Ln(t,e,n);break;case 21:Ln(t,e,n);break;case 22:Ke=(i=Ke)||n.memoizedState!==null,Ln(t,e,n),Ke=i;break;default:Ln(t,e,n)}}function $0(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Ls(t)}catch(n){Ee(e,e.return,n)}}}function X0(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ls(t)}catch(n){Ee(e,e.return,n)}}function Xw(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new Sy),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new Sy),e;default:throw Error(O(435,t.tag))}}function Sl(t,e){var n=Xw(t);e.forEach(function(i){if(!n.has(i)){n.add(i);var o=s1.bind(null,t,i);i.then(o,o)}})}function Mt(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var o=n[i],s=t,r=e,a=r;e:for(;a!==null;){switch(a.tag){case 27:if(ji(a.type)){Ve=a.stateNode,bt=!1;break e}break;case 5:Ve=a.stateNode,bt=!1;break e;case 3:case 4:Ve=a.stateNode.containerInfo,bt=!0;break e}a=a.return}if(Ve===null)throw Error(O(160));Q0(s,r,o),Ve=null,bt=!1,s=o.alternate,s!==null&&(s.return=null),o.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)W0(e,t),e=e.sibling}var fn=null;function W0(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Mt(e,t),xt(t),i&4&&(zi(3,t,t.return),Ba(3,t),zi(5,t,t.return));break;case 1:Mt(e,t),xt(t),i&512&&(Ke||n===null||Sn(n,n.return)),i&64&&Bn&&(t=t.updateQueue,t!==null&&(i=t.callbacks,i!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var o=fn;if(Mt(e,t),xt(t),i&512&&(Ke||n===null||Sn(n,n.return)),i&4){var s=n!==null?n.memoizedState:null;if(i=t.memoizedState,n===null)if(i===null)if(t.stateNode===null){e:{i=t.type,n=t.memoizedProps,o=o.ownerDocument||o;t:switch(i){case"title":s=o.getElementsByTagName("title")[0],(!s||s[La]||s[ht]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=o.createElement(i),o.head.insertBefore(s,o.querySelector("head > title"))),yt(s,i,n),s[ht]=t,rt(s),i=s;break e;case"link":var r=Gy("link","href",o).get(i+(n.href||""));if(r){for(var a=0;a<r.length;a++)if(s=r[a],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){r.splice(a,1);break t}}s=o.createElement(i),yt(s,i,n),o.head.appendChild(s);break;case"meta":if(r=Gy("meta","content",o).get(i+(n.content||""))){for(a=0;a<r.length;a++)if(s=r[a],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){r.splice(a,1);break t}}s=o.createElement(i),yt(s,i,n),o.head.appendChild(s);break;default:throw Error(O(468,i))}s[ht]=t,rt(s),i=s}t.stateNode=i}else zy(o,t.type,t.stateNode);else t.stateNode=Fy(o,i,t.memoizedProps);else s!==i?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,i===null?zy(o,t.type,t.stateNode):Fy(o,i,t.memoizedProps)):i===null&&t.stateNode!==null&&bf(t,t.memoizedProps,n.memoizedProps)}break;case 27:Mt(e,t),xt(t),i&512&&(Ke||n===null||Sn(n,n.return)),n!==null&&i&4&&bf(t,t.memoizedProps,n.memoizedProps);break;case 5:if(Mt(e,t),xt(t),i&512&&(Ke||n===null||Sn(n,n.return)),t.flags&32){o=t.stateNode;try{Ns(o,"")}catch(x){Ee(t,t.return,x)}}i&4&&t.stateNode!=null&&(o=t.memoizedProps,bf(t,o,n!==null?n.memoizedProps:o)),i&1024&&(Pf=!0);break;case 6:if(Mt(e,t),xt(t),i&4){if(t.stateNode===null)throw Error(O(162));i=t.memoizedProps,n=t.stateNode;try{n.nodeValue=i}catch(x){Ee(t,t.return,x)}}break;case 3:if(Yl=null,o=fn,fn=wu(e.containerInfo),Mt(e,t),fn=o,xt(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Ls(e.containerInfo)}catch(x){Ee(t,t.return,x)}Pf&&(Pf=!1,Z0(t));break;case 4:i=fn,fn=wu(t.stateNode.containerInfo),Mt(e,t),xt(t),fn=i;break;case 12:Mt(e,t),xt(t);break;case 31:Mt(e,t),xt(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,Sl(t,i)));break;case 13:Mt(e,t),xt(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(hc=Gt()),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,Sl(t,i)));break;case 22:o=t.memoizedState!==null;var u=n!==null&&n.memoizedState!==null,c=Bn,h=Ke;if(Bn=c||o,Ke=h||u,Mt(e,t),Ke=h,Bn=c,xt(t),i&8192)e:for(e=t.stateNode,e._visibility=o?e._visibility&-2:e._visibility|1,o&&(n===null||u||Bn||Ke||fo(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){u=n=e;try{if(s=u.stateNode,o)r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none";else{a=u.stateNode;var p=u.memoizedProps.style,m=p!=null&&p.hasOwnProperty("display")?p.display:null;a.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(x){Ee(u,u.return,x)}}}else if(e.tag===6){if(n===null){u=e;try{u.stateNode.nodeValue=o?"":u.memoizedProps}catch(x){Ee(u,u.return,x)}}}else if(e.tag===18){if(n===null){u=e;try{var _=u.stateNode;o?Ly(_,!0):Ly(u.stateNode,!1)}catch(x){Ee(u,u.return,x)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}i&4&&(i=t.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,Sl(t,n))));break;case 19:Mt(e,t),xt(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,Sl(t,i)));break;case 30:break;case 21:break;default:Mt(e,t),xt(t)}}function xt(t){var e=t.flags;if(e&2){try{for(var n,i=t.return;i!==null;){if(H0(i)){n=i;break}i=i.return}if(n==null)throw Error(O(160));switch(n.tag){case 27:var o=n.stateNode,s=Df(t);vu(t,s,o);break;case 5:var r=n.stateNode;n.flags&32&&(Ns(r,""),n.flags&=-33);var a=Df(t);vu(t,a,r);break;case 3:case 4:var u=n.stateNode.containerInfo,c=Df(t);Ud(t,c,u);break;default:throw Error(O(161))}}catch(h){Ee(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Z0(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;Z0(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function kn(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)J0(t,e.alternate,e),e=e.sibling}function fo(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:zi(4,e,e.return),fo(e);break;case 1:Sn(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&G0(e,e.return,n),fo(e);break;case 27:ea(e.stateNode);case 26:case 5:Sn(e,e.return),fo(e);break;case 22:e.memoizedState===null&&fo(e);break;case 30:fo(e);break;default:fo(e)}t=t.sibling}}function On(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var i=e.alternate,o=t,s=e,r=s.flags;switch(s.tag){case 0:case 11:case 15:On(o,s,n),Ba(4,s);break;case 1:if(On(o,s,n),i=s,o=i.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(c){Ee(i,i.return,c)}if(i=s,o=i.updateQueue,o!==null){var a=i.stateNode;try{var u=o.shared.hiddenCallbacks;if(u!==null)for(o.shared.hiddenCallbacks=null,o=0;o<u.length;o++)$E(u[o],a)}catch(c){Ee(i,i.return,c)}}n&&r&64&&F0(s),Xr(s,s.return);break;case 27:Y0(s);case 26:case 5:On(o,s,n),n&&i===null&&r&4&&z0(s),Xr(s,s.return);break;case 12:On(o,s,n);break;case 31:On(o,s,n),n&&r&4&&$0(o,s);break;case 13:On(o,s,n),n&&r&4&&X0(o,s);break;case 22:s.memoizedState===null&&On(o,s,n),Xr(s,s.return);break;case 30:break;default:On(o,s,n)}e=e.sibling}}function gp(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&Oa(n))}function yp(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Oa(t))}function cn(t,e,n,i){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)j0(t,e,n,i),e=e.sibling}function j0(t,e,n,i){var o=e.flags;switch(e.tag){case 0:case 11:case 15:cn(t,e,n,i),o&2048&&Ba(9,e);break;case 1:cn(t,e,n,i);break;case 3:cn(t,e,n,i),o&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Oa(t)));break;case 12:if(o&2048){cn(t,e,n,i),t=e.stateNode;try{var s=e.memoizedProps,r=s.id,a=s.onPostCommit;typeof a=="function"&&a(r,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(u){Ee(e,e.return,u)}}else cn(t,e,n,i);break;case 31:cn(t,e,n,i);break;case 13:cn(t,e,n,i);break;case 23:break;case 22:s=e.stateNode,r=e.alternate,e.memoizedState!==null?s._visibility&2?cn(t,e,n,i):Wr(t,e):s._visibility&2?cn(t,e,n,i):(s._visibility|=2,$o(t,e,n,i,(e.subtreeFlags&10256)!==0||!1)),o&2048&&gp(r,e);break;case 24:cn(t,e,n,i),o&2048&&yp(e.alternate,e);break;default:cn(t,e,n,i)}}function $o(t,e,n,i,o){for(o=o&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var s=t,r=e,a=n,u=i,c=r.flags;switch(r.tag){case 0:case 11:case 15:$o(s,r,a,u,o),Ba(8,r);break;case 23:break;case 22:var h=r.stateNode;r.memoizedState!==null?h._visibility&2?$o(s,r,a,u,o):Wr(s,r):(h._visibility|=2,$o(s,r,a,u,o)),o&&c&2048&&gp(r.alternate,r);break;case 24:$o(s,r,a,u,o),o&&c&2048&&yp(r.alternate,r);break;default:$o(s,r,a,u,o)}e=e.sibling}}function Wr(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,i=e,o=i.flags;switch(i.tag){case 22:Wr(n,i),o&2048&&gp(i.alternate,i);break;case 24:Wr(n,i),o&2048&&yp(i.alternate,i);break;default:Wr(n,i)}e=e.sibling}}var Lr=8192;function Ko(t,e,n){if(t.subtreeFlags&Lr)for(t=t.child;t!==null;)eS(t,e,n),t=t.sibling}function eS(t,e,n){switch(t.tag){case 26:Ko(t,e,n),t.flags&Lr&&t.memoizedState!==null&&L1(n,fn,t.memoizedState,t.memoizedProps);break;case 5:Ko(t,e,n);break;case 3:case 4:var i=fn;fn=wu(t.stateNode.containerInfo),Ko(t,e,n),fn=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=Lr,Lr=16777216,Ko(t,e,n),Lr=i):Ko(t,e,n));break;default:Ko(t,e,n)}}function tS(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function Mr(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];st=i,iS(i,t)}tS(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)nS(t),t=t.sibling}function nS(t){switch(t.tag){case 0:case 11:case 15:Mr(t),t.flags&2048&&zi(9,t,t.return);break;case 3:Mr(t);break;case 12:Mr(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,zl(t)):Mr(t);break;default:Mr(t)}}function zl(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];st=i,iS(i,t)}tS(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:zi(8,e,e.return),zl(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,zl(e));break;default:zl(e)}t=t.sibling}}function iS(t,e){for(;st!==null;){var n=st;switch(n.tag){case 0:case 11:case 15:zi(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:Oa(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,st=i;else e:for(n=t;st!==null;){i=st;var o=i.sibling,s=i.return;if(K0(i),i===n){st=null;break e}if(o!==null){o.return=s,st=o;break e}st=s}}}var Ww={getCacheForType:function(t){var e=gt(Qe),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n},cacheSignal:function(){return gt(Qe).controller.signal}},Zw=typeof WeakMap=="function"?WeakMap:Map,ge=0,Ie=null,re=null,ue=0,Te=0,Ot=null,Ci=!1,Qs=!1,_p=!1,Zn=0,Fe=0,Hi=0,To=0,vp=0,Ft=0,Ds=0,Zr=null,Dt=null,Ld=!1,hc=0,oS=0,Tu=1/0,Eu=null,Di=null,Ze=0,Pi=null,Ps=null,Jn=0,kd=0,Od=null,sS=null,jr=0,qd=null;function Yt(){return ge&2&&ue!==0?ue&-ue:X.T!==null?Ep():pE()}function rS(){if(Ft===0)if(!(ue&536870912)||ce){var t=pl;pl<<=1,!(pl&3932160)&&(pl=262144),Ft=t}else Ft=536870912;return t=Qt.current,t!==null&&(t.flags|=32),Ft}function Vt(t,e,n){(t===Ie&&(Te===2||Te===9)||t.cancelPendingCommit!==null)&&(Vs(t,0),Ii(t,ue,Ft,!1)),Ua(t,n),(!(ge&2)||t!==Ie)&&(t===Ie&&(!(ge&2)&&(To|=n),Fe===4&&Ii(t,ue,Ft,!1)),Dn(t))}function aS(t,e,n){if(ge&6)throw Error(O(327));var i=!n&&(e&127)===0&&(e&t.expiredLanes)===0||Va(t,e),o=i?t1(t,e):Vf(t,e,!0),s=i;do{if(o===0){Qs&&!i&&Ii(t,e,0,!1);break}else{if(n=t.current.alternate,s&&!jw(n)){o=Vf(t,e,!1),s=!1;continue}if(o===2){if(s=e,t.errorRecoveryDisabledLanes&s)var r=0;else r=t.pendingLanes&-536870913,r=r!==0?r:r&536870912?536870912:0;if(r!==0){e=r;e:{var a=t;o=Zr;var u=a.current.memoizedState.isDehydrated;if(u&&(Vs(a,r).flags|=256),r=Vf(a,r,!1),r!==2){if(_p&&!u){a.errorRecoveryDisabledLanes|=s,To|=s,o=4;break e}s=Dt,Dt=o,s!==null&&(Dt===null?Dt=s:Dt.push.apply(Dt,s))}o=r}if(s=!1,o!==2)continue}}if(o===1){Vs(t,0),Ii(t,e,0,!0);break}e:{switch(i=t,s=o,s){case 0:case 1:throw Error(O(345));case 4:if((e&4194048)!==e)break;case 6:Ii(i,e,Ft,!Ci);break e;case 2:Dt=null;break;case 3:case 5:break;default:throw Error(O(329))}if((e&62914560)===e&&(o=hc+300-Gt(),10<o)){if(Ii(i,e,Ft,!Ci),nc(i,0,!0)!==0)break e;Jn=e,i.timeoutHandle=wS(Ay.bind(null,i,n,Dt,Eu,Ld,e,Ft,To,Ds,Ci,s,"Throttled",-0,0),o);break e}Ay(i,n,Dt,Eu,Ld,e,Ft,To,Ds,Ci,s,null,-0,0)}}break}while(!0);Dn(t)}function Ay(t,e,n,i,o,s,r,a,u,c,h,p,m,_){if(t.timeoutHandle=-1,p=e.subtreeFlags,p&8192||(p&16785408)===16785408){p={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Gn},eS(e,s,p);var x=(s&62914560)===s?hc-Gt():(s&4194048)===s?oS-Gt():0;if(x=k1(p,x),x!==null){Jn=s,t.cancelPendingCommit=x(Iy.bind(null,t,e,s,n,i,o,r,a,u,h,p,null,m,_)),Ii(t,s,r,!c);return}}Iy(t,e,s,n,i,o,r,a,u)}function jw(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var o=n[i],s=o.getSnapshot;o=o.value;try{if(!Kt(s(),o))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ii(t,e,n,i){e&=~vp,e&=~To,t.suspendedLanes|=e,t.pingedLanes&=~e,i&&(t.warmLanes|=e),i=t.expirationTimes;for(var o=e;0<o;){var s=31-Ht(o),r=1<<s;i[s]=-1,o&=~r}n!==0&&fE(t,n,e)}function pc(){return ge&6?!0:(Fa(0),!1)}function Tp(){if(re!==null){if(Te===0)var t=re.return;else t=re,zn=Lo=null,sp(t),_s=null,pa=0,t=re;for(;t!==null;)B0(t.alternate,t),t=t.return;re=null}}function Vs(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,v1(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),Jn=0,Tp(),Ie=t,re=n=Hn(t.current,null),ue=e,Te=0,Ot=null,Ci=!1,Qs=Va(t,e),_p=!1,Ds=Ft=vp=To=Hi=Fe=0,Dt=Zr=null,Ld=!1,e&8&&(e|=e&32);var i=t.entangledLanes;if(i!==0)for(t=t.entanglements,i&=e;0<i;){var o=31-Ht(i),s=1<<o;e|=t[o],i&=~s}return Zn=e,rc(),n}function lS(t,e){ne=null,X.H=ga,e===Ks||e===lc?(e=ty(),Te=3):e===Zh?(e=ty(),Te=4):Te=e===pp?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,Ot=e,re===null&&(Fe=1,yu(t,tn(e,t.current)))}function uS(){var t=Qt.current;return t===null?!0:(ue&4194048)===ue?rn===null:(ue&62914560)===ue||ue&536870912?t===rn:!1}function cS(){var t=X.H;return X.H=ga,t===null?ga:t}function fS(){var t=X.A;return X.A=Ww,t}function Su(){Fe=4,Ci||(ue&4194048)!==ue&&Qt.current!==null||(Qs=!0),!(Hi&134217727)&&!(To&134217727)||Ie===null||Ii(Ie,ue,Ft,!1)}function Vf(t,e,n){var i=ge;ge|=2;var o=cS(),s=fS();(Ie!==t||ue!==e)&&(Eu=null,Vs(t,e)),e=!1;var r=Fe;e:do try{if(Te!==0&&re!==null){var a=re,u=Ot;switch(Te){case 8:Tp(),r=6;break e;case 3:case 2:case 9:case 6:Qt.current===null&&(e=!0);var c=Te;if(Te=0,Ot=null,ds(t,a,u,c),n&&Qs){r=0;break e}break;default:c=Te,Te=0,Ot=null,ds(t,a,u,c)}}e1(),r=Fe;break}catch(h){lS(t,h)}while(!0);return e&&t.shellSuspendCounter++,zn=Lo=null,ge=i,X.H=o,X.A=s,re===null&&(Ie=null,ue=0,rc()),r}function e1(){for(;re!==null;)dS(re)}function t1(t,e){var n=ge;ge|=2;var i=cS(),o=fS();Ie!==t||ue!==e?(Eu=null,Tu=Gt()+500,Vs(t,e)):Qs=Va(t,e);e:do try{if(Te!==0&&re!==null){e=re;var s=Ot;t:switch(Te){case 1:Te=0,Ot=null,ds(t,e,s,1);break;case 2:case 9:if(ey(s)){Te=0,Ot=null,Cy(e);break}e=function(){Te!==2&&Te!==9||Ie!==t||(Te=7),Dn(t)},s.then(e,e);break e;case 3:Te=7;break e;case 4:Te=5;break e;case 7:ey(s)?(Te=0,Ot=null,Cy(e)):(Te=0,Ot=null,ds(t,e,s,7));break;case 5:var r=null;switch(re.tag){case 26:r=re.memoizedState;case 5:case 27:var a=re;if(r?DS(r):a.stateNode.complete){Te=0,Ot=null;var u=a.sibling;if(u!==null)re=u;else{var c=a.return;c!==null?(re=c,mc(c)):re=null}break t}}Te=0,Ot=null,ds(t,e,s,5);break;case 6:Te=0,Ot=null,ds(t,e,s,6);break;case 8:Tp(),Fe=6;break e;default:throw Error(O(462))}}n1();break}catch(h){lS(t,h)}while(!0);return zn=Lo=null,X.H=i,X.A=o,ge=n,re!==null?0:(Ie=null,ue=0,rc(),Fe)}function n1(){for(;re!==null&&!IR();)dS(re)}function dS(t){var e=q0(t.alternate,t,Zn);t.memoizedProps=t.pendingProps,e===null?mc(t):re=e}function Cy(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=yy(n,e,e.pendingProps,e.type,void 0,ue);break;case 11:e=yy(n,e,e.pendingProps,e.type.render,e.ref,ue);break;case 5:sp(e);default:B0(n,e),e=re=BE(e,Zn),e=q0(n,e,Zn)}t.memoizedProps=t.pendingProps,e===null?mc(t):re=e}function ds(t,e,n,i){zn=Lo=null,sp(e),_s=null,pa=0;var o=e.return;try{if(Hw(t,o,e,n,ue)){Fe=1,yu(t,tn(n,t.current)),re=null;return}}catch(s){if(o!==null)throw re=o,s;Fe=1,yu(t,tn(n,t.current)),re=null;return}e.flags&32768?(ce||i===1?t=!0:Qs||ue&536870912?t=!1:(Ci=t=!0,(i===2||i===9||i===3||i===6)&&(i=Qt.current,i!==null&&i.tag===13&&(i.flags|=16384))),hS(e,t)):mc(e)}function mc(t){var e=t;do{if(e.flags&32768){hS(e,Ci);return}t=e.return;var n=Kw(e.alternate,e,Zn);if(n!==null){re=n;return}if(e=e.sibling,e!==null){re=e;return}re=e=t}while(e!==null);Fe===0&&(Fe=5)}function hS(t,e){do{var n=Qw(t.alternate,t);if(n!==null){n.flags&=32767,re=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){re=t;return}re=t=n}while(t!==null);Fe=6,re=null}function Iy(t,e,n,i,o,s,r,a,u){t.cancelPendingCommit=null;do gc();while(Ze!==0);if(ge&6)throw Error(O(327));if(e!==null){if(e===t.current)throw Error(O(177));if(s=e.lanes|e.childLanes,s|=Yh,UR(t,n,s,r,a,u),t===Ie&&(re=Ie=null,ue=0),Ps=e,Pi=t,Jn=n,kd=s,Od=o,sS=i,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,r1(ru,function(){return _S(),null})):(t.callbackNode=null,t.callbackPriority=0),i=(e.flags&13878)!==0,e.subtreeFlags&13878||i){i=X.T,X.T=null,o=ye.p,ye.p=2,r=ge,ge|=4;try{$w(t,e,n)}finally{ge=r,ye.p=o,X.T=i}}Ze=1,pS(),mS(),gS()}}function pS(){if(Ze===1){Ze=0;var t=Pi,e=Ps,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=X.T,X.T=null;var i=ye.p;ye.p=2;var o=ge;ge|=4;try{W0(e,t);var s=zd,r=DE(t.containerInfo),a=s.focusedElem,u=s.selectionRange;if(r!==a&&a&&a.ownerDocument&&bE(a.ownerDocument.documentElement,a)){if(u!==null&&Hh(a)){var c=u.start,h=u.end;if(h===void 0&&(h=c),"selectionStart"in a)a.selectionStart=c,a.selectionEnd=Math.min(h,a.value.length);else{var p=a.ownerDocument||document,m=p&&p.defaultView||window;if(m.getSelection){var _=m.getSelection(),x=a.textContent.length,D=Math.min(u.start,x),V=u.end===void 0?D:Math.min(u.end,x);!_.extend&&D>V&&(r=V,V=D,D=r);var C=Kg(a,D),E=Kg(a,V);if(C&&E&&(_.rangeCount!==1||_.anchorNode!==C.node||_.anchorOffset!==C.offset||_.focusNode!==E.node||_.focusOffset!==E.offset)){var I=p.createRange();I.setStart(C.node,C.offset),_.removeAllRanges(),D>V?(_.addRange(I),_.extend(E.node,E.offset)):(I.setEnd(E.node,E.offset),_.addRange(I))}}}}for(p=[],_=a;_=_.parentNode;)_.nodeType===1&&p.push({element:_,left:_.scrollLeft,top:_.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<p.length;a++){var b=p[a];b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}xu=!!Gd,zd=Gd=null}finally{ge=o,ye.p=i,X.T=n}}t.current=e,Ze=2}}function mS(){if(Ze===2){Ze=0;var t=Pi,e=Ps,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=X.T,X.T=null;var i=ye.p;ye.p=2;var o=ge;ge|=4;try{J0(t,e.alternate,e)}finally{ge=o,ye.p=i,X.T=n}}Ze=3}}function gS(){if(Ze===4||Ze===3){Ze=0,RR();var t=Pi,e=Ps,n=Jn,i=sS;e.subtreeFlags&10256||e.flags&10256?Ze=5:(Ze=0,Ps=Pi=null,yS(t,t.pendingLanes));var o=t.pendingLanes;if(o===0&&(Di=null),kh(n),e=e.stateNode,zt&&typeof zt.onCommitFiberRoot=="function")try{zt.onCommitFiberRoot(Pa,e,void 0,(e.current.flags&128)===128)}catch{}if(i!==null){e=X.T,o=ye.p,ye.p=2,X.T=null;try{for(var s=t.onRecoverableError,r=0;r<i.length;r++){var a=i[r];s(a.value,{componentStack:a.stack})}}finally{X.T=e,ye.p=o}}Jn&3&&gc(),Dn(t),o=t.pendingLanes,n&261930&&o&42?t===qd?jr++:(jr=0,qd=t):jr=0,Fa(0)}}function yS(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,Oa(e)))}function gc(){return pS(),mS(),gS(),_S()}function _S(){if(Ze!==5)return!1;var t=Pi,e=kd;kd=0;var n=kh(Jn),i=X.T,o=ye.p;try{ye.p=32>n?32:n,X.T=null,n=Od,Od=null;var s=Pi,r=Jn;if(Ze=0,Ps=Pi=null,Jn=0,ge&6)throw Error(O(331));var a=ge;if(ge|=4,nS(s.current),j0(s,s.current,r,n),ge=a,Fa(0,!1),zt&&typeof zt.onPostCommitFiberRoot=="function")try{zt.onPostCommitFiberRoot(Pa,s)}catch{}return!0}finally{ye.p=o,X.T=i,yS(t,e)}}function Ry(t,e,n){e=tn(n,e),e=Dd(t.stateNode,e,2),t=bi(t,e,2),t!==null&&(Ua(t,2),Dn(t))}function Ee(t,e,n){if(t.tag===3)Ry(t,t,n);else for(;e!==null;){if(e.tag===3){Ry(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Di===null||!Di.has(i))){t=tn(n,t),n=P0(2),i=bi(e,n,2),i!==null&&(V0(n,i,e,t),Ua(i,2),Dn(i));break}}e=e.return}}function Uf(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new Zw;var o=new Set;i.set(e,o)}else o=i.get(e),o===void 0&&(o=new Set,i.set(e,o));o.has(n)||(_p=!0,o.add(n),t=i1.bind(null,t,e,n),e.then(t,t))}function i1(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,Ie===t&&(ue&n)===n&&(Fe===4||Fe===3&&(ue&62914560)===ue&&300>Gt()-hc?!(ge&2)&&Vs(t,0):vp|=n,Ds===ue&&(Ds=0)),Dn(t)}function vS(t,e){e===0&&(e=cE()),t=Uo(t,e),t!==null&&(Ua(t,e),Dn(t))}function o1(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),vS(t,n)}function s1(t,e){var n=0;switch(t.tag){case 31:case 13:var i=t.stateNode,o=t.memoizedState;o!==null&&(n=o.retryLane);break;case 19:i=t.stateNode;break;case 22:i=t.stateNode._retryCache;break;default:throw Error(O(314))}i!==null&&i.delete(e),vS(t,n)}function r1(t,e){return Uh(t,e)}var Au=null,Xo=null,Bd=!1,Cu=!1,Lf=!1,Ri=0;function Dn(t){t!==Xo&&t.next===null&&(Xo===null?Au=Xo=t:Xo=Xo.next=t),Cu=!0,Bd||(Bd=!0,l1())}function Fa(t,e){if(!Lf&&Cu){Lf=!0;do for(var n=!1,i=Au;i!==null;){if(t!==0){var o=i.pendingLanes;if(o===0)var s=0;else{var r=i.suspendedLanes,a=i.pingedLanes;s=(1<<31-Ht(42|t)+1)-1,s&=o&~(r&~a),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,wy(i,s))}else s=ue,s=nc(i,i===Ie?s:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(s&3)||Va(i,s)||(n=!0,wy(i,s));i=i.next}while(n);Lf=!1}}function a1(){TS()}function TS(){Cu=Bd=!1;var t=0;Ri!==0&&_1()&&(t=Ri);for(var e=Gt(),n=null,i=Au;i!==null;){var o=i.next,s=ES(i,e);s===0?(i.next=null,n===null?Au=o:n.next=o,o===null&&(Xo=n)):(n=i,(t!==0||s&3)&&(Cu=!0)),i=o}Ze!==0&&Ze!==5||Fa(t),Ri!==0&&(Ri=0)}function ES(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,o=t.expirationTimes,s=t.pendingLanes&-62914561;0<s;){var r=31-Ht(s),a=1<<r,u=o[r];u===-1?(!(a&n)||a&i)&&(o[r]=VR(a,e)):u<=e&&(t.expiredLanes|=a),s&=~a}if(e=Ie,n=ue,n=nc(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i=t.callbackNode,n===0||t===e&&(Te===2||Te===9)||t.cancelPendingCommit!==null)return i!==null&&i!==null&&cf(i),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||Va(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(i!==null&&cf(i),kh(n)){case 2:case 8:n=lE;break;case 32:n=ru;break;case 268435456:n=uE;break;default:n=ru}return i=SS.bind(null,t),n=Uh(n,i),t.callbackPriority=e,t.callbackNode=n,e}return i!==null&&i!==null&&cf(i),t.callbackPriority=2,t.callbackNode=null,2}function SS(t,e){if(Ze!==0&&Ze!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(gc()&&t.callbackNode!==n)return null;var i=ue;return i=nc(t,t===Ie?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i===0?null:(aS(t,i,e),ES(t,Gt()),t.callbackNode!=null&&t.callbackNode===n?SS.bind(null,t):null)}function wy(t,e){if(gc())return null;aS(t,e,!0)}function l1(){T1(function(){ge&6?Uh(aE,a1):TS()})}function Ep(){if(Ri===0){var t=Ms;t===0&&(t=hl,hl<<=1,!(hl&261888)&&(hl=256)),Ri=t}return Ri}function Ny(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Vl(""+t)}function My(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function u1(t,e,n,i,o){if(e==="submit"&&n&&n.stateNode===o){var s=Ny((o[Ut]||null).action),r=i.submitter;r&&(e=(e=r[Ut]||null)?Ny(e.formAction):r.getAttribute("formAction"),e!==null&&(s=e,r=null));var a=new ic("action","action",null,i,o);t.push({event:a,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Ri!==0){var u=r?My(o,r):new FormData(o);xd(n,{pending:!0,data:u,method:o.method,action:s},null,u)}}else typeof s=="function"&&(a.preventDefault(),u=r?My(o,r):new FormData(o),xd(n,{pending:!0,data:u,method:o.method,action:s},s,u))},currentTarget:o}]})}}for(var kf=0;kf<_d.length;kf++){var Of=_d[kf],c1=Of.toLowerCase(),f1=Of[0].toUpperCase()+Of.slice(1);hn(c1,"on"+f1)}hn(VE,"onAnimationEnd");hn(UE,"onAnimationIteration");hn(LE,"onAnimationStart");hn("dblclick","onDoubleClick");hn("focusin","onFocus");hn("focusout","onBlur");hn(ww,"onTransitionRun");hn(Nw,"onTransitionStart");hn(Mw,"onTransitionCancel");hn(kE,"onTransitionEnd");ws("onMouseEnter",["mouseout","mouseover"]);ws("onMouseLeave",["mouseout","mouseover"]);ws("onPointerEnter",["pointerout","pointerover"]);ws("onPointerLeave",["pointerout","pointerover"]);Do("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Do("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Do("onBeforeInput",["compositionend","keypress","textInput","paste"]);Do("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Do("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Do("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ya="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),d1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ya));function AS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],o=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var r=i.length-1;0<=r;r--){var a=i[r],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==s&&o.isPropagationStopped())break e;s=a,o.currentTarget=c;try{s(o)}catch(h){lu(h)}o.currentTarget=null,s=u}else for(r=0;r<i.length;r++){if(a=i[r],u=a.instance,c=a.currentTarget,a=a.listener,u!==s&&o.isPropagationStopped())break e;s=a,o.currentTarget=c;try{s(o)}catch(h){lu(h)}o.currentTarget=null,s=u}}}}function oe(t,e){var n=e[cd];n===void 0&&(n=e[cd]=new Set);var i=t+"__bubble";n.has(i)||(CS(e,t,2,!1),n.add(i))}function qf(t,e,n){var i=0;e&&(i|=4),CS(n,t,i,e)}var Al="_reactListening"+Math.random().toString(36).slice(2);function Sp(t){if(!t[Al]){t[Al]=!0,mE.forEach(function(n){n!=="selectionchange"&&(d1.has(n)||qf(n,!1,t),qf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Al]||(e[Al]=!0,qf("selectionchange",!1,e))}}function CS(t,e,n,i){switch(kS(e)){case 2:var o=B1;break;case 8:o=F1;break;default:o=Rp}n=o.bind(null,e,n,t),o=void 0,!md||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),i?o!==void 0?t.addEventListener(e,n,{capture:!0,passive:o}):t.addEventListener(e,n,!0):o!==void 0?t.addEventListener(e,n,{passive:o}):t.addEventListener(e,n,!1)}function Bf(t,e,n,i,o){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var r=i.tag;if(r===3||r===4){var a=i.stateNode.containerInfo;if(a===o)break;if(r===4)for(r=i.return;r!==null;){var u=r.tag;if((u===3||u===4)&&r.stateNode.containerInfo===o)return;r=r.return}for(;a!==null;){if(r=is(a),r===null)return;if(u=r.tag,u===5||u===6||u===26||u===27){i=s=r;continue e}a=a.parentNode}}i=i.return}AE(function(){var c=s,h=Bh(n),p=[];e:{var m=OE.get(t);if(m!==void 0){var _=ic,x=t;switch(t){case"keypress":if(Ll(n)===0)break e;case"keydown":case"keyup":_=sw;break;case"focusin":x="focus",_=mf;break;case"focusout":x="blur",_=mf;break;case"beforeblur":case"afterblur":_=mf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=kg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=KR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=lw;break;case VE:case UE:case LE:_=XR;break;case kE:_=cw;break;case"scroll":case"scrollend":_=YR;break;case"wheel":_=dw;break;case"copy":case"cut":case"paste":_=ZR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=qg;break;case"toggle":case"beforetoggle":_=pw}var D=(e&4)!==0,V=!D&&(t==="scroll"||t==="scrollend"),C=D?m!==null?m+"Capture":null:m;D=[];for(var E=c,I;E!==null;){var b=E;if(I=b.stateNode,b=b.tag,b!==5&&b!==26&&b!==27||I===null||C===null||(b=ua(E,C),b!=null&&D.push(_a(E,b,I))),V)break;E=E.return}0<D.length&&(m=new _(m,x,null,n,h),p.push({event:m,listeners:D}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",m&&n!==pd&&(x=n.relatedTarget||n.fromElement)&&(is(x)||x[Hs]))break e;if((_||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,_?(x=n.relatedTarget||n.toElement,_=c,x=x?is(x):null,x!==null&&(V=Da(x),D=x.tag,x!==V||D!==5&&D!==27&&D!==6)&&(x=null)):(_=null,x=c),_!==x)){if(D=kg,b="onMouseLeave",C="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(D=qg,b="onPointerLeave",C="onPointerEnter",E="pointer"),V=_==null?m:Vr(_),I=x==null?m:Vr(x),m=new D(b,E+"leave",_,n,h),m.target=V,m.relatedTarget=I,b=null,is(h)===c&&(D=new D(C,E+"enter",x,n,h),D.target=I,D.relatedTarget=V,b=D),V=b,_&&x)t:{for(D=h1,C=_,E=x,I=0,b=C;b;b=D(b))I++;b=0;for(var k=E;k;k=D(k))b++;for(;0<I-b;)C=D(C),I--;for(;0<b-I;)E=D(E),b--;for(;I--;){if(C===E||E!==null&&C===E.alternate){D=C;break t}C=D(C),E=D(E)}D=null}else D=null;_!==null&&xy(p,m,_,D,!1),x!==null&&V!==null&&xy(p,V,x,D,!0)}}e:{if(m=c?Vr(c):window,_=m.nodeName&&m.nodeName.toLowerCase(),_==="select"||_==="input"&&m.type==="file")var B=zg;else if(Gg(m))if(ME)B=Cw;else{B=Sw;var A=Ew}else _=m.nodeName,!_||_.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?c&&qh(c.elementType)&&(B=zg):B=Aw;if(B&&(B=B(t,c))){NE(p,B,n,h);break e}A&&A(t,m,c),t==="focusout"&&c&&m.type==="number"&&c.memoizedProps.value!=null&&hd(m,"number",m.value)}switch(A=c?Vr(c):window,t){case"focusin":(Gg(A)||A.contentEditable==="true")&&(rs=A,gd=c,Hr=null);break;case"focusout":Hr=gd=rs=null;break;case"mousedown":yd=!0;break;case"contextmenu":case"mouseup":case"dragend":yd=!1,Qg(p,n,h);break;case"selectionchange":if(Rw)break;case"keydown":case"keyup":Qg(p,n,h)}var S;if(zh)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else ss?RE(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(IE&&n.locale!=="ko"&&(ss||T!=="onCompositionStart"?T==="onCompositionEnd"&&ss&&(S=CE()):(Ai=h,Fh="value"in Ai?Ai.value:Ai.textContent,ss=!0)),A=Iu(c,T),0<A.length&&(T=new Og(T,t,null,n,h),p.push({event:T,listeners:A}),S?T.data=S:(S=wE(n),S!==null&&(T.data=S)))),(S=gw?yw(t,n):_w(t,n))&&(T=Iu(c,"onBeforeInput"),0<T.length&&(A=new Og("onBeforeInput","beforeinput",null,n,h),p.push({event:A,listeners:T}),A.data=S)),u1(p,t,c,n,h)}AS(p,e)})}function _a(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Iu(t,e){for(var n=e+"Capture",i=[];t!==null;){var o=t,s=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||s===null||(o=ua(t,n),o!=null&&i.unshift(_a(t,o,s)),o=ua(t,e),o!=null&&i.push(_a(t,o,s))),t.tag===3)return i;t=t.return}return[]}function h1(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function xy(t,e,n,i,o){for(var s=e._reactName,r=[];n!==null&&n!==i;){var a=n,u=a.alternate,c=a.stateNode;if(a=a.tag,u!==null&&u===i)break;a!==5&&a!==26&&a!==27||c===null||(u=c,o?(c=ua(n,s),c!=null&&r.unshift(_a(n,c,u))):o||(c=ua(n,s),c!=null&&r.push(_a(n,c,u)))),n=n.return}r.length!==0&&t.push({event:e,listeners:r})}var p1=/\r\n?/g,m1=/\u0000|\uFFFD/g;function by(t){return(typeof t=="string"?t:""+t).replace(p1,`
`).replace(m1,"")}function IS(t,e){return e=by(e),by(t)===e}function Se(t,e,n,i,o,s){switch(n){case"children":typeof i=="string"?e==="body"||e==="textarea"&&i===""||Ns(t,i):(typeof i=="number"||typeof i=="bigint")&&e!=="body"&&Ns(t,""+i);break;case"className":gl(t,"class",i);break;case"tabIndex":gl(t,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":gl(t,n,i);break;case"style":SE(t,i,s);break;case"data":if(e!=="object"){gl(t,"data",i);break}case"src":case"href":if(i===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=Vl(""+i),t.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(e!=="input"&&Se(t,e,"name",o.name,o,null),Se(t,e,"formEncType",o.formEncType,o,null),Se(t,e,"formMethod",o.formMethod,o,null),Se(t,e,"formTarget",o.formTarget,o,null)):(Se(t,e,"encType",o.encType,o,null),Se(t,e,"method",o.method,o,null),Se(t,e,"target",o.target,o,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=Vl(""+i),t.setAttribute(n,i);break;case"onClick":i!=null&&(t.onclick=Gn);break;case"onScroll":i!=null&&oe("scroll",t);break;case"onScrollEnd":i!=null&&oe("scrollend",t);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(O(61));if(n=i.__html,n!=null){if(o.children!=null)throw Error(O(60));t.innerHTML=n}}break;case"multiple":t.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":t.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){t.removeAttribute("xlink:href");break}n=Vl(""+i),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""+i):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":i===!0?t.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,i):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?t.setAttribute(n,i):t.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?t.removeAttribute(n):t.setAttribute(n,i);break;case"popover":oe("beforetoggle",t),oe("toggle",t),Pl(t,"popover",i);break;case"xlinkActuate":Vn(t,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":Vn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":Vn(t,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":Vn(t,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":Vn(t,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":Vn(t,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":Vn(t,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":Vn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":Vn(t,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Pl(t,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=zR.get(n)||n,Pl(t,n,i))}}function Fd(t,e,n,i,o,s){switch(n){case"style":SE(t,i,s);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(O(61));if(n=i.__html,n!=null){if(o.children!=null)throw Error(O(60));t.innerHTML=n}}break;case"children":typeof i=="string"?Ns(t,i):(typeof i=="number"||typeof i=="bigint")&&Ns(t,""+i);break;case"onScroll":i!=null&&oe("scroll",t);break;case"onScrollEnd":i!=null&&oe("scrollend",t);break;case"onClick":i!=null&&(t.onclick=Gn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!gE.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(o=n.endsWith("Capture"),e=n.slice(2,o?n.length-7:void 0),s=t[Ut]||null,s=s!=null?s[n]:null,typeof s=="function"&&t.removeEventListener(e,s,o),typeof i=="function")){typeof s!="function"&&s!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,i,o);break e}n in t?t[n]=i:i===!0?t.setAttribute(n,""):Pl(t,n,i)}}}function yt(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":oe("error",t),oe("load",t);var i=!1,o=!1,s;for(s in n)if(n.hasOwnProperty(s)){var r=n[s];if(r!=null)switch(s){case"src":i=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(O(137,e));default:Se(t,e,s,r,n,null)}}o&&Se(t,e,"srcSet",n.srcSet,n,null),i&&Se(t,e,"src",n.src,n,null);return;case"input":oe("invalid",t);var a=s=r=o=null,u=null,c=null;for(i in n)if(n.hasOwnProperty(i)){var h=n[i];if(h!=null)switch(i){case"name":o=h;break;case"type":r=h;break;case"checked":u=h;break;case"defaultChecked":c=h;break;case"value":s=h;break;case"defaultValue":a=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(O(137,e));break;default:Se(t,e,i,h,n,null)}}vE(t,s,a,u,c,r,o,!1);return;case"select":oe("invalid",t),i=r=s=null;for(o in n)if(n.hasOwnProperty(o)&&(a=n[o],a!=null))switch(o){case"value":s=a;break;case"defaultValue":r=a;break;case"multiple":i=a;default:Se(t,e,o,a,n,null)}e=s,n=r,t.multiple=!!i,e!=null?ms(t,!!i,e,!1):n!=null&&ms(t,!!i,n,!0);return;case"textarea":oe("invalid",t),s=o=i=null;for(r in n)if(n.hasOwnProperty(r)&&(a=n[r],a!=null))switch(r){case"value":i=a;break;case"defaultValue":o=a;break;case"children":s=a;break;case"dangerouslySetInnerHTML":if(a!=null)throw Error(O(91));break;default:Se(t,e,r,a,n,null)}EE(t,i,o,s);return;case"option":for(u in n)if(n.hasOwnProperty(u)&&(i=n[u],i!=null))switch(u){case"selected":t.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:Se(t,e,u,i,n,null)}return;case"dialog":oe("beforetoggle",t),oe("toggle",t),oe("cancel",t),oe("close",t);break;case"iframe":case"object":oe("load",t);break;case"video":case"audio":for(i=0;i<ya.length;i++)oe(ya[i],t);break;case"image":oe("error",t),oe("load",t);break;case"details":oe("toggle",t);break;case"embed":case"source":case"link":oe("error",t),oe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&(i=n[c],i!=null))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(O(137,e));default:Se(t,e,c,i,n,null)}return;default:if(qh(e)){for(h in n)n.hasOwnProperty(h)&&(i=n[h],i!==void 0&&Fd(t,e,h,i,n,void 0));return}}for(a in n)n.hasOwnProperty(a)&&(i=n[a],i!=null&&Se(t,e,a,i,n,null))}function g1(t,e,n,i){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,s=null,r=null,a=null,u=null,c=null,h=null;for(_ in n){var p=n[_];if(n.hasOwnProperty(_)&&p!=null)switch(_){case"checked":break;case"value":break;case"defaultValue":u=p;default:i.hasOwnProperty(_)||Se(t,e,_,null,i,p)}}for(var m in i){var _=i[m];if(p=n[m],i.hasOwnProperty(m)&&(_!=null||p!=null))switch(m){case"type":s=_;break;case"name":o=_;break;case"checked":c=_;break;case"defaultChecked":h=_;break;case"value":r=_;break;case"defaultValue":a=_;break;case"children":case"dangerouslySetInnerHTML":if(_!=null)throw Error(O(137,e));break;default:_!==p&&Se(t,e,m,_,i,p)}}dd(t,r,a,u,c,h,s,o);return;case"select":_=r=a=m=null;for(s in n)if(u=n[s],n.hasOwnProperty(s)&&u!=null)switch(s){case"value":break;case"multiple":_=u;default:i.hasOwnProperty(s)||Se(t,e,s,null,i,u)}for(o in i)if(s=i[o],u=n[o],i.hasOwnProperty(o)&&(s!=null||u!=null))switch(o){case"value":m=s;break;case"defaultValue":a=s;break;case"multiple":r=s;default:s!==u&&Se(t,e,o,s,i,u)}e=a,n=r,i=_,m!=null?ms(t,!!n,m,!1):!!i!=!!n&&(e!=null?ms(t,!!n,e,!0):ms(t,!!n,n?[]:"",!1));return;case"textarea":_=m=null;for(a in n)if(o=n[a],n.hasOwnProperty(a)&&o!=null&&!i.hasOwnProperty(a))switch(a){case"value":break;case"children":break;default:Se(t,e,a,null,i,o)}for(r in i)if(o=i[r],s=n[r],i.hasOwnProperty(r)&&(o!=null||s!=null))switch(r){case"value":m=o;break;case"defaultValue":_=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(O(91));break;default:o!==s&&Se(t,e,r,o,i,s)}TE(t,m,_);return;case"option":for(var x in n)if(m=n[x],n.hasOwnProperty(x)&&m!=null&&!i.hasOwnProperty(x))switch(x){case"selected":t.selected=!1;break;default:Se(t,e,x,null,i,m)}for(u in i)if(m=i[u],_=n[u],i.hasOwnProperty(u)&&m!==_&&(m!=null||_!=null))switch(u){case"selected":t.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:Se(t,e,u,m,i,_)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var D in n)m=n[D],n.hasOwnProperty(D)&&m!=null&&!i.hasOwnProperty(D)&&Se(t,e,D,null,i,m);for(c in i)if(m=i[c],_=n[c],i.hasOwnProperty(c)&&m!==_&&(m!=null||_!=null))switch(c){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(O(137,e));break;default:Se(t,e,c,m,i,_)}return;default:if(qh(e)){for(var V in n)m=n[V],n.hasOwnProperty(V)&&m!==void 0&&!i.hasOwnProperty(V)&&Fd(t,e,V,void 0,i,m);for(h in i)m=i[h],_=n[h],!i.hasOwnProperty(h)||m===_||m===void 0&&_===void 0||Fd(t,e,h,m,i,_);return}}for(var C in n)m=n[C],n.hasOwnProperty(C)&&m!=null&&!i.hasOwnProperty(C)&&Se(t,e,C,null,i,m);for(p in i)m=i[p],_=n[p],!i.hasOwnProperty(p)||m===_||m==null&&_==null||Se(t,e,p,m,i,_)}function Dy(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function y1(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,n=performance.getEntriesByType("resource"),i=0;i<n.length;i++){var o=n[i],s=o.transferSize,r=o.initiatorType,a=o.duration;if(s&&a&&Dy(r)){for(r=0,a=o.responseEnd,i+=1;i<n.length;i++){var u=n[i],c=u.startTime;if(c>a)break;var h=u.transferSize,p=u.initiatorType;h&&Dy(p)&&(u=u.responseEnd,r+=h*(u<a?1:(a-c)/(u-c)))}if(--i,e+=8*(s+r)/(o.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Gd=null,zd=null;function Ru(t){return t.nodeType===9?t:t.ownerDocument}function Py(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function RS(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function Hd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ff=null;function _1(){var t=window.event;return t&&t.type==="popstate"?t===Ff?!1:(Ff=t,!0):(Ff=null,!1)}var wS=typeof setTimeout=="function"?setTimeout:void 0,v1=typeof clearTimeout=="function"?clearTimeout:void 0,Vy=typeof Promise=="function"?Promise:void 0,T1=typeof queueMicrotask=="function"?queueMicrotask:typeof Vy<"u"?function(t){return Vy.resolve(null).then(t).catch(E1)}:wS;function E1(t){setTimeout(function(){throw t})}function ji(t){return t==="head"}function Uy(t,e){var n=e,i=0;do{var o=n.nextSibling;if(t.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"||n==="/&"){if(i===0){t.removeChild(o),Ls(e);return}i--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")i++;else if(n==="html")ea(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,ea(n);for(var s=n.firstChild;s;){var r=s.nextSibling,a=s.nodeName;s[La]||a==="SCRIPT"||a==="STYLE"||a==="LINK"&&s.rel.toLowerCase()==="stylesheet"||n.removeChild(s),s=r}}else n==="body"&&ea(t.ownerDocument.body);n=o}while(n);Ls(e)}function Ly(t,e){var n=t;t=0;do{var i=n.nextSibling;if(n.nodeType===1?e?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(e?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=i}while(n)}function Yd(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Yd(n),Oh(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function S1(t,e,n,i){for(;t.nodeType===1;){var o=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!i&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(i){if(!t[La])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(s=t.getAttribute("rel"),s==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(s!==o.rel||t.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||t.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||t.getAttribute("title")!==(o.title==null?null:o.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(s=t.getAttribute("src"),(s!==(o.src==null?null:o.src)||t.getAttribute("type")!==(o.type==null?null:o.type)||t.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&s&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var s=o.name==null?null:""+o.name;if(o.type==="hidden"&&t.getAttribute("name")===s)return t}else return t;if(t=an(t.nextSibling),t===null)break}return null}function A1(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=an(t.nextSibling),t===null))return null;return t}function NS(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=an(t.nextSibling),t===null))return null;return t}function Jd(t){return t.data==="$?"||t.data==="$~"}function Kd(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function C1(t,e){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||n.readyState!=="loading")e();else{var i=function(){e(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),t._reactRetry=i}}function an(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var Qd=null;function ky(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(e===0)return an(t.nextSibling);e--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||e++}t=t.nextSibling}return null}function Oy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(e===0)return t;e--}else n!=="/$"&&n!=="/&"||e++}t=t.previousSibling}return null}function MS(t,e,n){switch(e=Ru(n),t){case"html":if(t=e.documentElement,!t)throw Error(O(452));return t;case"head":if(t=e.head,!t)throw Error(O(453));return t;case"body":if(t=e.body,!t)throw Error(O(454));return t;default:throw Error(O(451))}}function ea(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);Oh(t)}var un=new Map,qy=new Set;function wu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var oi=ye.d;ye.d={f:I1,r:R1,D:w1,C:N1,L:M1,m:x1,X:D1,S:b1,M:P1};function I1(){var t=oi.f(),e=pc();return t||e}function R1(t){var e=Ys(t);e!==null&&e.tag===5&&e.type==="form"?S0(e):oi.r(t)}var $s=typeof document>"u"?null:document;function xS(t,e,n){var i=$s;if(i&&typeof e=="string"&&e){var o=en(e);o='link[rel="'+t+'"][href="'+o+'"]',typeof n=="string"&&(o+='[crossorigin="'+n+'"]'),qy.has(o)||(qy.add(o),t={rel:t,crossOrigin:n,href:e},i.querySelector(o)===null&&(e=i.createElement("link"),yt(e,"link",t),rt(e),i.head.appendChild(e)))}}function w1(t){oi.D(t),xS("dns-prefetch",t,null)}function N1(t,e){oi.C(t,e),xS("preconnect",t,e)}function M1(t,e,n){oi.L(t,e,n);var i=$s;if(i&&t&&e){var o='link[rel="preload"][as="'+en(e)+'"]';e==="image"&&n&&n.imageSrcSet?(o+='[imagesrcset="'+en(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(o+='[imagesizes="'+en(n.imageSizes)+'"]')):o+='[href="'+en(t)+'"]';var s=o;switch(e){case"style":s=Us(t);break;case"script":s=Xs(t)}un.has(s)||(t=Pe({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),un.set(s,t),i.querySelector(o)!==null||e==="style"&&i.querySelector(Ga(s))||e==="script"&&i.querySelector(za(s))||(e=i.createElement("link"),yt(e,"link",t),rt(e),i.head.appendChild(e)))}}function x1(t,e){oi.m(t,e);var n=$s;if(n&&t){var i=e&&typeof e.as=="string"?e.as:"script",o='link[rel="modulepreload"][as="'+en(i)+'"][href="'+en(t)+'"]',s=o;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Xs(t)}if(!un.has(s)&&(t=Pe({rel:"modulepreload",href:t},e),un.set(s,t),n.querySelector(o)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(za(s)))return}i=n.createElement("link"),yt(i,"link",t),rt(i),n.head.appendChild(i)}}}function b1(t,e,n){oi.S(t,e,n);var i=$s;if(i&&t){var o=ps(i).hoistableStyles,s=Us(t);e=e||"default";var r=o.get(s);if(!r){var a={loading:0,preload:null};if(r=i.querySelector(Ga(s)))a.loading=5;else{t=Pe({rel:"stylesheet",href:t,"data-precedence":e},n),(n=un.get(s))&&Ap(t,n);var u=r=i.createElement("link");rt(u),yt(u,"link",t),u._p=new Promise(function(c,h){u.onload=c,u.onerror=h}),u.addEventListener("load",function(){a.loading|=1}),u.addEventListener("error",function(){a.loading|=2}),a.loading|=4,Hl(r,e,i)}r={type:"stylesheet",instance:r,count:1,state:a},o.set(s,r)}}}function D1(t,e){oi.X(t,e);var n=$s;if(n&&t){var i=ps(n).hoistableScripts,o=Xs(t),s=i.get(o);s||(s=n.querySelector(za(o)),s||(t=Pe({src:t,async:!0},e),(e=un.get(o))&&Cp(t,e),s=n.createElement("script"),rt(s),yt(s,"link",t),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(o,s))}}function P1(t,e){oi.M(t,e);var n=$s;if(n&&t){var i=ps(n).hoistableScripts,o=Xs(t),s=i.get(o);s||(s=n.querySelector(za(o)),s||(t=Pe({src:t,async:!0,type:"module"},e),(e=un.get(o))&&Cp(t,e),s=n.createElement("script"),rt(s),yt(s,"link",t),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(o,s))}}function By(t,e,n,i){var o=(o=Ni.current)?wu(o):null;if(!o)throw Error(O(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=Us(n.href),n=ps(o).hoistableStyles,i=n.get(e),i||(i={type:"style",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=Us(n.href);var s=ps(o).hoistableStyles,r=s.get(t);if(r||(o=o.ownerDocument||o,r={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(t,r),(s=o.querySelector(Ga(t)))&&!s._p&&(r.instance=s,r.state.loading=5),un.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},un.set(t,n),s||V1(o,t,n,r.state))),e&&i===null)throw Error(O(528,""));return r}if(e&&i!==null)throw Error(O(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=Xs(n),n=ps(o).hoistableScripts,i=n.get(e),i||(i={type:"script",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(O(444,t))}}function Us(t){return'href="'+en(t)+'"'}function Ga(t){return'link[rel="stylesheet"]['+t+"]"}function bS(t){return Pe({},t,{"data-precedence":t.precedence,precedence:null})}function V1(t,e,n,i){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?i.loading=1:(e=t.createElement("link"),i.preload=e,e.addEventListener("load",function(){return i.loading|=1}),e.addEventListener("error",function(){return i.loading|=2}),yt(e,"link",n),rt(e),t.head.appendChild(e))}function Xs(t){return'[src="'+en(t)+'"]'}function za(t){return"script[async]"+t}function Fy(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var i=t.querySelector('style[data-href~="'+en(n.href)+'"]');if(i)return e.instance=i,rt(i),i;var o=Pe({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(t.ownerDocument||t).createElement("style"),rt(i),yt(i,"style",o),Hl(i,n.precedence,t),e.instance=i;case"stylesheet":o=Us(n.href);var s=t.querySelector(Ga(o));if(s)return e.state.loading|=4,e.instance=s,rt(s),s;i=bS(n),(o=un.get(o))&&Ap(i,o),s=(t.ownerDocument||t).createElement("link"),rt(s);var r=s;return r._p=new Promise(function(a,u){r.onload=a,r.onerror=u}),yt(s,"link",i),e.state.loading|=4,Hl(s,n.precedence,t),e.instance=s;case"script":return s=Xs(n.src),(o=t.querySelector(za(s)))?(e.instance=o,rt(o),o):(i=n,(o=un.get(s))&&(i=Pe({},n),Cp(i,o)),t=t.ownerDocument||t,o=t.createElement("script"),rt(o),yt(o,"link",i),t.head.appendChild(o),e.instance=o);case"void":return null;default:throw Error(O(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(i=e.instance,e.state.loading|=4,Hl(i,n.precedence,t));return e.instance}function Hl(t,e,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=i.length?i[i.length-1]:null,s=o,r=0;r<i.length;r++){var a=i[r];if(a.dataset.precedence===e)s=a;else if(s!==o)break}s?s.parentNode.insertBefore(t,s.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function Ap(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function Cp(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var Yl=null;function Gy(t,e,n){if(Yl===null){var i=new Map,o=Yl=new Map;o.set(n,i)}else o=Yl,i=o.get(n),i||(i=new Map,o.set(n,i));if(i.has(t))return i;for(i.set(t,null),n=n.getElementsByTagName(t),o=0;o<n.length;o++){var s=n[o];if(!(s[La]||s[ht]||t==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var r=s.getAttribute(e)||"";r=t+r;var a=i.get(r);a?a.push(s):i.set(r,[s])}}return i}function zy(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function U1(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function DS(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}function L1(t,e,n,i){if(n.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var o=Us(i.href),s=e.querySelector(Ga(o));if(s){e=s._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=Nu.bind(t),e.then(t,t)),n.state.loading|=4,n.instance=s,rt(s);return}s=e.ownerDocument||e,i=bS(i),(o=un.get(o))&&Ap(i,o),s=s.createElement("link"),rt(s);var r=s;r._p=new Promise(function(a,u){r.onload=a,r.onerror=u}),yt(s,"link",i),n.instance=s}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,e),(e=n.state.preload)&&!(n.state.loading&3)&&(t.count++,n=Nu.bind(t),e.addEventListener("load",n),e.addEventListener("error",n))}}var Gf=0;function k1(t,e){return t.stylesheets&&t.count===0&&Jl(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var i=setTimeout(function(){if(t.stylesheets&&Jl(t,t.stylesheets),t.unsuspend){var s=t.unsuspend;t.unsuspend=null,s()}},6e4+e);0<t.imgBytes&&Gf===0&&(Gf=62500*y1());var o=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Jl(t,t.stylesheets),t.unsuspend)){var s=t.unsuspend;t.unsuspend=null,s()}},(t.imgBytes>Gf?50:800)+e);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(i),clearTimeout(o)}}:null}function Nu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Jl(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Mu=null;function Jl(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Mu=new Map,e.forEach(O1,t),Mu=null,Nu.call(t))}function O1(t,e){if(!(e.state.loading&4)){var n=Mu.get(t);if(n)var i=n.get(null);else{n=new Map,Mu.set(t,n);for(var o=t.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<o.length;s++){var r=o[s];(r.nodeName==="LINK"||r.getAttribute("media")!=="not all")&&(n.set(r.dataset.precedence,r),i=r)}i&&n.set(null,i)}o=e.instance,r=o.getAttribute("data-precedence"),s=n.get(r)||i,s===i&&n.set(null,o),n.set(r,o),this.count++,i=Nu.bind(this),o.addEventListener("load",i),o.addEventListener("error",i),s?s.parentNode.insertBefore(o,s.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(o,t.firstChild)),e.state.loading|=4}}var va={$$typeof:Fn,Provider:null,Consumer:null,_currentValue:go,_currentValue2:go,_threadCount:0};function q1(t,e,n,i,o,s,r,a,u){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ff(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ff(0),this.hiddenUpdates=ff(null),this.identifierPrefix=i,this.onUncaughtError=o,this.onCaughtError=s,this.onRecoverableError=r,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=u,this.incompleteTransitions=new Map}function PS(t,e,n,i,o,s,r,a,u,c,h,p){return t=new q1(t,e,n,r,u,c,h,p,a),e=1,s===!0&&(e|=24),s=Bt(3,null,null,e),t.current=s,s.stateNode=t,e=Xh(),e.refCount++,t.pooledCache=e,e.refCount++,s.memoizedState={element:i,isDehydrated:n,cache:e},jh(s),t}function VS(t){return t?(t=us,t):us}function US(t,e,n,i,o,s){o=VS(o),i.context===null?i.context=o:i.pendingContext=o,i=xi(e),i.payload={element:n},s=s===void 0?null:s,s!==null&&(i.callback=s),n=bi(t,i,e),n!==null&&(Vt(n,t,e),Jr(n,t,e))}function Hy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ip(t,e){Hy(t,e),(t=t.alternate)&&Hy(t,e)}function LS(t){if(t.tag===13||t.tag===31){var e=Uo(t,67108864);e!==null&&Vt(e,t,67108864),Ip(t,67108864)}}function Yy(t){if(t.tag===13||t.tag===31){var e=Yt();e=Lh(e);var n=Uo(t,e);n!==null&&Vt(n,t,e),Ip(t,e)}}var xu=!0;function B1(t,e,n,i){var o=X.T;X.T=null;var s=ye.p;try{ye.p=2,Rp(t,e,n,i)}finally{ye.p=s,X.T=o}}function F1(t,e,n,i){var o=X.T;X.T=null;var s=ye.p;try{ye.p=8,Rp(t,e,n,i)}finally{ye.p=s,X.T=o}}function Rp(t,e,n,i){if(xu){var o=$d(i);if(o===null)Bf(t,e,i,bu,n),Jy(t,i);else if(z1(o,t,e,n,i))i.stopPropagation();else if(Jy(t,i),e&4&&-1<G1.indexOf(t)){for(;o!==null;){var s=Ys(o);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var r=uo(s.pendingLanes);if(r!==0){var a=s;for(a.pendingLanes|=2,a.entangledLanes|=2;r;){var u=1<<31-Ht(r);a.entanglements[1]|=u,r&=~u}Dn(s),!(ge&6)&&(Tu=Gt()+500,Fa(0))}}break;case 31:case 13:a=Uo(s,2),a!==null&&Vt(a,s,2),pc(),Ip(s,2)}if(s=$d(i),s===null&&Bf(t,e,i,bu,n),s===o)break;o=s}o!==null&&i.stopPropagation()}else Bf(t,e,i,null,n)}}function $d(t){return t=Bh(t),wp(t)}var bu=null;function wp(t){if(bu=null,t=is(t),t!==null){var e=Da(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=nE(e),t!==null)return t;t=null}else if(n===31){if(t=iE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return bu=t,null}function kS(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(wR()){case aE:return 2;case lE:return 8;case ru:case NR:return 32;case uE:return 268435456;default:return 32}default:return 32}}var Xd=!1,Vi=null,Ui=null,Li=null,Ta=new Map,Ea=new Map,Ei=[],G1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Jy(t,e){switch(t){case"focusin":case"focusout":Vi=null;break;case"dragenter":case"dragleave":Ui=null;break;case"mouseover":case"mouseout":Li=null;break;case"pointerover":case"pointerout":Ta.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ea.delete(e.pointerId)}}function xr(t,e,n,i,o,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[o]},e!==null&&(e=Ys(e),e!==null&&LS(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function z1(t,e,n,i,o){switch(e){case"focusin":return Vi=xr(Vi,t,e,n,i,o),!0;case"dragenter":return Ui=xr(Ui,t,e,n,i,o),!0;case"mouseover":return Li=xr(Li,t,e,n,i,o),!0;case"pointerover":var s=o.pointerId;return Ta.set(s,xr(Ta.get(s)||null,t,e,n,i,o)),!0;case"gotpointercapture":return s=o.pointerId,Ea.set(s,xr(Ea.get(s)||null,t,e,n,i,o)),!0}return!1}function OS(t){var e=is(t.target);if(e!==null){var n=Da(e);if(n!==null){if(e=n.tag,e===13){if(e=nE(n),e!==null){t.blockedOn=e,xg(t.priority,function(){Yy(n)});return}}else if(e===31){if(e=iE(n),e!==null){t.blockedOn=e,xg(t.priority,function(){Yy(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Kl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=$d(t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);pd=i,n.target.dispatchEvent(i),pd=null}else return e=Ys(n),e!==null&&LS(e),t.blockedOn=n,!1;e.shift()}return!0}function Ky(t,e,n){Kl(t)&&n.delete(e)}function H1(){Xd=!1,Vi!==null&&Kl(Vi)&&(Vi=null),Ui!==null&&Kl(Ui)&&(Ui=null),Li!==null&&Kl(Li)&&(Li=null),Ta.forEach(Ky),Ea.forEach(Ky)}function Cl(t,e){t.blockedOn===e&&(t.blockedOn=null,Xd||(Xd=!0,tt.unstable_scheduleCallback(tt.unstable_NormalPriority,H1)))}var Il=null;function Qy(t){Il!==t&&(Il=t,tt.unstable_scheduleCallback(tt.unstable_NormalPriority,function(){Il===t&&(Il=null);for(var e=0;e<t.length;e+=3){var n=t[e],i=t[e+1],o=t[e+2];if(typeof i!="function"){if(wp(i||n)===null)continue;break}var s=Ys(n);s!==null&&(t.splice(e,3),e-=3,xd(s,{pending:!0,data:o,method:n.method,action:i},i,o))}}))}function Ls(t){function e(u){return Cl(u,t)}Vi!==null&&Cl(Vi,t),Ui!==null&&Cl(Ui,t),Li!==null&&Cl(Li,t),Ta.forEach(e),Ea.forEach(e);for(var n=0;n<Ei.length;n++){var i=Ei[n];i.blockedOn===t&&(i.blockedOn=null)}for(;0<Ei.length&&(n=Ei[0],n.blockedOn===null);)OS(n),n.blockedOn===null&&Ei.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var o=n[i],s=n[i+1],r=o[Ut]||null;if(typeof s=="function")r||Qy(n);else if(r){var a=null;if(s&&s.hasAttribute("formAction")){if(o=s,r=s[Ut]||null)a=r.formAction;else if(wp(o)!==null)continue}else a=r.action;typeof a=="function"?n[i+1]=a:(n.splice(i,3),i-=3),Qy(n)}}}function qS(){function t(s){s.canIntercept&&s.info==="react-transition"&&s.intercept({handler:function(){return new Promise(function(r){return o=r})},focusReset:"manual",scroll:"manual"})}function e(){o!==null&&(o(),o=null),i||setTimeout(n,20)}function n(){if(!i&&!navigation.transition){var s=navigation.currentEntry;s&&s.url!=null&&navigation.navigate(s.url,{state:s.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,o=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(n,100),function(){i=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),o!==null&&(o(),o=null)}}}function Np(t){this._internalRoot=t}yc.prototype.render=Np.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(O(409));var n=e.current,i=Yt();US(n,i,t,e,null,null)};yc.prototype.unmount=Np.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;US(t.current,2,null,t,null,null),pc(),e[Hs]=null}};function yc(t){this._internalRoot=t}yc.prototype.unstable_scheduleHydration=function(t){if(t){var e=pE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ei.length&&e!==0&&e<Ei[n].priority;n++);Ei.splice(n,0,t),n===0&&OS(t)}};var $y=eE.version;if($y!=="19.2.0")throw Error(O(527,$y,"19.2.0"));ye.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(O(188)):(t=Object.keys(t).join(","),Error(O(268,t)));return t=TR(e),t=t!==null?oE(t):null,t=t===null?null:t.stateNode,t};var Y1={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rl.isDisabled&&Rl.supportsFiber)try{Pa=Rl.inject(Y1),zt=Rl}catch{}}ec.createRoot=function(t,e){if(!tE(t))throw Error(O(299));var n=!1,i="",o=x0,s=b0,r=D0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onUncaughtError!==void 0&&(o=e.onUncaughtError),e.onCaughtError!==void 0&&(s=e.onCaughtError),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=PS(t,1,!1,null,null,n,i,null,o,s,r,qS),t[Hs]=e.current,Sp(t),new Np(e)};ec.hydrateRoot=function(t,e,n){if(!tE(t))throw Error(O(299));var i=!1,o="",s=x0,r=b0,a=D0,u=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(r=n.onCaughtError),n.onRecoverableError!==void 0&&(a=n.onRecoverableError),n.formState!==void 0&&(u=n.formState)),e=PS(t,1,!0,e,n??null,i,o,u,s,r,a,qS),e.context=VS(null),n=e.current,i=Yt(),i=Lh(i),o=xi(i),o.callback=null,bi(n,o,i),n=i,e.current.lanes=n,Ua(e,n),Dn(e),t[Hs]=e.current,Sp(t),new yc(e)};ec.version="19.2.0";function BS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(BS)}catch(t){console.error(t)}}BS(),QT.exports=ec;var J1=QT.exports;const K1=OT(J1);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Q1,$1;function X1(){return{geminiUrl:Q1,vertexUrl:$1}}function W1(t,e,n,i){var o,s;if(!(t!=null&&t.baseUrl)){const r=X1();return e?(o=r.vertexUrl)!==null&&o!==void 0?o:n:(s=r.geminiUrl)!==null&&s!==void 0?s:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class si{}function H(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const s=e[o];return s!=null?String(s):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function f(t,e,n){for(let s=0;s<e.length-1;s++){const r=e[s];if(r.endsWith("[]")){const a=r.slice(0,-2);if(!(a in t))if(Array.isArray(n))t[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${r}`);if(Array.isArray(t[a])){const u=t[a];if(Array.isArray(n))for(let c=0;c<u.length;c++){const h=u[c];f(h,e.slice(s+1),n[c])}else for(const c of u)f(c,e.slice(s+1),n)}return}else if(r.endsWith("[0]")){const a=r.slice(0,-3);a in t||(t[a]=[{}]);const u=t[a];f(u[0],e.slice(s+1),n);return}(!t[r]||typeof t[r]!="object")&&(t[r]={}),t=t[r]}const i=e[e.length-1],o=t[i];if(o!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===o)return;if(typeof o=="object"&&typeof n=="object"&&o!==null&&n!==null)Object.assign(o,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function l(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return n;const o=e[i];if(o.endsWith("[]")){const s=o.slice(0,-2);if(s in t){const r=t[s];return Array.isArray(r)?r.map(a=>l(a,e.slice(i+1),n)):n}else return n}else t=t[o]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}function Z1(t,e){for(const[n,i]of Object.entries(e)){const o=n.split("."),s=i.split("."),r=new Set;let a=-1;for(let u=0;u<o.length;u++)if(o[u]==="*"){a=u;break}if(a!==-1&&s.length>a)for(let u=a;u<s.length;u++){const c=s[u];c!=="*"&&!c.endsWith("[]")&&!c.endsWith("[0]")&&r.add(c)}Wd(t,o,s,0,r)}}function Wd(t,e,n,i,o){if(i>=e.length||typeof t!="object"||t===null)return;const s=e[i];if(s.endsWith("[]")){const r=s.slice(0,-2),a=t;if(r in a&&Array.isArray(a[r]))for(const u of a[r])Wd(u,e,n,i+1,o)}else if(s==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const r=t,a=Object.keys(r).filter(c=>!c.startsWith("_")&&!o.has(c)),u={};for(const c of a)u[c]=r[c];for(const[c,h]of Object.entries(u)){const p=[];for(const m of n.slice(i))m==="*"?p.push(c):p.push(m);f(r,p,h)}for(const c of a)delete r[c]}}else{const r=t;s in r&&Wd(r[s],e,n,i+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Mp(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function j1(t){const e={},n=l(t,["operationName"]);n!=null&&f(e,["operationName"],n);const i=l(t,["resourceName"]);return i!=null&&f(e,["_url","resourceName"],i),e}function eN(t){const e={},n=l(t,["name"]);n!=null&&f(e,["name"],n);const i=l(t,["metadata"]);i!=null&&f(e,["metadata"],i);const o=l(t,["done"]);o!=null&&f(e,["done"],o);const s=l(t,["error"]);s!=null&&f(e,["error"],s);const r=l(t,["response","generateVideoResponse"]);return r!=null&&f(e,["response"],nN(r)),e}function tN(t){const e={},n=l(t,["name"]);n!=null&&f(e,["name"],n);const i=l(t,["metadata"]);i!=null&&f(e,["metadata"],i);const o=l(t,["done"]);o!=null&&f(e,["done"],o);const s=l(t,["error"]);s!=null&&f(e,["error"],s);const r=l(t,["response"]);return r!=null&&f(e,["response"],iN(r)),e}function nN(t){const e={},n=l(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>oN(r))),f(e,["generatedVideos"],s)}const i=l(t,["raiMediaFilteredCount"]);i!=null&&f(e,["raiMediaFilteredCount"],i);const o=l(t,["raiMediaFilteredReasons"]);return o!=null&&f(e,["raiMediaFilteredReasons"],o),e}function iN(t){const e={},n=l(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>sN(r))),f(e,["generatedVideos"],s)}const i=l(t,["raiMediaFilteredCount"]);i!=null&&f(e,["raiMediaFilteredCount"],i);const o=l(t,["raiMediaFilteredReasons"]);return o!=null&&f(e,["raiMediaFilteredReasons"],o),e}function oN(t){const e={},n=l(t,["video"]);return n!=null&&f(e,["video"],fN(n)),e}function sN(t){const e={},n=l(t,["_self"]);return n!=null&&f(e,["video"],dN(n)),e}function rN(t){const e={},n=l(t,["operationName"]);return n!=null&&f(e,["_url","operationName"],n),e}function aN(t){const e={},n=l(t,["operationName"]);return n!=null&&f(e,["_url","operationName"],n),e}function lN(t){const e={},n=l(t,["name"]);n!=null&&f(e,["name"],n);const i=l(t,["metadata"]);i!=null&&f(e,["metadata"],i);const o=l(t,["done"]);o!=null&&f(e,["done"],o);const s=l(t,["error"]);s!=null&&f(e,["error"],s);const r=l(t,["response"]);return r!=null&&f(e,["response"],uN(r)),e}function uN(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=l(t,["parent"]);i!=null&&f(e,["parent"],i);const o=l(t,["documentName"]);return o!=null&&f(e,["documentName"],o),e}function FS(t){const e={},n=l(t,["name"]);n!=null&&f(e,["name"],n);const i=l(t,["metadata"]);i!=null&&f(e,["metadata"],i);const o=l(t,["done"]);o!=null&&f(e,["done"],o);const s=l(t,["error"]);s!=null&&f(e,["error"],s);const r=l(t,["response"]);return r!=null&&f(e,["response"],cN(r)),e}function cN(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=l(t,["parent"]);i!=null&&f(e,["parent"],i);const o=l(t,["documentName"]);return o!=null&&f(e,["documentName"],o),e}function fN(t){const e={},n=l(t,["uri"]);n!=null&&f(e,["uri"],n);const i=l(t,["encodedVideo"]);i!=null&&f(e,["videoBytes"],Mp(i));const o=l(t,["encoding"]);return o!=null&&f(e,["mimeType"],o),e}function dN(t){const e={},n=l(t,["gcsUri"]);n!=null&&f(e,["uri"],n);const i=l(t,["bytesBase64Encoded"]);i!=null&&f(e,["videoBytes"],Mp(i));const o=l(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Xy;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Xy||(Xy={}));var Wy;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Wy||(Wy={}));var Zy;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Zy||(Zy={}));var se;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(se||(se={}));var jy;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(jy||(jy={}));var e_;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(e_||(e_={}));var t_;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(t_||(t_={}));var n_;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(n_||(n_={}));var i_;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(i_||(i_={}));var o_;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})(o_||(o_={}));var s_;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(s_||(s_={}));var r_;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(r_||(r_={}));var a_;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(a_||(a_={}));var l_;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(l_||(l_={}));var u_;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(u_||(u_={}));var c_;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(c_||(c_={}));var f_;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(f_||(f_={}));var d_;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(d_||(d_={}));var h_;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(h_||(h_={}));var Du;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Du||(Du={}));var p_;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(p_||(p_={}));var m_;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(m_||(m_={}));var g_;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(g_||(g_={}));var Zd;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Zd||(Zd={}));var y_;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(y_||(y_={}));var __;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(__||(__={}));var v_;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(v_||(v_={}));var T_;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(T_||(T_={}));var E_;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(E_||(E_={}));var S_;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(S_||(S_={}));var A_;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(A_||(A_={}));var C_;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(C_||(C_={}));var I_;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(I_||(I_={}));var R_;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(R_||(R_={}));var w_;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(w_||(w_={}));var N_;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(N_||(N_={}));var M_;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(M_||(M_={}));var x_;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(x_||(x_={}));var b_;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(b_||(b_={}));var D_;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(D_||(D_={}));var P_;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(P_||(P_={}));var V_;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(V_||(V_={}));var U_;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(U_||(U_={}));var L_;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(L_||(L_={}));var k_;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(k_||(k_={}));var O_;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(O_||(O_={}));var q_;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(q_||(q_={}));var B_;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(B_||(B_={}));var F_;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(F_||(F_={}));var G_;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(G_||(G_={}));var z_;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(z_||(z_={}));var H_;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(H_||(H_={}));var Y_;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Y_||(Y_={}));var J_;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(J_||(J_={}));var hs;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(hs||(hs={}));class jd{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class br{get text(){var e,n,i,o,s,r,a,u;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",h=!1;const p=[];for(const m of(u=(a=(r=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content)===null||a===void 0?void 0:a.parts)!==null&&u!==void 0?u:[]){for(const[_,x]of Object.entries(m))_!=="text"&&_!=="thought"&&_!=="thoughtSignature"&&(x!==null||x!==void 0)&&p.push(_);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;h=!0,c+=m.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),h?c:void 0}get data(){var e,n,i,o,s,r,a,u;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const h=[];for(const p of(u=(a=(r=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content)===null||a===void 0?void 0:a.parts)!==null&&u!==void 0?u:[]){for(const[m,_]of Object.entries(p))m!=="inlineData"&&(_!==null||_!==void 0)&&h.push(m);p.inlineData&&typeof p.inlineData.data=="string"&&(c+=atob(p.inlineData.data))}return h.length>0&&console.warn(`there are non-data parts ${h} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,n,i,o,s,r,a,u;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(u=(a=(r=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content)===null||a===void 0?void 0:a.parts)===null||u===void 0?void 0:u.filter(h=>h.functionCall).map(h=>h.functionCall).filter(h=>h!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,n,i,o,s,r,a,u,c;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const h=(u=(a=(r=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content)===null||a===void 0?void 0:a.parts)===null||u===void 0?void 0:u.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((h==null?void 0:h.length)!==0)return(c=h==null?void 0:h[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,n,i,o,s,r,a,u,c;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const h=(u=(a=(r=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content)===null||a===void 0?void 0:a.parts)===null||u===void 0?void 0:u.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((h==null?void 0:h.length)!==0)return(c=h==null?void 0:h[0])===null||c===void 0?void 0:c.output}}class K_{}class Q_{}class hN{}class pN{}class mN{}class gN{}class $_{}class X_{}class W_{}class yN{}class Pu{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new Pu;let o;const s=e;return n?o=tN(s):o=eN(s),Object.assign(i,o),i}}class Z_{}class j_{}class ev{}class _N{}class vN{}class TN{}class xp{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new xp,s=lN(e);return Object.assign(i,s),i}}class EN{}class SN{}class AN{}class tv{}class CN{get text(){var e,n,i;let o="",s=!1;const r=[];for(const a of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[u,c]of Object.entries(a))u!=="text"&&u!=="thought"&&c!==null&&r.push(u);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;s=!0,o+=a.text}}return r.length>0&&console.warn(`there are non-text parts ${r} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?o:void 0}get data(){var e,n,i;let o="";const s=[];for(const r of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[a,u]of Object.entries(r))a!=="inlineData"&&u!==null&&s.push(a);r.inlineData&&typeof r.inlineData.data=="string"&&(o+=atob(r.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class IN{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class bp{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new bp,s=FS(e);return Object.assign(i,s),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function me(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function GS(t,e){const n=me(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function zS(t){return Array.isArray(t)?t.map(e=>Vu(e)):[Vu(t)]}function Vu(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function HS(t){const e=Vu(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function YS(t){const e=Vu(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function nv(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function JS(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>nv(e)):[nv(t)]}function eh(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function iv(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function ov(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function St(t){if(t==null)throw new Error("ContentUnion is required");return eh(t)?t:{role:"user",parts:JS(t)}}function Dp(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=St(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=St(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>St(n)):[St(e)]}function ln(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(iv(t)||ov(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[St(t)]}const e=[],n=[],i=eh(t[0]);for(const o of t){const s=eh(o);if(s!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)e.push(o);else{if(iv(o)||ov(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(o)}}return i||e.push({role:"user",parts:JS(n)}),e}function RN(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(se).includes(n[0].toUpperCase())?n[0].toUpperCase():se.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(se).includes(i.toUpperCase())?i.toUpperCase():se.TYPE_UNSPECIFIED})}}function Es(t){const e={},n=["items"],i=["anyOf"],o=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const s=t.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(e.nullable=!0,t=s[1]):s[1].type==="null"&&(e.nullable=!0,t=s[0])),t.type instanceof Array&&RN(t.type,e);for(const[r,a]of Object.entries(t))if(a!=null)if(r=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(se).includes(a.toUpperCase())?a.toUpperCase():se.TYPE_UNSPECIFIED}else if(n.includes(r))e[r]=Es(a);else if(i.includes(r)){const u=[];for(const c of a){if(c.type=="null"){e.nullable=!0;continue}u.push(Es(c))}e[r]=u}else if(o.includes(r)){const u={};for(const[c,h]of Object.entries(a))u[c]=Es(h);e[r]=u}else{if(r==="additionalProperties")continue;e[r]=a}return e}function Pp(t){return Es(t)}function Vp(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Up(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Ws(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Es(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Es(e.response));return t}function Zs(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function wN(t,e,n,i=1){const o=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:o?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:o?`${n}/${e}`:e}function ri(t,e){if(typeof e!="string")throw new Error("name must be a string");return wN(t,e,"cachedContents")}function KS(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function eo(t){return Mp(t)}function NN(t){return t!=null&&typeof t=="object"&&"name"in t}function MN(t){return t!=null&&typeof t=="object"&&"video"in t}function xN(t){return t!=null&&typeof t=="object"&&"uri"in t}function QS(t){var e;let n;if(NN(t)&&(n=t.name),!(xN(t)&&(n=t.uri,n===void 0))&&!(MN(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const o=n.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${n}`);n=o[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function $S(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function XS(t){for(const e of["models","tunedModels","publisherModels"])if(bN(t,e))return t[e];return[]}function bN(t,e){return t!==null&&typeof t=="object"&&e in t}function DN(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function PN(t,e={}){const n=[],i=new Set;for(const o of t){const s=o.name;if(i.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);i.add(s);const r=DN(o,e);r.functionDeclarations&&n.push(...r.functionDeclarations)}return{functionDeclarations:n}}function WS(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,o=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(o>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function VN(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function ZS(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const o=n.inlinedResponses;if(!Array.isArray(o)||o.length===0)return t;let s=!1;for(const r of o){if(typeof r!="object"||r===null)continue;const u=r.response;if(typeof u!="object"||u===null)continue;if(u.embedding!==void 0){s=!0;break}}return s&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function js(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function jS(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function UN(t){const e={},n=l(t,["responsesFile"]);n!=null&&f(e,["fileName"],n);const i=l(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>mM(r))),f(e,["inlinedResponses"],s)}const o=l(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),f(e,["inlinedEmbedContentResponses"],s)}return e}function LN(t){const e={},n=l(t,["predictionsFormat"]);n!=null&&f(e,["format"],n);const i=l(t,["gcsDestination","outputUriPrefix"]);i!=null&&f(e,["gcsUri"],i);const o=l(t,["bigqueryDestination","outputUri"]);return o!=null&&f(e,["bigqueryUri"],o),e}function kN(t){const e={},n=l(t,["format"]);n!=null&&f(e,["predictionsFormat"],n);const i=l(t,["gcsUri"]);i!=null&&f(e,["gcsDestination","outputUriPrefix"],i);const o=l(t,["bigqueryUri"]);if(o!=null&&f(e,["bigqueryDestination","outputUri"],o),l(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(l(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Ql(t){const e={},n=l(t,["name"]);n!=null&&f(e,["name"],n);const i=l(t,["metadata","displayName"]);i!=null&&f(e,["displayName"],i);const o=l(t,["metadata","state"]);o!=null&&f(e,["state"],jS(o));const s=l(t,["metadata","createTime"]);s!=null&&f(e,["createTime"],s);const r=l(t,["metadata","endTime"]);r!=null&&f(e,["endTime"],r);const a=l(t,["metadata","updateTime"]);a!=null&&f(e,["updateTime"],a);const u=l(t,["metadata","model"]);u!=null&&f(e,["model"],u);const c=l(t,["metadata","output"]);return c!=null&&f(e,["dest"],UN(ZS(c))),e}function th(t){const e={},n=l(t,["name"]);n!=null&&f(e,["name"],n);const i=l(t,["displayName"]);i!=null&&f(e,["displayName"],i);const o=l(t,["state"]);o!=null&&f(e,["state"],jS(o));const s=l(t,["error"]);s!=null&&f(e,["error"],s);const r=l(t,["createTime"]);r!=null&&f(e,["createTime"],r);const a=l(t,["startTime"]);a!=null&&f(e,["startTime"],a);const u=l(t,["endTime"]);u!=null&&f(e,["endTime"],u);const c=l(t,["updateTime"]);c!=null&&f(e,["updateTime"],c);const h=l(t,["model"]);h!=null&&f(e,["model"],h);const p=l(t,["inputConfig"]);p!=null&&f(e,["src"],ON(p));const m=l(t,["outputConfig"]);m!=null&&f(e,["dest"],LN(ZS(m)));const _=l(t,["completionStats"]);return _!=null&&f(e,["completionStats"],_),e}function ON(t){const e={},n=l(t,["instancesFormat"]);n!=null&&f(e,["format"],n);const i=l(t,["gcsSource","uris"]);i!=null&&f(e,["gcsUri"],i);const o=l(t,["bigquerySource","inputUri"]);return o!=null&&f(e,["bigqueryUri"],o),e}function qN(t,e){const n={};if(l(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(l(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=l(e,["fileName"]);i!=null&&f(n,["fileName"],i);const o=l(e,["inlinedRequests"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>pM(t,r))),f(n,["requests","requests"],s)}return n}function BN(t){const e={},n=l(t,["format"]);n!=null&&f(e,["instancesFormat"],n);const i=l(t,["gcsUri"]);i!=null&&f(e,["gcsSource","uris"],i);const o=l(t,["bigqueryUri"]);if(o!=null&&f(e,["bigquerySource","inputUri"],o),l(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function FN(t){const e={},n=l(t,["data"]);if(n!=null&&f(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=l(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function GN(t,e){const n={},i=l(e,["name"]);return i!=null&&f(n,["_url","name"],js(t,i)),n}function zN(t,e){const n={},i=l(e,["name"]);return i!=null&&f(n,["_url","name"],js(t,i)),n}function HN(t){const e={},n=l(t,["content"]);n!=null&&f(e,["content"],n);const i=l(t,["citationMetadata"]);i!=null&&f(e,["citationMetadata"],YN(i));const o=l(t,["tokenCount"]);o!=null&&f(e,["tokenCount"],o);const s=l(t,["finishReason"]);s!=null&&f(e,["finishReason"],s);const r=l(t,["avgLogprobs"]);r!=null&&f(e,["avgLogprobs"],r);const a=l(t,["groundingMetadata"]);a!=null&&f(e,["groundingMetadata"],a);const u=l(t,["index"]);u!=null&&f(e,["index"],u);const c=l(t,["logprobsResult"]);c!=null&&f(e,["logprobsResult"],c);const h=l(t,["safetyRatings"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(_=>_)),f(e,["safetyRatings"],m)}const p=l(t,["urlContextMetadata"]);return p!=null&&f(e,["urlContextMetadata"],p),e}function YN(t){const e={},n=l(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),f(e,["citations"],i)}return e}function eA(t){const e={},n=l(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>SM(s))),f(e,["parts"],o)}const i=l(t,["role"]);return i!=null&&f(e,["role"],i),e}function JN(t,e){const n={},i=l(t,["displayName"]);if(e!==void 0&&i!=null&&f(e,["batch","displayName"],i),l(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function KN(t,e){const n={},i=l(t,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);const o=l(t,["dest"]);return e!==void 0&&o!=null&&f(e,["outputConfig"],kN(VN(o))),n}function sv(t,e){const n={},i=l(e,["model"]);i!=null&&f(n,["_url","model"],me(t,i));const o=l(e,["src"]);o!=null&&f(n,["batch","inputConfig"],qN(t,WS(t,o)));const s=l(e,["config"]);return s!=null&&JN(s,n),n}function QN(t,e){const n={},i=l(e,["model"]);i!=null&&f(n,["model"],me(t,i));const o=l(e,["src"]);o!=null&&f(n,["inputConfig"],BN(WS(t,o)));const s=l(e,["config"]);return s!=null&&KN(s,n),n}function $N(t,e){const n={},i=l(t,["displayName"]);return e!==void 0&&i!=null&&f(e,["batch","displayName"],i),n}function XN(t,e){const n={},i=l(e,["model"]);i!=null&&f(n,["_url","model"],me(t,i));const o=l(e,["src"]);o!=null&&f(n,["batch","inputConfig"],iM(t,o));const s=l(e,["config"]);return s!=null&&$N(s,n),n}function WN(t,e){const n={},i=l(e,["name"]);return i!=null&&f(n,["_url","name"],js(t,i)),n}function ZN(t,e){const n={},i=l(e,["name"]);return i!=null&&f(n,["_url","name"],js(t,i)),n}function jN(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=l(t,["name"]);i!=null&&f(e,["name"],i);const o=l(t,["done"]);o!=null&&f(e,["done"],o);const s=l(t,["error"]);return s!=null&&f(e,["error"],s),e}function eM(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=l(t,["name"]);i!=null&&f(e,["name"],i);const o=l(t,["done"]);o!=null&&f(e,["done"],o);const s=l(t,["error"]);return s!=null&&f(e,["error"],s),e}function tM(t,e){const n={},i=l(e,["contents"]);if(i!=null){let s=Dp(t,i);Array.isArray(s)&&(s=s.map(r=>r)),f(n,["requests[]","request","content"],s)}const o=l(e,["config"]);return o!=null&&(f(n,["_self"],nM(o,n)),Z1(n,{"requests[].*":"requests[].request.*"})),n}function nM(t,e){const n={},i=l(t,["taskType"]);e!==void 0&&i!=null&&f(e,["requests[]","taskType"],i);const o=l(t,["title"]);e!==void 0&&o!=null&&f(e,["requests[]","title"],o);const s=l(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&f(e,["requests[]","outputDimensionality"],s),l(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function iM(t,e){const n={},i=l(e,["fileName"]);i!=null&&f(n,["file_name"],i);const o=l(e,["inlinedRequests"]);return o!=null&&f(n,["requests"],tM(t,o)),n}function oM(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=l(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function sM(t){const e={},n=l(t,["id"]);n!=null&&f(e,["id"],n);const i=l(t,["args"]);i!=null&&f(e,["args"],i);const o=l(t,["name"]);if(o!=null&&f(e,["name"],o),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function rM(t){const e={},n=l(t,["mode"]);n!=null&&f(e,["mode"],n);const i=l(t,["allowedFunctionNames"]);if(i!=null&&f(e,["allowedFunctionNames"],i),l(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function aM(t,e,n){const i={},o=l(e,["systemInstruction"]);n!==void 0&&o!=null&&f(n,["systemInstruction"],eA(St(o)));const s=l(e,["temperature"]);s!=null&&f(i,["temperature"],s);const r=l(e,["topP"]);r!=null&&f(i,["topP"],r);const a=l(e,["topK"]);a!=null&&f(i,["topK"],a);const u=l(e,["candidateCount"]);u!=null&&f(i,["candidateCount"],u);const c=l(e,["maxOutputTokens"]);c!=null&&f(i,["maxOutputTokens"],c);const h=l(e,["stopSequences"]);h!=null&&f(i,["stopSequences"],h);const p=l(e,["responseLogprobs"]);p!=null&&f(i,["responseLogprobs"],p);const m=l(e,["logprobs"]);m!=null&&f(i,["logprobs"],m);const _=l(e,["presencePenalty"]);_!=null&&f(i,["presencePenalty"],_);const x=l(e,["frequencyPenalty"]);x!=null&&f(i,["frequencyPenalty"],x);const D=l(e,["seed"]);D!=null&&f(i,["seed"],D);const V=l(e,["responseMimeType"]);V!=null&&f(i,["responseMimeType"],V);const C=l(e,["responseSchema"]);C!=null&&f(i,["responseSchema"],Pp(C));const E=l(e,["responseJsonSchema"]);if(E!=null&&f(i,["responseJsonSchema"],E),l(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const I=l(e,["safetySettings"]);if(n!==void 0&&I!=null){let P=I;Array.isArray(P)&&(P=P.map(N=>AM(N))),f(n,["safetySettings"],P)}const b=l(e,["tools"]);if(n!==void 0&&b!=null){let P=Zs(b);Array.isArray(P)&&(P=P.map(N=>IM(Ws(N)))),f(n,["tools"],P)}const k=l(e,["toolConfig"]);if(n!==void 0&&k!=null&&f(n,["toolConfig"],CM(k)),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const B=l(e,["cachedContent"]);n!==void 0&&B!=null&&f(n,["cachedContent"],ri(t,B));const A=l(e,["responseModalities"]);A!=null&&f(i,["responseModalities"],A);const S=l(e,["mediaResolution"]);S!=null&&f(i,["mediaResolution"],S);const T=l(e,["speechConfig"]);if(T!=null&&f(i,["speechConfig"],Vp(T)),l(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const w=l(e,["thinkingConfig"]);w!=null&&f(i,["thinkingConfig"],w);const M=l(e,["imageConfig"]);return M!=null&&f(i,["imageConfig"],hM(M)),i}function lM(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=l(t,["candidates"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(c=>HN(c))),f(e,["candidates"],u)}const o=l(t,["modelVersion"]);o!=null&&f(e,["modelVersion"],o);const s=l(t,["promptFeedback"]);s!=null&&f(e,["promptFeedback"],s);const r=l(t,["responseId"]);r!=null&&f(e,["responseId"],r);const a=l(t,["usageMetadata"]);return a!=null&&f(e,["usageMetadata"],a),e}function uM(t,e){const n={},i=l(e,["name"]);return i!=null&&f(n,["_url","name"],js(t,i)),n}function cM(t,e){const n={},i=l(e,["name"]);return i!=null&&f(n,["_url","name"],js(t,i)),n}function fM(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function dM(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function hM(t){const e={},n=l(t,["aspectRatio"]);n!=null&&f(e,["aspectRatio"],n);const i=l(t,["imageSize"]);if(i!=null&&f(e,["imageSize"],i),l(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(l(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function pM(t,e){const n={},i=l(e,["model"]);i!=null&&f(n,["request","model"],me(t,i));const o=l(e,["contents"]);if(o!=null){let a=ln(o);Array.isArray(a)&&(a=a.map(u=>eA(u))),f(n,["request","contents"],a)}const s=l(e,["metadata"]);s!=null&&f(n,["metadata"],s);const r=l(e,["config"]);return r!=null&&f(n,["request","generationConfig"],aM(t,r,l(n,["request"],{}))),n}function mM(t){const e={},n=l(t,["response"]);n!=null&&f(e,["response"],lM(n));const i=l(t,["error"]);return i!=null&&f(e,["error"],i),e}function gM(t,e){const n={},i=l(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const o=l(t,["pageToken"]);if(e!==void 0&&o!=null&&f(e,["_query","pageToken"],o),l(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function yM(t,e){const n={},i=l(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const o=l(t,["pageToken"]);e!==void 0&&o!=null&&f(e,["_query","pageToken"],o);const s=l(t,["filter"]);return e!==void 0&&s!=null&&f(e,["_query","filter"],s),n}function _M(t){const e={},n=l(t,["config"]);return n!=null&&gM(n,e),e}function vM(t){const e={},n=l(t,["config"]);return n!=null&&yM(n,e),e}function TM(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=l(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const o=l(t,["operations"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>Ql(r))),f(e,["batchJobs"],s)}return e}function EM(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=l(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const o=l(t,["batchPredictionJobs"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>th(r))),f(e,["batchJobs"],s)}return e}function SM(t){const e={},n=l(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const i=l(t,["codeExecutionResult"]);i!=null&&f(e,["codeExecutionResult"],i);const o=l(t,["executableCode"]);o!=null&&f(e,["executableCode"],o);const s=l(t,["fileData"]);s!=null&&f(e,["fileData"],oM(s));const r=l(t,["functionCall"]);r!=null&&f(e,["functionCall"],sM(r));const a=l(t,["functionResponse"]);a!=null&&f(e,["functionResponse"],a);const u=l(t,["inlineData"]);u!=null&&f(e,["inlineData"],FN(u));const c=l(t,["text"]);c!=null&&f(e,["text"],c);const h=l(t,["thought"]);h!=null&&f(e,["thought"],h);const p=l(t,["thoughtSignature"]);p!=null&&f(e,["thoughtSignature"],p);const m=l(t,["videoMetadata"]);return m!=null&&f(e,["videoMetadata"],m),e}function AM(t){const e={},n=l(t,["category"]);if(n!=null&&f(e,["category"],n),l(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=l(t,["threshold"]);return i!=null&&f(e,["threshold"],i),e}function CM(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&f(e,["functionCallingConfig"],rM(n));const i=l(t,["retrievalConfig"]);return i!=null&&f(e,["retrievalConfig"],i),e}function IM(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>p)),f(e,["functionDeclarations"],h)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=l(t,["googleSearchRetrieval"]);i!=null&&f(e,["googleSearchRetrieval"],i);const o=l(t,["computerUse"]);o!=null&&f(e,["computerUse"],o);const s=l(t,["fileSearch"]);s!=null&&f(e,["fileSearch"],s);const r=l(t,["codeExecution"]);if(r!=null&&f(e,["codeExecution"],r),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=l(t,["googleMaps"]);a!=null&&f(e,["googleMaps"],fM(a));const u=l(t,["googleSearch"]);u!=null&&f(e,["googleSearch"],dM(u));const c=l(t,["urlContext"]);return c!=null&&f(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var jn;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(jn||(jn={}));class ko{constructor(e,n,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,o)}init(e,n,i){var o,s;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let r={config:{}};!i||Object.keys(i).length===0?r={config:{}}:typeof i=="object"?r=Object.assign({},i):r=i,r.config&&(r.config.pageToken=n.nextPageToken),this.paramsInternal=r,this.pageInternalSize=(s=(o=r.config)===null||o===void 0?void 0:o.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class RM extends si{constructor(e){super(),this.apiClient=e,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new ko(jn.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=sv(this.apiClient,e),i=n._url,o=H("{model}:batchGenerateContent",i),a=n.batch.inputConfig.requests,u=a.requests,c=[];for(const h of u){const p=Object.assign({},h);if(p.systemInstruction){const m=p.systemInstruction;delete p.systemInstruction;const _=p.request;_.systemInstruction=m,p.request=_}c.push(p)}return a.requests=c,delete n.config,delete n._url,delete n._query,{path:o,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const i=n?Object.assign({},n):{},o=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${o}`),i.dest===void 0){const s=this.getGcsUri(e),r=this.getBigqueryUri(e);if(s)s.endsWith(".jsonl")?i.dest=`${s.slice(0,-6)}/dest`:i.dest=`${s}_dest_${o}`;else if(r)i.dest=`${r}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,o,s;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=QN(this.apiClient,e);return a=H("batchPredictionJobs",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>th(h))}else{const c=sv(this.apiClient,e);return a=H("{model}:batchGenerateContent",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),r.then(h=>Ql(h))}}async createEmbeddingsInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=XN(this.apiClient,e);return s=H("{model}:asyncBatchEmbedContent",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>Ql(u))}}async get(e){var n,i,o,s;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=cM(this.apiClient,e);return a=H("batchPredictionJobs/{name}",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>th(h))}else{const c=uM(this.apiClient,e);return a=H("batches/{name}",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),r.then(h=>Ql(h))}}async cancel(e){var n,i,o,s;let r="",a={};if(this.apiClient.isVertexAI()){const u=zN(this.apiClient,e);r=H("batchPredictionJobs/{name}:cancel",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const u=GN(this.apiClient,e);r=H("batches/{name}:cancel",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,i,o,s;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=vM(e);return a=H("batchPredictionJobs",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const p=EM(h),m=new tv;return Object.assign(m,p),m})}else{const c=_M(e);return a=H("batches",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const p=TM(h),m=new tv;return Object.assign(m,p),m})}}async delete(e){var n,i,o,s;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=ZN(this.apiClient,e);return a=H("batchPredictionJobs/{name}",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>eM(h))}else{const c=WN(this.apiClient,e);return a=H("batches/{name}",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>jN(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wM(t){const e={},n=l(t,["data"]);if(n!=null&&f(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=l(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function rv(t){const e={},n=l(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>XM(s))),f(e,["parts"],o)}const i=l(t,["role"]);return i!=null&&f(e,["role"],i),e}function NM(t,e){const n={},i=l(t,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);const o=l(t,["expireTime"]);e!==void 0&&o!=null&&f(e,["expireTime"],o);const s=l(t,["displayName"]);e!==void 0&&s!=null&&f(e,["displayName"],s);const r=l(t,["contents"]);if(e!==void 0&&r!=null){let h=ln(r);Array.isArray(h)&&(h=h.map(p=>rv(p))),f(e,["contents"],h)}const a=l(t,["systemInstruction"]);e!==void 0&&a!=null&&f(e,["systemInstruction"],rv(St(a)));const u=l(t,["tools"]);if(e!==void 0&&u!=null){let h=u;Array.isArray(h)&&(h=h.map(p=>ZM(p))),f(e,["tools"],h)}const c=l(t,["toolConfig"]);if(e!==void 0&&c!=null&&f(e,["toolConfig"],WM(c)),l(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function MM(t,e){const n={},i=l(t,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);const o=l(t,["expireTime"]);e!==void 0&&o!=null&&f(e,["expireTime"],o);const s=l(t,["displayName"]);e!==void 0&&s!=null&&f(e,["displayName"],s);const r=l(t,["contents"]);if(e!==void 0&&r!=null){let p=ln(r);Array.isArray(p)&&(p=p.map(m=>m)),f(e,["contents"],p)}const a=l(t,["systemInstruction"]);e!==void 0&&a!=null&&f(e,["systemInstruction"],St(a));const u=l(t,["tools"]);if(e!==void 0&&u!=null){let p=u;Array.isArray(p)&&(p=p.map(m=>jM(m))),f(e,["tools"],p)}const c=l(t,["toolConfig"]);e!==void 0&&c!=null&&f(e,["toolConfig"],c);const h=l(t,["kmsKeyName"]);return e!==void 0&&h!=null&&f(e,["encryption_spec","kmsKeyName"],h),n}function xM(t,e){const n={},i=l(e,["model"]);i!=null&&f(n,["model"],GS(t,i));const o=l(e,["config"]);return o!=null&&NM(o,n),n}function bM(t,e){const n={},i=l(e,["model"]);i!=null&&f(n,["model"],GS(t,i));const o=l(e,["config"]);return o!=null&&MM(o,n),n}function DM(t,e){const n={},i=l(e,["name"]);return i!=null&&f(n,["_url","name"],ri(t,i)),n}function PM(t,e){const n={},i=l(e,["name"]);return i!=null&&f(n,["_url","name"],ri(t,i)),n}function VM(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function UM(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function LM(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=l(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function kM(t){const e={},n=l(t,["id"]);n!=null&&f(e,["id"],n);const i=l(t,["args"]);i!=null&&f(e,["args"],i);const o=l(t,["name"]);if(o!=null&&f(e,["name"],o),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function OM(t){const e={},n=l(t,["mode"]);n!=null&&f(e,["mode"],n);const i=l(t,["allowedFunctionNames"]);if(i!=null&&f(e,["allowedFunctionNames"],i),l(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function qM(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(t,["description"]);n!=null&&f(e,["description"],n);const i=l(t,["name"]);i!=null&&f(e,["name"],i);const o=l(t,["parameters"]);o!=null&&f(e,["parameters"],o);const s=l(t,["parametersJsonSchema"]);s!=null&&f(e,["parametersJsonSchema"],s);const r=l(t,["response"]);r!=null&&f(e,["response"],r);const a=l(t,["responseJsonSchema"]);return a!=null&&f(e,["responseJsonSchema"],a),e}function BM(t,e){const n={},i=l(e,["name"]);return i!=null&&f(n,["_url","name"],ri(t,i)),n}function FM(t,e){const n={},i=l(e,["name"]);return i!=null&&f(n,["_url","name"],ri(t,i)),n}function GM(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function zM(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function HM(t,e){const n={},i=l(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const o=l(t,["pageToken"]);return e!==void 0&&o!=null&&f(e,["_query","pageToken"],o),n}function YM(t,e){const n={},i=l(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const o=l(t,["pageToken"]);return e!==void 0&&o!=null&&f(e,["_query","pageToken"],o),n}function JM(t){const e={},n=l(t,["config"]);return n!=null&&HM(n,e),e}function KM(t){const e={},n=l(t,["config"]);return n!=null&&YM(n,e),e}function QM(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=l(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const o=l(t,["cachedContents"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),f(e,["cachedContents"],s)}return e}function $M(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=l(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const o=l(t,["cachedContents"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),f(e,["cachedContents"],s)}return e}function XM(t){const e={},n=l(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const i=l(t,["codeExecutionResult"]);i!=null&&f(e,["codeExecutionResult"],i);const o=l(t,["executableCode"]);o!=null&&f(e,["executableCode"],o);const s=l(t,["fileData"]);s!=null&&f(e,["fileData"],LM(s));const r=l(t,["functionCall"]);r!=null&&f(e,["functionCall"],kM(r));const a=l(t,["functionResponse"]);a!=null&&f(e,["functionResponse"],a);const u=l(t,["inlineData"]);u!=null&&f(e,["inlineData"],wM(u));const c=l(t,["text"]);c!=null&&f(e,["text"],c);const h=l(t,["thought"]);h!=null&&f(e,["thought"],h);const p=l(t,["thoughtSignature"]);p!=null&&f(e,["thoughtSignature"],p);const m=l(t,["videoMetadata"]);return m!=null&&f(e,["videoMetadata"],m),e}function WM(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&f(e,["functionCallingConfig"],OM(n));const i=l(t,["retrievalConfig"]);return i!=null&&f(e,["retrievalConfig"],i),e}function ZM(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>p)),f(e,["functionDeclarations"],h)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=l(t,["googleSearchRetrieval"]);i!=null&&f(e,["googleSearchRetrieval"],i);const o=l(t,["computerUse"]);o!=null&&f(e,["computerUse"],o);const s=l(t,["fileSearch"]);s!=null&&f(e,["fileSearch"],s);const r=l(t,["codeExecution"]);if(r!=null&&f(e,["codeExecution"],r),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=l(t,["googleMaps"]);a!=null&&f(e,["googleMaps"],GM(a));const u=l(t,["googleSearch"]);u!=null&&f(e,["googleSearch"],zM(u));const c=l(t,["urlContext"]);return c!=null&&f(e,["urlContext"],c),e}function jM(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>qM(m))),f(e,["functionDeclarations"],p)}const i=l(t,["retrieval"]);i!=null&&f(e,["retrieval"],i);const o=l(t,["googleSearchRetrieval"]);o!=null&&f(e,["googleSearchRetrieval"],o);const s=l(t,["computerUse"]);if(s!=null&&f(e,["computerUse"],s),l(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=l(t,["codeExecution"]);r!=null&&f(e,["codeExecution"],r);const a=l(t,["enterpriseWebSearch"]);a!=null&&f(e,["enterpriseWebSearch"],a);const u=l(t,["googleMaps"]);u!=null&&f(e,["googleMaps"],u);const c=l(t,["googleSearch"]);c!=null&&f(e,["googleSearch"],c);const h=l(t,["urlContext"]);return h!=null&&f(e,["urlContext"],h),e}function ex(t,e){const n={},i=l(t,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);const o=l(t,["expireTime"]);return e!==void 0&&o!=null&&f(e,["expireTime"],o),n}function tx(t,e){const n={},i=l(t,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);const o=l(t,["expireTime"]);return e!==void 0&&o!=null&&f(e,["expireTime"],o),n}function nx(t,e){const n={},i=l(e,["name"]);i!=null&&f(n,["_url","name"],ri(t,i));const o=l(e,["config"]);return o!=null&&ex(o,n),n}function ix(t,e){const n={},i=l(e,["name"]);i!=null&&f(n,["_url","name"],ri(t,i));const o=l(e,["config"]);return o!=null&&tx(o,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ox extends si{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ko(jn.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,o,s;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=bM(this.apiClient,e);return a=H("cachedContents",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>h)}else{const c=xM(this.apiClient,e);return a=H("cachedContents",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),r.then(h=>h)}}async get(e){var n,i,o,s;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=FM(this.apiClient,e);return a=H("{name}",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>h)}else{const c=BM(this.apiClient,e);return a=H("{name}",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),r.then(h=>h)}}async delete(e){var n,i,o,s;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=PM(this.apiClient,e);return a=H("{name}",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const p=UM(h),m=new j_;return Object.assign(m,p),m})}else{const c=DM(this.apiClient,e);return a=H("{name}",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const p=VM(h),m=new j_;return Object.assign(m,p),m})}}async update(e){var n,i,o,s;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=ix(this.apiClient,e);return a=H("{name}",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>h)}else{const c=nx(this.apiClient,e);return a=H("{name}",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),r.then(h=>h)}}async listInternal(e){var n,i,o,s;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=KM(e);return a=H("cachedContents",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const p=$M(h),m=new ev;return Object.assign(m,p),m})}else{const c=JM(e);return a=H("cachedContents",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const p=QM(h),m=new ev;return Object.assign(m,p),m})}}}function av(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Me(t){return this instanceof Me?(this.v=t,this):new Me(t)}function Ss(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),o,s=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",r),o[Symbol.asyncIterator]=function(){return this},o;function r(_){return function(x){return Promise.resolve(x).then(_,p)}}function a(_,x){i[_]&&(o[_]=function(D){return new Promise(function(V,C){s.push([_,D,V,C])>1||u(_,D)})},x&&(o[_]=x(o[_])))}function u(_,x){try{c(i[_](x))}catch(D){m(s[0][3],D)}}function c(_){_.value instanceof Me?Promise.resolve(_.value.v).then(h,p):m(s[0][2],_)}function h(_){u("next",_)}function p(_){u("throw",_)}function m(_,x){_(x),s.shift(),s.length&&u(s[0][0],s[0][1])}}function ta(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof av=="function"?av(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(s){n[s]=t[s]&&function(r){return new Promise(function(a,u){r=t[s](r),o(a,u,r.done,r.value)})}}function o(s,r,a,u){Promise.resolve(u).then(function(c){s({value:c,done:a})},r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sx(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:tA(n)}function tA(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function rx(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function lv(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const o=[];let s=!0;for(;i<n&&t[i].role==="model";)o.push(t[i]),s&&!tA(t[i])&&(s=!1),i++;s?e.push(...o):e.pop()}return e}class ax{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new lx(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class lx{constructor(e,n,i,o={},s=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=o,this.history=s,this.sendPromise=Promise.resolve(),rx(s)}async sendMessage(e){var n;await this.sendPromise;const i=St(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var s,r,a;const u=await o,c=(r=(s=u.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content,h=u.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let m=[];h!=null&&(m=(a=h.slice(p))!==null&&a!==void 0?a:[]);const _=c?[c]:[];this.recordHistory(i,_,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var n;await this.sendPromise;const i=St(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const s=await o;return this.processStreamResponse(s,i)}getHistory(e=!1){const n=e?lv(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var i,o;return Ss(this,arguments,function*(){var r,a,u,c;const h=[];try{for(var p=!0,m=ta(e),_;_=yield Me(m.next()),r=_.done,!r;p=!0){c=_.value,p=!1;const x=c;if(sx(x)){const D=(o=(i=x.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content;D!==void 0&&h.push(D)}yield yield Me(x)}}catch(x){a={error:x}}finally{try{!p&&!r&&(u=m.return)&&(yield Me(u.call(m)))}finally{if(a)throw a.error}}this.recordHistory(n,h)})}recordHistory(e,n,i){let o=[];n.length>0&&n.every(s=>s.role!==void 0)?o=n:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...lv(i)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _c extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,_c.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ux(t){const e={},n=l(t,["file"]);return n!=null&&f(e,["file"],n),e}function cx(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function fx(t){const e={},n=l(t,["name"]);return n!=null&&f(e,["_url","file"],QS(n)),e}function dx(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function hx(t){const e={},n=l(t,["name"]);return n!=null&&f(e,["_url","file"],QS(n)),e}function px(t,e){const n={},i=l(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const o=l(t,["pageToken"]);return e!==void 0&&o!=null&&f(e,["_query","pageToken"],o),n}function mx(t){const e={},n=l(t,["config"]);return n!=null&&px(n,e),e}function gx(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=l(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const o=l(t,["files"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),f(e,["files"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yx extends si{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ko(jn.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=mx(e);return s=H("files",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:u.headers},h})),o.then(u=>{const c=gx(u),h=new EN;return Object.assign(h,c),h})}}async createInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=ux(e);return s=H("upload/v1beta/files",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{const c=cx(u),h=new SN;return Object.assign(h,c),h})}}async get(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=hx(e);return s=H("files/{file}",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>u)}}async delete(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=fx(e);return s=H("files/{file}",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:u.headers},h})),o.then(u=>{const c=dx(u),h=new AN;return Object.assign(h,c),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $l(t){const e={},n=l(t,["data"]);if(n!=null&&f(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=l(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function _x(t){const e={},n=l(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>Vx(s))),f(e,["parts"],o)}const i=l(t,["role"]);return i!=null&&f(e,["role"],i),e}function vx(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=l(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function Tx(t){const e={},n=l(t,["id"]);n!=null&&f(e,["id"],n);const i=l(t,["args"]);i!=null&&f(e,["args"],i);const o=l(t,["name"]);if(o!=null&&f(e,["name"],o),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Ex(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(t,["description"]);n!=null&&f(e,["description"],n);const i=l(t,["name"]);i!=null&&f(e,["name"],i);const o=l(t,["parameters"]);o!=null&&f(e,["parameters"],o);const s=l(t,["parametersJsonSchema"]);s!=null&&f(e,["parametersJsonSchema"],s);const r=l(t,["response"]);r!=null&&f(e,["response"],r);const a=l(t,["responseJsonSchema"]);return a!=null&&f(e,["responseJsonSchema"],a),e}function Sx(t){const e={},n=l(t,["modelSelectionConfig"]);n!=null&&f(e,["modelConfig"],n);const i=l(t,["responseJsonSchema"]);i!=null&&f(e,["responseJsonSchema"],i);const o=l(t,["audioTimestamp"]);o!=null&&f(e,["audioTimestamp"],o);const s=l(t,["candidateCount"]);s!=null&&f(e,["candidateCount"],s);const r=l(t,["enableAffectiveDialog"]);r!=null&&f(e,["enableAffectiveDialog"],r);const a=l(t,["frequencyPenalty"]);a!=null&&f(e,["frequencyPenalty"],a);const u=l(t,["logprobs"]);u!=null&&f(e,["logprobs"],u);const c=l(t,["maxOutputTokens"]);c!=null&&f(e,["maxOutputTokens"],c);const h=l(t,["mediaResolution"]);h!=null&&f(e,["mediaResolution"],h);const p=l(t,["presencePenalty"]);p!=null&&f(e,["presencePenalty"],p);const m=l(t,["responseLogprobs"]);m!=null&&f(e,["responseLogprobs"],m);const _=l(t,["responseMimeType"]);_!=null&&f(e,["responseMimeType"],_);const x=l(t,["responseModalities"]);x!=null&&f(e,["responseModalities"],x);const D=l(t,["responseSchema"]);D!=null&&f(e,["responseSchema"],D);const V=l(t,["routingConfig"]);V!=null&&f(e,["routingConfig"],V);const C=l(t,["seed"]);C!=null&&f(e,["seed"],C);const E=l(t,["speechConfig"]);E!=null&&f(e,["speechConfig"],nA(E));const I=l(t,["stopSequences"]);I!=null&&f(e,["stopSequences"],I);const b=l(t,["temperature"]);b!=null&&f(e,["temperature"],b);const k=l(t,["thinkingConfig"]);k!=null&&f(e,["thinkingConfig"],k);const B=l(t,["topK"]);B!=null&&f(e,["topK"],B);const A=l(t,["topP"]);if(A!=null&&f(e,["topP"],A),l(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Ax(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function Cx(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function Ix(t,e){const n={},i=l(t,["generationConfig"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig"],i);const o=l(t,["responseModalities"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","responseModalities"],o);const s=l(t,["temperature"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig","temperature"],s);const r=l(t,["topP"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","topP"],r);const a=l(t,["topK"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","topK"],a);const u=l(t,["maxOutputTokens"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","maxOutputTokens"],u);const c=l(t,["mediaResolution"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","mediaResolution"],c);const h=l(t,["seed"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","seed"],h);const p=l(t,["speechConfig"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","speechConfig"],Up(p));const m=l(t,["thinkingConfig"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","thinkingConfig"],m);const _=l(t,["enableAffectiveDialog"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],_);const x=l(t,["systemInstruction"]);e!==void 0&&x!=null&&f(e,["setup","systemInstruction"],_x(St(x)));const D=l(t,["tools"]);if(e!==void 0&&D!=null){let B=Zs(D);Array.isArray(B)&&(B=B.map(A=>Lx(Ws(A)))),f(e,["setup","tools"],B)}const V=l(t,["sessionResumption"]);e!==void 0&&V!=null&&f(e,["setup","sessionResumption"],Ux(V));const C=l(t,["inputAudioTranscription"]);e!==void 0&&C!=null&&f(e,["setup","inputAudioTranscription"],C);const E=l(t,["outputAudioTranscription"]);e!==void 0&&E!=null&&f(e,["setup","outputAudioTranscription"],E);const I=l(t,["realtimeInputConfig"]);e!==void 0&&I!=null&&f(e,["setup","realtimeInputConfig"],I);const b=l(t,["contextWindowCompression"]);e!==void 0&&b!=null&&f(e,["setup","contextWindowCompression"],b);const k=l(t,["proactivity"]);return e!==void 0&&k!=null&&f(e,["setup","proactivity"],k),n}function Rx(t,e){const n={},i=l(t,["generationConfig"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig"],Sx(i));const o=l(t,["responseModalities"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","responseModalities"],o);const s=l(t,["temperature"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig","temperature"],s);const r=l(t,["topP"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","topP"],r);const a=l(t,["topK"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","topK"],a);const u=l(t,["maxOutputTokens"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","maxOutputTokens"],u);const c=l(t,["mediaResolution"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","mediaResolution"],c);const h=l(t,["seed"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","seed"],h);const p=l(t,["speechConfig"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","speechConfig"],nA(Up(p)));const m=l(t,["thinkingConfig"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","thinkingConfig"],m);const _=l(t,["enableAffectiveDialog"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],_);const x=l(t,["systemInstruction"]);e!==void 0&&x!=null&&f(e,["setup","systemInstruction"],St(x));const D=l(t,["tools"]);if(e!==void 0&&D!=null){let B=Zs(D);Array.isArray(B)&&(B=B.map(A=>kx(Ws(A)))),f(e,["setup","tools"],B)}const V=l(t,["sessionResumption"]);e!==void 0&&V!=null&&f(e,["setup","sessionResumption"],V);const C=l(t,["inputAudioTranscription"]);e!==void 0&&C!=null&&f(e,["setup","inputAudioTranscription"],C);const E=l(t,["outputAudioTranscription"]);e!==void 0&&E!=null&&f(e,["setup","outputAudioTranscription"],E);const I=l(t,["realtimeInputConfig"]);e!==void 0&&I!=null&&f(e,["setup","realtimeInputConfig"],I);const b=l(t,["contextWindowCompression"]);e!==void 0&&b!=null&&f(e,["setup","contextWindowCompression"],b);const k=l(t,["proactivity"]);return e!==void 0&&k!=null&&f(e,["setup","proactivity"],k),n}function wx(t,e){const n={},i=l(e,["model"]);i!=null&&f(n,["setup","model"],me(t,i));const o=l(e,["config"]);return o!=null&&f(n,["config"],Ix(o,n)),n}function Nx(t,e){const n={},i=l(e,["model"]);i!=null&&f(n,["setup","model"],me(t,i));const o=l(e,["config"]);return o!=null&&f(n,["config"],Rx(o,n)),n}function Mx(t){const e={},n=l(t,["musicGenerationConfig"]);return n!=null&&f(e,["musicGenerationConfig"],n),e}function xx(t){const e={},n=l(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),f(e,["weightedPrompts"],i)}return e}function bx(t){const e={},n=l(t,["media"]);if(n!=null){let c=zS(n);Array.isArray(c)&&(c=c.map(h=>$l(h))),f(e,["mediaChunks"],c)}const i=l(t,["audio"]);i!=null&&f(e,["audio"],$l(YS(i)));const o=l(t,["audioStreamEnd"]);o!=null&&f(e,["audioStreamEnd"],o);const s=l(t,["video"]);s!=null&&f(e,["video"],$l(HS(s)));const r=l(t,["text"]);r!=null&&f(e,["text"],r);const a=l(t,["activityStart"]);a!=null&&f(e,["activityStart"],a);const u=l(t,["activityEnd"]);return u!=null&&f(e,["activityEnd"],u),e}function Dx(t){const e={},n=l(t,["media"]);if(n!=null){let c=zS(n);Array.isArray(c)&&(c=c.map(h=>h)),f(e,["mediaChunks"],c)}const i=l(t,["audio"]);i!=null&&f(e,["audio"],YS(i));const o=l(t,["audioStreamEnd"]);o!=null&&f(e,["audioStreamEnd"],o);const s=l(t,["video"]);s!=null&&f(e,["video"],HS(s));const r=l(t,["text"]);r!=null&&f(e,["text"],r);const a=l(t,["activityStart"]);a!=null&&f(e,["activityStart"],a);const u=l(t,["activityEnd"]);return u!=null&&f(e,["activityEnd"],u),e}function Px(t){const e={},n=l(t,["setupComplete"]);n!=null&&f(e,["setupComplete"],n);const i=l(t,["serverContent"]);i!=null&&f(e,["serverContent"],i);const o=l(t,["toolCall"]);o!=null&&f(e,["toolCall"],o);const s=l(t,["toolCallCancellation"]);s!=null&&f(e,["toolCallCancellation"],s);const r=l(t,["usageMetadata"]);r!=null&&f(e,["usageMetadata"],Ox(r));const a=l(t,["goAway"]);a!=null&&f(e,["goAway"],a);const u=l(t,["sessionResumptionUpdate"]);return u!=null&&f(e,["sessionResumptionUpdate"],u),e}function Vx(t){const e={},n=l(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const i=l(t,["codeExecutionResult"]);i!=null&&f(e,["codeExecutionResult"],i);const o=l(t,["executableCode"]);o!=null&&f(e,["executableCode"],o);const s=l(t,["fileData"]);s!=null&&f(e,["fileData"],vx(s));const r=l(t,["functionCall"]);r!=null&&f(e,["functionCall"],Tx(r));const a=l(t,["functionResponse"]);a!=null&&f(e,["functionResponse"],a);const u=l(t,["inlineData"]);u!=null&&f(e,["inlineData"],$l(u));const c=l(t,["text"]);c!=null&&f(e,["text"],c);const h=l(t,["thought"]);h!=null&&f(e,["thought"],h);const p=l(t,["thoughtSignature"]);p!=null&&f(e,["thoughtSignature"],p);const m=l(t,["videoMetadata"]);return m!=null&&f(e,["videoMetadata"],m),e}function Ux(t){const e={},n=l(t,["handle"]);if(n!=null&&f(e,["handle"],n),l(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function nA(t){const e={},n=l(t,["languageCode"]);n!=null&&f(e,["languageCode"],n);const i=l(t,["voiceConfig"]);if(i!=null&&f(e,["voiceConfig"],i),l(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function Lx(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>p)),f(e,["functionDeclarations"],h)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=l(t,["googleSearchRetrieval"]);i!=null&&f(e,["googleSearchRetrieval"],i);const o=l(t,["computerUse"]);o!=null&&f(e,["computerUse"],o);const s=l(t,["fileSearch"]);s!=null&&f(e,["fileSearch"],s);const r=l(t,["codeExecution"]);if(r!=null&&f(e,["codeExecution"],r),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=l(t,["googleMaps"]);a!=null&&f(e,["googleMaps"],Ax(a));const u=l(t,["googleSearch"]);u!=null&&f(e,["googleSearch"],Cx(u));const c=l(t,["urlContext"]);return c!=null&&f(e,["urlContext"],c),e}function kx(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>Ex(m))),f(e,["functionDeclarations"],p)}const i=l(t,["retrieval"]);i!=null&&f(e,["retrieval"],i);const o=l(t,["googleSearchRetrieval"]);o!=null&&f(e,["googleSearchRetrieval"],o);const s=l(t,["computerUse"]);if(s!=null&&f(e,["computerUse"],s),l(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=l(t,["codeExecution"]);r!=null&&f(e,["codeExecution"],r);const a=l(t,["enterpriseWebSearch"]);a!=null&&f(e,["enterpriseWebSearch"],a);const u=l(t,["googleMaps"]);u!=null&&f(e,["googleMaps"],u);const c=l(t,["googleSearch"]);c!=null&&f(e,["googleSearch"],c);const h=l(t,["urlContext"]);return h!=null&&f(e,["urlContext"],h),e}function Ox(t){const e={},n=l(t,["promptTokenCount"]);n!=null&&f(e,["promptTokenCount"],n);const i=l(t,["cachedContentTokenCount"]);i!=null&&f(e,["cachedContentTokenCount"],i);const o=l(t,["candidatesTokenCount"]);o!=null&&f(e,["responseTokenCount"],o);const s=l(t,["toolUsePromptTokenCount"]);s!=null&&f(e,["toolUsePromptTokenCount"],s);const r=l(t,["thoughtsTokenCount"]);r!=null&&f(e,["thoughtsTokenCount"],r);const a=l(t,["totalTokenCount"]);a!=null&&f(e,["totalTokenCount"],a);const u=l(t,["promptTokensDetails"]);if(u!=null){let _=u;Array.isArray(_)&&(_=_.map(x=>x)),f(e,["promptTokensDetails"],_)}const c=l(t,["cacheTokensDetails"]);if(c!=null){let _=c;Array.isArray(_)&&(_=_.map(x=>x)),f(e,["cacheTokensDetails"],_)}const h=l(t,["candidatesTokensDetails"]);if(h!=null){let _=h;Array.isArray(_)&&(_=_.map(x=>x)),f(e,["responseTokensDetails"],_)}const p=l(t,["toolUsePromptTokensDetails"]);if(p!=null){let _=p;Array.isArray(_)&&(_=_.map(x=>x)),f(e,["toolUsePromptTokensDetails"],_)}const m=l(t,["trafficType"]);return m!=null&&f(e,["trafficType"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qx(t){const e={},n=l(t,["data"]);if(n!=null&&f(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=l(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function Bx(t){const e={},n=l(t,["content"]);n!=null&&f(e,["content"],n);const i=l(t,["citationMetadata"]);i!=null&&f(e,["citationMetadata"],Fx(i));const o=l(t,["tokenCount"]);o!=null&&f(e,["tokenCount"],o);const s=l(t,["finishReason"]);s!=null&&f(e,["finishReason"],s);const r=l(t,["avgLogprobs"]);r!=null&&f(e,["avgLogprobs"],r);const a=l(t,["groundingMetadata"]);a!=null&&f(e,["groundingMetadata"],a);const u=l(t,["index"]);u!=null&&f(e,["index"],u);const c=l(t,["logprobsResult"]);c!=null&&f(e,["logprobsResult"],c);const h=l(t,["safetyRatings"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(_=>_)),f(e,["safetyRatings"],m)}const p=l(t,["urlContextMetadata"]);return p!=null&&f(e,["urlContextMetadata"],p),e}function Fx(t){const e={},n=l(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),f(e,["citations"],i)}return e}function Gx(t,e){const n={},i=l(e,["model"]);i!=null&&f(n,["_url","model"],me(t,i));const o=l(e,["contents"]);if(o!=null){let s=ln(o);Array.isArray(s)&&(s=s.map(r=>r)),f(n,["contents"],s)}return n}function zx(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=l(t,["tokensInfo"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),f(e,["tokensInfo"],o)}return e}function Hx(t){const e={},n=l(t,["values"]);n!=null&&f(e,["values"],n);const i=l(t,["statistics"]);return i!=null&&f(e,["statistics"],Yx(i)),e}function Yx(t){const e={},n=l(t,["truncated"]);n!=null&&f(e,["truncated"],n);const i=l(t,["token_count"]);return i!=null&&f(e,["tokenCount"],i),e}function vc(t){const e={},n=l(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>eD(s))),f(e,["parts"],o)}const i=l(t,["role"]);return i!=null&&f(e,["role"],i),e}function Jx(t){const e={},n=l(t,["controlType"]);n!=null&&f(e,["controlType"],n);const i=l(t,["enableControlImageComputation"]);return i!=null&&f(e,["computeControl"],i),e}function Kx(t){const e={};if(l(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(l(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(l(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Qx(t,e){const n={},i=l(t,["systemInstruction"]);e!==void 0&&i!=null&&f(e,["systemInstruction"],St(i));const o=l(t,["tools"]);if(e!==void 0&&o!=null){let r=o;Array.isArray(r)&&(r=r.map(a=>aA(a))),f(e,["tools"],r)}const s=l(t,["generationConfig"]);return e!==void 0&&s!=null&&f(e,["generationConfig"],qb(s)),n}function $x(t,e){const n={},i=l(e,["model"]);i!=null&&f(n,["_url","model"],me(t,i));const o=l(e,["contents"]);if(o!=null){let r=ln(o);Array.isArray(r)&&(r=r.map(a=>vc(a))),f(n,["contents"],r)}const s=l(e,["config"]);return s!=null&&Kx(s),n}function Xx(t,e){const n={},i=l(e,["model"]);i!=null&&f(n,["_url","model"],me(t,i));const o=l(e,["contents"]);if(o!=null){let r=ln(o);Array.isArray(r)&&(r=r.map(a=>a)),f(n,["contents"],r)}const s=l(e,["config"]);return s!=null&&Qx(s,n),n}function Wx(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=l(t,["totalTokens"]);i!=null&&f(e,["totalTokens"],i);const o=l(t,["cachedContentTokenCount"]);return o!=null&&f(e,["cachedContentTokenCount"],o),e}function Zx(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=l(t,["totalTokens"]);return i!=null&&f(e,["totalTokens"],i),e}function jx(t,e){const n={},i=l(e,["model"]);return i!=null&&f(n,["_url","name"],me(t,i)),n}function eb(t,e){const n={},i=l(e,["model"]);return i!=null&&f(n,["_url","name"],me(t,i)),n}function tb(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function nb(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function ib(t,e){const n={},i=l(t,["outputGcsUri"]);e!==void 0&&i!=null&&f(e,["parameters","storageUri"],i);const o=l(t,["negativePrompt"]);e!==void 0&&o!=null&&f(e,["parameters","negativePrompt"],o);const s=l(t,["numberOfImages"]);e!==void 0&&s!=null&&f(e,["parameters","sampleCount"],s);const r=l(t,["aspectRatio"]);e!==void 0&&r!=null&&f(e,["parameters","aspectRatio"],r);const a=l(t,["guidanceScale"]);e!==void 0&&a!=null&&f(e,["parameters","guidanceScale"],a);const u=l(t,["seed"]);e!==void 0&&u!=null&&f(e,["parameters","seed"],u);const c=l(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&f(e,["parameters","safetySetting"],c);const h=l(t,["personGeneration"]);e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h);const p=l(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&f(e,["parameters","includeSafetyAttributes"],p);const m=l(t,["includeRaiReason"]);e!==void 0&&m!=null&&f(e,["parameters","includeRaiReason"],m);const _=l(t,["language"]);e!==void 0&&_!=null&&f(e,["parameters","language"],_);const x=l(t,["outputMimeType"]);e!==void 0&&x!=null&&f(e,["parameters","outputOptions","mimeType"],x);const D=l(t,["outputCompressionQuality"]);e!==void 0&&D!=null&&f(e,["parameters","outputOptions","compressionQuality"],D);const V=l(t,["addWatermark"]);e!==void 0&&V!=null&&f(e,["parameters","addWatermark"],V);const C=l(t,["labels"]);e!==void 0&&C!=null&&f(e,["labels"],C);const E=l(t,["editMode"]);e!==void 0&&E!=null&&f(e,["parameters","editMode"],E);const I=l(t,["baseSteps"]);return e!==void 0&&I!=null&&f(e,["parameters","editConfig","baseSteps"],I),n}function ob(t,e){const n={},i=l(e,["model"]);i!=null&&f(n,["_url","model"],me(t,i));const o=l(e,["prompt"]);o!=null&&f(n,["instances[0]","prompt"],o);const s=l(e,["referenceImages"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>rD(u))),f(n,["instances[0]","referenceImages"],a)}const r=l(e,["config"]);return r!=null&&ib(r,n),n}function sb(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=l(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Tc(s))),f(e,["generatedImages"],o)}return e}function rb(t,e){const n={},i=l(t,["taskType"]);e!==void 0&&i!=null&&f(e,["requests[]","taskType"],i);const o=l(t,["title"]);e!==void 0&&o!=null&&f(e,["requests[]","title"],o);const s=l(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&f(e,["requests[]","outputDimensionality"],s),l(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function ab(t,e){const n={},i=l(t,["taskType"]);e!==void 0&&i!=null&&f(e,["instances[]","task_type"],i);const o=l(t,["title"]);e!==void 0&&o!=null&&f(e,["instances[]","title"],o);const s=l(t,["outputDimensionality"]);e!==void 0&&s!=null&&f(e,["parameters","outputDimensionality"],s);const r=l(t,["mimeType"]);e!==void 0&&r!=null&&f(e,["instances[]","mimeType"],r);const a=l(t,["autoTruncate"]);return e!==void 0&&a!=null&&f(e,["parameters","autoTruncate"],a),n}function lb(t,e){const n={},i=l(e,["model"]);i!=null&&f(n,["_url","model"],me(t,i));const o=l(e,["contents"]);if(o!=null){let a=Dp(t,o);Array.isArray(a)&&(a=a.map(u=>u)),f(n,["requests[]","content"],a)}const s=l(e,["config"]);s!=null&&rb(s,n);const r=l(e,["model"]);return r!==void 0&&f(n,["requests[]","model"],me(t,r)),n}function ub(t,e){const n={},i=l(e,["model"]);i!=null&&f(n,["_url","model"],me(t,i));const o=l(e,["contents"]);if(o!=null){let r=Dp(t,o);Array.isArray(r)&&(r=r.map(a=>a)),f(n,["instances[]","content"],r)}const s=l(e,["config"]);return s!=null&&ab(s,n),n}function cb(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=l(t,["embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>r)),f(e,["embeddings"],s)}const o=l(t,["metadata"]);return o!=null&&f(e,["metadata"],o),e}function fb(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=l(t,["predictions[]","embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>Hx(r))),f(e,["embeddings"],s)}const o=l(t,["metadata"]);return o!=null&&f(e,["metadata"],o),e}function db(t){const e={},n=l(t,["endpoint"]);n!=null&&f(e,["name"],n);const i=l(t,["deployedModelId"]);return i!=null&&f(e,["deployedModelId"],i),e}function hb(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=l(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function pb(t){const e={},n=l(t,["id"]);n!=null&&f(e,["id"],n);const i=l(t,["args"]);i!=null&&f(e,["args"],i);const o=l(t,["name"]);if(o!=null&&f(e,["name"],o),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function mb(t){const e={},n=l(t,["mode"]);n!=null&&f(e,["mode"],n);const i=l(t,["allowedFunctionNames"]);if(i!=null&&f(e,["allowedFunctionNames"],i),l(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function gb(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(t,["description"]);n!=null&&f(e,["description"],n);const i=l(t,["name"]);i!=null&&f(e,["name"],i);const o=l(t,["parameters"]);o!=null&&f(e,["parameters"],o);const s=l(t,["parametersJsonSchema"]);s!=null&&f(e,["parametersJsonSchema"],s);const r=l(t,["response"]);r!=null&&f(e,["response"],r);const a=l(t,["responseJsonSchema"]);return a!=null&&f(e,["responseJsonSchema"],a),e}function yb(t,e,n){const i={},o=l(e,["systemInstruction"]);n!==void 0&&o!=null&&f(n,["systemInstruction"],vc(St(o)));const s=l(e,["temperature"]);s!=null&&f(i,["temperature"],s);const r=l(e,["topP"]);r!=null&&f(i,["topP"],r);const a=l(e,["topK"]);a!=null&&f(i,["topK"],a);const u=l(e,["candidateCount"]);u!=null&&f(i,["candidateCount"],u);const c=l(e,["maxOutputTokens"]);c!=null&&f(i,["maxOutputTokens"],c);const h=l(e,["stopSequences"]);h!=null&&f(i,["stopSequences"],h);const p=l(e,["responseLogprobs"]);p!=null&&f(i,["responseLogprobs"],p);const m=l(e,["logprobs"]);m!=null&&f(i,["logprobs"],m);const _=l(e,["presencePenalty"]);_!=null&&f(i,["presencePenalty"],_);const x=l(e,["frequencyPenalty"]);x!=null&&f(i,["frequencyPenalty"],x);const D=l(e,["seed"]);D!=null&&f(i,["seed"],D);const V=l(e,["responseMimeType"]);V!=null&&f(i,["responseMimeType"],V);const C=l(e,["responseSchema"]);C!=null&&f(i,["responseSchema"],Pp(C));const E=l(e,["responseJsonSchema"]);if(E!=null&&f(i,["responseJsonSchema"],E),l(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const I=l(e,["safetySettings"]);if(n!==void 0&&I!=null){let P=I;Array.isArray(P)&&(P=P.map(N=>aD(N))),f(n,["safetySettings"],P)}const b=l(e,["tools"]);if(n!==void 0&&b!=null){let P=Zs(b);Array.isArray(P)&&(P=P.map(N=>pD(Ws(N)))),f(n,["tools"],P)}const k=l(e,["toolConfig"]);if(n!==void 0&&k!=null&&f(n,["toolConfig"],hD(k)),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const B=l(e,["cachedContent"]);n!==void 0&&B!=null&&f(n,["cachedContent"],ri(t,B));const A=l(e,["responseModalities"]);A!=null&&f(i,["responseModalities"],A);const S=l(e,["mediaResolution"]);S!=null&&f(i,["mediaResolution"],S);const T=l(e,["speechConfig"]);if(T!=null&&f(i,["speechConfig"],Vp(T)),l(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const w=l(e,["thinkingConfig"]);w!=null&&f(i,["thinkingConfig"],w);const M=l(e,["imageConfig"]);return M!=null&&f(i,["imageConfig"],Hb(M)),i}function _b(t,e,n){const i={},o=l(e,["systemInstruction"]);n!==void 0&&o!=null&&f(n,["systemInstruction"],St(o));const s=l(e,["temperature"]);s!=null&&f(i,["temperature"],s);const r=l(e,["topP"]);r!=null&&f(i,["topP"],r);const a=l(e,["topK"]);a!=null&&f(i,["topK"],a);const u=l(e,["candidateCount"]);u!=null&&f(i,["candidateCount"],u);const c=l(e,["maxOutputTokens"]);c!=null&&f(i,["maxOutputTokens"],c);const h=l(e,["stopSequences"]);h!=null&&f(i,["stopSequences"],h);const p=l(e,["responseLogprobs"]);p!=null&&f(i,["responseLogprobs"],p);const m=l(e,["logprobs"]);m!=null&&f(i,["logprobs"],m);const _=l(e,["presencePenalty"]);_!=null&&f(i,["presencePenalty"],_);const x=l(e,["frequencyPenalty"]);x!=null&&f(i,["frequencyPenalty"],x);const D=l(e,["seed"]);D!=null&&f(i,["seed"],D);const V=l(e,["responseMimeType"]);V!=null&&f(i,["responseMimeType"],V);const C=l(e,["responseSchema"]);C!=null&&f(i,["responseSchema"],Pp(C));const E=l(e,["responseJsonSchema"]);E!=null&&f(i,["responseJsonSchema"],E);const I=l(e,["routingConfig"]);I!=null&&f(i,["routingConfig"],I);const b=l(e,["modelSelectionConfig"]);b!=null&&f(i,["modelConfig"],b);const k=l(e,["safetySettings"]);if(n!==void 0&&k!=null){let z=k;Array.isArray(z)&&(z=z.map(W=>W)),f(n,["safetySettings"],z)}const B=l(e,["tools"]);if(n!==void 0&&B!=null){let z=Zs(B);Array.isArray(z)&&(z=z.map(W=>aA(Ws(W)))),f(n,["tools"],z)}const A=l(e,["toolConfig"]);n!==void 0&&A!=null&&f(n,["toolConfig"],A);const S=l(e,["labels"]);n!==void 0&&S!=null&&f(n,["labels"],S);const T=l(e,["cachedContent"]);n!==void 0&&T!=null&&f(n,["cachedContent"],ri(t,T));const w=l(e,["responseModalities"]);w!=null&&f(i,["responseModalities"],w);const M=l(e,["mediaResolution"]);M!=null&&f(i,["mediaResolution"],M);const P=l(e,["speechConfig"]);P!=null&&f(i,["speechConfig"],rA(Vp(P)));const N=l(e,["audioTimestamp"]);N!=null&&f(i,["audioTimestamp"],N);const Ue=l(e,["thinkingConfig"]);Ue!=null&&f(i,["thinkingConfig"],Ue);const ut=l(e,["imageConfig"]);return ut!=null&&f(i,["imageConfig"],Yb(ut)),i}function uv(t,e){const n={},i=l(e,["model"]);i!=null&&f(n,["_url","model"],me(t,i));const o=l(e,["contents"]);if(o!=null){let r=ln(o);Array.isArray(r)&&(r=r.map(a=>vc(a))),f(n,["contents"],r)}const s=l(e,["config"]);return s!=null&&f(n,["generationConfig"],yb(t,s,n)),n}function cv(t,e){const n={},i=l(e,["model"]);i!=null&&f(n,["_url","model"],me(t,i));const o=l(e,["contents"]);if(o!=null){let r=ln(o);Array.isArray(r)&&(r=r.map(a=>a)),f(n,["contents"],r)}const s=l(e,["config"]);return s!=null&&f(n,["generationConfig"],_b(t,s,n)),n}function fv(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=l(t,["candidates"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(c=>Bx(c))),f(e,["candidates"],u)}const o=l(t,["modelVersion"]);o!=null&&f(e,["modelVersion"],o);const s=l(t,["promptFeedback"]);s!=null&&f(e,["promptFeedback"],s);const r=l(t,["responseId"]);r!=null&&f(e,["responseId"],r);const a=l(t,["usageMetadata"]);return a!=null&&f(e,["usageMetadata"],a),e}function dv(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=l(t,["candidates"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(h=>h)),f(e,["candidates"],c)}const o=l(t,["createTime"]);o!=null&&f(e,["createTime"],o);const s=l(t,["modelVersion"]);s!=null&&f(e,["modelVersion"],s);const r=l(t,["promptFeedback"]);r!=null&&f(e,["promptFeedback"],r);const a=l(t,["responseId"]);a!=null&&f(e,["responseId"],a);const u=l(t,["usageMetadata"]);return u!=null&&f(e,["usageMetadata"],u),e}function vb(t,e){const n={};if(l(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=l(t,["numberOfImages"]);e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i);const o=l(t,["aspectRatio"]);e!==void 0&&o!=null&&f(e,["parameters","aspectRatio"],o);const s=l(t,["guidanceScale"]);if(e!==void 0&&s!=null&&f(e,["parameters","guidanceScale"],s),l(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const r=l(t,["safetyFilterLevel"]);e!==void 0&&r!=null&&f(e,["parameters","safetySetting"],r);const a=l(t,["personGeneration"]);e!==void 0&&a!=null&&f(e,["parameters","personGeneration"],a);const u=l(t,["includeSafetyAttributes"]);e!==void 0&&u!=null&&f(e,["parameters","includeSafetyAttributes"],u);const c=l(t,["includeRaiReason"]);e!==void 0&&c!=null&&f(e,["parameters","includeRaiReason"],c);const h=l(t,["language"]);e!==void 0&&h!=null&&f(e,["parameters","language"],h);const p=l(t,["outputMimeType"]);e!==void 0&&p!=null&&f(e,["parameters","outputOptions","mimeType"],p);const m=l(t,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&f(e,["parameters","outputOptions","compressionQuality"],m),l(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(l(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const _=l(t,["imageSize"]);if(e!==void 0&&_!=null&&f(e,["parameters","sampleImageSize"],_),l(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function Tb(t,e){const n={},i=l(t,["outputGcsUri"]);e!==void 0&&i!=null&&f(e,["parameters","storageUri"],i);const o=l(t,["negativePrompt"]);e!==void 0&&o!=null&&f(e,["parameters","negativePrompt"],o);const s=l(t,["numberOfImages"]);e!==void 0&&s!=null&&f(e,["parameters","sampleCount"],s);const r=l(t,["aspectRatio"]);e!==void 0&&r!=null&&f(e,["parameters","aspectRatio"],r);const a=l(t,["guidanceScale"]);e!==void 0&&a!=null&&f(e,["parameters","guidanceScale"],a);const u=l(t,["seed"]);e!==void 0&&u!=null&&f(e,["parameters","seed"],u);const c=l(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&f(e,["parameters","safetySetting"],c);const h=l(t,["personGeneration"]);e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h);const p=l(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&f(e,["parameters","includeSafetyAttributes"],p);const m=l(t,["includeRaiReason"]);e!==void 0&&m!=null&&f(e,["parameters","includeRaiReason"],m);const _=l(t,["language"]);e!==void 0&&_!=null&&f(e,["parameters","language"],_);const x=l(t,["outputMimeType"]);e!==void 0&&x!=null&&f(e,["parameters","outputOptions","mimeType"],x);const D=l(t,["outputCompressionQuality"]);e!==void 0&&D!=null&&f(e,["parameters","outputOptions","compressionQuality"],D);const V=l(t,["addWatermark"]);e!==void 0&&V!=null&&f(e,["parameters","addWatermark"],V);const C=l(t,["labels"]);e!==void 0&&C!=null&&f(e,["labels"],C);const E=l(t,["imageSize"]);e!==void 0&&E!=null&&f(e,["parameters","sampleImageSize"],E);const I=l(t,["enhancePrompt"]);return e!==void 0&&I!=null&&f(e,["parameters","enhancePrompt"],I),n}function Eb(t,e){const n={},i=l(e,["model"]);i!=null&&f(n,["_url","model"],me(t,i));const o=l(e,["prompt"]);o!=null&&f(n,["instances[0]","prompt"],o);const s=l(e,["config"]);return s!=null&&vb(s,n),n}function Sb(t,e){const n={},i=l(e,["model"]);i!=null&&f(n,["_url","model"],me(t,i));const o=l(e,["prompt"]);o!=null&&f(n,["instances[0]","prompt"],o);const s=l(e,["config"]);return s!=null&&Tb(s,n),n}function Ab(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=l(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>Ub(r))),f(e,["generatedImages"],s)}const o=l(t,["positivePromptSafetyAttributes"]);return o!=null&&f(e,["positivePromptSafetyAttributes"],oA(o)),e}function Cb(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=l(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>Tc(r))),f(e,["generatedImages"],s)}const o=l(t,["positivePromptSafetyAttributes"]);return o!=null&&f(e,["positivePromptSafetyAttributes"],sA(o)),e}function Ib(t,e){const n={},i=l(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i),l(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=l(t,["durationSeconds"]);if(e!==void 0&&o!=null&&f(e,["parameters","durationSeconds"],o),l(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=l(t,["aspectRatio"]);e!==void 0&&s!=null&&f(e,["parameters","aspectRatio"],s);const r=l(t,["resolution"]);e!==void 0&&r!=null&&f(e,["parameters","resolution"],r);const a=l(t,["personGeneration"]);if(e!==void 0&&a!=null&&f(e,["parameters","personGeneration"],a),l(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const u=l(t,["negativePrompt"]);e!==void 0&&u!=null&&f(e,["parameters","negativePrompt"],u);const c=l(t,["enhancePrompt"]);if(e!==void 0&&c!=null&&f(e,["parameters","enhancePrompt"],c),l(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const h=l(t,["lastFrame"]);e!==void 0&&h!=null&&f(e,["instances[0]","lastFrame"],Ec(h));const p=l(t,["referenceImages"]);if(e!==void 0&&p!=null){let m=p;Array.isArray(m)&&(m=m.map(_=>wD(_))),f(e,["instances[0]","referenceImages"],m)}if(l(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(l(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function Rb(t,e){const n={},i=l(t,["numberOfVideos"]);e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i);const o=l(t,["outputGcsUri"]);e!==void 0&&o!=null&&f(e,["parameters","storageUri"],o);const s=l(t,["fps"]);e!==void 0&&s!=null&&f(e,["parameters","fps"],s);const r=l(t,["durationSeconds"]);e!==void 0&&r!=null&&f(e,["parameters","durationSeconds"],r);const a=l(t,["seed"]);e!==void 0&&a!=null&&f(e,["parameters","seed"],a);const u=l(t,["aspectRatio"]);e!==void 0&&u!=null&&f(e,["parameters","aspectRatio"],u);const c=l(t,["resolution"]);e!==void 0&&c!=null&&f(e,["parameters","resolution"],c);const h=l(t,["personGeneration"]);e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h);const p=l(t,["pubsubTopic"]);e!==void 0&&p!=null&&f(e,["parameters","pubsubTopic"],p);const m=l(t,["negativePrompt"]);e!==void 0&&m!=null&&f(e,["parameters","negativePrompt"],m);const _=l(t,["enhancePrompt"]);e!==void 0&&_!=null&&f(e,["parameters","enhancePrompt"],_);const x=l(t,["generateAudio"]);e!==void 0&&x!=null&&f(e,["parameters","generateAudio"],x);const D=l(t,["lastFrame"]);e!==void 0&&D!=null&&f(e,["instances[0]","lastFrame"],pn(D));const V=l(t,["referenceImages"]);if(e!==void 0&&V!=null){let I=V;Array.isArray(I)&&(I=I.map(b=>ND(b))),f(e,["instances[0]","referenceImages"],I)}const C=l(t,["mask"]);e!==void 0&&C!=null&&f(e,["instances[0]","mask"],RD(C));const E=l(t,["compressionQuality"]);return e!==void 0&&E!=null&&f(e,["parameters","compressionQuality"],E),n}function wb(t){const e={},n=l(t,["name"]);n!=null&&f(e,["name"],n);const i=l(t,["metadata"]);i!=null&&f(e,["metadata"],i);const o=l(t,["done"]);o!=null&&f(e,["done"],o);const s=l(t,["error"]);s!=null&&f(e,["error"],s);const r=l(t,["response","generateVideoResponse"]);return r!=null&&f(e,["response"],bb(r)),e}function Nb(t){const e={},n=l(t,["name"]);n!=null&&f(e,["name"],n);const i=l(t,["metadata"]);i!=null&&f(e,["metadata"],i);const o=l(t,["done"]);o!=null&&f(e,["done"],o);const s=l(t,["error"]);s!=null&&f(e,["error"],s);const r=l(t,["response"]);return r!=null&&f(e,["response"],Db(r)),e}function Mb(t,e){const n={},i=l(e,["model"]);i!=null&&f(n,["_url","model"],me(t,i));const o=l(e,["prompt"]);o!=null&&f(n,["instances[0]","prompt"],o);const s=l(e,["image"]);s!=null&&f(n,["instances[0]","image"],Ec(s));const r=l(e,["video"]);r!=null&&f(n,["instances[0]","video"],lA(r));const a=l(e,["source"]);a!=null&&Pb(a,n);const u=l(e,["config"]);return u!=null&&Ib(u,n),n}function xb(t,e){const n={},i=l(e,["model"]);i!=null&&f(n,["_url","model"],me(t,i));const o=l(e,["prompt"]);o!=null&&f(n,["instances[0]","prompt"],o);const s=l(e,["image"]);s!=null&&f(n,["instances[0]","image"],pn(s));const r=l(e,["video"]);r!=null&&f(n,["instances[0]","video"],uA(r));const a=l(e,["source"]);a!=null&&Vb(a,n);const u=l(e,["config"]);return u!=null&&Rb(u,n),n}function bb(t){const e={},n=l(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>kb(r))),f(e,["generatedVideos"],s)}const i=l(t,["raiMediaFilteredCount"]);i!=null&&f(e,["raiMediaFilteredCount"],i);const o=l(t,["raiMediaFilteredReasons"]);return o!=null&&f(e,["raiMediaFilteredReasons"],o),e}function Db(t){const e={},n=l(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>Ob(r))),f(e,["generatedVideos"],s)}const i=l(t,["raiMediaFilteredCount"]);i!=null&&f(e,["raiMediaFilteredCount"],i);const o=l(t,["raiMediaFilteredReasons"]);return o!=null&&f(e,["raiMediaFilteredReasons"],o),e}function Pb(t,e){const n={},i=l(t,["prompt"]);e!==void 0&&i!=null&&f(e,["instances[0]","prompt"],i);const o=l(t,["image"]);e!==void 0&&o!=null&&f(e,["instances[0]","image"],Ec(o));const s=l(t,["video"]);return e!==void 0&&s!=null&&f(e,["instances[0]","video"],lA(s)),n}function Vb(t,e){const n={},i=l(t,["prompt"]);e!==void 0&&i!=null&&f(e,["instances[0]","prompt"],i);const o=l(t,["image"]);e!==void 0&&o!=null&&f(e,["instances[0]","image"],pn(o));const s=l(t,["video"]);return e!==void 0&&s!=null&&f(e,["instances[0]","video"],uA(s)),n}function Ub(t){const e={},n=l(t,["_self"]);n!=null&&f(e,["image"],Jb(n));const i=l(t,["raiFilteredReason"]);i!=null&&f(e,["raiFilteredReason"],i);const o=l(t,["_self"]);return o!=null&&f(e,["safetyAttributes"],oA(o)),e}function Tc(t){const e={},n=l(t,["_self"]);n!=null&&f(e,["image"],iA(n));const i=l(t,["raiFilteredReason"]);i!=null&&f(e,["raiFilteredReason"],i);const o=l(t,["_self"]);o!=null&&f(e,["safetyAttributes"],sA(o));const s=l(t,["prompt"]);return s!=null&&f(e,["enhancedPrompt"],s),e}function Lb(t){const e={},n=l(t,["_self"]);n!=null&&f(e,["mask"],iA(n));const i=l(t,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),f(e,["labels"],o)}return e}function kb(t){const e={},n=l(t,["video"]);return n!=null&&f(e,["video"],CD(n)),e}function Ob(t){const e={},n=l(t,["_self"]);return n!=null&&f(e,["video"],ID(n)),e}function qb(t){const e={},n=l(t,["modelSelectionConfig"]);n!=null&&f(e,["modelConfig"],n);const i=l(t,["responseJsonSchema"]);i!=null&&f(e,["responseJsonSchema"],i);const o=l(t,["audioTimestamp"]);o!=null&&f(e,["audioTimestamp"],o);const s=l(t,["candidateCount"]);s!=null&&f(e,["candidateCount"],s);const r=l(t,["enableAffectiveDialog"]);r!=null&&f(e,["enableAffectiveDialog"],r);const a=l(t,["frequencyPenalty"]);a!=null&&f(e,["frequencyPenalty"],a);const u=l(t,["logprobs"]);u!=null&&f(e,["logprobs"],u);const c=l(t,["maxOutputTokens"]);c!=null&&f(e,["maxOutputTokens"],c);const h=l(t,["mediaResolution"]);h!=null&&f(e,["mediaResolution"],h);const p=l(t,["presencePenalty"]);p!=null&&f(e,["presencePenalty"],p);const m=l(t,["responseLogprobs"]);m!=null&&f(e,["responseLogprobs"],m);const _=l(t,["responseMimeType"]);_!=null&&f(e,["responseMimeType"],_);const x=l(t,["responseModalities"]);x!=null&&f(e,["responseModalities"],x);const D=l(t,["responseSchema"]);D!=null&&f(e,["responseSchema"],D);const V=l(t,["routingConfig"]);V!=null&&f(e,["routingConfig"],V);const C=l(t,["seed"]);C!=null&&f(e,["seed"],C);const E=l(t,["speechConfig"]);E!=null&&f(e,["speechConfig"],rA(E));const I=l(t,["stopSequences"]);I!=null&&f(e,["stopSequences"],I);const b=l(t,["temperature"]);b!=null&&f(e,["temperature"],b);const k=l(t,["thinkingConfig"]);k!=null&&f(e,["thinkingConfig"],k);const B=l(t,["topK"]);B!=null&&f(e,["topK"],B);const A=l(t,["topP"]);if(A!=null&&f(e,["topP"],A),l(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Bb(t,e){const n={},i=l(e,["model"]);return i!=null&&f(n,["_url","name"],me(t,i)),n}function Fb(t,e){const n={},i=l(e,["model"]);return i!=null&&f(n,["_url","name"],me(t,i)),n}function Gb(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function zb(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function Hb(t){const e={},n=l(t,["aspectRatio"]);n!=null&&f(e,["aspectRatio"],n);const i=l(t,["imageSize"]);if(i!=null&&f(e,["imageSize"],i),l(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(l(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Yb(t){const e={},n=l(t,["aspectRatio"]);n!=null&&f(e,["aspectRatio"],n);const i=l(t,["imageSize"]);i!=null&&f(e,["imageSize"],i);const o=l(t,["outputMimeType"]);o!=null&&f(e,["imageOutputOptions","mimeType"],o);const s=l(t,["outputCompressionQuality"]);return s!=null&&f(e,["imageOutputOptions","compressionQuality"],s),e}function Jb(t){const e={},n=l(t,["bytesBase64Encoded"]);n!=null&&f(e,["imageBytes"],eo(n));const i=l(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function iA(t){const e={},n=l(t,["gcsUri"]);n!=null&&f(e,["gcsUri"],n);const i=l(t,["bytesBase64Encoded"]);i!=null&&f(e,["imageBytes"],eo(i));const o=l(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function Ec(t){const e={};if(l(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=l(t,["imageBytes"]);n!=null&&f(e,["bytesBase64Encoded"],eo(n));const i=l(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function pn(t){const e={},n=l(t,["gcsUri"]);n!=null&&f(e,["gcsUri"],n);const i=l(t,["imageBytes"]);i!=null&&f(e,["bytesBase64Encoded"],eo(i));const o=l(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function Kb(t,e,n){const i={},o=l(e,["pageSize"]);n!==void 0&&o!=null&&f(n,["_query","pageSize"],o);const s=l(e,["pageToken"]);n!==void 0&&s!=null&&f(n,["_query","pageToken"],s);const r=l(e,["filter"]);n!==void 0&&r!=null&&f(n,["_query","filter"],r);const a=l(e,["queryBase"]);return n!==void 0&&a!=null&&f(n,["_url","models_url"],$S(t,a)),i}function Qb(t,e,n){const i={},o=l(e,["pageSize"]);n!==void 0&&o!=null&&f(n,["_query","pageSize"],o);const s=l(e,["pageToken"]);n!==void 0&&s!=null&&f(n,["_query","pageToken"],s);const r=l(e,["filter"]);n!==void 0&&r!=null&&f(n,["_query","filter"],r);const a=l(e,["queryBase"]);return n!==void 0&&a!=null&&f(n,["_url","models_url"],$S(t,a)),i}function $b(t,e){const n={},i=l(e,["config"]);return i!=null&&Kb(t,i,n),n}function Xb(t,e){const n={},i=l(e,["config"]);return i!=null&&Qb(t,i,n),n}function Wb(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=l(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const o=l(t,["_self"]);if(o!=null){let s=XS(o);Array.isArray(s)&&(s=s.map(r=>nh(r))),f(e,["models"],s)}return e}function Zb(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=l(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const o=l(t,["_self"]);if(o!=null){let s=XS(o);Array.isArray(s)&&(s=s.map(r=>ih(r))),f(e,["models"],s)}return e}function jb(t){const e={},n=l(t,["maskMode"]);n!=null&&f(e,["maskMode"],n);const i=l(t,["segmentationClasses"]);i!=null&&f(e,["maskClasses"],i);const o=l(t,["maskDilation"]);return o!=null&&f(e,["dilation"],o),e}function nh(t){const e={},n=l(t,["name"]);n!=null&&f(e,["name"],n);const i=l(t,["displayName"]);i!=null&&f(e,["displayName"],i);const o=l(t,["description"]);o!=null&&f(e,["description"],o);const s=l(t,["version"]);s!=null&&f(e,["version"],s);const r=l(t,["_self"]);r!=null&&f(e,["tunedModelInfo"],mD(r));const a=l(t,["inputTokenLimit"]);a!=null&&f(e,["inputTokenLimit"],a);const u=l(t,["outputTokenLimit"]);u!=null&&f(e,["outputTokenLimit"],u);const c=l(t,["supportedGenerationMethods"]);c!=null&&f(e,["supportedActions"],c);const h=l(t,["temperature"]);h!=null&&f(e,["temperature"],h);const p=l(t,["maxTemperature"]);p!=null&&f(e,["maxTemperature"],p);const m=l(t,["topP"]);m!=null&&f(e,["topP"],m);const _=l(t,["topK"]);_!=null&&f(e,["topK"],_);const x=l(t,["thinking"]);return x!=null&&f(e,["thinking"],x),e}function ih(t){const e={},n=l(t,["name"]);n!=null&&f(e,["name"],n);const i=l(t,["displayName"]);i!=null&&f(e,["displayName"],i);const o=l(t,["description"]);o!=null&&f(e,["description"],o);const s=l(t,["versionId"]);s!=null&&f(e,["version"],s);const r=l(t,["deployedModels"]);if(r!=null){let p=r;Array.isArray(p)&&(p=p.map(m=>db(m))),f(e,["endpoints"],p)}const a=l(t,["labels"]);a!=null&&f(e,["labels"],a);const u=l(t,["_self"]);u!=null&&f(e,["tunedModelInfo"],gD(u));const c=l(t,["defaultCheckpointId"]);c!=null&&f(e,["defaultCheckpointId"],c);const h=l(t,["checkpoints"]);if(h!=null){let p=h;Array.isArray(p)&&(p=p.map(m=>m)),f(e,["checkpoints"],p)}return e}function eD(t){const e={},n=l(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const i=l(t,["codeExecutionResult"]);i!=null&&f(e,["codeExecutionResult"],i);const o=l(t,["executableCode"]);o!=null&&f(e,["executableCode"],o);const s=l(t,["fileData"]);s!=null&&f(e,["fileData"],hb(s));const r=l(t,["functionCall"]);r!=null&&f(e,["functionCall"],pb(r));const a=l(t,["functionResponse"]);a!=null&&f(e,["functionResponse"],a);const u=l(t,["inlineData"]);u!=null&&f(e,["inlineData"],qx(u));const c=l(t,["text"]);c!=null&&f(e,["text"],c);const h=l(t,["thought"]);h!=null&&f(e,["thought"],h);const p=l(t,["thoughtSignature"]);p!=null&&f(e,["thoughtSignature"],p);const m=l(t,["videoMetadata"]);return m!=null&&f(e,["videoMetadata"],m),e}function tD(t){const e={},n=l(t,["productImage"]);return n!=null&&f(e,["image"],pn(n)),e}function nD(t,e){const n={},i=l(t,["numberOfImages"]);e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i);const o=l(t,["baseSteps"]);e!==void 0&&o!=null&&f(e,["parameters","baseSteps"],o);const s=l(t,["outputGcsUri"]);e!==void 0&&s!=null&&f(e,["parameters","storageUri"],s);const r=l(t,["seed"]);e!==void 0&&r!=null&&f(e,["parameters","seed"],r);const a=l(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&f(e,["parameters","safetySetting"],a);const u=l(t,["personGeneration"]);e!==void 0&&u!=null&&f(e,["parameters","personGeneration"],u);const c=l(t,["addWatermark"]);e!==void 0&&c!=null&&f(e,["parameters","addWatermark"],c);const h=l(t,["outputMimeType"]);e!==void 0&&h!=null&&f(e,["parameters","outputOptions","mimeType"],h);const p=l(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&f(e,["parameters","outputOptions","compressionQuality"],p);const m=l(t,["enhancePrompt"]);e!==void 0&&m!=null&&f(e,["parameters","enhancePrompt"],m);const _=l(t,["labels"]);return e!==void 0&&_!=null&&f(e,["labels"],_),n}function iD(t,e){const n={},i=l(e,["model"]);i!=null&&f(n,["_url","model"],me(t,i));const o=l(e,["source"]);o!=null&&sD(o,n);const s=l(e,["config"]);return s!=null&&nD(s,n),n}function oD(t){const e={},n=l(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Tc(o))),f(e,["generatedImages"],i)}return e}function sD(t,e){const n={},i=l(t,["prompt"]);e!==void 0&&i!=null&&f(e,["instances[0]","prompt"],i);const o=l(t,["personImage"]);e!==void 0&&o!=null&&f(e,["instances[0]","personImage","image"],pn(o));const s=l(t,["productImages"]);if(e!==void 0&&s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>tD(a))),f(e,["instances[0]","productImages"],r)}return n}function rD(t){const e={},n=l(t,["referenceImage"]);n!=null&&f(e,["referenceImage"],pn(n));const i=l(t,["referenceId"]);i!=null&&f(e,["referenceId"],i);const o=l(t,["referenceType"]);o!=null&&f(e,["referenceType"],o);const s=l(t,["maskImageConfig"]);s!=null&&f(e,["maskImageConfig"],jb(s));const r=l(t,["controlImageConfig"]);r!=null&&f(e,["controlImageConfig"],Jx(r));const a=l(t,["styleImageConfig"]);a!=null&&f(e,["styleImageConfig"],a);const u=l(t,["subjectImageConfig"]);return u!=null&&f(e,["subjectImageConfig"],u),e}function oA(t){const e={},n=l(t,["safetyAttributes","categories"]);n!=null&&f(e,["categories"],n);const i=l(t,["safetyAttributes","scores"]);i!=null&&f(e,["scores"],i);const o=l(t,["contentType"]);return o!=null&&f(e,["contentType"],o),e}function sA(t){const e={},n=l(t,["safetyAttributes","categories"]);n!=null&&f(e,["categories"],n);const i=l(t,["safetyAttributes","scores"]);i!=null&&f(e,["scores"],i);const o=l(t,["contentType"]);return o!=null&&f(e,["contentType"],o),e}function aD(t){const e={},n=l(t,["category"]);if(n!=null&&f(e,["category"],n),l(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=l(t,["threshold"]);return i!=null&&f(e,["threshold"],i),e}function lD(t){const e={},n=l(t,["image"]);return n!=null&&f(e,["image"],pn(n)),e}function uD(t,e){const n={},i=l(t,["mode"]);e!==void 0&&i!=null&&f(e,["parameters","mode"],i);const o=l(t,["maxPredictions"]);e!==void 0&&o!=null&&f(e,["parameters","maxPredictions"],o);const s=l(t,["confidenceThreshold"]);e!==void 0&&s!=null&&f(e,["parameters","confidenceThreshold"],s);const r=l(t,["maskDilation"]);e!==void 0&&r!=null&&f(e,["parameters","maskDilation"],r);const a=l(t,["binaryColorThreshold"]);e!==void 0&&a!=null&&f(e,["parameters","binaryColorThreshold"],a);const u=l(t,["labels"]);return e!==void 0&&u!=null&&f(e,["labels"],u),n}function cD(t,e){const n={},i=l(e,["model"]);i!=null&&f(n,["_url","model"],me(t,i));const o=l(e,["source"]);o!=null&&dD(o,n);const s=l(e,["config"]);return s!=null&&uD(s,n),n}function fD(t){const e={},n=l(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Lb(o))),f(e,["generatedMasks"],i)}return e}function dD(t,e){const n={},i=l(t,["prompt"]);e!==void 0&&i!=null&&f(e,["instances[0]","prompt"],i);const o=l(t,["image"]);e!==void 0&&o!=null&&f(e,["instances[0]","image"],pn(o));const s=l(t,["scribbleImage"]);return e!==void 0&&s!=null&&f(e,["instances[0]","scribble"],lD(s)),n}function rA(t){const e={},n=l(t,["languageCode"]);n!=null&&f(e,["languageCode"],n);const i=l(t,["voiceConfig"]);if(i!=null&&f(e,["voiceConfig"],i),l(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function hD(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&f(e,["functionCallingConfig"],mb(n));const i=l(t,["retrievalConfig"]);return i!=null&&f(e,["retrievalConfig"],i),e}function pD(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>p)),f(e,["functionDeclarations"],h)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=l(t,["googleSearchRetrieval"]);i!=null&&f(e,["googleSearchRetrieval"],i);const o=l(t,["computerUse"]);o!=null&&f(e,["computerUse"],o);const s=l(t,["fileSearch"]);s!=null&&f(e,["fileSearch"],s);const r=l(t,["codeExecution"]);if(r!=null&&f(e,["codeExecution"],r),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=l(t,["googleMaps"]);a!=null&&f(e,["googleMaps"],Gb(a));const u=l(t,["googleSearch"]);u!=null&&f(e,["googleSearch"],zb(u));const c=l(t,["urlContext"]);return c!=null&&f(e,["urlContext"],c),e}function aA(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>gb(m))),f(e,["functionDeclarations"],p)}const i=l(t,["retrieval"]);i!=null&&f(e,["retrieval"],i);const o=l(t,["googleSearchRetrieval"]);o!=null&&f(e,["googleSearchRetrieval"],o);const s=l(t,["computerUse"]);if(s!=null&&f(e,["computerUse"],s),l(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=l(t,["codeExecution"]);r!=null&&f(e,["codeExecution"],r);const a=l(t,["enterpriseWebSearch"]);a!=null&&f(e,["enterpriseWebSearch"],a);const u=l(t,["googleMaps"]);u!=null&&f(e,["googleMaps"],u);const c=l(t,["googleSearch"]);c!=null&&f(e,["googleSearch"],c);const h=l(t,["urlContext"]);return h!=null&&f(e,["urlContext"],h),e}function mD(t){const e={},n=l(t,["baseModel"]);n!=null&&f(e,["baseModel"],n);const i=l(t,["createTime"]);i!=null&&f(e,["createTime"],i);const o=l(t,["updateTime"]);return o!=null&&f(e,["updateTime"],o),e}function gD(t){const e={},n=l(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&f(e,["baseModel"],n);const i=l(t,["createTime"]);i!=null&&f(e,["createTime"],i);const o=l(t,["updateTime"]);return o!=null&&f(e,["updateTime"],o),e}function yD(t,e){const n={},i=l(t,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);const o=l(t,["description"]);e!==void 0&&o!=null&&f(e,["description"],o);const s=l(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&f(e,["defaultCheckpointId"],s),n}function _D(t,e){const n={},i=l(t,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);const o=l(t,["description"]);e!==void 0&&o!=null&&f(e,["description"],o);const s=l(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&f(e,["defaultCheckpointId"],s),n}function vD(t,e){const n={},i=l(e,["model"]);i!=null&&f(n,["_url","name"],me(t,i));const o=l(e,["config"]);return o!=null&&yD(o,n),n}function TD(t,e){const n={},i=l(e,["model"]);i!=null&&f(n,["_url","model"],me(t,i));const o=l(e,["config"]);return o!=null&&_D(o,n),n}function ED(t,e){const n={},i=l(t,["outputGcsUri"]);e!==void 0&&i!=null&&f(e,["parameters","storageUri"],i);const o=l(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&f(e,["parameters","safetySetting"],o);const s=l(t,["personGeneration"]);e!==void 0&&s!=null&&f(e,["parameters","personGeneration"],s);const r=l(t,["includeRaiReason"]);e!==void 0&&r!=null&&f(e,["parameters","includeRaiReason"],r);const a=l(t,["outputMimeType"]);e!==void 0&&a!=null&&f(e,["parameters","outputOptions","mimeType"],a);const u=l(t,["outputCompressionQuality"]);e!==void 0&&u!=null&&f(e,["parameters","outputOptions","compressionQuality"],u);const c=l(t,["enhanceInputImage"]);e!==void 0&&c!=null&&f(e,["parameters","upscaleConfig","enhanceInputImage"],c);const h=l(t,["imagePreservationFactor"]);e!==void 0&&h!=null&&f(e,["parameters","upscaleConfig","imagePreservationFactor"],h);const p=l(t,["labels"]);e!==void 0&&p!=null&&f(e,["labels"],p);const m=l(t,["numberOfImages"]);e!==void 0&&m!=null&&f(e,["parameters","sampleCount"],m);const _=l(t,["mode"]);return e!==void 0&&_!=null&&f(e,["parameters","mode"],_),n}function SD(t,e){const n={},i=l(e,["model"]);i!=null&&f(n,["_url","model"],me(t,i));const o=l(e,["image"]);o!=null&&f(n,["instances[0]","image"],pn(o));const s=l(e,["upscaleFactor"]);s!=null&&f(n,["parameters","upscaleConfig","upscaleFactor"],s);const r=l(e,["config"]);return r!=null&&ED(r,n),n}function AD(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=l(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Tc(s))),f(e,["generatedImages"],o)}return e}function CD(t){const e={},n=l(t,["uri"]);n!=null&&f(e,["uri"],n);const i=l(t,["encodedVideo"]);i!=null&&f(e,["videoBytes"],eo(i));const o=l(t,["encoding"]);return o!=null&&f(e,["mimeType"],o),e}function ID(t){const e={},n=l(t,["gcsUri"]);n!=null&&f(e,["uri"],n);const i=l(t,["bytesBase64Encoded"]);i!=null&&f(e,["videoBytes"],eo(i));const o=l(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function RD(t){const e={},n=l(t,["image"]);n!=null&&f(e,["_self"],pn(n));const i=l(t,["maskMode"]);return i!=null&&f(e,["maskMode"],i),e}function wD(t){const e={},n=l(t,["image"]);n!=null&&f(e,["image"],Ec(n));const i=l(t,["referenceType"]);return i!=null&&f(e,["referenceType"],i),e}function ND(t){const e={},n=l(t,["image"]);n!=null&&f(e,["image"],pn(n));const i=l(t,["referenceType"]);return i!=null&&f(e,["referenceType"],i),e}function lA(t){const e={},n=l(t,["uri"]);n!=null&&f(e,["uri"],n);const i=l(t,["videoBytes"]);i!=null&&f(e,["encodedVideo"],eo(i));const o=l(t,["mimeType"]);return o!=null&&f(e,["encoding"],o),e}function uA(t){const e={},n=l(t,["uri"]);n!=null&&f(e,["gcsUri"],n);const i=l(t,["videoBytes"]);i!=null&&f(e,["bytesBase64Encoded"],eo(i));const o=l(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const MD="Content-Type",xD="X-Server-Timeout",bD="User-Agent",oh="x-goog-api-client",DD="1.30.0",PD=`google-genai-sdk/${DD}`,VD="v1beta1",UD="v1beta",hv=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class LD{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:VD,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:UD,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const o=[this.getRequestUrlInternal(n)];return i&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[r,a]of Object.entries(e.queryParams))o.searchParams.append(r,String(a));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,n,o.toString(),e.abortSignal),this.unaryApiCall(o,s,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[o,s]of Object.entries(n))typeof s=="object"?i[o]=Object.assign(Object.assign({},i[o]),s):s!==void 0&&(i[o]=s);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,n,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,n,o.toString(),e.abortSignal),this.streamApiCall(o,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i,o){if(n&&n.timeout||o){const s=new AbortController,r=s.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const a=setTimeout(()=>s.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}o&&o.addEventListener("abort",()=>{s.abort()}),e.signal=r}return n&&n.extraBody!==null&&kD(e,n.extraBody),e.headers=await this.getHeadersInternal(n,i),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await pv(o),new jd(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await pv(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var n;return Ss(this,arguments,function*(){const o=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),s=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let r="";for(;;){const{done:a,value:u}=yield Me(o.read());if(a){if(r.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const c=s.decode(u,{stream:!0});try{const p=JSON.parse(c);if("error"in p){const m=JSON.parse(JSON.stringify(p.error)),_=m.status,x=m.code,D=`got status: ${_}. ${JSON.stringify(p)}`;if(x>=400&&x<600)throw new _c({message:D,status:x})}}catch(p){if(p.name==="ApiError")throw p}r+=c;let h=r.match(hv);for(;h;){const p=h[1];try{const m=new Response(p,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Me(new jd(m)),r=r.slice(h[0].length),h=r.match(hv)}catch(m){throw new Error(`exception parsing stream chunk ${p}. ${m}`)}}}}finally{o.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=PD+" "+this.clientOptions.userAgentExtra;return e[bD]=n,e[oh]=n,e[MD]="application/json",e}async getHeadersInternal(e,n){const i=new Headers;if(e&&e.headers){for(const[o,s]of Object.entries(e.headers))i.append(o,s);e.timeout&&e.timeout>0&&i.append(xD,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(e){var n;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(e,n){var i;const o={};n!=null&&(o.mimeType=n.mimeType,o.name=n.name,o.displayName=n.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const s=this.clientOptions.uploader,r=await s.stat(e);o.sizeBytes=String(r.size);const a=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:r.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=a;const u={file:o},c=this.getFileName(e),h=H("upload/v1beta/files",u._url),p=await this.fetchUploadUrl(h,o.sizeBytes,o.mimeType,c,u,n==null?void 0:n.httpOptions);return s.upload(e,p,this)}async uploadFileToFileSearchStore(e,n,i){var o;const s=this.clientOptions.uploader,r=await s.stat(n),a=String(r.size),u=(o=i==null?void 0:i.mimeType)!==null&&o!==void 0?o:r.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const c=`upload/v1beta/${e}:uploadToFileSearchStore`,h=this.getFileName(n),p={};i!=null&&i.customMetadata&&(p.customMetadata=i.customMetadata),i!=null&&i.chunkingConfig&&(p.chunkingConfig=i.chunkingConfig);const m=await this.fetchUploadUrl(c,a,u,h,p,i==null?void 0:i.httpOptions);return s.uploadToFileSearchStore(n,m,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,i,o,s,r){var a;let u={};r?u=r:u={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},o?{"X-Goog-Upload-File-Name":o}:{})};const c=await this.request({path:e,body:JSON.stringify(s),httpMethod:"POST",httpOptions:u});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const h=(a=c==null?void 0:c.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(h===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return h}}async function pv(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const o=JSON.stringify(i);throw n>=400&&n<600?new _c({message:o,status:n}):new Error(o)}}function kD(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const s=JSON.parse(t.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))n=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(s,r){const a=Object.assign({},s);for(const u in r)if(Object.prototype.hasOwnProperty.call(r,u)){const c=r[u],h=a[u];c&&typeof c=="object"&&!Array.isArray(c)&&h&&typeof h=="object"&&!Array.isArray(h)?a[u]=i(h,c):(h&&c&&typeof h!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${u}". Original type: ${typeof h}, New type: ${typeof c}. Overwriting.`),a[u]=c)}return a}const o=i(n,e);t.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const OD="mcp_used/unknown";let qD=!1;function cA(t){for(const e of t)if(BD(e)||typeof e=="object"&&"inputSchema"in e)return!0;return qD}function fA(t){var e;const n=(e=t[oh])!==null&&e!==void 0?e:"";t[oh]=(n+` ${OD}`).trimStart()}function BD(t){return t!==null&&typeof t=="object"&&t instanceof Lp}function FD(t,e=100){return Ss(this,arguments,function*(){let i,o=0;for(;o<e;){const s=yield Me(t.listTools({cursor:i}));for(const r of s.tools)yield yield Me(r),o++;if(!s.nextCursor)break;i=s.nextCursor}})}class Lp{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Lp(e,n)}async initialize(){var e,n,i,o;if(this.mcpTools.length>0)return;const s={},r=[];for(const h of this.mcpClients)try{for(var a=!0,u=(n=void 0,ta(FD(h))),c;c=await u.next(),e=c.done,!e;a=!0){o=c.value,a=!1;const p=o;r.push(p);const m=p.name;if(s[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);s[m]=h}}catch(p){n={error:p}}finally{try{!a&&!e&&(i=u.return)&&await i.call(u)}finally{if(n)throw n.error}}this.mcpTools=r,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),PN(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[i.name];let s;this.config.timeout&&(s={timeout:this.config.timeout});const r=await o.callTool({name:i.name,arguments:i.args},void 0,s);n.push({functionResponse:{name:i.name,response:r.isError?{error:r}:r}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function GD(t,e,n){const i=new IN;let o;n.data instanceof Blob?o=JSON.parse(await n.data.text()):o=JSON.parse(n.data),Object.assign(i,o),e(i)}class zD{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),r=JD(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),u=`${o}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${a}`;let c=()=>{};const h=new Promise(I=>{c=I}),p=e.callbacks,m=function(){c({})},_=this.apiClient,x={onopen:m,onmessage:I=>{GD(_,p.onmessage,I)},onerror:(n=p==null?void 0:p.onerror)!==null&&n!==void 0?n:function(I){},onclose:(i=p==null?void 0:p.onclose)!==null&&i!==void 0?i:function(I){}},D=this.webSocketFactory.create(u,YD(r),x);D.connect(),await h;const E={setup:{model:me(this.apiClient,e.model)}};return D.send(JSON.stringify(E)),new HD(D,this.apiClient)}}class HD{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=xx(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=Mx(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(hs.PLAY)}pause(){this.sendPlaybackControl(hs.PAUSE)}stop(){this.sendPlaybackControl(hs.STOP)}resetContext(){this.sendPlaybackControl(hs.RESET_CONTEXT)}close(){this.conn.close()}}function YD(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function JD(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const KD="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function QD(t,e,n){const i=new CN;let o;n.data instanceof Blob?o=await n.data.text():n.data instanceof ArrayBuffer?o=new TextDecoder().decode(n.data):o=n.data;const s=JSON.parse(o);if(t.isVertexAI()){const r=Px(s);Object.assign(i,r)}else Object.assign(i,s);e(i)}class $D{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new zD(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,o,s,r,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const u=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let h;const p=this.apiClient.getHeaders();e.config&&e.config.tools&&cA(e.config.tools)&&fA(p);const m=jD(p);if(this.apiClient.isVertexAI())h=`${u}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m,h);else{const T=this.apiClient.getApiKey();let w="BidiGenerateContent",M="key";T!=null&&T.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),w="BidiGenerateContentConstrained",M="access_token"),h=`${u}/ws/google.ai.generativelanguage.${c}.GenerativeService.${w}?${M}=${T}`}let _=()=>{};const x=new Promise(T=>{_=T}),D=e.callbacks,V=function(){var T;(T=D==null?void 0:D.onopen)===null||T===void 0||T.call(D),_({})},C=this.apiClient,E={onopen:V,onmessage:T=>{QD(C,D.onmessage,T)},onerror:(n=D==null?void 0:D.onerror)!==null&&n!==void 0?n:function(T){},onclose:(i=D==null?void 0:D.onclose)!==null&&i!==void 0?i:function(T){}},I=this.webSocketFactory.create(h,ZD(m),E);I.connect(),await x;let b=me(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&b.startsWith("publishers/")){const T=this.apiClient.getProject(),w=this.apiClient.getLocation();b=`projects/${T}/locations/${w}/`+b}let k={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Du.AUDIO]}:e.config.responseModalities=[Du.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const B=(a=(r=e.config)===null||r===void 0?void 0:r.tools)!==null&&a!==void 0?a:[],A=[];for(const T of B)if(this.isCallableTool(T)){const w=T;A.push(await w.tool())}else A.push(T);A.length>0&&(e.config.tools=A);const S={model:b,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?k=Nx(this.apiClient,S):k=wx(this.apiClient,S),delete k.config,I.send(JSON.stringify(k)),new WD(I,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const XD={turnComplete:!0};class WD{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=ln(n.turns),e.isVertexAI()||(i=i.map(o=>vc(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const s of i){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(KD)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},XD),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:Dx(e)}:n={realtimeInput:bx(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function ZD(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function jD(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mv=10;function gv(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const r of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(As(r)){o=!0;break}if(!o)return!0;const s=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function As(t){return"callTool"in t&&typeof t.callTool=="function"}function e2(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(o=>As(o)))!==null&&i!==void 0?i:!1}function yv(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((i,o)=>{if(As(i))return;const s=i;s.functionDeclarations&&s.functionDeclarations.length>0&&n.push(o)}),n}function _v(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class t2 extends si{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,o,s,r,a;const u=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!e2(n)||gv(n.config))return await this.generateContentInternal(u);const c=yv(n);if(c.length>0){const D=c.map(V=>`tools[${V}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${D}.`)}let h,p;const m=ln(u.contents),_=(s=(o=(i=u.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&s!==void 0?s:mv;let x=0;for(;x<_&&(h=await this.generateContentInternal(u),!(!h.functionCalls||h.functionCalls.length===0));){const D=h.candidates[0].content,V=[];for(const C of(a=(r=n.config)===null||r===void 0?void 0:r.tools)!==null&&a!==void 0?a:[])if(As(C)){const I=await C.callTool(h.functionCalls);V.push(...I)}x++,p={role:"user",parts:V},u.contents=ln(u.contents),u.contents.push(D),u.contents.push(p),_v(u.config)&&(m.push(D),m.push(p))}return _v(u.config)&&(h.automaticFunctionCallingHistory=m),h},this.generateContentStream=async n=>{var i,o,s,r,a;if(this.maybeMoveToResponseJsonSchem(n),gv(n.config)){const p=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(p)}const u=yv(n);if(u.length>0){const p=u.map(m=>`tools[${m}]`).join(", ");throw new Error(`Incompatible tools found at ${p}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const c=(s=(o=(i=n==null?void 0:n.config)===null||i===void 0?void 0:i.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||s===void 0?void 0:s.streamFunctionCallArguments,h=(a=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||a===void 0?void 0:a.disable;if(c&&!h)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var o;let s;const r=[];if(i!=null&&i.generatedImages)for(const u of i.generatedImages)u&&(u!=null&&u.safetyAttributes)&&((o=u==null?void 0:u.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?s=u==null?void 0:u.safetyAttributes:r.push(u);let a;return s?a={generatedImages:r,positivePromptSafetyAttributes:s,sdkHttpResponse:i.sdkHttpResponse}:a={generatedImages:r,sdkHttpResponse:i.sdkHttpResponse},a}),this.list=async n=>{var i;const r={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!r.config.queryBase){if(!((i=r.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");r.config.filter="labels.tune-type:*"}return new ko(jn.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(r),r)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const o={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async n=>{var i,o,s,r,a,u;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((o=n.video)===null||o===void 0)&&o.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((r=(s=n.source)===null||s===void 0?void 0:s.video)===null||r===void 0)&&r.uri&&(!((u=(a=n.source)===null||a===void 0?void 0:a.video)===null||u===void 0)&&u.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,o;const s=(n=e.config)===null||n===void 0?void 0:n.tools;if(!s)return e;const r=await Promise.all(s.map(async u=>As(u)?await u.tool():u)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:r})};if(a.config.tools=r,e.config&&e.config.tools&&cA(e.config.tools)){const u=(o=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{};let c=Object.assign({},u);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),fA(c),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return a}async initAfcToolsMap(e){var n,i,o;const s=new Map;for(const r of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(As(r)){const a=r,u=await a.tool();for(const c of(o=u.functionDeclarations)!==null&&o!==void 0?o:[]){if(!c.name)throw new Error("Function declaration name is required.");if(s.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);s.set(c.name,a)}}return s}async processAfcStream(e){var n,i,o;const s=(o=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:mv;let r=!1,a=0;const u=await this.initAfcToolsMap(e);return function(c,h,p){var m,_;return Ss(this,arguments,function*(){for(var x,D,V,C;a<s;){r&&(a++,r=!1);const k=yield Me(c.processParamsMaybeAddMcpUsage(p)),B=yield Me(c.generateContentStreamInternal(k)),A=[],S=[];try{for(var E=!0,I=(D=void 0,ta(B)),b;b=yield Me(I.next()),x=b.done,!x;E=!0){C=b.value,E=!1;const T=C;if(yield yield Me(T),T.candidates&&(!((m=T.candidates[0])===null||m===void 0)&&m.content)){S.push(T.candidates[0].content);for(const w of(_=T.candidates[0].content.parts)!==null&&_!==void 0?_:[])if(a<s&&w.functionCall){if(!w.functionCall.name)throw new Error("Function call name was not returned by the model.");if(h.has(w.functionCall.name)){const M=yield Me(h.get(w.functionCall.name).callTool([w.functionCall]));A.push(...M)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${h.keys()}, mising tool: ${w.functionCall.name}`)}}}}catch(T){D={error:T}}finally{try{!E&&!x&&(V=I.return)&&(yield Me(V.call(I)))}finally{if(D)throw D.error}}if(A.length>0){r=!0;const T=new br;T.candidates=[{content:{role:"user",parts:A}}],yield yield Me(T);const w=[];w.push(...S),w.push({role:"user",parts:A});const M=ln(p.contents).concat(w);p.contents=M}else break}})}(this,u,e)}async generateContentInternal(e){var n,i,o,s;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=cv(this.apiClient,e);return a=H("{model}:generateContent",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const p=dv(h),m=new br;return Object.assign(m,p),m})}else{const c=uv(this.apiClient,e);return a=H("{model}:generateContent",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const p=fv(h),m=new br;return Object.assign(m,p),m})}}async generateContentStreamInternal(e){var n,i,o,s;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=cv(this.apiClient,e);return a=H("{model}:streamGenerateContent?alt=sse",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.requestStream({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),r.then(function(p){return Ss(this,arguments,function*(){var m,_,x,D;try{for(var V=!0,C=ta(p),E;E=yield Me(C.next()),m=E.done,!m;V=!0){D=E.value,V=!1;const I=D,b=dv(yield Me(I.json()));b.sdkHttpResponse={headers:I.headers};const k=new br;Object.assign(k,b),yield yield Me(k)}}catch(I){_={error:I}}finally{try{!V&&!m&&(x=C.return)&&(yield Me(x.call(C)))}finally{if(_)throw _.error}}})})}else{const c=uv(this.apiClient,e);return a=H("{model}:streamGenerateContent?alt=sse",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.requestStream({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),r.then(function(p){return Ss(this,arguments,function*(){var m,_,x,D;try{for(var V=!0,C=ta(p),E;E=yield Me(C.next()),m=E.done,!m;V=!0){D=E.value,V=!1;const I=D,b=fv(yield Me(I.json()));b.sdkHttpResponse={headers:I.headers};const k=new br;Object.assign(k,b),yield yield Me(k)}}catch(I){_={error:I}}finally{try{!V&&!m&&(x=C.return)&&(yield Me(x.call(C)))}finally{if(_)throw _.error}}})})}}async embedContent(e){var n,i,o,s;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=ub(this.apiClient,e);return a=H("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const p=fb(h),m=new K_;return Object.assign(m,p),m})}else{const c=lb(this.apiClient,e);return a=H("{model}:batchEmbedContents",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const p=cb(h),m=new K_;return Object.assign(m,p),m})}}async generateImagesInternal(e){var n,i,o,s;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=Sb(this.apiClient,e);return a=H("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const p=Cb(h),m=new Q_;return Object.assign(m,p),m})}else{const c=Eb(this.apiClient,e);return a=H("{model}:predict",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const p=Ab(h),m=new Q_;return Object.assign(m,p),m})}}async editImageInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI()){const a=ob(this.apiClient,e);return s=H("{model}:predict",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:u.headers},h})),o.then(u=>{const c=sb(u),h=new hN;return Object.assign(h,c),h})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI()){const a=SD(this.apiClient,e);return s=H("{model}:predict",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:u.headers},h})),o.then(u=>{const c=AD(u),h=new pN;return Object.assign(h,c),h})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI()){const a=iD(this.apiClient,e);return s=H("{model}:predict",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{const c=oD(u),h=new mN;return Object.assign(h,c),h})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI()){const a=cD(this.apiClient,e);return s=H("{model}:predict",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{const c=fD(u),h=new gN;return Object.assign(h,c),h})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,o,s;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=Fb(this.apiClient,e);return a=H("{name}",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>ih(h))}else{const c=Bb(this.apiClient,e);return a=H("{name}",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),r.then(h=>nh(h))}}async listInternal(e){var n,i,o,s;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=Xb(this.apiClient,e);return a=H("{models_url}",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const p=Zb(h),m=new $_;return Object.assign(m,p),m})}else{const c=$b(this.apiClient,e);return a=H("{models_url}",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const p=Wb(h),m=new $_;return Object.assign(m,p),m})}}async update(e){var n,i,o,s;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=TD(this.apiClient,e);return a=H("{model}",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>ih(h))}else{const c=vD(this.apiClient,e);return a=H("{name}",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),r.then(h=>nh(h))}}async delete(e){var n,i,o,s;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=eb(this.apiClient,e);return a=H("{name}",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const p=nb(h),m=new X_;return Object.assign(m,p),m})}else{const c=jx(this.apiClient,e);return a=H("{name}",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const p=tb(h),m=new X_;return Object.assign(m,p),m})}}async countTokens(e){var n,i,o,s;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=Xx(this.apiClient,e);return a=H("{model}:countTokens",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const p=Zx(h),m=new W_;return Object.assign(m,p),m})}else{const c=$x(this.apiClient,e);return a=H("{model}:countTokens",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const p=Wx(h),m=new W_;return Object.assign(m,p),m})}}async computeTokens(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI()){const a=Gx(this.apiClient,e);return s=H("{model}:computeTokens",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:u.headers},h})),o.then(u=>{const c=zx(u),h=new yN;return Object.assign(h,c),h})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,o,s;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=xb(this.apiClient,e);return a=H("{model}:predictLongRunning",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>{const p=Nb(h),m=new Pu;return Object.assign(m,p),m})}else{const c=Mb(this.apiClient,e);return a=H("{model}:predictLongRunning",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),r.then(h=>{const p=wb(h),m=new Pu;return Object.assign(m,p),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class n2 extends si{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let s;i&&"httpOptions"in i&&(s=i.httpOptions);const r=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let s;i&&"httpOptions"in i&&(s=i.httpOptions);const r=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,o,s;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=aN(e);return a=H("{operationName}",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r}else{const c=rN(e);return a=H("{operationName}",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),r}}async fetchPredictVideosOperationInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI()){const a=j1(e);return s=H("{resourceName}:fetchPredictOperation",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function i2(t){const e={},n=l(t,["data"]);if(n!=null&&f(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=l(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function o2(t){const e={},n=l(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>h2(s))),f(e,["parts"],o)}const i=l(t,["role"]);return i!=null&&f(e,["role"],i),e}function s2(t,e,n){const i={},o=l(e,["expireTime"]);n!==void 0&&o!=null&&f(n,["expireTime"],o);const s=l(e,["newSessionExpireTime"]);n!==void 0&&s!=null&&f(n,["newSessionExpireTime"],s);const r=l(e,["uses"]);n!==void 0&&r!=null&&f(n,["uses"],r);const a=l(e,["liveConnectConstraints"]);n!==void 0&&a!=null&&f(n,["bidiGenerateContentSetup"],d2(t,a));const u=l(e,["lockAdditionalFields"]);return n!==void 0&&u!=null&&f(n,["fieldMask"],u),i}function r2(t,e){const n={},i=l(e,["config"]);return i!=null&&f(n,["config"],s2(t,i,n)),n}function a2(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=l(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function l2(t){const e={},n=l(t,["id"]);n!=null&&f(e,["id"],n);const i=l(t,["args"]);i!=null&&f(e,["args"],i);const o=l(t,["name"]);if(o!=null&&f(e,["name"],o),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function u2(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function c2(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function f2(t,e){const n={},i=l(t,["generationConfig"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig"],i);const o=l(t,["responseModalities"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","responseModalities"],o);const s=l(t,["temperature"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig","temperature"],s);const r=l(t,["topP"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","topP"],r);const a=l(t,["topK"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","topK"],a);const u=l(t,["maxOutputTokens"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","maxOutputTokens"],u);const c=l(t,["mediaResolution"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","mediaResolution"],c);const h=l(t,["seed"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","seed"],h);const p=l(t,["speechConfig"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","speechConfig"],Up(p));const m=l(t,["thinkingConfig"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","thinkingConfig"],m);const _=l(t,["enableAffectiveDialog"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],_);const x=l(t,["systemInstruction"]);e!==void 0&&x!=null&&f(e,["setup","systemInstruction"],o2(St(x)));const D=l(t,["tools"]);if(e!==void 0&&D!=null){let B=Zs(D);Array.isArray(B)&&(B=B.map(A=>m2(Ws(A)))),f(e,["setup","tools"],B)}const V=l(t,["sessionResumption"]);e!==void 0&&V!=null&&f(e,["setup","sessionResumption"],p2(V));const C=l(t,["inputAudioTranscription"]);e!==void 0&&C!=null&&f(e,["setup","inputAudioTranscription"],C);const E=l(t,["outputAudioTranscription"]);e!==void 0&&E!=null&&f(e,["setup","outputAudioTranscription"],E);const I=l(t,["realtimeInputConfig"]);e!==void 0&&I!=null&&f(e,["setup","realtimeInputConfig"],I);const b=l(t,["contextWindowCompression"]);e!==void 0&&b!=null&&f(e,["setup","contextWindowCompression"],b);const k=l(t,["proactivity"]);return e!==void 0&&k!=null&&f(e,["setup","proactivity"],k),n}function d2(t,e){const n={},i=l(e,["model"]);i!=null&&f(n,["setup","model"],me(t,i));const o=l(e,["config"]);return o!=null&&f(n,["config"],f2(o,n)),n}function h2(t){const e={},n=l(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const i=l(t,["codeExecutionResult"]);i!=null&&f(e,["codeExecutionResult"],i);const o=l(t,["executableCode"]);o!=null&&f(e,["executableCode"],o);const s=l(t,["fileData"]);s!=null&&f(e,["fileData"],a2(s));const r=l(t,["functionCall"]);r!=null&&f(e,["functionCall"],l2(r));const a=l(t,["functionResponse"]);a!=null&&f(e,["functionResponse"],a);const u=l(t,["inlineData"]);u!=null&&f(e,["inlineData"],i2(u));const c=l(t,["text"]);c!=null&&f(e,["text"],c);const h=l(t,["thought"]);h!=null&&f(e,["thought"],h);const p=l(t,["thoughtSignature"]);p!=null&&f(e,["thoughtSignature"],p);const m=l(t,["videoMetadata"]);return m!=null&&f(e,["videoMetadata"],m),e}function p2(t){const e={},n=l(t,["handle"]);if(n!=null&&f(e,["handle"],n),l(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function m2(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>p)),f(e,["functionDeclarations"],h)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=l(t,["googleSearchRetrieval"]);i!=null&&f(e,["googleSearchRetrieval"],i);const o=l(t,["computerUse"]);o!=null&&f(e,["computerUse"],o);const s=l(t,["fileSearch"]);s!=null&&f(e,["fileSearch"],s);const r=l(t,["codeExecution"]);if(r!=null&&f(e,["codeExecution"],r),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=l(t,["googleMaps"]);a!=null&&f(e,["googleMaps"],u2(a));const u=l(t,["googleSearch"]);u!=null&&f(e,["googleSearch"],c2(u));const c=l(t,["urlContext"]);return c!=null&&f(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function g2(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const o=Object.keys(i).map(s=>`${n}.${s}`);e.push(...o)}else e.push(n)}return e.join(",")}function y2(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const s=i.setup;typeof s=="object"&&s!==null?(t.bidiGenerateContentSetup=s,n=s):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const o=t.fieldMask;if(n){const s=g2(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)s?t.fieldMask=s:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const r=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];o.length>0&&(a=o.map(c=>r.includes(c)?`generationConfig.${c}`:c));const u=[];s&&u.push(s),a.length>0&&u.push(...a),u.length>0?t.fieldMask=u.join(","):delete t.fieldMask}else delete t.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?t.fieldMask=o.join(","):delete t.fieldMask;return t}class _2 extends si{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=r2(this.apiClient,e);s=H("auth_tokens",a._url),r=a._query,delete a.config,delete a._url,delete a._query;const u=y2(a,e.config);return o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>c)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function v2(t,e){const n={},i=l(t,["displayName"]);return e!==void 0&&i!=null&&f(e,["displayName"],i),n}function T2(t){const e={},n=l(t,["config"]);return n!=null&&v2(n,e),e}function E2(t,e){const n={},i=l(t,["force"]);return e!==void 0&&i!=null&&f(e,["_query","force"],i),n}function S2(t){const e={},n=l(t,["name"]);n!=null&&f(e,["_url","name"],n);const i=l(t,["config"]);return i!=null&&E2(i,e),e}function A2(t){const e={},n=l(t,["name"]);return n!=null&&f(e,["_url","name"],n),e}function C2(t,e){const n={},i=l(t,["customMetadata"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>r)),f(e,["customMetadata"],s)}const o=l(t,["chunkingConfig"]);return e!==void 0&&o!=null&&f(e,["chunkingConfig"],o),n}function I2(t){const e={},n=l(t,["name"]);n!=null&&f(e,["name"],n);const i=l(t,["metadata"]);i!=null&&f(e,["metadata"],i);const o=l(t,["done"]);o!=null&&f(e,["done"],o);const s=l(t,["error"]);s!=null&&f(e,["error"],s);const r=l(t,["response"]);return r!=null&&f(e,["response"],w2(r)),e}function R2(t){const e={},n=l(t,["fileSearchStoreName"]);n!=null&&f(e,["_url","file_search_store_name"],n);const i=l(t,["fileName"]);i!=null&&f(e,["fileName"],i);const o=l(t,["config"]);return o!=null&&C2(o,e),e}function w2(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=l(t,["parent"]);i!=null&&f(e,["parent"],i);const o=l(t,["documentName"]);return o!=null&&f(e,["documentName"],o),e}function N2(t,e){const n={},i=l(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const o=l(t,["pageToken"]);return e!==void 0&&o!=null&&f(e,["_query","pageToken"],o),n}function M2(t){const e={},n=l(t,["config"]);return n!=null&&N2(n,e),e}function x2(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=l(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const o=l(t,["fileSearchStores"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),f(e,["fileSearchStores"],s)}return e}function b2(t,e){const n={},i=l(t,["mimeType"]);e!==void 0&&i!=null&&f(e,["mimeType"],i);const o=l(t,["displayName"]);e!==void 0&&o!=null&&f(e,["displayName"],o);const s=l(t,["customMetadata"]);if(e!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>u)),f(e,["customMetadata"],a)}const r=l(t,["chunkingConfig"]);return e!==void 0&&r!=null&&f(e,["chunkingConfig"],r),n}function D2(t){const e={},n=l(t,["fileSearchStoreName"]);n!=null&&f(e,["_url","file_search_store_name"],n);const i=l(t,["config"]);return i!=null&&b2(i,e),e}function P2(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function V2(t,e){const n={},i=l(t,["force"]);return e!==void 0&&i!=null&&f(e,["_query","force"],i),n}function U2(t){const e={},n=l(t,["name"]);n!=null&&f(e,["_url","name"],n);const i=l(t,["config"]);return i!=null&&V2(i,e),e}function L2(t){const e={},n=l(t,["name"]);return n!=null&&f(e,["_url","name"],n),e}function k2(t,e){const n={},i=l(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const o=l(t,["pageToken"]);return e!==void 0&&o!=null&&f(e,["_query","pageToken"],o),n}function O2(t){const e={},n=l(t,["parent"]);n!=null&&f(e,["_url","parent"],n);const i=l(t,["config"]);return i!=null&&k2(i,e),e}function q2(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=l(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const o=l(t,["documents"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),f(e,["documents"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class B2 extends si{constructor(e){super(),this.apiClient=e,this.list=async n=>new ko(jn.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=L2(e);return s=H("{name}",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>u)}}async delete(e){var n,i;let o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const r=U2(e);o=H("{name}",r._url),s=r._query,delete r._url,delete r._query,await this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(r),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=O2(e);return s=H("{parent}/documents",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{const c=q2(u),h=new _N;return Object.assign(h,c),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class F2 extends si{constructor(e,n=new B2(e)){super(),this.apiClient=e,this.documents=n,this.list=async(i={})=>new ko(jn.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=T2(e);return s=H("fileSearchStores",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>u)}}async get(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=A2(e);return s=H("{name}",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>u)}}async delete(e){var n,i;let o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const r=S2(e);o=H("{name}",r._url),s=r._query,delete r._url,delete r._query,await this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(r),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=M2(e);return s=H("fileSearchStores",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{const c=x2(u),h=new vN;return Object.assign(h,c),h})}}async uploadToFileSearchStoreInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=D2(e);return s=H("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{const c=P2(u),h=new TN;return Object.assign(h,c),h})}}async importFile(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=R2(e);return s=H("{file_search_store_name}:importFile",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),o.then(u=>{const c=I2(u),h=new xp;return Object.assign(h,c),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function G2(t,e){const n={},i=l(t,["name"]);return i!=null&&f(n,["_url","name"],i),n}function z2(t,e){const n={},i=l(t,["name"]);return i!=null&&f(n,["_url","name"],i),n}function H2(t,e,n){const i={};if(l(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=l(t,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&f(e,["displayName"],o),l(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=l(t,["epochCount"]);e!==void 0&&s!=null&&f(e,["tuningTask","hyperparameters","epochCount"],s);const r=l(t,["learningRateMultiplier"]);if(r!=null&&f(i,["tuningTask","hyperparameters","learningRateMultiplier"],r),l(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(l(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(l(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=l(t,["batchSize"]);e!==void 0&&a!=null&&f(e,["tuningTask","hyperparameters","batchSize"],a);const u=l(t,["learningRate"]);if(e!==void 0&&u!=null&&f(e,["tuningTask","hyperparameters","learningRate"],u),l(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(l(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function Y2(t,e,n){const i={};let o=l(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const _=l(t,["validationDataset"]);e!==void 0&&_!=null&&f(e,["supervisedTuningSpec"],vv(_))}else if(o==="PREFERENCE_TUNING"){const _=l(t,["validationDataset"]);e!==void 0&&_!=null&&f(e,["preferenceOptimizationSpec"],vv(_))}const s=l(t,["tunedModelDisplayName"]);e!==void 0&&s!=null&&f(e,["tunedModelDisplayName"],s);const r=l(t,["description"]);e!==void 0&&r!=null&&f(e,["description"],r);let a=l(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const _=l(t,["epochCount"]);e!==void 0&&_!=null&&f(e,["supervisedTuningSpec","hyperParameters","epochCount"],_)}else if(a==="PREFERENCE_TUNING"){const _=l(t,["epochCount"]);e!==void 0&&_!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],_)}let u=l(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const _=l(t,["learningRateMultiplier"]);e!==void 0&&_!=null&&f(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],_)}else if(u==="PREFERENCE_TUNING"){const _=l(t,["learningRateMultiplier"]);e!==void 0&&_!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],_)}let c=l(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const _=l(t,["exportLastCheckpointOnly"]);e!==void 0&&_!=null&&f(e,["supervisedTuningSpec","exportLastCheckpointOnly"],_)}else if(c==="PREFERENCE_TUNING"){const _=l(t,["exportLastCheckpointOnly"]);e!==void 0&&_!=null&&f(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],_)}let h=l(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const _=l(t,["adapterSize"]);e!==void 0&&_!=null&&f(e,["supervisedTuningSpec","hyperParameters","adapterSize"],_)}else if(h==="PREFERENCE_TUNING"){const _=l(t,["adapterSize"]);e!==void 0&&_!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],_)}if(l(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(l(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const p=l(t,["labels"]);e!==void 0&&p!=null&&f(e,["labels"],p);const m=l(t,["beta"]);return e!==void 0&&m!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","beta"],m),i}function J2(t,e){const n={},i=l(t,["baseModel"]);i!=null&&f(n,["baseModel"],i);const o=l(t,["preTunedModel"]);o!=null&&f(n,["preTunedModel"],o);const s=l(t,["trainingDataset"]);s!=null&&iP(s);const r=l(t,["config"]);return r!=null&&H2(r,n),n}function K2(t,e){const n={},i=l(t,["baseModel"]);i!=null&&f(n,["baseModel"],i);const o=l(t,["preTunedModel"]);o!=null&&f(n,["preTunedModel"],o);const s=l(t,["trainingDataset"]);s!=null&&oP(s,n,e);const r=l(t,["config"]);return r!=null&&Y2(r,n,e),n}function Q2(t,e){const n={},i=l(t,["name"]);return i!=null&&f(n,["_url","name"],i),n}function $2(t,e){const n={},i=l(t,["name"]);return i!=null&&f(n,["_url","name"],i),n}function X2(t,e,n){const i={},o=l(t,["pageSize"]);e!==void 0&&o!=null&&f(e,["_query","pageSize"],o);const s=l(t,["pageToken"]);e!==void 0&&s!=null&&f(e,["_query","pageToken"],s);const r=l(t,["filter"]);return e!==void 0&&r!=null&&f(e,["_query","filter"],r),i}function W2(t,e,n){const i={},o=l(t,["pageSize"]);e!==void 0&&o!=null&&f(e,["_query","pageSize"],o);const s=l(t,["pageToken"]);e!==void 0&&s!=null&&f(e,["_query","pageToken"],s);const r=l(t,["filter"]);return e!==void 0&&r!=null&&f(e,["_query","filter"],r),i}function Z2(t,e){const n={},i=l(t,["config"]);return i!=null&&X2(i,n),n}function j2(t,e){const n={},i=l(t,["config"]);return i!=null&&W2(i,n),n}function eP(t,e){const n={},i=l(t,["sdkHttpResponse"]);i!=null&&f(n,["sdkHttpResponse"],i);const o=l(t,["nextPageToken"]);o!=null&&f(n,["nextPageToken"],o);const s=l(t,["tunedModels"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>dA(a))),f(n,["tuningJobs"],r)}return n}function tP(t,e){const n={},i=l(t,["sdkHttpResponse"]);i!=null&&f(n,["sdkHttpResponse"],i);const o=l(t,["nextPageToken"]);o!=null&&f(n,["nextPageToken"],o);const s=l(t,["tuningJobs"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>sh(a))),f(n,["tuningJobs"],r)}return n}function nP(t,e){const n={},i=l(t,["name"]);i!=null&&f(n,["model"],i);const o=l(t,["name"]);return o!=null&&f(n,["endpoint"],o),n}function iP(t,e){const n={};if(l(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=l(t,["examples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),f(n,["examples","examples"],o)}return n}function oP(t,e,n){const i={};let o=l(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const r=l(t,["gcsUri"]);e!==void 0&&r!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],r)}else if(o==="PREFERENCE_TUNING"){const r=l(t,["gcsUri"]);e!==void 0&&r!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],r)}let s=l(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const r=l(t,["vertexDatasetResource"]);e!==void 0&&r!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],r)}else if(s==="PREFERENCE_TUNING"){const r=l(t,["vertexDatasetResource"]);e!==void 0&&r!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],r)}if(l(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function dA(t,e){const n={},i=l(t,["sdkHttpResponse"]);i!=null&&f(n,["sdkHttpResponse"],i);const o=l(t,["name"]);o!=null&&f(n,["name"],o);const s=l(t,["state"]);s!=null&&f(n,["state"],KS(s));const r=l(t,["createTime"]);r!=null&&f(n,["createTime"],r);const a=l(t,["tuningTask","startTime"]);a!=null&&f(n,["startTime"],a);const u=l(t,["tuningTask","completeTime"]);u!=null&&f(n,["endTime"],u);const c=l(t,["updateTime"]);c!=null&&f(n,["updateTime"],c);const h=l(t,["description"]);h!=null&&f(n,["description"],h);const p=l(t,["baseModel"]);p!=null&&f(n,["baseModel"],p);const m=l(t,["_self"]);return m!=null&&f(n,["tunedModel"],nP(m)),n}function sh(t,e){const n={},i=l(t,["sdkHttpResponse"]);i!=null&&f(n,["sdkHttpResponse"],i);const o=l(t,["name"]);o!=null&&f(n,["name"],o);const s=l(t,["state"]);s!=null&&f(n,["state"],KS(s));const r=l(t,["createTime"]);r!=null&&f(n,["createTime"],r);const a=l(t,["startTime"]);a!=null&&f(n,["startTime"],a);const u=l(t,["endTime"]);u!=null&&f(n,["endTime"],u);const c=l(t,["updateTime"]);c!=null&&f(n,["updateTime"],c);const h=l(t,["error"]);h!=null&&f(n,["error"],h);const p=l(t,["description"]);p!=null&&f(n,["description"],p);const m=l(t,["baseModel"]);m!=null&&f(n,["baseModel"],m);const _=l(t,["tunedModel"]);_!=null&&f(n,["tunedModel"],_);const x=l(t,["preTunedModel"]);x!=null&&f(n,["preTunedModel"],x);const D=l(t,["supervisedTuningSpec"]);D!=null&&f(n,["supervisedTuningSpec"],D);const V=l(t,["preferenceOptimizationSpec"]);V!=null&&f(n,["preferenceOptimizationSpec"],V);const C=l(t,["tuningDataStats"]);C!=null&&f(n,["tuningDataStats"],C);const E=l(t,["encryptionSpec"]);E!=null&&f(n,["encryptionSpec"],E);const I=l(t,["partnerModelTuningSpec"]);I!=null&&f(n,["partnerModelTuningSpec"],I);const b=l(t,["customBaseModel"]);b!=null&&f(n,["customBaseModel"],b);const k=l(t,["experiment"]);k!=null&&f(n,["experiment"],k);const B=l(t,["labels"]);B!=null&&f(n,["labels"],B);const A=l(t,["outputUri"]);A!=null&&f(n,["outputUri"],A);const S=l(t,["pipelineJob"]);S!=null&&f(n,["pipelineJob"],S);const T=l(t,["serviceAccount"]);T!=null&&f(n,["serviceAccount"],T);const w=l(t,["tunedModelDisplayName"]);w!=null&&f(n,["tunedModelDisplayName"],w);const M=l(t,["veoTuningSpec"]);return M!=null&&f(n,["veoTuningSpec"],M),n}function sP(t,e){const n={},i=l(t,["sdkHttpResponse"]);i!=null&&f(n,["sdkHttpResponse"],i);const o=l(t,["name"]);o!=null&&f(n,["name"],o);const s=l(t,["metadata"]);s!=null&&f(n,["metadata"],s);const r=l(t,["done"]);r!=null&&f(n,["done"],r);const a=l(t,["error"]);return a!=null&&f(n,["error"],a),n}function vv(t,e){const n={},i=l(t,["gcsUri"]);i!=null&&f(n,["validationDatasetUri"],i);const o=l(t,["vertexDatasetResource"]);return o!=null&&f(n,["validationDatasetUri"],o),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rP extends si{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new ko(jn.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const o={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(o.checkpointId=n.config.preTunedModelCheckpointId);const s=Object.assign(Object.assign({},n),{preTunedModel:o});return s.baseModel=void 0,await this.tuneInternal(s)}else{const o=Object.assign({},n);return await this.tuneInternal(o)}else{const o=Object.assign({},n),s=await this.tuneMldevInternal(o);let r="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?r=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(r=s.name.split("/operations/")[0]),{name:r,state:Zd.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,o,s;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=$2(e);return a=H("{name}",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>sh(h))}else{const c=Q2(e);return a=H("{name}",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>dA(h))}}async listInternal(e){var n,i,o,s;let r,a="",u={};if(this.apiClient.isVertexAI()){const c=j2(e);return a=H("tuningJobs",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const p=tP(h),m=new Z_;return Object.assign(m,p),m})}else{const c=Z2(e);return a=H("tunedModels",c._url),u=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const p=eP(h),m=new Z_;return Object.assign(m,p),m})}}async cancel(e){var n,i,o,s;let r="",a={};if(this.apiClient.isVertexAI()){const u=z2(e);r=H("{name}:cancel",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const u=G2(e);r=H("{name}:cancel",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async tuneInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI()){const a=K2(e,e);return s=H("tuningJobs",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:u.headers},h})),o.then(u=>sh(u))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=J2(e);return s=H("tunedModels",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:u.headers},h})),o.then(u=>sP(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class aP{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const lP=1024*1024*8,uP=3,cP=1e3,fP=2,Uu="x-goog-upload-status";async function dP(t,e,n){var i;const o=await hA(t,e,n),s=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[Uu])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return s.file}async function hP(t,e,n){var i;const o=await hA(t,e,n),s=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[Uu])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const r=FS(s),a=new bp;return Object.assign(a,r),a}async function hA(t,e,n){var i,o;let s=0,r=0,a=new jd(new Response),u="upload";for(s=t.size;r<s;){const c=Math.min(lP,s-r),h=t.slice(r,r+c);r+c>=s&&(u+=", finalize");let p=0,m=cP;for(;p<uP&&(a=await n.request({path:"",body:h,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(r),"Content-Length":String(c)}}}),!(!((i=a==null?void 0:a.headers)===null||i===void 0)&&i[Uu]));)p++,await mP(m),m=m*fP;if(r+=c,((o=a==null?void 0:a.headers)===null||o===void 0?void 0:o[Uu])!=="active")break;if(s<=r)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function pP(t){return{size:t.size,type:t.type}}function mP(t){return new Promise(e=>setTimeout(e,t))}class gP{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await dP(e,n,i)}async uploadToFileSearchStore(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await hP(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await pP(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yP{create(e,n,i){return new _P(e,n,i)}}class _P{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Tv="x-goog-api-key";class vP{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(Tv)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Tv,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const TP="gl-node/";class Sc{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=W1(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const o=new vP(this.apiKey);this.apiClient=new LD({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:TP+"web",uploader:new gP,downloader:new aP}),this.models=new t2(this.apiClient),this.live=new $D(this.apiClient,o,new yP),this.batches=new RM(this.apiClient),this.chats=new ax(this.models,this.apiClient),this.caches=new ox(this.apiClient),this.files=new yx(this.apiClient),this.operations=new n2(this.apiClient),this.authTokens=new _2(this.apiClient),this.tunings=new rP(this.apiClient),this.fileSearchStores=new F2(this.apiClient)}}const EP=()=>{};var Ev={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let o=t.charCodeAt(i);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},SP=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const o=t[n++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const s=t[n++];e[i++]=String.fromCharCode((o&31)<<6|s&63)}else if(o>239&&o<365){const s=t[n++],r=t[n++],a=t[n++],u=((o&7)<<18|(s&63)<<12|(r&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(u>>10)),e[i++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],r=t[n++];e[i++]=String.fromCharCode((o&15)<<12|(s&63)<<6|r&63)}}return e.join("")},mA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<t.length;o+=3){const s=t[o],r=o+1<t.length,a=r?t[o+1]:0,u=o+2<t.length,c=u?t[o+2]:0,h=s>>2,p=(s&3)<<4|a>>4;let m=(a&15)<<2|c>>6,_=c&63;u||(_=64,r||(m=64)),i.push(n[h],n[p],n[m],n[_])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(pA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):SP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<t.length;){const s=n[t.charAt(o++)],a=o<t.length?n[t.charAt(o)]:0;++o;const c=o<t.length?n[t.charAt(o)]:64;++o;const p=o<t.length?n[t.charAt(o)]:64;if(++o,s==null||a==null||c==null||p==null)throw new AP;const m=s<<2|a>>4;if(i.push(m),c!==64){const _=a<<4&240|c>>2;if(i.push(_),p!==64){const x=c<<6&192|p;i.push(x)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class AP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const CP=function(t){const e=pA(t);return mA.encodeByteArray(e,!0)},Lu=function(t){return CP(t).replace(/\./g,"")},IP=function(t){try{return mA.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP=()=>RP().__FIREBASE_DEFAULTS__,NP=()=>{if(typeof process>"u"||typeof Ev>"u")return;const t=Ev.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},MP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&IP(t[1]);return e&&JSON.parse(e)},kp=()=>{try{return EP()||wP()||NP()||MP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},xP=t=>{var e,n;return(n=(e=kp())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},bP=t=>{const e=xP(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},gA=()=>{var t;return(t=kp())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Op(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function PP(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",o=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const r={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Lu(JSON.stringify(n)),Lu(JSON.stringify(r)),""].join(".")}const na={};function UP(){const t={prod:[],emulator:[]};for(const e of Object.keys(na))na[e]?t.emulator.push(e):t.prod.push(e);return t}function LP(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Sv=!1;function kP(t,e){if(typeof window>"u"||typeof document>"u"||!Op(window.location.host)||na[t]===e||na[t]||Sv)return;na[t]=e;function n(m){return`__firebase__banner__${m}`}const i="__firebase__banner",s=UP().prod.length>0;function r(){const m=document.getElementById(i);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,_){m.setAttribute("width","24"),m.setAttribute("id",_),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function c(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{Sv=!0,r()},m}function h(m,_){m.setAttribute("id",_),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){const m=LP(i),_=n("text"),x=document.getElementById(_)||document.createElement("span"),D=n("learnmore"),V=document.getElementById(D)||document.createElement("a"),C=n("preprendIcon"),E=document.getElementById(C)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const I=m.element;a(I),h(V,D);const b=c();u(E,C),I.append(E,x,V,b),document.body.appendChild(I)}s?(x.innerText="Preview backend disconnected.",E.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(E.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OP(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qP(){var e;const t=(e=kp())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function BP(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function FP(){return!qP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function yA(){try{return typeof indexedDB=="object"}catch{return!1}}function _A(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var s;e(((s=o.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}function GP(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zP="FirebaseError";class to extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=zP,Object.setPrototypeOf(this,to.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ac.prototype.create)}}class Ac{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},o=`${this.service}/${e}`,s=this.errors[e],r=s?HP(s,i):"Error",a=`${this.serviceName}: ${r} (${o}).`;return new to(o,a,i)}}function HP(t,e){return t.replace(YP,(n,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const YP=/\{\$([^}]+)}/g;function Sa(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const o of n){if(!i.includes(o))return!1;const s=t[o],r=e[o];if(Av(s)&&Av(r)){if(!Sa(s,r))return!1}else if(s!==r)return!1}for(const o of i)if(!n.includes(o))return!1;return!0}function Av(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP=1e3,KP=2,QP=4*60*60*1e3,$P=.5;function Cv(t,e=JP,n=KP){const i=e*Math.pow(n,t),o=Math.round($P*i*(Math.random()-.5)*2);return Math.min(QP,i+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wo(t){return t&&t._delegate?t._delegate:t}class ei{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new DP;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ZP(e))try{this.getOrInitializeService({instanceIdentifier:ho})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:o});i.resolve(s)}catch{}}}}clearInstance(e=ho){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ho){return this.instances.has(e)}getOptions(e=ho){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&r.resolve(o)}return o}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const o of i)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:WP(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ho){return this.component?this.component.multipleInstances?e:ho:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function WP(t){return t===ho?void 0:t}function ZP(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new XP(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var de;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(de||(de={}));const eV={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},tV=de.INFO,nV={[de.DEBUG]:"log",[de.VERBOSE]:"log",[de.INFO]:"info",[de.WARN]:"warn",[de.ERROR]:"error"},iV=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),o=nV[e];if(o)console[o](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class qp{constructor(e){this.name=e,this._logLevel=tV,this._logHandler=iV,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in de))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?eV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,de.DEBUG,...e),this._logHandler(this,de.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,de.VERBOSE,...e),this._logHandler(this,de.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,de.INFO,...e),this._logHandler(this,de.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,de.WARN,...e),this._logHandler(this,de.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,de.ERROR,...e),this._logHandler(this,de.ERROR,...e)}}const oV=(t,e)=>e.some(n=>t instanceof n);let Iv,Rv;function sV(){return Iv||(Iv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function rV(){return Rv||(Rv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const vA=new WeakMap,rh=new WeakMap,TA=new WeakMap,zf=new WeakMap,Bp=new WeakMap;function aV(t){const e=new Promise((n,i)=>{const o=()=>{t.removeEventListener("success",s),t.removeEventListener("error",r)},s=()=>{n(ki(t.result)),o()},r=()=>{i(t.error),o()};t.addEventListener("success",s),t.addEventListener("error",r)});return e.then(n=>{n instanceof IDBCursor&&vA.set(n,t)}).catch(()=>{}),Bp.set(e,t),e}function lV(t){if(rh.has(t))return;const e=new Promise((n,i)=>{const o=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",r),t.removeEventListener("abort",r)},s=()=>{n(),o()},r=()=>{i(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",s),t.addEventListener("error",r),t.addEventListener("abort",r)});rh.set(t,e)}let ah={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return rh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||TA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ki(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function uV(t){ah=t(ah)}function cV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Hf(this),e,...n);return TA.set(i,e.sort?e.sort():[e]),ki(i)}:rV().includes(t)?function(...e){return t.apply(Hf(this),e),ki(vA.get(this))}:function(...e){return ki(t.apply(Hf(this),e))}}function fV(t){return typeof t=="function"?cV(t):(t instanceof IDBTransaction&&lV(t),oV(t,sV())?new Proxy(t,ah):t)}function ki(t){if(t instanceof IDBRequest)return aV(t);if(zf.has(t))return zf.get(t);const e=fV(t);return e!==t&&(zf.set(t,e),Bp.set(e,t)),e}const Hf=t=>Bp.get(t);function EA(t,e,{blocked:n,upgrade:i,blocking:o,terminated:s}={}){const r=indexedDB.open(t,e),a=ki(r);return i&&r.addEventListener("upgradeneeded",u=>{i(ki(r.result),u.oldVersion,u.newVersion,ki(r.transaction),u)}),n&&r.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),o&&u.addEventListener("versionchange",c=>o(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const dV=["get","getKey","getAll","getAllKeys","count"],hV=["put","add","delete","clear"],Yf=new Map;function wv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Yf.get(e))return Yf.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,o=hV.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(o||dV.includes(n)))return;const s=async function(r,...a){const u=this.transaction(r,o?"readwrite":"readonly");let c=u.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),o&&u.done]))[0]};return Yf.set(e,s),s}uV(t=>({...t,get:(e,n,i)=>wv(e,n)||t.get(e,n,i),has:(e,n)=>!!wv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(mV(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function mV(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const lh="@firebase/app",Nv="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ti=new qp("@firebase/app"),gV="@firebase/app-compat",yV="@firebase/analytics-compat",_V="@firebase/analytics",vV="@firebase/app-check-compat",TV="@firebase/app-check",EV="@firebase/auth",SV="@firebase/auth-compat",AV="@firebase/database",CV="@firebase/data-connect",IV="@firebase/database-compat",RV="@firebase/functions",wV="@firebase/functions-compat",NV="@firebase/installations",MV="@firebase/installations-compat",xV="@firebase/messaging",bV="@firebase/messaging-compat",DV="@firebase/performance",PV="@firebase/performance-compat",VV="@firebase/remote-config",UV="@firebase/remote-config-compat",LV="@firebase/storage",kV="@firebase/storage-compat",OV="@firebase/firestore",qV="@firebase/ai",BV="@firebase/firestore-compat",FV="firebase",GV="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uh="[DEFAULT]",zV={[lh]:"fire-core",[gV]:"fire-core-compat",[_V]:"fire-analytics",[yV]:"fire-analytics-compat",[TV]:"fire-app-check",[vV]:"fire-app-check-compat",[EV]:"fire-auth",[SV]:"fire-auth-compat",[AV]:"fire-rtdb",[CV]:"fire-data-connect",[IV]:"fire-rtdb-compat",[RV]:"fire-fn",[wV]:"fire-fn-compat",[NV]:"fire-iid",[MV]:"fire-iid-compat",[xV]:"fire-fcm",[bV]:"fire-fcm-compat",[DV]:"fire-perf",[PV]:"fire-perf-compat",[VV]:"fire-rc",[UV]:"fire-rc-compat",[LV]:"fire-gcs",[kV]:"fire-gcs-compat",[OV]:"fire-fst",[BV]:"fire-fst-compat",[qV]:"fire-vertex","fire-js":"fire-js",[FV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ku=new Map,HV=new Map,ch=new Map;function Mv(t,e){try{t.container.addComponent(e)}catch(n){ti.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Yi(t){const e=t.name;if(ch.has(e))return ti.debug(`There were multiple attempts to register component ${e}.`),!1;ch.set(e,t);for(const n of ku.values())Mv(n,t);for(const n of HV.values())Mv(n,t);return!0}function Ha(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function YV(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Oi=new Ac("app","Firebase",JV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ei("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Oi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QV=GV;function SA(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:uh,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw Oi.create("bad-app-name",{appName:String(o)});if(n||(n=gA()),!n)throw Oi.create("no-options");const s=ku.get(o);if(s){if(Sa(n,s.options)&&Sa(i,s.config))return s;throw Oi.create("duplicate-app",{appName:o})}const r=new jP(o);for(const u of ch.values())r.addComponent(u);const a=new KV(n,i,r);return ku.set(o,a),a}function AA(t=uh){const e=ku.get(t);if(!e&&t===uh&&gA())return SA();if(!e)throw Oi.create("no-app",{appName:t});return e}function Cn(t,e,n){let i=zV[t]??t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const r=[`Unable to register library "${i}" with version "${e}":`];o&&r.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&r.push("and"),s&&r.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ti.warn(r.join(" "));return}Yi(new ei(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $V="firebase-heartbeat-database",XV=1,Aa="firebase-heartbeat-store";let Jf=null;function CA(){return Jf||(Jf=EA($V,XV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Aa)}catch(n){console.warn(n)}}}}).catch(t=>{throw Oi.create("idb-open",{originalErrorMessage:t.message})})),Jf}async function WV(t){try{const n=(await CA()).transaction(Aa),i=await n.objectStore(Aa).get(IA(t));return await n.done,i}catch(e){if(e instanceof to)ti.warn(e.message);else{const n=Oi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ti.warn(n.message)}}}async function xv(t,e){try{const i=(await CA()).transaction(Aa,"readwrite");await i.objectStore(Aa).put(e,IA(t)),await i.done}catch(n){if(n instanceof to)ti.warn(n.message);else{const i=Oi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ti.warn(i.message)}}}function IA(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZV=1024,jV=30;class e4{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new n4(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=bv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(r=>r.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:o}),this._heartbeatsCache.heartbeats.length>jV){const r=i4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ti.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=bv(),{heartbeatsToSend:i,unsentEntries:o}=t4(this._heartbeatsCache.heartbeats),s=Lu(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return ti.warn(n),""}}}function bv(){return new Date().toISOString().substring(0,10)}function t4(t,e=ZV){const n=[];let i=t.slice();for(const o of t){const s=n.find(r=>r.agent===o.agent);if(s){if(s.dates.push(o.date),Dv(n)>e){s.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Dv(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class n4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return yA()?_A().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await WV(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return xv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return xv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Dv(t){return Lu(JSON.stringify({version:2,heartbeats:t})).length}function i4(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o4(t){Yi(new ei("platform-logger",e=>new pV(e),"PRIVATE")),Yi(new ei("heartbeat",e=>new e4(e),"PRIVATE")),Cn(lh,Nv,t),Cn(lh,Nv,"esm2020"),Cn("fire-js","")}o4("");var s4="firebase",r4="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cn(s4,r4,"app");const RA="@firebase/installations",Fp="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA=1e4,NA=`w:${Fp}`,MA="FIS_v2",a4="https://firebaseinstallations.googleapis.com/v1",l4=60*60*1e3,u4="installations",c4="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f4={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},No=new Ac(u4,c4,f4);function xA(t){return t instanceof to&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA({projectId:t}){return`${a4}/projects/${t}/installations`}function DA(t){return{token:t.token,requestStatus:2,expiresIn:h4(t.expiresIn),creationTime:Date.now()}}async function PA(t,e){const i=(await e.json()).error;return No.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function VA({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function d4(t,{refreshToken:e}){const n=VA(t);return n.append("Authorization",p4(e)),n}async function UA(t){const e=await t();return e.status>=500&&e.status<600?t():e}function h4(t){return Number(t.replace("s","000"))}function p4(t){return`${MA} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m4({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=bA(t),o=VA(t),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&o.append("x-firebase-client",c)}const r={fid:n,authVersion:MA,appId:t.appId,sdkVersion:NA},a={method:"POST",headers:o,body:JSON.stringify(r)},u=await UA(()=>fetch(i,a));if(u.ok){const c=await u.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:DA(c.authToken)}}else throw await PA("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LA(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g4(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y4=/^[cdef][\w-]{21}$/,fh="";function _4(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=v4(t);return y4.test(n)?n:fh}catch{return fh}}function v4(t){return g4(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cc(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA=new Map;function OA(t,e){const n=Cc(t);qA(n,e),T4(n,e)}function qA(t,e){const n=kA.get(t);if(n)for(const i of n)i(e)}function T4(t,e){const n=E4();n&&n.postMessage({key:t,fid:e}),S4()}let po=null;function E4(){return!po&&"BroadcastChannel"in self&&(po=new BroadcastChannel("[Firebase] FID Change"),po.onmessage=t=>{qA(t.data.key,t.data.fid)}),po}function S4(){kA.size===0&&po&&(po.close(),po=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A4="firebase-installations-database",C4=1,Mo="firebase-installations-store";let Kf=null;function Gp(){return Kf||(Kf=EA(A4,C4,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Mo)}}})),Kf}async function Ou(t,e){const n=Cc(t),o=(await Gp()).transaction(Mo,"readwrite"),s=o.objectStore(Mo),r=await s.get(n);return await s.put(e,n),await o.done,(!r||r.fid!==e.fid)&&OA(t,e.fid),e}async function BA(t){const e=Cc(t),i=(await Gp()).transaction(Mo,"readwrite");await i.objectStore(Mo).delete(e),await i.done}async function Ic(t,e){const n=Cc(t),o=(await Gp()).transaction(Mo,"readwrite"),s=o.objectStore(Mo),r=await s.get(n),a=e(r);return a===void 0?await s.delete(n):await s.put(a,n),await o.done,a&&(!r||r.fid!==a.fid)&&OA(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zp(t){let e;const n=await Ic(t.appConfig,i=>{const o=I4(i),s=R4(t,o);return e=s.registrationPromise,s.installationEntry});return n.fid===fh?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function I4(t){const e=t||{fid:_4(),registrationStatus:0};return FA(e)}function R4(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(No.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=w4(t,n);return{installationEntry:n,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:N4(t)}:{installationEntry:e}}async function w4(t,e){try{const n=await m4(t,e);return Ou(t.appConfig,n)}catch(n){throw xA(n)&&n.customData.serverCode===409?await BA(t.appConfig):await Ou(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function N4(t){let e=await Pv(t.appConfig);for(;e.registrationStatus===1;)await LA(100),e=await Pv(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await zp(t);return i||n}return e}function Pv(t){return Ic(t,e=>{if(!e)throw No.create("installation-not-found");return FA(e)})}function FA(t){return M4(t)?{fid:t.fid,registrationStatus:0}:t}function M4(t){return t.registrationStatus===1&&t.registrationTime+wA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x4({appConfig:t,heartbeatServiceProvider:e},n){const i=b4(t,n),o=d4(t,n),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&o.append("x-firebase-client",c)}const r={installation:{sdkVersion:NA,appId:t.appId}},a={method:"POST",headers:o,body:JSON.stringify(r)},u=await UA(()=>fetch(i,a));if(u.ok){const c=await u.json();return DA(c)}else throw await PA("Generate Auth Token",u)}function b4(t,{fid:e}){return`${bA(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hp(t,e=!1){let n;const i=await Ic(t.appConfig,s=>{if(!GA(s))throw No.create("not-registered");const r=s.authToken;if(!e&&V4(r))return s;if(r.requestStatus===1)return n=D4(t,e),s;{if(!navigator.onLine)throw No.create("app-offline");const a=L4(s);return n=P4(t,a),a}});return n?await n:i.authToken}async function D4(t,e){let n=await Vv(t.appConfig);for(;n.authToken.requestStatus===1;)await LA(100),n=await Vv(t.appConfig);const i=n.authToken;return i.requestStatus===0?Hp(t,e):i}function Vv(t){return Ic(t,e=>{if(!GA(e))throw No.create("not-registered");const n=e.authToken;return k4(n)?{...e,authToken:{requestStatus:0}}:e})}async function P4(t,e){try{const n=await x4(t,e),i={...e,authToken:n};return await Ou(t.appConfig,i),n}catch(n){if(xA(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await BA(t.appConfig);else{const i={...e,authToken:{requestStatus:0}};await Ou(t.appConfig,i)}throw n}}function GA(t){return t!==void 0&&t.registrationStatus===2}function V4(t){return t.requestStatus===2&&!U4(t)}function U4(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+l4}function L4(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function k4(t){return t.requestStatus===1&&t.requestTime+wA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O4(t){const e=t,{installationEntry:n,registrationPromise:i}=await zp(e);return i?i.catch(console.error):Hp(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q4(t,e=!1){const n=t;return await B4(n),(await Hp(n,e)).token}async function B4(t){const{registrationPromise:e}=await zp(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F4(t){if(!t||!t.options)throw Qf("App Configuration");if(!t.name)throw Qf("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Qf(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Qf(t){return No.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA="installations",G4="installations-internal",z4=t=>{const e=t.getProvider("app").getImmediate(),n=F4(e),i=Ha(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},H4=t=>{const e=t.getProvider("app").getImmediate(),n=Ha(e,zA).getImmediate();return{getId:()=>O4(n),getToken:o=>q4(n,o)}};function Y4(){Yi(new ei(zA,z4,"PUBLIC")),Yi(new ei(G4,H4,"PRIVATE"))}Y4();Cn(RA,Fp);Cn(RA,Fp,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qu="analytics",J4="firebase_id",K4="origin",Q4=60*1e3,$4="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Yp="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rt=new qp("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X4={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Jt=new Ac("analytics","Analytics",X4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W4(t){if(!t.startsWith(Yp)){const e=Jt.create("invalid-gtag-resource",{gtagURL:t});return Rt.warn(e.message),""}return t}function HA(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function Z4(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function j4(t,e){const n=Z4("firebase-js-sdk-policy",{createScriptURL:W4}),i=document.createElement("script"),o=`${Yp}?l=${t}&id=${e}`;i.src=n?n==null?void 0:n.createScriptURL(o):o,i.async=!0,document.head.appendChild(i)}function eU(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function tU(t,e,n,i,o,s){const r=i[o];try{if(r)await e[r];else{const u=(await HA(n)).find(c=>c.measurementId===o);u&&await e[u.appId]}}catch(a){Rt.error(a)}t("config",o,s)}async function nU(t,e,n,i,o){try{let s=[];if(o&&o.send_to){let r=o.send_to;Array.isArray(r)||(r=[r]);const a=await HA(n);for(const u of r){const c=a.find(p=>p.measurementId===u),h=c&&e[c.appId];if(h)s.push(h);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",i,o||{})}catch(s){Rt.error(s)}}function iU(t,e,n,i){async function o(s,...r){try{if(s==="event"){const[a,u]=r;await nU(t,e,n,a,u)}else if(s==="config"){const[a,u]=r;await tU(t,e,n,i,a,u)}else if(s==="consent"){const[a,u]=r;t("consent",a,u)}else if(s==="get"){const[a,u,c]=r;t("get",a,u,c)}else if(s==="set"){const[a]=r;t("set",a)}else t(s,...r)}catch(a){Rt.error(a)}}return o}function oU(t,e,n,i,o){let s=function(...r){window[i].push(arguments)};return window[o]&&typeof window[o]=="function"&&(s=window[o]),window[o]=iU(s,t,e,n),{gtagCore:s,wrappedGtag:window[o]}}function sU(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Yp)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rU=30,aU=1e3;class lU{constructor(e={},n=aU){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const YA=new lU;function uU(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function cU(t){var r;const{appId:e,apiKey:n}=t,i={method:"GET",headers:uU(n)},o=$4.replace("{app-id}",e),s=await fetch(o,i);if(s.status!==200&&s.status!==304){let a="";try{const u=await s.json();(r=u.error)!=null&&r.message&&(a=u.error.message)}catch{}throw Jt.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a})}return s.json()}async function fU(t,e=YA,n){const{appId:i,apiKey:o,measurementId:s}=t.options;if(!i)throw Jt.create("no-app-id");if(!o){if(s)return{measurementId:s,appId:i};throw Jt.create("no-api-key")}const r=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new pU;return setTimeout(async()=>{a.abort()},Q4),JA({appId:i,apiKey:o,measurementId:s},r,a,e)}async function JA(t,{throttleEndTimeMillis:e,backoffCount:n},i,o=YA){var a;const{appId:s,measurementId:r}=t;try{await dU(i,e)}catch(u){if(r)return Rt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${r} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:s,measurementId:r};throw u}try{const u=await cU(t);return o.deleteThrottleMetadata(s),u}catch(u){const c=u;if(!hU(c)){if(o.deleteThrottleMetadata(s),r)return Rt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${r} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:s,measurementId:r};throw u}const h=Number((a=c==null?void 0:c.customData)==null?void 0:a.httpStatus)===503?Cv(n,o.intervalMillis,rU):Cv(n,o.intervalMillis),p={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return o.setThrottleMetadata(s,p),Rt.debug(`Calling attemptFetch again in ${h} millis`),JA(t,p,i,o)}}function dU(t,e){return new Promise((n,i)=>{const o=Math.max(e-Date.now(),0),s=setTimeout(n,o);t.addEventListener(()=>{clearTimeout(s),i(Jt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function hU(t){if(!(t instanceof to)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class pU{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function mU(t,e,n,i,o){if(o&&o.global){t("event",n,i);return}else{const s=await e,r={...i,send_to:s};t("event",n,r)}}async function gU(t,e,n,i){if(i&&i.global){const o={};for(const s of Object.keys(n))o[`user_properties.${s}`]=n[s];return t("set",o),Promise.resolve()}else{const o=await e;t("config",o,{update:!0,user_properties:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yU(){if(yA())try{await _A()}catch(t){return Rt.warn(Jt.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Rt.warn(Jt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function _U(t,e,n,i,o,s,r){const a=fU(t);a.then(m=>{n[m.measurementId]=m.appId,t.options.measurementId&&m.measurementId!==t.options.measurementId&&Rt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>Rt.error(m)),e.push(a);const u=yU().then(m=>{if(m)return i.getId()}),[c,h]=await Promise.all([a,u]);sU(s)||j4(s,c.measurementId),o("js",new Date);const p=(r==null?void 0:r.config)??{};return p[K4]="firebase",p.update=!0,h!=null&&(p[J4]=h),o("config",c.measurementId,p),c.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vU{constructor(e){this.app=e}_delete(){return delete Cs[this.app.options.appId],Promise.resolve()}}let Cs={},Uv=[];const Lv={};let $f="dataLayer",TU="gtag",kv,Jp,Ov=!1;function EU(){const t=[];if(BP()&&t.push("This is a browser extension environment."),GP()||t.push("Cookies are not available."),t.length>0){const e=t.map((i,o)=>`(${o+1}) ${i}`).join(" "),n=Jt.create("invalid-analytics-context",{errorInfo:e});Rt.warn(n.message)}}function SU(t,e,n){EU();const i=t.options.appId;if(!i)throw Jt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Rt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Jt.create("no-api-key");if(Cs[i]!=null)throw Jt.create("already-exists",{id:i});if(!Ov){eU($f);const{wrappedGtag:s,gtagCore:r}=oU(Cs,Uv,Lv,$f,TU);Jp=s,kv=r,Ov=!0}return Cs[i]=_U(t,Uv,Lv,e,kv,$f,n),new vU(t)}function AU(t=AA()){t=wo(t);const e=Ha(t,qu);return e.isInitialized()?e.getImmediate():CU(t)}function CU(t,e={}){const n=Ha(t,qu);if(n.isInitialized()){const o=n.getImmediate();if(Sa(e,n.getOptions()))return o;throw Jt.create("already-initialized")}return n.initialize({options:e})}function IU(t,e,n){t=wo(t),gU(Jp,Cs[t.app.options.appId],e,n).catch(i=>Rt.error(i))}function RU(t,e,n,i){t=wo(t),mU(Jp,Cs[t.app.options.appId],e,n,i).catch(o=>Rt.error(o))}const qv="@firebase/analytics",Bv="0.10.19";function wU(){Yi(new ei(qu,(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return SU(i,o,n)},"PUBLIC")),Yi(new ei("analytics-internal",t,"PRIVATE")),Cn(qv,Bv),Cn(qv,Bv,"esm2020");function t(e){try{const n=e.getProvider(qu).getImmediate();return{logEvent:(i,o,s)=>RU(n,i,o,s),setUserProperties:(i,o)=>IU(n,i,o)}}catch(n){throw Jt.create("interop-component-reg-failed",{reason:n})}}}wU();var Fv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qi,KA;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,S){function T(){}T.prototype=S.prototype,A.F=S.prototype,A.prototype=new T,A.prototype.constructor=A,A.D=function(w,M,P){for(var N=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)N[Ue-2]=arguments[Ue];return S.prototype[M].apply(w,N)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(A,S,T){T||(T=0);const w=Array(16);if(typeof S=="string")for(var M=0;M<16;++M)w[M]=S.charCodeAt(T++)|S.charCodeAt(T++)<<8|S.charCodeAt(T++)<<16|S.charCodeAt(T++)<<24;else for(M=0;M<16;++M)w[M]=S[T++]|S[T++]<<8|S[T++]<<16|S[T++]<<24;S=A.g[0],T=A.g[1],M=A.g[2];let P=A.g[3],N;N=S+(P^T&(M^P))+w[0]+3614090360&4294967295,S=T+(N<<7&4294967295|N>>>25),N=P+(M^S&(T^M))+w[1]+3905402710&4294967295,P=S+(N<<12&4294967295|N>>>20),N=M+(T^P&(S^T))+w[2]+606105819&4294967295,M=P+(N<<17&4294967295|N>>>15),N=T+(S^M&(P^S))+w[3]+3250441966&4294967295,T=M+(N<<22&4294967295|N>>>10),N=S+(P^T&(M^P))+w[4]+4118548399&4294967295,S=T+(N<<7&4294967295|N>>>25),N=P+(M^S&(T^M))+w[5]+1200080426&4294967295,P=S+(N<<12&4294967295|N>>>20),N=M+(T^P&(S^T))+w[6]+2821735955&4294967295,M=P+(N<<17&4294967295|N>>>15),N=T+(S^M&(P^S))+w[7]+4249261313&4294967295,T=M+(N<<22&4294967295|N>>>10),N=S+(P^T&(M^P))+w[8]+1770035416&4294967295,S=T+(N<<7&4294967295|N>>>25),N=P+(M^S&(T^M))+w[9]+2336552879&4294967295,P=S+(N<<12&4294967295|N>>>20),N=M+(T^P&(S^T))+w[10]+4294925233&4294967295,M=P+(N<<17&4294967295|N>>>15),N=T+(S^M&(P^S))+w[11]+2304563134&4294967295,T=M+(N<<22&4294967295|N>>>10),N=S+(P^T&(M^P))+w[12]+1804603682&4294967295,S=T+(N<<7&4294967295|N>>>25),N=P+(M^S&(T^M))+w[13]+4254626195&4294967295,P=S+(N<<12&4294967295|N>>>20),N=M+(T^P&(S^T))+w[14]+2792965006&4294967295,M=P+(N<<17&4294967295|N>>>15),N=T+(S^M&(P^S))+w[15]+1236535329&4294967295,T=M+(N<<22&4294967295|N>>>10),N=S+(M^P&(T^M))+w[1]+4129170786&4294967295,S=T+(N<<5&4294967295|N>>>27),N=P+(T^M&(S^T))+w[6]+3225465664&4294967295,P=S+(N<<9&4294967295|N>>>23),N=M+(S^T&(P^S))+w[11]+643717713&4294967295,M=P+(N<<14&4294967295|N>>>18),N=T+(P^S&(M^P))+w[0]+3921069994&4294967295,T=M+(N<<20&4294967295|N>>>12),N=S+(M^P&(T^M))+w[5]+3593408605&4294967295,S=T+(N<<5&4294967295|N>>>27),N=P+(T^M&(S^T))+w[10]+38016083&4294967295,P=S+(N<<9&4294967295|N>>>23),N=M+(S^T&(P^S))+w[15]+3634488961&4294967295,M=P+(N<<14&4294967295|N>>>18),N=T+(P^S&(M^P))+w[4]+3889429448&4294967295,T=M+(N<<20&4294967295|N>>>12),N=S+(M^P&(T^M))+w[9]+568446438&4294967295,S=T+(N<<5&4294967295|N>>>27),N=P+(T^M&(S^T))+w[14]+3275163606&4294967295,P=S+(N<<9&4294967295|N>>>23),N=M+(S^T&(P^S))+w[3]+4107603335&4294967295,M=P+(N<<14&4294967295|N>>>18),N=T+(P^S&(M^P))+w[8]+1163531501&4294967295,T=M+(N<<20&4294967295|N>>>12),N=S+(M^P&(T^M))+w[13]+2850285829&4294967295,S=T+(N<<5&4294967295|N>>>27),N=P+(T^M&(S^T))+w[2]+4243563512&4294967295,P=S+(N<<9&4294967295|N>>>23),N=M+(S^T&(P^S))+w[7]+1735328473&4294967295,M=P+(N<<14&4294967295|N>>>18),N=T+(P^S&(M^P))+w[12]+2368359562&4294967295,T=M+(N<<20&4294967295|N>>>12),N=S+(T^M^P)+w[5]+4294588738&4294967295,S=T+(N<<4&4294967295|N>>>28),N=P+(S^T^M)+w[8]+2272392833&4294967295,P=S+(N<<11&4294967295|N>>>21),N=M+(P^S^T)+w[11]+1839030562&4294967295,M=P+(N<<16&4294967295|N>>>16),N=T+(M^P^S)+w[14]+4259657740&4294967295,T=M+(N<<23&4294967295|N>>>9),N=S+(T^M^P)+w[1]+2763975236&4294967295,S=T+(N<<4&4294967295|N>>>28),N=P+(S^T^M)+w[4]+1272893353&4294967295,P=S+(N<<11&4294967295|N>>>21),N=M+(P^S^T)+w[7]+4139469664&4294967295,M=P+(N<<16&4294967295|N>>>16),N=T+(M^P^S)+w[10]+3200236656&4294967295,T=M+(N<<23&4294967295|N>>>9),N=S+(T^M^P)+w[13]+681279174&4294967295,S=T+(N<<4&4294967295|N>>>28),N=P+(S^T^M)+w[0]+3936430074&4294967295,P=S+(N<<11&4294967295|N>>>21),N=M+(P^S^T)+w[3]+3572445317&4294967295,M=P+(N<<16&4294967295|N>>>16),N=T+(M^P^S)+w[6]+76029189&4294967295,T=M+(N<<23&4294967295|N>>>9),N=S+(T^M^P)+w[9]+3654602809&4294967295,S=T+(N<<4&4294967295|N>>>28),N=P+(S^T^M)+w[12]+3873151461&4294967295,P=S+(N<<11&4294967295|N>>>21),N=M+(P^S^T)+w[15]+530742520&4294967295,M=P+(N<<16&4294967295|N>>>16),N=T+(M^P^S)+w[2]+3299628645&4294967295,T=M+(N<<23&4294967295|N>>>9),N=S+(M^(T|~P))+w[0]+4096336452&4294967295,S=T+(N<<6&4294967295|N>>>26),N=P+(T^(S|~M))+w[7]+1126891415&4294967295,P=S+(N<<10&4294967295|N>>>22),N=M+(S^(P|~T))+w[14]+2878612391&4294967295,M=P+(N<<15&4294967295|N>>>17),N=T+(P^(M|~S))+w[5]+4237533241&4294967295,T=M+(N<<21&4294967295|N>>>11),N=S+(M^(T|~P))+w[12]+1700485571&4294967295,S=T+(N<<6&4294967295|N>>>26),N=P+(T^(S|~M))+w[3]+2399980690&4294967295,P=S+(N<<10&4294967295|N>>>22),N=M+(S^(P|~T))+w[10]+4293915773&4294967295,M=P+(N<<15&4294967295|N>>>17),N=T+(P^(M|~S))+w[1]+2240044497&4294967295,T=M+(N<<21&4294967295|N>>>11),N=S+(M^(T|~P))+w[8]+1873313359&4294967295,S=T+(N<<6&4294967295|N>>>26),N=P+(T^(S|~M))+w[15]+4264355552&4294967295,P=S+(N<<10&4294967295|N>>>22),N=M+(S^(P|~T))+w[6]+2734768916&4294967295,M=P+(N<<15&4294967295|N>>>17),N=T+(P^(M|~S))+w[13]+1309151649&4294967295,T=M+(N<<21&4294967295|N>>>11),N=S+(M^(T|~P))+w[4]+4149444226&4294967295,S=T+(N<<6&4294967295|N>>>26),N=P+(T^(S|~M))+w[11]+3174756917&4294967295,P=S+(N<<10&4294967295|N>>>22),N=M+(S^(P|~T))+w[2]+718787259&4294967295,M=P+(N<<15&4294967295|N>>>17),N=T+(P^(M|~S))+w[9]+3951481745&4294967295,A.g[0]=A.g[0]+S&4294967295,A.g[1]=A.g[1]+(M+(N<<21&4294967295|N>>>11))&4294967295,A.g[2]=A.g[2]+M&4294967295,A.g[3]=A.g[3]+P&4294967295}i.prototype.v=function(A,S){S===void 0&&(S=A.length);const T=S-this.blockSize,w=this.C;let M=this.h,P=0;for(;P<S;){if(M==0)for(;P<=T;)o(this,A,P),P+=this.blockSize;if(typeof A=="string"){for(;P<S;)if(w[M++]=A.charCodeAt(P++),M==this.blockSize){o(this,w),M=0;break}}else for(;P<S;)if(w[M++]=A[P++],M==this.blockSize){o(this,w),M=0;break}}this.h=M,this.o+=S},i.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var S=1;S<A.length-8;++S)A[S]=0;S=this.o*8;for(var T=A.length-8;T<A.length;++T)A[T]=S&255,S/=256;for(this.v(A),A=Array(16),S=0,T=0;T<4;++T)for(let w=0;w<32;w+=8)A[S++]=this.g[T]>>>w&255;return A};function s(A,S){var T=a;return Object.prototype.hasOwnProperty.call(T,A)?T[A]:T[A]=S(A)}function r(A,S){this.h=S;const T=[];let w=!0;for(let M=A.length-1;M>=0;M--){const P=A[M]|0;w&&P==S||(T[M]=P,w=!1)}this.g=T}var a={};function u(A){return-128<=A&&A<128?s(A,function(S){return new r([S|0],S<0?-1:0)}):new r([A|0],A<0?-1:0)}function c(A){if(isNaN(A)||!isFinite(A))return p;if(A<0)return V(c(-A));const S=[];let T=1;for(let w=0;A>=T;w++)S[w]=A/T|0,T*=4294967296;return new r(S,0)}function h(A,S){if(A.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(A.charAt(0)=="-")return V(h(A.substring(1),S));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const T=c(Math.pow(S,8));let w=p;for(let P=0;P<A.length;P+=8){var M=Math.min(8,A.length-P);const N=parseInt(A.substring(P,P+M),S);M<8?(M=c(Math.pow(S,M)),w=w.j(M).add(c(N))):(w=w.j(T),w=w.add(c(N)))}return w}var p=u(0),m=u(1),_=u(16777216);t=r.prototype,t.m=function(){if(D(this))return-V(this).m();let A=0,S=1;for(let T=0;T<this.g.length;T++){const w=this.i(T);A+=(w>=0?w:4294967296+w)*S,S*=4294967296}return A},t.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(x(this))return"0";if(D(this))return"-"+V(this).toString(A);const S=c(Math.pow(A,6));var T=this;let w="";for(;;){const M=b(T,S).g;T=C(T,M.j(S));let P=((T.g.length>0?T.g[0]:T.h)>>>0).toString(A);if(T=M,x(T))return P+w;for(;P.length<6;)P="0"+P;w=P+w}},t.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function x(A){if(A.h!=0)return!1;for(let S=0;S<A.g.length;S++)if(A.g[S]!=0)return!1;return!0}function D(A){return A.h==-1}t.l=function(A){return A=C(this,A),D(A)?-1:x(A)?0:1};function V(A){const S=A.g.length,T=[];for(let w=0;w<S;w++)T[w]=~A.g[w];return new r(T,~A.h).add(m)}t.abs=function(){return D(this)?V(this):this},t.add=function(A){const S=Math.max(this.g.length,A.g.length),T=[];let w=0;for(let M=0;M<=S;M++){let P=w+(this.i(M)&65535)+(A.i(M)&65535),N=(P>>>16)+(this.i(M)>>>16)+(A.i(M)>>>16);w=N>>>16,P&=65535,N&=65535,T[M]=N<<16|P}return new r(T,T[T.length-1]&-2147483648?-1:0)};function C(A,S){return A.add(V(S))}t.j=function(A){if(x(this)||x(A))return p;if(D(this))return D(A)?V(this).j(V(A)):V(V(this).j(A));if(D(A))return V(this.j(V(A)));if(this.l(_)<0&&A.l(_)<0)return c(this.m()*A.m());const S=this.g.length+A.g.length,T=[];for(var w=0;w<2*S;w++)T[w]=0;for(w=0;w<this.g.length;w++)for(let M=0;M<A.g.length;M++){const P=this.i(w)>>>16,N=this.i(w)&65535,Ue=A.i(M)>>>16,ut=A.i(M)&65535;T[2*w+2*M]+=N*ut,E(T,2*w+2*M),T[2*w+2*M+1]+=P*ut,E(T,2*w+2*M+1),T[2*w+2*M+1]+=N*Ue,E(T,2*w+2*M+1),T[2*w+2*M+2]+=P*Ue,E(T,2*w+2*M+2)}for(A=0;A<S;A++)T[A]=T[2*A+1]<<16|T[2*A];for(A=S;A<2*S;A++)T[A]=0;return new r(T,0)};function E(A,S){for(;(A[S]&65535)!=A[S];)A[S+1]+=A[S]>>>16,A[S]&=65535,S++}function I(A,S){this.g=A,this.h=S}function b(A,S){if(x(S))throw Error("division by zero");if(x(A))return new I(p,p);if(D(A))return S=b(V(A),S),new I(V(S.g),V(S.h));if(D(S))return S=b(A,V(S)),new I(V(S.g),S.h);if(A.g.length>30){if(D(A)||D(S))throw Error("slowDivide_ only works with positive integers.");for(var T=m,w=S;w.l(A)<=0;)T=k(T),w=k(w);var M=B(T,1),P=B(w,1);for(w=B(w,2),T=B(T,2);!x(w);){var N=P.add(w);N.l(A)<=0&&(M=M.add(T),P=N),w=B(w,1),T=B(T,1)}return S=C(A,M.j(S)),new I(M,S)}for(M=p;A.l(S)>=0;){for(T=Math.max(1,Math.floor(A.m()/S.m())),w=Math.ceil(Math.log(T)/Math.LN2),w=w<=48?1:Math.pow(2,w-48),P=c(T),N=P.j(S);D(N)||N.l(A)>0;)T-=w,P=c(T),N=P.j(S);x(P)&&(P=m),M=M.add(P),A=C(A,N)}return new I(M,A)}t.B=function(A){return b(this,A).h},t.and=function(A){const S=Math.max(this.g.length,A.g.length),T=[];for(let w=0;w<S;w++)T[w]=this.i(w)&A.i(w);return new r(T,this.h&A.h)},t.or=function(A){const S=Math.max(this.g.length,A.g.length),T=[];for(let w=0;w<S;w++)T[w]=this.i(w)|A.i(w);return new r(T,this.h|A.h)},t.xor=function(A){const S=Math.max(this.g.length,A.g.length),T=[];for(let w=0;w<S;w++)T[w]=this.i(w)^A.i(w);return new r(T,this.h^A.h)};function k(A){const S=A.g.length+1,T=[];for(let w=0;w<S;w++)T[w]=A.i(w)<<1|A.i(w-1)>>>31;return new r(T,A.h)}function B(A,S){const T=S>>5;S%=32;const w=A.g.length-T,M=[];for(let P=0;P<w;P++)M[P]=S>0?A.i(P+T)>>>S|A.i(P+T+1)<<32-S:A.i(P+T);return new r(M,A.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,KA=i,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.B,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=c,r.fromString=h,qi=r}).apply(typeof Fv<"u"?Fv:typeof self<"u"?self:typeof window<"u"?window:{});var wl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var QA,kr,$A,Xl,dh,XA,WA,ZA;(function(){var t,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof wl=="object"&&wl];for(var g=0;g<d.length;++g){var y=d[g];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var i=n(this);function o(d,g){if(g)e:{var y=i;d=d.split(".");for(var v=0;v<d.length-1;v++){var U=d[v];if(!(U in y))break e;y=y[U]}d=d[d.length-1],v=y[d],g=g(v),g!=v&&g!=null&&e(y,d,{configurable:!0,writable:!0,value:g})}}o("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(d){return d||function(g){var y=[],v;for(v in g)Object.prototype.hasOwnProperty.call(g,v)&&y.push([v,g[v]]);return y}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},r=this||self;function a(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function u(d,g,y){return d.call.apply(d.bind,arguments)}function c(d,g,y){return c=u,c.apply(null,arguments)}function h(d,g){var y=Array.prototype.slice.call(arguments,1);return function(){var v=y.slice();return v.push.apply(v,arguments),d.apply(this,v)}}function p(d,g){function y(){}y.prototype=g.prototype,d.Z=g.prototype,d.prototype=new y,d.prototype.constructor=d,d.Ob=function(v,U,L){for(var G=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)G[ie-2]=arguments[ie];return g.prototype[U].apply(v,G)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function _(d){const g=d.length;if(g>0){const y=Array(g);for(let v=0;v<g;v++)y[v]=d[v];return y}return[]}function x(d,g){for(let v=1;v<arguments.length;v++){const U=arguments[v];var y=typeof U;if(y=y!="object"?y:U?Array.isArray(U)?"array":y:"null",y=="array"||y=="object"&&typeof U.length=="number"){y=d.length||0;const L=U.length||0;d.length=y+L;for(let G=0;G<L;G++)d[y+G]=U[G]}else d.push(U)}}class D{constructor(g,y){this.i=g,this.j=y,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function V(d){r.setTimeout(()=>{throw d},0)}function C(){var d=A;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class E{constructor(){this.h=this.g=null}add(g,y){const v=I.get();v.set(g,y),this.h?this.h.next=v:this.g=v,this.h=v}}var I=new D(()=>new b,d=>d.reset());class b{constructor(){this.next=this.g=this.h=null}set(g,y){this.h=g,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let k,B=!1,A=new E,S=()=>{const d=Promise.resolve(void 0);k=()=>{d.then(T)}};function T(){for(var d;d=C();){try{d.h.call(d.g)}catch(y){V(y)}var g=I;g.j(d),g.h<100&&(g.h++,d.next=g.g,g.g=d)}B=!1}function w(){this.u=this.u,this.C=this.C}w.prototype.u=!1,w.prototype.dispose=function(){this.u||(this.u=!0,this.N())},w.prototype[Symbol.dispose]=function(){this.dispose()},w.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!r.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const y=()=>{};r.addEventListener("test",y,g),r.removeEventListener("test",y,g)}catch{}return d}();function N(d){return/^[\s\xa0]*$/.test(d)}function Ue(d,g){M.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,g)}p(Ue,M),Ue.prototype.init=function(d,g){const y=this.type=d.type,v=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget,g||(y=="mouseover"?g=d.fromElement:y=="mouseout"&&(g=d.toElement)),this.relatedTarget=g,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&Ue.Z.h.call(this)},Ue.prototype.h=function(){Ue.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var ut="closure_listenable_"+(Math.random()*1e6|0),z=0;function W(d,g,y,v,U){this.listener=d,this.proxy=null,this.src=g,this.type=y,this.capture=!!v,this.ha=U,this.key=++z,this.da=this.fa=!1}function Z(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function ve(d,g,y){for(const v in d)g.call(y,d[v],v,d)}function Oe(d,g){for(const y in d)g.call(void 0,d[y],y,d)}function mn(d){const g={};for(const y in d)g[y]=d[y];return g}const Pn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function gn(d,g){let y,v;for(let U=1;U<arguments.length;U++){v=arguments[U];for(y in v)d[y]=v[y];for(let L=0;L<Pn.length;L++)y=Pn[L],Object.prototype.hasOwnProperty.call(v,y)&&(d[y]=v[y])}}function Nt(d){this.src=d,this.g={},this.h=0}Nt.prototype.add=function(d,g,y,v,U){const L=d.toString();d=this.g[L],d||(d=this.g[L]=[],this.h++);const G=or(d,g,v,U);return G>-1?(g=d[G],y||(g.fa=!1)):(g=new W(g,this.src,L,!!v,U),g.fa=y,d.push(g)),g};function $t(d,g){const y=g.type;if(y in d.g){var v=d.g[y],U=Array.prototype.indexOf.call(v,g,void 0),L;(L=U>=0)&&Array.prototype.splice.call(v,U,1),L&&(Z(g),d.g[y].length==0&&(delete d.g[y],d.h--))}}function or(d,g,y,v){for(let U=0;U<d.length;++U){const L=d[U];if(!L.da&&L.listener==g&&L.capture==!!y&&L.ha==v)return U}return-1}var ai="closure_lm_"+(Math.random()*1e6|0),Go={};function Xa(d,g,y,v,U){if(Array.isArray(g)){for(let L=0;L<g.length;L++)Xa(d,g[L],y,v,U);return null}return y=ja(y),d&&d[ut]?d.J(g,y,a(v)?!!v.capture:!1,U):qc(d,g,y,!1,v,U)}function qc(d,g,y,v,U,L){if(!g)throw Error("Invalid event type");const G=a(U)?!!U.capture:!!U;let ie=li(d);if(ie||(d[ai]=ie=new Nt(d)),y=ie.add(g,y,v,G,L),y.proxy)return y;if(v=Bc(),y.proxy=v,v.src=d,v.listener=y,d.addEventListener)P||(U=G),U===void 0&&(U=!1),d.addEventListener(g.toString(),v,U);else if(d.attachEvent)d.attachEvent(Za(g.toString()),v);else if(d.addListener&&d.removeListener)d.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Bc(){function d(y){return g.call(d.src,d.listener,y)}const g=Fc;return d}function Wa(d,g,y,v,U){if(Array.isArray(g))for(var L=0;L<g.length;L++)Wa(d,g[L],y,v,U);else v=a(v)?!!v.capture:!!v,y=ja(y),d&&d[ut]?(d=d.i,L=String(g).toString(),L in d.g&&(g=d.g[L],y=or(g,y,v,U),y>-1&&(Z(g[y]),Array.prototype.splice.call(g,y,1),g.length==0&&(delete d.g[L],d.h--)))):d&&(d=li(d))&&(g=d.g[g.toString()],d=-1,g&&(d=or(g,y,v,U)),(y=d>-1?g[d]:null)&&sr(y))}function sr(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[ut])$t(g.i,d);else{var y=d.type,v=d.proxy;g.removeEventListener?g.removeEventListener(y,v,d.capture):g.detachEvent?g.detachEvent(Za(y),v):g.addListener&&g.removeListener&&g.removeListener(v),(y=li(g))?($t(y,d),y.h==0&&(y.src=null,g[ai]=null)):Z(d)}}}function Za(d){return d in Go?Go[d]:Go[d]="on"+d}function Fc(d,g){if(d.da)d=!0;else{g=new Ue(g,this);const y=d.listener,v=d.ha||d.src;d.fa&&sr(d),d=y.call(v,g)}return d}function li(d){return d=d[ai],d instanceof Nt?d:null}var rr="__closure_events_fn_"+(Math.random()*1e9>>>0);function ja(d){return typeof d=="function"?d:(d[rr]||(d[rr]=function(g){return d.handleEvent(g)}),d[rr])}function J(){w.call(this),this.i=new Nt(this),this.M=this,this.G=null}p(J,w),J.prototype[ut]=!0,J.prototype.removeEventListener=function(d,g,y,v){Wa(this,d,g,y,v)};function he(d,g){var y,v=d.G;if(v)for(y=[];v;v=v.G)y.push(v);if(d=d.M,v=g.type||g,typeof g=="string")g=new M(g,d);else if(g instanceof M)g.target=g.target||d;else{var U=g;g=new M(v,d),gn(g,U)}U=!0;let L,G;if(y)for(G=y.length-1;G>=0;G--)L=g.g=y[G],U=nt(L,v,!0,g)&&U;if(L=g.g=d,U=nt(L,v,!0,g)&&U,U=nt(L,v,!1,g)&&U,y)for(G=0;G<y.length;G++)L=g.g=y[G],U=nt(L,v,!1,g)&&U}J.prototype.N=function(){if(J.Z.N.call(this),this.i){var d=this.i;for(const g in d.g){const y=d.g[g];for(let v=0;v<y.length;v++)Z(y[v]);delete d.g[g],d.h--}}this.G=null},J.prototype.J=function(d,g,y,v){return this.i.add(String(d),g,!1,y,v)},J.prototype.K=function(d,g,y,v){return this.i.add(String(d),g,!0,y,v)};function nt(d,g,y,v){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();let U=!0;for(let L=0;L<g.length;++L){const G=g[L];if(G&&!G.da&&G.capture==y){const ie=G.listener,We=G.ha||G.src;G.fa&&$t(d.i,G),U=ie.call(We,v)!==!1&&U}}return U&&!v.defaultPrevented}function ct(d,g){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=c(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:r.setTimeout(d,g||0)}function ar(d){d.g=ct(()=>{d.g=null,d.i&&(d.i=!1,ar(d))},d.l);const g=d.h;d.h=null,d.m.apply(null,g)}class CI extends w{constructor(g,y){super(),this.m=g,this.l=y,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:ar(this)}N(){super.N(),this.g&&(r.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function lr(d){w.call(this),this.h=d,this.g={}}p(lr,w);var Mm=[];function xm(d){ve(d.g,function(g,y){this.g.hasOwnProperty(y)&&sr(g)},d),d.g={}}lr.prototype.N=function(){lr.Z.N.call(this),xm(this)},lr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gc=r.JSON.stringify,II=r.JSON.parse,RI=class{stringify(d){return r.JSON.stringify(d,void 0)}parse(d){return r.JSON.parse(d,void 0)}};function bm(){}function Dm(){}var ur={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function zc(){M.call(this,"d")}p(zc,M);function Hc(){M.call(this,"c")}p(Hc,M);var no={},Pm=null;function el(){return Pm=Pm||new J}no.Ia="serverreachability";function Vm(d){M.call(this,no.Ia,d)}p(Vm,M);function cr(d){const g=el();he(g,new Vm(g))}no.STAT_EVENT="statevent";function Um(d,g){M.call(this,no.STAT_EVENT,d),this.stat=g}p(Um,M);function At(d){const g=el();he(g,new Um(g,d))}no.Ja="timingevent";function Lm(d,g){M.call(this,no.Ja,d),this.size=g}p(Lm,M);function fr(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return r.setTimeout(function(){d()},g)}function dr(){this.g=!0}dr.prototype.ua=function(){this.g=!1};function wI(d,g,y,v,U,L){d.info(function(){if(d.g)if(L){var G="",ie=L.split("&");for(let Ce=0;Ce<ie.length;Ce++){var We=ie[Ce].split("=");if(We.length>1){const it=We[0];We=We[1];const _n=it.split("_");G=_n.length>=2&&_n[1]=="type"?G+(it+"="+We+"&"):G+(it+"=redacted&")}}}else G=null;else G=L;return"XMLHTTP REQ ("+v+") [attempt "+U+"]: "+g+`
`+y+`
`+G})}function NI(d,g,y,v,U,L,G){d.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+U+"]: "+g+`
`+y+`
`+L+" "+G})}function zo(d,g,y,v){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+xI(d,y)+(v?" "+v:"")})}function MI(d,g){d.info(function(){return"TIMEOUT: "+g})}dr.prototype.info=function(){};function xI(d,g){if(!d.g)return g;if(!g)return null;try{const L=JSON.parse(g);if(L){for(d=0;d<L.length;d++)if(Array.isArray(L[d])){var y=L[d];if(!(y.length<2)){var v=y[1];if(Array.isArray(v)&&!(v.length<1)){var U=v[0];if(U!="noop"&&U!="stop"&&U!="close")for(let G=1;G<v.length;G++)v[G]=""}}}}return Gc(L)}catch{return g}}var tl={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},km={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Om;function Yc(){}p(Yc,bm),Yc.prototype.g=function(){return new XMLHttpRequest},Om=new Yc;function hr(d){return encodeURIComponent(String(d))}function bI(d){var g=1;d=d.split(":");const y=[];for(;g>0&&d.length;)y.push(d.shift()),g--;return d.length&&y.push(d.join(":")),y}function ui(d,g,y,v){this.j=d,this.i=g,this.l=y,this.S=v||1,this.V=new lr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new qm}function qm(){this.i=null,this.g="",this.h=!1}var Bm={},Jc={};function Kc(d,g,y){d.M=1,d.A=il(yn(g)),d.u=y,d.R=!0,Fm(d,null)}function Fm(d,g){d.F=Date.now(),nl(d),d.B=yn(d.A);var y=d.B,v=d.S;Array.isArray(v)||(v=[String(v)]),eg(y.i,"t",v),d.C=0,y=d.j.L,d.h=new qm,d.g=_g(d.j,y?g:null,!d.u),d.P>0&&(d.O=new CI(c(d.Y,d,d.g),d.P)),g=d.V,y=d.g,v=d.ba;var U="readystatechange";Array.isArray(U)||(U&&(Mm[0]=U.toString()),U=Mm);for(let L=0;L<U.length;L++){const G=Xa(y,U[L],v||g.handleEvent,!1,g.h||g);if(!G)break;g.g[G.key]=G}g=d.J?mn(d.J):{},d.u?(d.v||(d.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,g)):(d.v="GET",d.g.ea(d.B,d.v,null,g)),cr(),wI(d.i,d.v,d.B,d.l,d.S,d.u)}ui.prototype.ba=function(d){d=d.target;const g=this.O;g&&di(d)==3?g.j():this.Y(d)},ui.prototype.Y=function(d){try{if(d==this.g)e:{const ie=di(this.g),We=this.g.ya(),Ce=this.g.ca();if(!(ie<3)&&(ie!=3||this.g&&(this.h.h||this.g.la()||ag(this.g)))){this.K||ie!=4||We==7||(We==8||Ce<=0?cr(3):cr(2)),Qc(this);var g=this.g.ca();this.X=g;var y=DI(this);if(this.o=g==200,NI(this.i,this.v,this.B,this.l,this.S,ie,g),this.o){if(this.U&&!this.L){t:{if(this.g){var v,U=this.g;if((v=U.g?U.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(v)){var L=v;break t}}L=null}if(d=L)zo(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,$c(this,d);else{this.o=!1,this.m=3,At(12),io(this),pr(this);break e}}if(this.R){d=!0;let it;for(;!this.K&&this.C<y.length;)if(it=PI(this,y),it==Jc){ie==4&&(this.m=4,At(14),d=!1),zo(this.i,this.l,null,"[Incomplete Response]");break}else if(it==Bm){this.m=4,At(15),zo(this.i,this.l,y,"[Invalid Chunk]"),d=!1;break}else zo(this.i,this.l,it,null),$c(this,it);if(Gm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ie!=4||y.length!=0||this.h.h||(this.m=1,At(16),d=!1),this.o=this.o&&d,!d)zo(this.i,this.l,y,"[Invalid Chunked Response]"),io(this),pr(this);else if(y.length>0&&!this.W){this.W=!0;var G=this.j;G.g==this&&G.aa&&!G.P&&(G.j.info("Great, no buffering proxy detected. Bytes received: "+y.length),of(G),G.P=!0,At(11))}}else zo(this.i,this.l,y,null),$c(this,y);ie==4&&io(this),this.o&&!this.K&&(ie==4?pg(this.j,this):(this.o=!1,nl(this)))}else KI(this.g),g==400&&y.indexOf("Unknown SID")>0?(this.m=3,At(12)):(this.m=0,At(13)),io(this),pr(this)}}}catch{}finally{}};function DI(d){if(!Gm(d))return d.g.la();const g=ag(d.g);if(g==="")return"";let y="";const v=g.length,U=di(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return io(d),pr(d),"";d.h.i=new r.TextDecoder}for(let L=0;L<v;L++)d.h.h=!0,y+=d.h.i.decode(g[L],{stream:!(U&&L==v-1)});return g.length=0,d.h.g+=y,d.C=0,d.h.g}function Gm(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function PI(d,g){var y=d.C,v=g.indexOf(`
`,y);return v==-1?Jc:(y=Number(g.substring(y,v)),isNaN(y)?Bm:(v+=1,v+y>g.length?Jc:(g=g.slice(v,v+y),d.C=v+y,g)))}ui.prototype.cancel=function(){this.K=!0,io(this)};function nl(d){d.T=Date.now()+d.H,zm(d,d.H)}function zm(d,g){if(d.D!=null)throw Error("WatchDog timer not null");d.D=fr(c(d.aa,d),g)}function Qc(d){d.D&&(r.clearTimeout(d.D),d.D=null)}ui.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(MI(this.i,this.B),this.M!=2&&(cr(),At(17)),io(this),this.m=2,pr(this)):zm(this,this.T-d)};function pr(d){d.j.I==0||d.K||pg(d.j,d)}function io(d){Qc(d);var g=d.O;g&&typeof g.dispose=="function"&&g.dispose(),d.O=null,xm(d.V),d.g&&(g=d.g,d.g=null,g.abort(),g.dispose())}function $c(d,g){try{var y=d.j;if(y.I!=0&&(y.g==d||Xc(y.h,d))){if(!d.L&&Xc(y.h,d)&&y.I==3){try{var v=y.Ba.g.parse(g)}catch{v=null}if(Array.isArray(v)&&v.length==3){var U=v;if(U[0]==0){e:if(!y.v){if(y.g)if(y.g.F+3e3<d.F)ll(y),rl(y);else break e;nf(y),At(18)}}else y.xa=U[1],0<y.xa-y.K&&U[2]<37500&&y.F&&y.A==0&&!y.C&&(y.C=fr(c(y.Va,y),6e3));Jm(y.h)<=1&&y.ta&&(y.ta=void 0)}else so(y,11)}else if((d.L||y.g==d)&&ll(y),!N(g))for(U=y.Ba.g.parse(g),g=0;g<U.length;g++){let Ce=U[g];const it=Ce[0];if(!(it<=y.K))if(y.K=it,Ce=Ce[1],y.I==2)if(Ce[0]=="c"){y.M=Ce[1],y.ba=Ce[2];const _n=Ce[3];_n!=null&&(y.ka=_n,y.j.info("VER="+y.ka));const ro=Ce[4];ro!=null&&(y.za=ro,y.j.info("SVER="+y.za));const hi=Ce[5];hi!=null&&typeof hi=="number"&&hi>0&&(v=1.5*hi,y.O=v,y.j.info("backChannelRequestTimeoutMs_="+v)),v=y;const pi=d.g;if(pi){const cl=pi.g?pi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(cl){var L=v.h;L.g||cl.indexOf("spdy")==-1&&cl.indexOf("quic")==-1&&cl.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(Wc(L,L.h),L.h=null))}if(v.G){const sf=pi.g?pi.g.getResponseHeader("X-HTTP-Session-Id"):null;sf&&(v.wa=sf,we(v.J,v.G,sf))}}y.I=3,y.l&&y.l.ra(),y.aa&&(y.T=Date.now()-d.F,y.j.info("Handshake RTT: "+y.T+"ms")),v=y;var G=d;if(v.na=yg(v,v.L?v.ba:null,v.W),G.L){Km(v.h,G);var ie=G,We=v.O;We&&(ie.H=We),ie.D&&(Qc(ie),nl(ie)),v.g=G}else dg(v);y.i.length>0&&al(y)}else Ce[0]!="stop"&&Ce[0]!="close"||so(y,7);else y.I==3&&(Ce[0]=="stop"||Ce[0]=="close"?Ce[0]=="stop"?so(y,7):tf(y):Ce[0]!="noop"&&y.l&&y.l.qa(Ce),y.A=0)}}cr(4)}catch{}}var VI=class{constructor(d,g){this.g=d,this.map=g}};function Hm(d){this.l=d||10,r.PerformanceNavigationTiming?(d=r.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(r.chrome&&r.chrome.loadTimes&&r.chrome.loadTimes()&&r.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ym(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Jm(d){return d.h?1:d.g?d.g.size:0}function Xc(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function Wc(d,g){d.g?d.g.add(g):d.h=g}function Km(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}Hm.prototype.cancel=function(){if(this.i=Qm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Qm(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let g=d.i;for(const y of d.g.values())g=g.concat(y.G);return g}return _(d.i)}var $m=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function UI(d,g){if(d){d=d.split("&");for(let y=0;y<d.length;y++){const v=d[y].indexOf("=");let U,L=null;v>=0?(U=d[y].substring(0,v),L=d[y].substring(v+1)):U=d[y],g(U,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function ci(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;d instanceof ci?(this.l=d.l,mr(this,d.j),this.o=d.o,this.g=d.g,gr(this,d.u),this.h=d.h,Zc(this,tg(d.i)),this.m=d.m):d&&(g=String(d).match($m))?(this.l=!1,mr(this,g[1]||"",!0),this.o=yr(g[2]||""),this.g=yr(g[3]||"",!0),gr(this,g[4]),this.h=yr(g[5]||"",!0),Zc(this,g[6]||"",!0),this.m=yr(g[7]||"")):(this.l=!1,this.i=new vr(null,this.l))}ci.prototype.toString=function(){const d=[];var g=this.j;g&&d.push(_r(g,Xm,!0),":");var y=this.g;return(y||g=="file")&&(d.push("//"),(g=this.o)&&d.push(_r(g,Xm,!0),"@"),d.push(hr(y).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.u,y!=null&&d.push(":",String(y))),(y=this.h)&&(this.g&&y.charAt(0)!="/"&&d.push("/"),d.push(_r(y,y.charAt(0)=="/"?OI:kI,!0))),(y=this.i.toString())&&d.push("?",y),(y=this.m)&&d.push("#",_r(y,BI)),d.join("")},ci.prototype.resolve=function(d){const g=yn(this);let y=!!d.j;y?mr(g,d.j):y=!!d.o,y?g.o=d.o:y=!!d.g,y?g.g=d.g:y=d.u!=null;var v=d.h;if(y)gr(g,d.u);else if(y=!!d.h){if(v.charAt(0)!="/")if(this.g&&!this.h)v="/"+v;else{var U=g.h.lastIndexOf("/");U!=-1&&(v=g.h.slice(0,U+1)+v)}if(U=v,U==".."||U==".")v="";else if(U.indexOf("./")!=-1||U.indexOf("/.")!=-1){v=U.lastIndexOf("/",0)==0,U=U.split("/");const L=[];for(let G=0;G<U.length;){const ie=U[G++];ie=="."?v&&G==U.length&&L.push(""):ie==".."?((L.length>1||L.length==1&&L[0]!="")&&L.pop(),v&&G==U.length&&L.push("")):(L.push(ie),v=!0)}v=L.join("/")}else v=U}return y?g.h=v:y=d.i.toString()!=="",y?Zc(g,tg(d.i)):y=!!d.m,y&&(g.m=d.m),g};function yn(d){return new ci(d)}function mr(d,g,y){d.j=y?yr(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function gr(d,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);d.u=g}else d.u=null}function Zc(d,g,y){g instanceof vr?(d.i=g,FI(d.i,d.l)):(y||(g=_r(g,qI)),d.i=new vr(g,d.l))}function we(d,g,y){d.i.set(g,y)}function il(d){return we(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function yr(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function _r(d,g,y){return typeof d=="string"?(d=encodeURI(d).replace(g,LI),y&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function LI(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Xm=/[#\/\?@]/g,kI=/[#\?:]/g,OI=/[#\?]/g,qI=/[#\?@]/g,BI=/#/g;function vr(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function oo(d){d.g||(d.g=new Map,d.h=0,d.i&&UI(d.i,function(g,y){d.add(decodeURIComponent(g.replace(/\+/g," ")),y)}))}t=vr.prototype,t.add=function(d,g){oo(this),this.i=null,d=Ho(this,d);let y=this.g.get(d);return y||this.g.set(d,y=[]),y.push(g),this.h+=1,this};function Wm(d,g){oo(d),g=Ho(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function Zm(d,g){return oo(d),g=Ho(d,g),d.g.has(g)}t.forEach=function(d,g){oo(this),this.g.forEach(function(y,v){y.forEach(function(U){d.call(g,U,v,this)},this)},this)};function jm(d,g){oo(d);let y=[];if(typeof g=="string")Zm(d,g)&&(y=y.concat(d.g.get(Ho(d,g))));else for(d=Array.from(d.g.values()),g=0;g<d.length;g++)y=y.concat(d[g]);return y}t.set=function(d,g){return oo(this),this.i=null,d=Ho(this,d),Zm(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},t.get=function(d,g){return d?(d=jm(this,d),d.length>0?String(d[0]):g):g};function eg(d,g,y){Wm(d,g),y.length>0&&(d.i=null,d.g.set(Ho(d,g),_(y)),d.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],g=Array.from(this.g.keys());for(let v=0;v<g.length;v++){var y=g[v];const U=hr(y);y=jm(this,y);for(let L=0;L<y.length;L++){let G=U;y[L]!==""&&(G+="="+hr(y[L])),d.push(G)}}return this.i=d.join("&")};function tg(d){const g=new vr;return g.i=d.i,d.g&&(g.g=new Map(d.g),g.h=d.h),g}function Ho(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function FI(d,g){g&&!d.j&&(oo(d),d.i=null,d.g.forEach(function(y,v){const U=v.toLowerCase();v!=U&&(Wm(this,v),eg(this,U,y))},d)),d.j=g}function GI(d,g){const y=new dr;if(r.Image){const v=new Image;v.onload=h(fi,y,"TestLoadImage: loaded",!0,g,v),v.onerror=h(fi,y,"TestLoadImage: error",!1,g,v),v.onabort=h(fi,y,"TestLoadImage: abort",!1,g,v),v.ontimeout=h(fi,y,"TestLoadImage: timeout",!1,g,v),r.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=d}else g(!1)}function zI(d,g){const y=new dr,v=new AbortController,U=setTimeout(()=>{v.abort(),fi(y,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:v.signal}).then(L=>{clearTimeout(U),L.ok?fi(y,"TestPingServer: ok",!0,g):fi(y,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(U),fi(y,"TestPingServer: error",!1,g)})}function fi(d,g,y,v,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),v(y)}catch{}}function HI(){this.g=new RI}function jc(d){this.i=d.Sb||null,this.h=d.ab||!1}p(jc,bm),jc.prototype.g=function(){return new ol(this.i,this.h)};function ol(d,g){J.call(this),this.H=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(ol,J),t=ol.prototype,t.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=g,this.readyState=1,Er(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(g.body=d),(this.H||r).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Tr(this)),this.readyState=0},t.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Er(this)),this.g&&(this.readyState=3,Er(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof r.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ng(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function ng(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}t.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?Tr(this):Er(this),this.readyState==3&&ng(this)}},t.Oa=function(d){this.g&&(this.response=this.responseText=d,Tr(this))},t.Na=function(d){this.g&&(this.response=d,Tr(this))},t.ga=function(){this.g&&Tr(this)};function Tr(d){d.readyState=4,d.l=null,d.j=null,d.B=null,Er(d)}t.setRequestHeader=function(d,g){this.A.append(d,g)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],g=this.h.entries();for(var y=g.next();!y.done;)y=y.value,d.push(y[0]+": "+y[1]),y=g.next();return d.join(`\r
`)};function Er(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(ol.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function ig(d){let g="";return ve(d,function(y,v){g+=v,g+=":",g+=y,g+=`\r
`}),g}function ef(d,g,y){e:{for(v in y){var v=!1;break e}v=!0}v||(y=ig(y),typeof d=="string"?y!=null&&hr(y):we(d,g,y))}function qe(d){J.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(qe,J);var YI=/^https?$/i,JI=["POST","PUT"];t=qe.prototype,t.Fa=function(d){this.H=d},t.ea=function(d,g,y,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Om.g(),this.g.onreadystatechange=m(c(this.Ca,this));try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch(L){og(this,L);return}if(d=y||"",y=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var U in v)y.set(U,v[U]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const L of v.keys())y.set(L,v.get(L));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(y.keys()).find(L=>L.toLowerCase()=="content-type"),U=r.FormData&&d instanceof r.FormData,!(Array.prototype.indexOf.call(JI,g,void 0)>=0)||v||U||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,G]of y)this.g.setRequestHeader(L,G);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(L){og(this,L)}};function og(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.o=5,sg(d),sl(d)}function sg(d){d.A||(d.A=!0,he(d,"complete"),he(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,he(this,"complete"),he(this,"abort"),sl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),sl(this,!0)),qe.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?rg(this):this.Xa())},t.Xa=function(){rg(this)};function rg(d){if(d.h&&typeof s<"u"){if(d.v&&di(d)==4)setTimeout(d.Ca.bind(d),0);else if(he(d,"readystatechange"),di(d)==4){d.h=!1;try{const L=d.ca();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var y;if(!(y=g)){var v;if(v=L===0){let G=String(d.D).match($m)[1]||null;!G&&r.self&&r.self.location&&(G=r.self.location.protocol.slice(0,-1)),v=!YI.test(G?G.toLowerCase():"")}y=v}if(y)he(d,"complete"),he(d,"success");else{d.o=6;try{var U=di(d)>2?d.g.statusText:""}catch{U=""}d.l=U+" ["+d.ca()+"]",sg(d)}}finally{sl(d)}}}}function sl(d,g){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const y=d.g;d.g=null,g||he(d,"ready");try{y.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function di(d){return d.g?d.g.readyState:0}t.ca=function(){try{return di(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),II(g)}};function ag(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function KI(d){const g={};d=(d.g&&di(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<d.length;v++){if(N(d[v]))continue;var y=bI(d[v]);const U=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const L=g[U]||[];g[U]=L,L.push(y)}Oe(g,function(v){return v.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Sr(d,g,y){return y&&y.internalChannelParams&&y.internalChannelParams[d]||g}function lg(d){this.za=0,this.i=[],this.j=new dr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Sr("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Sr("baseRetryDelayMs",5e3,d),this.Za=Sr("retryDelaySeedMs",1e4,d),this.Ta=Sr("forwardChannelMaxRetries",2,d),this.va=Sr("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new Hm(d&&d.concurrentRequestLimit),this.Ba=new HI,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=lg.prototype,t.ka=8,t.I=1,t.connect=function(d,g,y,v){At(0),this.W=d,this.H=g||{},y&&v!==void 0&&(this.H.OSID=y,this.H.OAID=v),this.F=this.X,this.J=yg(this,null,this.W),al(this)};function tf(d){if(ug(d),d.I==3){var g=d.V++,y=yn(d.J);if(we(y,"SID",d.M),we(y,"RID",g),we(y,"TYPE","terminate"),Ar(d,y),g=new ui(d,d.j,g),g.M=2,g.A=il(yn(y)),y=!1,r.navigator&&r.navigator.sendBeacon)try{y=r.navigator.sendBeacon(g.A.toString(),"")}catch{}!y&&r.Image&&(new Image().src=g.A,y=!0),y||(g.g=_g(g.j,null),g.g.ea(g.A)),g.F=Date.now(),nl(g)}gg(d)}function rl(d){d.g&&(of(d),d.g.cancel(),d.g=null)}function ug(d){rl(d),d.v&&(r.clearTimeout(d.v),d.v=null),ll(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&r.clearTimeout(d.m),d.m=null)}function al(d){if(!Ym(d.h)&&!d.m){d.m=!0;var g=d.Ea;k||S(),B||(k(),B=!0),A.add(g,d),d.D=0}}function QI(d,g){return Jm(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=g.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=fr(c(d.Ea,d,g),mg(d,d.D)),d.D++,!0)}t.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const U=new ui(this,this.j,d);let L=this.o;if(this.U&&(L?(L=mn(L),gn(L,this.U)):L=this.U),this.u!==null||this.R||(U.J=L,L=null),this.S)e:{for(var g=0,y=0;y<this.i.length;y++){t:{var v=this.i[y];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(g+=v,g>4096){g=y;break e}if(g===4096||y===this.i.length-1){g=y+1;break e}}g=1e3}else g=1e3;g=fg(this,U,g),y=yn(this.J),we(y,"RID",d),we(y,"CVER",22),this.G&&we(y,"X-HTTP-Session-Id",this.G),Ar(this,y),L&&(this.R?g="headers="+hr(ig(L))+"&"+g:this.u&&ef(y,this.u,L)),Wc(this.h,U),this.Ra&&we(y,"TYPE","init"),this.S?(we(y,"$req",g),we(y,"SID","null"),U.U=!0,Kc(U,y,null)):Kc(U,y,g),this.I=2}}else this.I==3&&(d?cg(this,d):this.i.length==0||Ym(this.h)||cg(this))};function cg(d,g){var y;g?y=g.l:y=d.V++;const v=yn(d.J);we(v,"SID",d.M),we(v,"RID",y),we(v,"AID",d.K),Ar(d,v),d.u&&d.o&&ef(v,d.u,d.o),y=new ui(d,d.j,y,d.D+1),d.u===null&&(y.J=d.o),g&&(d.i=g.G.concat(d.i)),g=fg(d,y,1e3),y.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),Wc(d.h,y),Kc(y,v,g)}function Ar(d,g){d.H&&ve(d.H,function(y,v){we(g,v,y)}),d.l&&ve({},function(y,v){we(g,v,y)})}function fg(d,g,y){y=Math.min(d.i.length,y);const v=d.l?c(d.l.Ka,d.l,d):null;e:{var U=d.i;let ie=-1;for(;;){const We=["count="+y];ie==-1?y>0?(ie=U[0].g,We.push("ofs="+ie)):ie=0:We.push("ofs="+ie);let Ce=!0;for(let it=0;it<y;it++){var L=U[it].g;const _n=U[it].map;if(L-=ie,L<0)ie=Math.max(0,U[it].g-100),Ce=!1;else try{L="req"+L+"_"||"";try{var G=_n instanceof Map?_n:Object.entries(_n);for(const[ro,hi]of G){let pi=hi;a(hi)&&(pi=Gc(hi)),We.push(L+ro+"="+encodeURIComponent(pi))}}catch(ro){throw We.push(L+"type="+encodeURIComponent("_badmap")),ro}}catch{v&&v(_n)}}if(Ce){G=We.join("&");break e}}G=void 0}return d=d.i.splice(0,y),g.G=d,G}function dg(d){if(!d.g&&!d.v){d.Y=1;var g=d.Da;k||S(),B||(k(),B=!0),A.add(g,d),d.A=0}}function nf(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=fr(c(d.Da,d),mg(d,d.A)),d.A++,!0)}t.Da=function(){if(this.v=null,hg(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=fr(c(this.Wa,this),d)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,At(10),rl(this),hg(this))};function of(d){d.B!=null&&(r.clearTimeout(d.B),d.B=null)}function hg(d){d.g=new ui(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var g=yn(d.na);we(g,"RID","rpc"),we(g,"SID",d.M),we(g,"AID",d.K),we(g,"CI",d.F?"0":"1"),!d.F&&d.ia&&we(g,"TO",d.ia),we(g,"TYPE","xmlhttp"),Ar(d,g),d.u&&d.o&&ef(g,d.u,d.o),d.O&&(d.g.H=d.O);var y=d.g;d=d.ba,y.M=1,y.A=il(yn(g)),y.u=null,y.R=!0,Fm(y,d)}t.Va=function(){this.C!=null&&(this.C=null,rl(this),nf(this),At(19))};function ll(d){d.C!=null&&(r.clearTimeout(d.C),d.C=null)}function pg(d,g){var y=null;if(d.g==g){ll(d),of(d),d.g=null;var v=2}else if(Xc(d.h,g))y=g.G,Km(d.h,g),v=1;else return;if(d.I!=0){if(g.o)if(v==1){y=g.u?g.u.length:0,g=Date.now()-g.F;var U=d.D;v=el(),he(v,new Lm(v,y)),al(d)}else dg(d);else if(U=g.m,U==3||U==0&&g.X>0||!(v==1&&QI(d,g)||v==2&&nf(d)))switch(y&&y.length>0&&(g=d.h,g.i=g.i.concat(y)),U){case 1:so(d,5);break;case 4:so(d,10);break;case 3:so(d,6);break;default:so(d,2)}}}function mg(d,g){let y=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(y*=2),y*g}function so(d,g){if(d.j.info("Error code "+g),g==2){var y=c(d.bb,d),v=d.Ua;const U=!v;v=new ci(v||"//www.google.com/images/cleardot.gif"),r.location&&r.location.protocol=="http"||mr(v,"https"),il(v),U?GI(v.toString(),y):zI(v.toString(),y)}else At(2);d.I=0,d.l&&d.l.pa(g),gg(d),ug(d)}t.bb=function(d){d?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function gg(d){if(d.I=0,d.ja=[],d.l){const g=Qm(d.h);(g.length!=0||d.i.length!=0)&&(x(d.ja,g),x(d.ja,d.i),d.h.i.length=0,_(d.i),d.i.length=0),d.l.oa()}}function yg(d,g,y){var v=y instanceof ci?yn(y):new ci(y);if(v.g!="")g&&(v.g=g+"."+v.g),gr(v,v.u);else{var U=r.location;v=U.protocol,g=g?g+"."+U.hostname:U.hostname,U=+U.port;const L=new ci(null);v&&mr(L,v),g&&(L.g=g),U&&gr(L,U),y&&(L.h=y),v=L}return y=d.G,g=d.wa,y&&g&&we(v,y,g),we(v,"VER",d.ka),Ar(d,v),v}function _g(d,g,y){if(g&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Aa&&!d.ma?new qe(new jc({ab:y})):new qe(d.ma),g.Fa(d.L),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function vg(){}t=vg.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function ul(){}ul.prototype.g=function(d,g){return new kt(d,g)};function kt(d,g){J.call(this),this.g=new lg(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(d?d["X-WebChannel-Client-Profile"]=g.sa:d={"X-WebChannel-Client-Profile":g.sa}),this.g.U=d,(d=g&&g.Qb)&&!N(d)&&(this.g.u=d),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!N(g)&&(this.g.G=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new Yo(this)}p(kt,J),kt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},kt.prototype.close=function(){tf(this.g)},kt.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var y={};y.__data__=d,d=y}else this.v&&(y={},y.__data__=Gc(d),d=y);g.i.push(new VI(g.Ya++,d)),g.I==3&&al(g)},kt.prototype.N=function(){this.g.l=null,delete this.j,tf(this.g),delete this.g,kt.Z.N.call(this)};function Tg(d){zc.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(const y in g){d=y;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}p(Tg,zc);function Eg(){Hc.call(this),this.status=1}p(Eg,Hc);function Yo(d){this.g=d}p(Yo,vg),Yo.prototype.ra=function(){he(this.g,"a")},Yo.prototype.qa=function(d){he(this.g,new Tg(d))},Yo.prototype.pa=function(d){he(this.g,new Eg)},Yo.prototype.oa=function(){he(this.g,"b")},ul.prototype.createWebChannel=ul.prototype.g,kt.prototype.send=kt.prototype.o,kt.prototype.open=kt.prototype.m,kt.prototype.close=kt.prototype.close,ZA=function(){return new ul},WA=function(){return el()},XA=no,dh={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},tl.NO_ERROR=0,tl.TIMEOUT=8,tl.HTTP_ERROR=6,Xl=tl,km.COMPLETE="complete",$A=km,Dm.EventType=ur,ur.OPEN="a",ur.CLOSE="b",ur.ERROR="c",ur.MESSAGE="d",J.prototype.listen=J.prototype.J,kr=Dm,qe.prototype.listenOnce=qe.prototype.K,qe.prototype.getLastError=qe.prototype.Ha,qe.prototype.getLastErrorCode=qe.prototype.ya,qe.prototype.getStatus=qe.prototype.ca,qe.prototype.getResponseJson=qe.prototype.La,qe.prototype.getResponseText=qe.prototype.la,qe.prototype.send=qe.prototype.ea,qe.prototype.setWithCredentials=qe.prototype.Fa,QA=qe}).apply(typeof wl<"u"?wl:typeof self<"u"?self:typeof window<"u"?window:{});const Gv="@firebase/firestore",zv="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Tt.UNAUTHENTICATED=new Tt(null),Tt.GOOGLE_CREDENTIALS=new Tt("google-credentials-uid"),Tt.FIRST_PARTY=new Tt("first-party-uid"),Tt.MOCK_USER=new Tt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let er="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo=new qp("@firebase/firestore");function Wo(){return xo.logLevel}function Y(t,...e){if(xo.logLevel<=de.DEBUG){const n=e.map(Kp);xo.debug(`Firestore (${er}): ${t}`,...n)}}function ni(t,...e){if(xo.logLevel<=de.ERROR){const n=e.map(Kp);xo.error(`Firestore (${er}): ${t}`,...n)}}function ks(t,...e){if(xo.logLevel<=de.WARN){const n=e.map(Kp);xo.warn(`Firestore (${er}): ${t}`,...n)}}function Kp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,jA(t,i,n)}function jA(t,e,n){let i=`FIRESTORE (${er}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw ni(i),new Error(i)}function _e(t,e,n,i){let o="Unexpected state";typeof n=="string"?o=n:i=n,t||jA(e,o,i)}function ee(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends to{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class NU{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Tt.UNAUTHENTICATED))}shutdown(){}}class MU{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class xU{constructor(e){this.t=e,this.currentUser=Tt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){_e(this.o===void 0,42304);let i=this.i;const o=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve();let s=new Bi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Bi,e.enqueueRetryable(()=>o(this.currentUser))};const r=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await o(this.currentUser)})},a=u=>{Y("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),r())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(Y("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Bi)}},0),r()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(Y("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(_e(typeof i.accessToken=="string",31837,{l:i}),new eC(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _e(e===null||typeof e=="string",2055,{h:e}),new Tt(e)}}class bU{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Tt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class DU{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new bU(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Tt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Hv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class PU{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,YV(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){_e(this.o===void 0,3512);const i=s=>{s.error!=null&&Y("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const r=s.token!==this.m;return this.m=s.token,Y("FirebaseAppCheckTokenProvider",`Received ${r?"new":"existing"} token.`),r?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const o=s=>{Y("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>o(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?o(s):Y("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Hv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(_e(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Hv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VU(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=VU(40);for(let s=0;s<o.length;++s)i.length<20&&o[s]<n&&(i+=e.charAt(o[s]%62))}return i}}function ae(t,e){return t<e?-1:t>e?1:0}function hh(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const o=t.charAt(i),s=e.charAt(i);if(o!==s)return Xf(o)===Xf(s)?ae(o,s):Xf(o)?1:-1}return ae(t.length,e.length)}const UU=55296,LU=57343;function Xf(t){const e=t.charCodeAt(0);return e>=UU&&e<=LU}function Os(t,e,n){return t.length===e.length&&t.every((i,o)=>n(i,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv="__name__";class vn{constructor(e,n,i){n===void 0?n=0:n>e.length&&$(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&$(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return vn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof vn?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let o=0;o<i;o++){const s=vn.compareSegments(e.get(o),n.get(o));if(s!==0)return s}return ae(e.length,n.length)}static compareSegments(e,n){const i=vn.isNumericId(e),o=vn.isNumericId(n);return i&&!o?-1:!i&&o?1:i&&o?vn.extractNumericId(e).compare(vn.extractNumericId(n)):hh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return qi.fromString(e.substring(4,e.length-2))}}class Le extends vn{construct(e,n,i){return new Le(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new K(F.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(o=>o.length>0))}return new Le(n)}static emptyPath(){return new Le([])}}const kU=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mt extends vn{construct(e,n,i){return new mt(e,n,i)}static isValidIdentifier(e){return kU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Yv}static keyField(){return new mt([Yv])}static fromServerFormat(e){const n=[];let i="",o=0;const s=()=>{if(i.length===0)throw new K(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let r=!1;for(;o<e.length;){const a=e[o];if(a==="\\"){if(o+1===e.length)throw new K(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[o+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new K(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=u,o+=2}else a==="`"?(r=!r,o++):a!=="."||r?(i+=a,o++):(s(),o++)}if(s(),r)throw new K(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new mt(n)}static emptyPath(){return new mt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.path=e}static fromPath(e){return new Q(Le.fromString(e))}static fromName(e){return new Q(Le.fromString(e).popFirst(5))}static empty(){return new Q(Le.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Le.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Le.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Q(new Le(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OU(t,e,n){if(!n)throw new K(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function qU(t,e,n,i){if(e===!0&&i===!0)throw new K(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Jv(t){if(!Q.isDocumentKey(t))throw new K(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function tC(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function $p(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":$(12329,{type:typeof t})}function Ca(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=$p(t);throw new K(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xe(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ya(t,e){if(!tC(t))throw new K(F.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const o=e[i].typeString,s="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const r=t[i];if(o&&typeof r!==o){n=`JSON field '${i}' must be a ${o}.`;break}if(s!==void 0&&r!==s.value){n=`Expected '${i}' field to equal '${s.value}'`;break}}if(n)throw new K(F.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv=-62135596800,Qv=1e6;class be{static now(){return be.fromMillis(Date.now())}static fromDate(e){return be.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*Qv);return new be(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Kv)throw new K(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Qv}_compareTo(e){return this.seconds===e.seconds?ae(this.nanoseconds,e.nanoseconds):ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:be._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ya(e,be._jsonSchema))return new be(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Kv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}be._jsonSchemaVersion="firestore/timestamp/1.0",be._jsonSchema={type:Xe("string",be._jsonSchemaVersion),seconds:Xe("number"),nanoseconds:Xe("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{static fromTimestamp(e){return new j(e)}static min(){return new j(new be(0,0))}static max(){return new j(new be(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ia=-1;function BU(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,o=j.fromTimestamp(i===1e9?new be(n+1,0):new be(n,i));return new Ji(o,Q.empty(),e)}function FU(t){return new Ji(t.readTime,t.key,Ia)}class Ji{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Ji(j.min(),Q.empty(),Ia)}static max(){return new Ji(j.max(),Q.empty(),Ia)}}function GU(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Q.comparator(t.documentKey,e.documentKey),n!==0?n:ae(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class HU{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tr(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==zU)throw t;Y("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&$(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new q((i,o)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,o)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof q?n:q.resolve(n)}catch(n){return q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):q.reject(n)}static resolve(e){return new q((n,i)=>{n(e)})}static reject(e){return new q((n,i)=>{i(e)})}static waitFor(e){return new q((n,i)=>{let o=0,s=0,r=!1;e.forEach(a=>{++o,a.next(()=>{++s,r&&s===o&&n()},u=>i(u))}),r=!0,s===o&&n()})}static or(e){let n=q.resolve(!1);for(const i of e)n=n.next(o=>o?q.resolve(o):i());return n}static forEach(e,n){const i=[];return e.forEach((o,s)=>{i.push(n.call(this,o,s))}),this.waitFor(i)}static mapArray(e,n){return new q((i,o)=>{const s=e.length,r=new Array(s);let a=0;for(let u=0;u<s;u++){const c=u;n(e[c]).next(h=>{r[c]=h,++a,a===s&&i(r)},h=>o(h))}})}static doWhile(e,n){return new q((i,o)=>{const s=()=>{e()===!0?n().next(()=>{s()},o):i()};s()})}}function YU(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function nr(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Rc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xp=-1;function wc(t){return t==null}function Bu(t){return t===0&&1/t==-1/0}function JU(t){return typeof t=="number"&&Number.isInteger(t)&&!Bu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC="";function KU(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=$v(e)),e=QU(t.get(n),e);return $v(e)}function QU(t,e){let n=e;const i=t.length;for(let o=0;o<i;o++){const s=t.charAt(o);switch(s){case"\0":n+="";break;case nC:n+="";break;default:n+=s}}return n}function $v(t){return t+nC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Oo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function iC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e,n){this.comparator=e,this.root=n||dt.EMPTY}insert(e,n){return new ke(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,dt.BLACK,null,null))}remove(e){return new ke(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return n+i.left.size;o<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Nl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Nl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Nl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Nl(this.root,e,this.comparator,!0)}}class Nl{constructor(e,n,i,o){this.isReverse=o,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&o&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dt{constructor(e,n,i,o,s){this.key=e,this.value=n,this.color=i??dt.RED,this.left=o??dt.EMPTY,this.right=s??dt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,o,s){return new dt(e??this.key,n??this.value,i??this.color,o??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let o=this;const s=i(e,o.key);return o=s<0?o.copy(null,null,null,o.left.insert(e,n,i),null):s===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return dt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return dt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw $(43730,{key:this.key,value:this.value});if(this.right.isRed())throw $(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw $(27949);return e+(this.isRed()?0:1)}}dt.EMPTY=null,dt.RED=!0,dt.BLACK=!1;dt.EMPTY=new class{constructor(){this.size=0}get key(){throw $(57766)}get value(){throw $(16141)}get color(){throw $(16727)}get left(){throw $(29726)}get right(){throw $(36894)}copy(e,n,i,o,s){return this}insert(e,n,i){return new dt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.comparator=e,this.data=new ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Wv(this.data.getIterator())}getIteratorFrom(e){return new Wv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof et)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,s=i.getNext().key;if(this.comparator(o,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new et(this.comparator);return n.data=e,n}}class Wv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.fields=e,e.sort(mt.comparator)}static empty(){return new dn([])}unionWith(e){let n=new et(mt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new dn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Os(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new oC("Invalid base64 string: "+s):s}}(e);return new _t(n)}static fromUint8Array(e){const n=function(o){let s="";for(let r=0;r<o.length;++r)s+=String.fromCharCode(o[r]);return s}(e);return new _t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_t.EMPTY_BYTE_STRING=new _t("");const $U=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ki(t){if(_e(!!t,39018),typeof t=="string"){let e=0;const n=$U.exec(t);if(_e(!!n,46558,{timestamp:t}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ge(t.seconds),nanos:Ge(t.nanos)}}function Ge(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Qi(t){return typeof t=="string"?_t.fromBase64String(t):_t.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC="server_timestamp",rC="__type__",aC="__previous_value__",lC="__local_write_time__";function Wp(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[rC])==null?void 0:i.stringValue)===sC}function Nc(t){const e=t.mapValue.fields[aC];return Wp(e)?Nc(e):e}function Ra(t){const e=Ki(t.mapValue.fields[lC].timestampValue);return new be(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XU{constructor(e,n,i,o,s,r,a,u,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=o,this.ssl=s,this.forceLongPolling=r,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c,this.isUsingEmulator=h}}const Fu="(default)";class wa{constructor(e,n){this.projectId=e,this.database=n||Fu}static empty(){return new wa("","")}get isDefaultDatabase(){return this.database===Fu}isEqual(e){return e instanceof wa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC="__type__",WU="__max__",Ml={mapValue:{}},cC="__vector__",Gu="value";function $i(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Wp(t)?4:jU(t)?9007199254740991:ZU(t)?10:11:$(28295,{value:t})}function Mn(t,e){if(t===e)return!0;const n=$i(t);if(n!==$i(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ra(t).isEqual(Ra(e));case 3:return function(o,s){if(typeof o.timestampValue=="string"&&typeof s.timestampValue=="string"&&o.timestampValue.length===s.timestampValue.length)return o.timestampValue===s.timestampValue;const r=Ki(o.timestampValue),a=Ki(s.timestampValue);return r.seconds===a.seconds&&r.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(o,s){return Qi(o.bytesValue).isEqual(Qi(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(o,s){return Ge(o.geoPointValue.latitude)===Ge(s.geoPointValue.latitude)&&Ge(o.geoPointValue.longitude)===Ge(s.geoPointValue.longitude)}(t,e);case 2:return function(o,s){if("integerValue"in o&&"integerValue"in s)return Ge(o.integerValue)===Ge(s.integerValue);if("doubleValue"in o&&"doubleValue"in s){const r=Ge(o.doubleValue),a=Ge(s.doubleValue);return r===a?Bu(r)===Bu(a):isNaN(r)&&isNaN(a)}return!1}(t,e);case 9:return Os(t.arrayValue.values||[],e.arrayValue.values||[],Mn);case 10:case 11:return function(o,s){const r=o.mapValue.fields||{},a=s.mapValue.fields||{};if(Xv(r)!==Xv(a))return!1;for(const u in r)if(r.hasOwnProperty(u)&&(a[u]===void 0||!Mn(r[u],a[u])))return!1;return!0}(t,e);default:return $(52216,{left:t})}}function Na(t,e){return(t.values||[]).find(n=>Mn(n,e))!==void 0}function qs(t,e){if(t===e)return 0;const n=$i(t),i=$i(e);if(n!==i)return ae(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ae(t.booleanValue,e.booleanValue);case 2:return function(s,r){const a=Ge(s.integerValue||s.doubleValue),u=Ge(r.integerValue||r.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return Zv(t.timestampValue,e.timestampValue);case 4:return Zv(Ra(t),Ra(e));case 5:return hh(t.stringValue,e.stringValue);case 6:return function(s,r){const a=Qi(s),u=Qi(r);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,r){const a=s.split("/"),u=r.split("/");for(let c=0;c<a.length&&c<u.length;c++){const h=ae(a[c],u[c]);if(h!==0)return h}return ae(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,r){const a=ae(Ge(s.latitude),Ge(r.latitude));return a!==0?a:ae(Ge(s.longitude),Ge(r.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return jv(t.arrayValue,e.arrayValue);case 10:return function(s,r){var m,_,x,D;const a=s.fields||{},u=r.fields||{},c=(m=a[Gu])==null?void 0:m.arrayValue,h=(_=u[Gu])==null?void 0:_.arrayValue,p=ae(((x=c==null?void 0:c.values)==null?void 0:x.length)||0,((D=h==null?void 0:h.values)==null?void 0:D.length)||0);return p!==0?p:jv(c,h)}(t.mapValue,e.mapValue);case 11:return function(s,r){if(s===Ml.mapValue&&r===Ml.mapValue)return 0;if(s===Ml.mapValue)return 1;if(r===Ml.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),c=r.fields||{},h=Object.keys(c);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){const m=hh(u[p],h[p]);if(m!==0)return m;const _=qs(a[u[p]],c[h[p]]);if(_!==0)return _}return ae(u.length,h.length)}(t.mapValue,e.mapValue);default:throw $(23264,{he:n})}}function Zv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ae(t,e);const n=Ki(t),i=Ki(e),o=ae(n.seconds,i.seconds);return o!==0?o:ae(n.nanos,i.nanos)}function jv(t,e){const n=t.values||[],i=e.values||[];for(let o=0;o<n.length&&o<i.length;++o){const s=qs(n[o],i[o]);if(s)return s}return ae(n.length,i.length)}function Bs(t){return ph(t)}function ph(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Ki(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Qi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",o=!0;for(const s of n.values||[])o?o=!1:i+=",",i+=ph(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let o="{",s=!0;for(const r of i)s?s=!1:o+=",",o+=`${r}:${ph(n.fields[r])}`;return o+"}"}(t.mapValue):$(61005,{value:t})}function Wl(t){switch($i(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Nc(t);return e?16+Wl(e):16;case 5:return 2*t.stringValue.length;case 6:return Qi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((o,s)=>o+Wl(s),0)}(t.arrayValue);case 10:case 11:return function(i){let o=0;return Oo(i.fields,(s,r)=>{o+=s.length+Wl(r)}),o}(t.mapValue);default:throw $(13486,{value:t})}}function mh(t){return!!t&&"integerValue"in t}function Zp(t){return!!t&&"arrayValue"in t}function eT(t){return!!t&&"nullValue"in t}function tT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Zl(t){return!!t&&"mapValue"in t}function ZU(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[uC])==null?void 0:i.stringValue)===cC}function ia(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Oo(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=ia(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ia(t.arrayValue.values[n]);return e}return{...t}}function jU(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===WU}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.value=e}static empty(){return new on({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Zl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ia(n)}setAll(e){let n=mt.emptyPath(),i={},o=[];e.forEach((r,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,i,o),i={},o=[],n=a.popLast()}r?i[a.lastSegment()]=ia(r):o.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,o)}delete(e){const n=this.field(e.popLast());Zl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Mn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=n.mapValue.fields[e.get(i)];Zl(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,i){Oo(n,(o,s)=>e[o]=s);for(const o of i)delete e[o]}clone(){return new on(ia(this.value))}}function fC(t){const e=[];return Oo(t.fields,(n,i)=>{const o=new mt([n]);if(Zl(i)){const s=fC(i.mapValue).fields;if(s.length===0)e.push(o);else for(const r of s)e.push(o.child(r))}else e.push(o)}),new dn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e,n,i,o,s,r,a){this.key=e,this.documentType=n,this.version=i,this.readTime=o,this.createTime=s,this.data=r,this.documentState=a}static newInvalidDocument(e){return new Et(e,0,j.min(),j.min(),j.min(),on.empty(),0)}static newFoundDocument(e,n,i,o){return new Et(e,1,n,j.min(),i,o,0)}static newNoDocument(e,n){return new Et(e,2,n,j.min(),j.min(),on.empty(),0)}static newUnknownDocument(e,n){return new Et(e,3,n,j.min(),j.min(),on.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(j.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=on.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=on.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=j.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Et&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Et(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e,n){this.position=e,this.inclusive=n}}function nT(t,e,n){let i=0;for(let o=0;o<t.position.length;o++){const s=e[o],r=t.position[o];if(s.field.isKeyField()?i=Q.comparator(Q.fromName(r.referenceValue),n.key):i=qs(r,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function iT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Mn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(e,n="asc"){this.field=e,this.dir=n}}function eL(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{}class je extends dC{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new nL(e,n,i):n==="array-contains"?new sL(e,i):n==="in"?new rL(e,i):n==="not-in"?new aL(e,i):n==="array-contains-any"?new lL(e,i):new je(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new iL(e,i):new oL(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(qs(n,this.value)):n!==null&&$i(this.value)===$i(n)&&this.matchesComparison(qs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return $(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class xn extends dC{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new xn(e,n)}matches(e){return hC(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function hC(t){return t.op==="and"}function pC(t){return tL(t)&&hC(t)}function tL(t){for(const e of t.filters)if(e instanceof xn)return!1;return!0}function gh(t){if(t instanceof je)return t.field.canonicalString()+t.op.toString()+Bs(t.value);if(pC(t))return t.filters.map(e=>gh(e)).join(",");{const e=t.filters.map(n=>gh(n)).join(",");return`${t.op}(${e})`}}function mC(t,e){return t instanceof je?function(i,o){return o instanceof je&&i.op===o.op&&i.field.isEqual(o.field)&&Mn(i.value,o.value)}(t,e):t instanceof xn?function(i,o){return o instanceof xn&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce((s,r,a)=>s&&mC(r,o.filters[a]),!0):!1}(t,e):void $(19439)}function gC(t){return t instanceof je?function(n){return`${n.field.canonicalString()} ${n.op} ${Bs(n.value)}`}(t):t instanceof xn?function(n){return n.op.toString()+" {"+n.getFilters().map(gC).join(" ,")+"}"}(t):"Filter"}class nL extends je{constructor(e,n,i){super(e,n,i),this.key=Q.fromName(i.referenceValue)}matches(e){const n=Q.comparator(e.key,this.key);return this.matchesComparison(n)}}class iL extends je{constructor(e,n){super(e,"in",n),this.keys=yC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class oL extends je{constructor(e,n){super(e,"not-in",n),this.keys=yC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function yC(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(i=>Q.fromName(i.referenceValue))}class sL extends je{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Zp(n)&&Na(n.arrayValue,this.value)}}class rL extends je{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Na(this.value.arrayValue,n)}}class aL extends je{constructor(e,n){super(e,"not-in",n)}matches(e){if(Na(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Na(this.value.arrayValue,n)}}class lL extends je{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Zp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Na(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(e,n=null,i=[],o=[],s=null,r=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=o,this.limit=s,this.startAt=r,this.endAt=a,this.Te=null}}function oT(t,e=null,n=[],i=[],o=null,s=null,r=null){return new uL(t,e,n,i,o,s,r)}function jp(t){const e=ee(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>gh(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),wc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Bs(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Bs(i)).join(",")),e.Te=n}return e.Te}function em(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!eL(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!mC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!iT(t.startAt,e.startAt)&&iT(t.endAt,e.endAt)}function yh(t){return Q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,n=null,i=[],o=[],s=null,r="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=o,this.limit=s,this.limitType=r,this.startAt=a,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function cL(t,e,n,i,o,s,r,a){return new Mc(t,e,n,i,o,s,r,a)}function tm(t){return new Mc(t)}function sT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function fL(t){return t.collectionGroup!==null}function oa(t){const e=ee(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(r){let a=new et(mt.comparator);return r.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Hu(s,i))}),n.has(mt.keyField().canonicalString())||e.Ie.push(new Hu(mt.keyField(),i))}return e.Ie}function In(t){const e=ee(t);return e.Ee||(e.Ee=dL(e,oa(t))),e.Ee}function dL(t,e){if(t.limitType==="F")return oT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(o=>{const s=o.dir==="desc"?"asc":"desc";return new Hu(o.field,s)});const n=t.endAt?new zu(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new zu(t.startAt.position,t.startAt.inclusive):null;return oT(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function _h(t,e,n){return new Mc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function xc(t,e){return em(In(t),In(e))&&t.limitType===e.limitType}function _C(t){return`${jp(In(t))}|lt:${t.limitType}`}function Zo(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(o=>gC(o)).join(", ")}]`),wc(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(o=>function(r){return`${r.field.canonicalString()} (${r.dir})`}(o)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(o=>Bs(o)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(o=>Bs(o)).join(",")),`Target(${i})`}(In(t))}; limitType=${t.limitType})`}function bc(t,e){return e.isFoundDocument()&&function(i,o){const s=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):Q.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,o){for(const s of oa(i))if(!s.field.isKeyField()&&o.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,o){for(const s of i.filters)if(!s.matches(o))return!1;return!0}(t,e)&&function(i,o){return!(i.startAt&&!function(r,a,u){const c=nT(r,a,u);return r.inclusive?c<=0:c<0}(i.startAt,oa(i),o)||i.endAt&&!function(r,a,u){const c=nT(r,a,u);return r.inclusive?c>=0:c>0}(i.endAt,oa(i),o))}(t,e)}function hL(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function vC(t){return(e,n)=>{let i=!1;for(const o of oa(t)){const s=pL(o,e,n);if(s!==0)return s;i=i||o.field.isKeyField()}return 0}}function pL(t,e,n){const i=t.field.isKeyField()?Q.comparator(e.key,n.key):function(s,r,a){const u=r.data.field(s),c=a.data.field(s);return u!==null&&c!==null?qs(u,c):$(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return $(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[o,s]of i)if(this.equalsFn(o,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<o.length;s++)if(this.equalsFn(o[s][0],e))return void(o[s]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[n]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Oo(this.inner,(n,i)=>{for(const[o,s]of i)e(o,s)})}isEmpty(){return iC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mL=new ke(Q.comparator);function ii(){return mL}const TC=new ke(Q.comparator);function Or(...t){let e=TC;for(const n of t)e=e.insert(n.key,n);return e}function EC(t){let e=TC;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function mo(){return sa()}function SC(){return sa()}function sa(){return new qo(t=>t.toString(),(t,e)=>t.isEqual(e))}const gL=new ke(Q.comparator),yL=new et(Q.comparator);function le(...t){let e=yL;for(const n of t)e=e.add(n);return e}const _L=new et(ae);function vL(){return _L}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bu(e)?"-0":e}}function AC(t){return{integerValue:""+t}}function TL(t,e){return JU(e)?AC(e):nm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(){this._=void 0}}function EL(t,e,n){return t instanceof Yu?function(o,s){const r={fields:{[rC]:{stringValue:sC},[lC]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return s&&Wp(s)&&(s=Nc(s)),s&&(r.fields[aC]=s),{mapValue:r}}(n,e):t instanceof Ma?IC(t,e):t instanceof xa?RC(t,e):function(o,s){const r=CC(o,s),a=rT(r)+rT(o.Ae);return mh(r)&&mh(o.Ae)?AC(a):nm(o.serializer,a)}(t,e)}function SL(t,e,n){return t instanceof Ma?IC(t,e):t instanceof xa?RC(t,e):n}function CC(t,e){return t instanceof Ju?function(i){return mh(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}class Yu extends Dc{}class Ma extends Dc{constructor(e){super(),this.elements=e}}function IC(t,e){const n=wC(e);for(const i of t.elements)n.some(o=>Mn(o,i))||n.push(i);return{arrayValue:{values:n}}}class xa extends Dc{constructor(e){super(),this.elements=e}}function RC(t,e){let n=wC(e);for(const i of t.elements)n=n.filter(o=>!Mn(o,i));return{arrayValue:{values:n}}}class Ju extends Dc{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function rT(t){return Ge(t.integerValue||t.doubleValue)}function wC(t){return Zp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function AL(t,e){return t.field.isEqual(e.field)&&function(i,o){return i instanceof Ma&&o instanceof Ma||i instanceof xa&&o instanceof xa?Os(i.elements,o.elements,Mn):i instanceof Ju&&o instanceof Ju?Mn(i.Ae,o.Ae):i instanceof Yu&&o instanceof Yu}(t.transform,e.transform)}class CL{constructor(e,n){this.version=e,this.transformResults=n}}class Kn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Kn}static exists(e){return new Kn(void 0,e)}static updateTime(e){return new Kn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function jl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Pc{}function NC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new xC(t.key,Kn.none()):new Ja(t.key,t.data,Kn.none());{const n=t.data,i=on.empty();let o=new et(mt.comparator);for(let s of e.fields)if(!o.has(s)){let r=n.field(s);r===null&&s.length>1&&(s=s.popLast(),r=n.field(s)),r===null?i.delete(s):i.set(s,r),o=o.add(s)}return new Bo(t.key,i,new dn(o.toArray()),Kn.none())}}function IL(t,e,n){t instanceof Ja?function(o,s,r){const a=o.value.clone(),u=lT(o.fieldTransforms,s,r.transformResults);a.setAll(u),s.convertToFoundDocument(r.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Bo?function(o,s,r){if(!jl(o.precondition,s))return void s.convertToUnknownDocument(r.version);const a=lT(o.fieldTransforms,s,r.transformResults),u=s.data;u.setAll(MC(o)),u.setAll(a),s.convertToFoundDocument(r.version,u).setHasCommittedMutations()}(t,e,n):function(o,s,r){s.convertToNoDocument(r.version).setHasCommittedMutations()}(0,e,n)}function ra(t,e,n,i){return t instanceof Ja?function(s,r,a,u){if(!jl(s.precondition,r))return a;const c=s.value.clone(),h=uT(s.fieldTransforms,u,r);return c.setAll(h),r.convertToFoundDocument(r.version,c).setHasLocalMutations(),null}(t,e,n,i):t instanceof Bo?function(s,r,a,u){if(!jl(s.precondition,r))return a;const c=uT(s.fieldTransforms,u,r),h=r.data;return h.setAll(MC(s)),h.setAll(c),r.convertToFoundDocument(r.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,i):function(s,r,a){return jl(s.precondition,r)?(r.convertToNoDocument(r.version).setHasLocalMutations(),null):a}(t,e,n)}function RL(t,e){let n=null;for(const i of t.fieldTransforms){const o=e.data.field(i.field),s=CC(i.transform,o||null);s!=null&&(n===null&&(n=on.empty()),n.set(i.field,s))}return n||null}function aT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Os(i,o,(s,r)=>AL(s,r))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ja extends Pc{constructor(e,n,i,o=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Bo extends Pc{constructor(e,n,i,o,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=o,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function MC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function lT(t,e,n){const i=new Map;_e(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let o=0;o<n.length;o++){const s=t[o],r=s.transform,a=e.data.field(s.field);i.set(s.field,SL(r,a,n[o]))}return i}function uT(t,e,n){const i=new Map;for(const o of t){const s=o.transform,r=n.data.field(o.field);i.set(o.field,EL(s,r,e))}return i}class xC extends Pc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wL extends Pc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NL{constructor(e,n,i,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const s=this.mutations[o];s.key.isEqual(e.key)&&IL(s,e,i[o])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=ra(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=ra(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=SC();return this.mutations.forEach(o=>{const s=e.get(o.key),r=s.overlayedDocument;let a=this.applyToLocalView(r,s.mutatedFields);a=n.has(o.key)?null:a;const u=NC(r,a);u!==null&&i.set(o.key,u),r.isValidDocument()||r.convertToNoDocument(j.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),le())}isEqual(e){return this.batchId===e.batchId&&Os(this.mutations,e.mutations,(n,i)=>aT(n,i))&&Os(this.baseMutations,e.baseMutations,(n,i)=>aT(n,i))}}class im{constructor(e,n,i,o){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=o}static from(e,n,i){_e(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=function(){return gL}();const s=e.mutations;for(let r=0;r<s.length;r++)o=o.insert(s[r].key,i[r].version);return new im(e,n,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xL{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ye,fe;function bL(t){switch(t){case F.OK:return $(64938);case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0;default:return $(15467,{code:t})}}function bC(t){if(t===void 0)return ni("GRPC error has no .code"),F.UNKNOWN;switch(t){case Ye.OK:return F.OK;case Ye.CANCELLED:return F.CANCELLED;case Ye.UNKNOWN:return F.UNKNOWN;case Ye.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case Ye.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case Ye.INTERNAL:return F.INTERNAL;case Ye.UNAVAILABLE:return F.UNAVAILABLE;case Ye.UNAUTHENTICATED:return F.UNAUTHENTICATED;case Ye.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case Ye.NOT_FOUND:return F.NOT_FOUND;case Ye.ALREADY_EXISTS:return F.ALREADY_EXISTS;case Ye.PERMISSION_DENIED:return F.PERMISSION_DENIED;case Ye.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case Ye.ABORTED:return F.ABORTED;case Ye.OUT_OF_RANGE:return F.OUT_OF_RANGE;case Ye.UNIMPLEMENTED:return F.UNIMPLEMENTED;case Ye.DATA_LOSS:return F.DATA_LOSS;default:return $(39323,{code:t})}}(fe=Ye||(Ye={}))[fe.OK=0]="OK",fe[fe.CANCELLED=1]="CANCELLED",fe[fe.UNKNOWN=2]="UNKNOWN",fe[fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fe[fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fe[fe.NOT_FOUND=5]="NOT_FOUND",fe[fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",fe[fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",fe[fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",fe[fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fe[fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fe[fe.ABORTED=10]="ABORTED",fe[fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",fe[fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",fe[fe.INTERNAL=13]="INTERNAL",fe[fe.UNAVAILABLE=14]="UNAVAILABLE",fe[fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DL(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PL=new qi([4294967295,4294967295],0);function cT(t){const e=DL().encode(t),n=new KA;return n.update(e),new Uint8Array(n.digest())}function fT(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new qi([n,i],0),new qi([o,s],0)]}class om{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new qr(`Invalid padding: ${n}`);if(i<0)throw new qr(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new qr(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new qr(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=qi.fromNumber(this.ge)}ye(e,n,i){let o=e.add(n.multiply(qi.fromNumber(i)));return o.compare(PL)===1&&(o=new qi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=cT(e),[i,o]=fT(n);for(let s=0;s<this.hashCount;s++){const r=this.ye(i,o,s);if(!this.we(r))return!1}return!0}static create(e,n,i){const o=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),r=new om(s,o,n);return i.forEach(a=>r.insert(a)),r}insert(e){if(this.ge===0)return;const n=cT(e),[i,o]=fT(n);for(let s=0;s<this.hashCount;s++){const r=this.ye(i,o,s);this.Se(r)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class qr extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,n,i,o,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const o=new Map;return o.set(e,Ka.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Vc(j.min(),o,new ke(ae),ii(),le())}}class Ka{constructor(e,n,i,o,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Ka(i,n,le(),le(),le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e,n,i,o){this.be=e,this.removedTargetIds=n,this.key=i,this.De=o}}class DC{constructor(e,n){this.targetId=e,this.Ce=n}}class PC{constructor(e,n,i=_t.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=o}}class dT{constructor(){this.ve=0,this.Fe=hT(),this.Me=_t.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=le(),n=le(),i=le();return this.Fe.forEach((o,s)=>{switch(s){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:i=i.add(o);break;default:$(38017,{changeType:s})}}),new Ka(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=hT()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,_e(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class VL{constructor(e){this.Ge=e,this.ze=new Map,this.je=ii(),this.Je=xl(),this.He=xl(),this.Ye=new ke(ae)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:$(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((i,o)=>{this.rt(o)&&n(o)})}st(e){const n=e.targetId,i=e.Ce.count,o=this.ot(n);if(o){const s=o.target;if(yh(s))if(i===0){const r=new Q(s.path);this.et(n,r,Et.newNoDocument(r,j.min()))}else _e(i===1,20013,{expectedCount:i});else{const r=this._t(n);if(r!==i){const a=this.ut(e),u=a?this.ct(a,e,r):1;if(u!==0){this.it(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:s=0}=n;let r,a;try{r=Qi(i).toUint8Array()}catch(u){if(u instanceof oC)return ks("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new om(r,o,s)}catch(u){return ks(u instanceof qr?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.ge===0?null:a}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let o=0;return i.forEach(s=>{const r=this.Ge.ht(),a=`projects/${r.projectId}/databases/${r.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(n,s,null),o++)}),o}Tt(e){const n=new Map;this.ze.forEach((s,r)=>{const a=this.ot(r);if(a){if(s.current&&yh(a.target)){const u=new Q(a.target.path);this.It(u).has(r)||this.Et(r,u)||this.et(r,u,Et.newNoDocument(u,e))}s.Be&&(n.set(r,s.ke()),s.qe())}});let i=le();this.He.forEach((s,r)=>{let a=!0;r.forEachWhile(u=>{const c=this.ot(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.je.forEach((s,r)=>r.setReadTime(e));const o=new Vc(e,n,this.Ye,this.je,i);return this.je=ii(),this.Je=xl(),this.He=xl(),this.Ye=new ke(ae),o}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new dT,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new et(ae),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new et(ae),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Y("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new dT),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function xl(){return new ke(Q.comparator)}function hT(){return new ke(Q.comparator)}const UL={asc:"ASCENDING",desc:"DESCENDING"},LL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kL={and:"AND",or:"OR"};class OL{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function vh(t,e){return t.useProto3Json||wc(e)?e:{value:e}}function Ku(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function VC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function qL(t,e){return Ku(t,e.toTimestamp())}function Rn(t){return _e(!!t,49232),j.fromTimestamp(function(n){const i=Ki(n);return new be(i.seconds,i.nanos)}(t))}function sm(t,e){return Th(t,e).canonicalString()}function Th(t,e){const n=function(o){return new Le(["projects",o.projectId,"databases",o.database])}(t).child("documents");return e===void 0?n:n.child(e)}function UC(t){const e=Le.fromString(t);return _e(BC(e),10190,{key:e.toString()}),e}function Eh(t,e){return sm(t.databaseId,e.path)}function Wf(t,e){const n=UC(e);if(n.get(1)!==t.databaseId.projectId)throw new K(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Q(kC(n))}function LC(t,e){return sm(t.databaseId,e)}function BL(t){const e=UC(t);return e.length===4?Le.emptyPath():kC(e)}function Sh(t){return new Le(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function kC(t){return _e(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function pT(t,e,n){return{name:Eh(t,e),fields:n.value.mapValue.fields}}function FL(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:$(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(_e(h===void 0||typeof h=="string",58123),_t.fromBase64String(h||"")):(_e(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),_t.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),r=e.targetChange.cause,a=r&&function(c){const h=c.code===void 0?F.UNKNOWN:bC(c.code);return new K(h,c.message||"")}(r);n=new PC(i,o,s,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Wf(t,i.document.name),s=Rn(i.document.updateTime),r=i.document.createTime?Rn(i.document.createTime):j.min(),a=new on({mapValue:{fields:i.document.fields}}),u=Et.newFoundDocument(o,s,r,a),c=i.targetIds||[],h=i.removedTargetIds||[];n=new eu(c,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Wf(t,i.document),s=i.readTime?Rn(i.readTime):j.min(),r=Et.newNoDocument(o,s),a=i.removedTargetIds||[];n=new eu([],a,r.key,r)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Wf(t,i.document),s=i.removedTargetIds||[];n=new eu([],s,o,null)}else{if(!("filter"in e))return $(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:s}=i,r=new xL(o,s),a=i.targetId;n=new DC(a,r)}}return n}function GL(t,e){let n;if(e instanceof Ja)n={update:pT(t,e.key,e.value)};else if(e instanceof xC)n={delete:Eh(t,e.key)};else if(e instanceof Bo)n={update:pT(t,e.key,e.data),updateMask:WL(e.fieldMask)};else{if(!(e instanceof wL))return $(16599,{Vt:e.type});n={verify:Eh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,r){const a=r.transform;if(a instanceof Yu)return{fieldPath:r.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ma)return{fieldPath:r.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof xa)return{fieldPath:r.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ju)return{fieldPath:r.field.canonicalString(),increment:a.Ae};throw $(20930,{transform:r.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(o,s){return s.updateTime!==void 0?{updateTime:qL(o,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:$(27497)}(t,e.precondition)),n}function zL(t,e){return t&&t.length>0?(_e(e!==void 0,14353),t.map(n=>function(o,s){let r=o.updateTime?Rn(o.updateTime):Rn(s);return r.isEqual(j.min())&&(r=Rn(s)),new CL(r,o.transformResults||[])}(n,e))):[]}function HL(t,e){return{documents:[LC(t,e.path)]}}function YL(t,e){const n={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=LC(t,o);const s=function(c){if(c.length!==0)return qC(xn.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const r=function(c){if(c.length!==0)return c.map(h=>function(m){return{field:jo(m.field),direction:QL(m.dir)}}(h))}(e.orderBy);r&&(n.structuredQuery.orderBy=r);const a=vh(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:o}}function JL(t){let e=BL(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let o=null;if(i>0){_e(i===1,65062);const h=n.from[0];h.allDescendants?o=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(p){const m=OC(p);return m instanceof xn&&pC(m)?m.getFilters():[m]}(n.where));let r=[];n.orderBy&&(r=function(p){return p.map(m=>function(x){return new Hu(es(x.field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,wc(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(p){const m=!!p.before,_=p.values||[];return new zu(_,m)}(n.startAt));let c=null;return n.endAt&&(c=function(p){const m=!p.before,_=p.values||[];return new zu(_,m)}(n.endAt)),cL(e,o,r,s,a,"F",u,c)}function KL(t,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $(28987,{purpose:o})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function OC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=es(n.unaryFilter.field);return je.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=es(n.unaryFilter.field);return je.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=es(n.unaryFilter.field);return je.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=es(n.unaryFilter.field);return je.create(r,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return $(61313);default:return $(60726)}}(t):t.fieldFilter!==void 0?function(n){return je.create(es(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return $(58110);default:return $(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return xn.create(n.compositeFilter.filters.map(i=>OC(i)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return $(1026)}}(n.compositeFilter.op))}(t):$(30097,{filter:t})}function QL(t){return UL[t]}function $L(t){return LL[t]}function XL(t){return kL[t]}function jo(t){return{fieldPath:t.canonicalString()}}function es(t){return mt.fromServerFormat(t.fieldPath)}function qC(t){return t instanceof je?function(n){if(n.op==="=="){if(tT(n.value))return{unaryFilter:{field:jo(n.field),op:"IS_NAN"}};if(eT(n.value))return{unaryFilter:{field:jo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(tT(n.value))return{unaryFilter:{field:jo(n.field),op:"IS_NOT_NAN"}};if(eT(n.value))return{unaryFilter:{field:jo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jo(n.field),op:$L(n.op),value:n.value}}}(t):t instanceof xn?function(n){const i=n.getFilters().map(o=>qC(o));return i.length===1?i[0]:{compositeFilter:{op:XL(n.op),filters:i}}}(t):$(54877,{filter:t})}function WL(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function BC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e,n,i,o,s=j.min(),r=j.min(),a=_t.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=r,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new wi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new wi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new wi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new wi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZL{constructor(e){this.yt=e}}function jL(t){const e=JL({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?_h(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e6{constructor(){this.Cn=new t6}addToCollectionParentIndex(e,n){return this.Cn.add(n),q.resolve()}getCollectionParents(e,n){return q.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return q.resolve()}deleteFieldIndex(e,n){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,n){return q.resolve()}getDocumentsMatchingTarget(e,n){return q.resolve(null)}getIndexType(e,n){return q.resolve(0)}getFieldIndexes(e,n){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,n){return q.resolve(Ji.min())}getMinOffsetFromCollectionGroup(e,n){return q.resolve(Ji.min())}updateCollectionGroup(e,n,i){return q.resolve()}updateIndexEntries(e,n){return q.resolve()}}class t6{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n]||new et(Le.comparator),s=!o.has(i);return this.index[n]=o.add(i),s}has(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n];return o&&o.has(i)}getEntries(e){return(this.index[e]||new et(Le.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},FC=41943040;class Pt{static withCacheSize(e){return new Pt(e,Pt.DEFAULT_COLLECTION_PERCENTILE,Pt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pt.DEFAULT_COLLECTION_PERCENTILE=10,Pt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pt.DEFAULT=new Pt(FC,Pt.DEFAULT_COLLECTION_PERCENTILE,Pt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pt.DISABLED=new Pt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Fs(0)}static cr(){return new Fs(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT="LruGarbageCollector",n6=1048576;function yT([t,e],[n,i]){const o=ae(t,n);return o===0?ae(e,i):o}class i6{constructor(e){this.Ir=e,this.buffer=new et(yT),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();yT(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class o6{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Y(gT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){nr(n)?Y(gT,"Ignoring IndexedDB error during garbage collection: ",n):await tr(n)}await this.Vr(3e5)})}}class s6{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return q.resolve(Rc.ce);const i=new i6(n);return this.mr.forEachTarget(e,o=>i.Ar(o.sequenceNumber)).next(()=>this.mr.pr(e,o=>i.Ar(o))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Y("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(mT)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(Y("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),mT):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,o,s,r,a,u,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(Y("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),o=this.params.maximumSequenceNumbersToCollect):o=p,r=Date.now(),this.nthSequenceNumber(e,o))).next(p=>(i=p,a=Date.now(),this.removeTargets(e,i,n))).next(p=>(s=p,u=Date.now(),this.removeOrphanedDocuments(e,i))).next(p=>(c=Date.now(),Wo()<=de.DEBUG&&Y("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${r-h}ms
	Determined least recently used ${o} in `+(a-r)+`ms
	Removed ${s} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(c-u)+`ms
Total Duration: ${c-h}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:s,documentsRemoved:p})))}}function r6(t,e){return new s6(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a6{constructor(){this.changes=new qo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Et.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?q.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l6{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u6{constructor(e,n,i,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(i=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(i!==null&&ra(i.mutation,o,dn.empty(),be.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,le()).next(()=>i))}getLocalViewOfDocuments(e,n,i=le()){const o=mo();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,i).next(s=>{let r=Or();return s.forEach((a,u)=>{r=r.insert(a,u.overlayedDocument)}),r}))}getOverlayedDocuments(e,n){const i=mo();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,le()))}populateOverlays(e,n,i){const o=[];return i.forEach(s=>{n.has(s)||o.push(s)}),this.documentOverlayCache.getOverlays(e,o).next(s=>{s.forEach((r,a)=>{n.set(r,a)})})}computeViews(e,n,i,o){let s=ii();const r=sa(),a=function(){return sa()}();return n.forEach((u,c)=>{const h=i.get(c.key);o.has(c.key)&&(h===void 0||h.mutation instanceof Bo)?s=s.insert(c.key,c):h!==void 0?(r.set(c.key,h.mutation.getFieldMask()),ra(h.mutation,c,h.mutation.getFieldMask(),be.now())):r.set(c.key,dn.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,h)=>r.set(c,h)),n.forEach((c,h)=>a.set(c,new l6(h,r.get(c)??null))),a))}recalculateAndSaveOverlays(e,n){const i=sa();let o=new ke((r,a)=>r-a),s=le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(r=>{for(const a of r)a.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let h=i.get(u)||dn.empty();h=a.applyToLocalView(c,h),i.set(u,h);const p=(o.get(a.batchId)||le()).add(u);o=o.insert(a.batchId,p)})}).next(()=>{const r=[],a=o.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,h=u.value,p=SC();h.forEach(m=>{if(!s.has(m)){const _=NC(n.get(m),i.get(m));_!==null&&p.set(m,_),s=s.add(m)}}),r.push(this.documentOverlayCache.saveOverlays(e,c,p))}return q.waitFor(r)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,o){return function(r){return Q.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):fL(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,o):this.getDocumentsMatchingCollectionQuery(e,n,i,o)}getNextDocuments(e,n,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,o).next(s=>{const r=o-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,o-s.size):q.resolve(mo());let a=Ia,u=s;return r.next(c=>q.forEach(c,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?q.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,le())).next(h=>({batchId:a,changes:EC(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Q(n)).next(i=>{let o=Or();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,i,o){const s=n.collectionGroup;let r=Or();return this.indexManager.getCollectionParents(e,s).next(a=>q.forEach(a,u=>{const c=function(p,m){return new Mc(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,i,o).next(h=>{h.forEach((p,m)=>{r=r.insert(p,m)})})}).next(()=>r))}getDocumentsMatchingCollectionQuery(e,n,i,o){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(r=>(s=r,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,o))).next(r=>{s.forEach((u,c)=>{const h=c.getKey();r.get(h)===null&&(r=r.insert(h,Et.newInvalidDocument(h)))});let a=Or();return r.forEach((u,c)=>{const h=s.get(u);h!==void 0&&ra(h.mutation,c,dn.empty(),be.now()),bc(n,c)&&(a=a.insert(u,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c6{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return q.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:Rn(o.createTime)}}(n)),q.resolve()}getNamedQuery(e,n){return q.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(o){return{name:o.name,query:jL(o.bundledQuery),readTime:Rn(o.readTime)}}(n)),q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f6{constructor(){this.overlays=new ke(Q.comparator),this.qr=new Map}getOverlay(e,n){return q.resolve(this.overlays.get(n))}getOverlays(e,n){const i=mo();return q.forEach(n,o=>this.getOverlay(e,o).next(s=>{s!==null&&i.set(o,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((o,s)=>{this.St(e,n,s)}),q.resolve()}removeOverlaysForBatchId(e,n,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(i)),q.resolve()}getOverlaysForCollection(e,n,i){const o=mo(),s=n.length+1,r=new Q(n.child("")),a=this.overlays.getIteratorFrom(r);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>i&&o.set(u.getKey(),u)}return q.resolve(o)}getOverlaysForCollectionGroup(e,n,i,o){let s=new ke((c,h)=>c-h);const r=this.overlays.getIterator();for(;r.hasNext();){const c=r.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>i){let h=s.get(c.largestBatchId);h===null&&(h=mo(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=mo(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=o)););return q.resolve(a)}St(e,n,i){const o=this.overlays.get(i.key);if(o!==null){const r=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,r)}this.overlays=this.overlays.insert(i.key,new ML(n,i));let s=this.qr.get(n);s===void 0&&(s=le(),this.qr.set(n,s)),this.qr.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d6{constructor(){this.sessionToken=_t.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(){this.Qr=new et(ot.$r),this.Ur=new et(ot.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new ot(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Gr(new ot(e,n))}zr(e,n){e.forEach(i=>this.removeReference(i,n))}jr(e){const n=new Q(new Le([])),i=new ot(n,e),o=new ot(n,e+1),s=[];return this.Ur.forEachInRange([i,o],r=>{this.Gr(r),s.push(r.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Q(new Le([])),i=new ot(n,e),o=new ot(n,e+1);let s=le();return this.Ur.forEachInRange([i,o],r=>{s=s.add(r.key)}),s}containsKey(e){const n=new ot(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class ot{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Q.comparator(e.key,n.key)||ae(e.Yr,n.Yr)}static Kr(e,n){return ae(e.Yr,n.Yr)||Q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h6{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new et(ot.$r)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,o){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const r=new NL(s,n,i,o);this.mutationQueue.push(r);for(const a of o)this.Zr=this.Zr.add(new ot(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return q.resolve(r)}lookupMutationBatch(e,n){return q.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,o=this.ei(i),s=o<0?0:o;return q.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?Xp:this.tr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new ot(n,0),o=new ot(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([i,o],r=>{const a=this.Xr(r.Yr);s.push(a)}),q.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new et(ae);return n.forEach(o=>{const s=new ot(o,0),r=new ot(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,r],a=>{i=i.add(a.Yr)})}),q.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,o=i.length+1;let s=i;Q.isDocumentKey(s)||(s=s.child(""));const r=new ot(new Q(s),0);let a=new et(ae);return this.Zr.forEachWhile(u=>{const c=u.key.path;return!!i.isPrefixOf(c)&&(c.length===o&&(a=a.add(u.Yr)),!0)},r),q.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(i=>{const o=this.Xr(i);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){_e(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return q.forEach(n.mutations,o=>{const s=new ot(o.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Zr=i})}ir(e){}containsKey(e,n){const i=new ot(n,0),o=this.Zr.firstAfterOrEqual(i);return q.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p6{constructor(e){this.ri=e,this.docs=function(){return new ke(Q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,o=this.docs.get(i),s=o?o.size:0,r=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:r}),this.size+=r-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return q.resolve(i?i.document.mutableCopy():Et.newInvalidDocument(n))}getEntries(e,n){let i=ii();return n.forEach(o=>{const s=this.docs.get(o);i=i.insert(o,s?s.document.mutableCopy():Et.newInvalidDocument(o))}),q.resolve(i)}getDocumentsMatchingQuery(e,n,i,o){let s=ii();const r=n.path,a=new Q(r.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:h}}=u.getNext();if(!r.isPrefixOf(c.path))break;c.path.length>r.length+1||GU(FU(h),i)<=0||(o.has(h.key)||bc(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return q.resolve(s)}getAllFromCollectionGroup(e,n,i,o){$(9500)}ii(e,n){return q.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new m6(this)}getSize(e){return q.resolve(this.size)}}class m6 extends a6{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((i,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)}),q.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g6{constructor(e){this.persistence=e,this.si=new qo(n=>jp(n),em),this.lastRemoteSnapshotVersion=j.min(),this.highestTargetId=0,this.oi=0,this._i=new rm,this.targetCount=0,this.ai=Fs.ur()}forEachTarget(e,n){return this.si.forEach((i,o)=>n(o)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),q.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Fs(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,q.resolve()}updateTargetData(e,n){return this.Pr(n),q.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,n,i){let o=0;const s=[];return this.si.forEach((r,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.si.delete(r),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),o++)}),q.waitFor(s).next(()=>o)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return q.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),q.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const o=this.persistence.referenceDelegate,s=[];return o&&n.forEach(r=>{s.push(o.markPotentiallyOrphaned(e,r))}),q.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),q.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return q.resolve(i)}containsKey(e,n){return q.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e,n){this.ui={},this.overlays={},this.ci=new Rc(0),this.li=!1,this.li=!0,this.hi=new d6,this.referenceDelegate=e(this),this.Pi=new g6(this),this.indexManager=new e6,this.remoteDocumentCache=function(o){return new p6(o)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new ZL(n),this.Ii=new c6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new f6,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new h6(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){Y("MemoryPersistence","Starting transaction:",e);const o=new y6(this.ci.next());return this.referenceDelegate.Ei(),i(o).next(s=>this.referenceDelegate.di(o).next(()=>s)).toPromise().then(s=>(o.raiseOnCommittedEvent(),s))}Ai(e,n){return q.or(Object.values(this.ui).map(i=>()=>i.containsKey(e,n)))}}class y6 extends HU{constructor(e){super(),this.currentSequenceNumber=e}}class am{constructor(e){this.persistence=e,this.Ri=new rm,this.Vi=null}static mi(e){return new am(e)}get fi(){if(this.Vi)return this.Vi;throw $(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),q.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),q.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),q.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(o=>this.fi.add(o.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(s=>this.fi.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.fi,i=>{const o=Q.fromPath(i);return this.gi(e,o).next(s=>{s||n.removeEntry(o,j.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return q.or([()=>q.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Qu{constructor(e,n){this.persistence=e,this.pi=new qo(i=>KU(i.path),(i,o)=>i.isEqual(o)),this.garbageCollector=r6(this,n)}static mi(e,n){return new Qu(e,n)}Ei(){}di(e){return q.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(o=>i+o))}wr(e){let n=0;return this.pr(e,i=>{n++}).next(()=>n)}pr(e,n){return q.forEach(this.pi,(i,o)=>this.br(e,i,o).next(s=>s?q.resolve():n(o)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const o=this.persistence.getRemoteDocumentCache(),s=o.newChangeBuffer();return o.ii(e,r=>this.br(e,r,n).next(a=>{a||(i++,s.removeEntry(r,j.min()))})).next(()=>s.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),q.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),q.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),q.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),q.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Wl(e.data.value)),n}br(e,n,i){return q.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return q.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(e,n,i,o){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=o}static As(e,n){let i=le(),o=le();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:o=o.add(s.doc.key)}return new lm(e,n.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v6{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return FP()?8:YU(OP())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,o){const s={result:null};return this.ys(e,n).next(r=>{s.result=r}).next(()=>{if(!s.result)return this.ws(e,n,o,i).next(r=>{s.result=r})}).next(()=>{if(s.result)return;const r=new _6;return this.Ss(e,n,r).next(a=>{if(s.result=a,this.Vs)return this.bs(e,n,r,a.size)})}).next(()=>s.result)}bs(e,n,i,o){return i.documentReadCount<this.fs?(Wo()<=de.DEBUG&&Y("QueryEngine","SDK will not create cache indexes for query:",Zo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),q.resolve()):(Wo()<=de.DEBUG&&Y("QueryEngine","Query:",Zo(n),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(Wo()<=de.DEBUG&&Y("QueryEngine","The SDK decides to create cache indexes for query:",Zo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,In(n))):q.resolve())}ys(e,n){if(sT(n))return q.resolve(null);let i=In(n);return this.indexManager.getIndexType(e,i).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=_h(n,null,"F"),i=In(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const r=le(...s);return this.ps.getDocuments(e,r).next(a=>this.indexManager.getMinOffset(e,i).next(u=>{const c=this.Ds(n,a);return this.Cs(n,c,r,u.readTime)?this.ys(e,_h(n,null,"F")):this.vs(e,c,n,u)}))})))}ws(e,n,i,o){return sT(n)||o.isEqual(j.min())?q.resolve(null):this.ps.getDocuments(e,i).next(s=>{const r=this.Ds(n,s);return this.Cs(n,r,i,o)?q.resolve(null):(Wo()<=de.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Zo(n)),this.vs(e,r,n,BU(o,Ia)).next(a=>a))})}Ds(e,n){let i=new et(vC(e));return n.forEach((o,s)=>{bc(e,s)&&(i=i.add(s))}),i}Cs(e,n,i,o){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(o)>0)}Ss(e,n,i){return Wo()<=de.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",Zo(n)),this.ps.getDocumentsMatchingQuery(e,n,Ji.min(),i)}vs(e,n,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next(s=>(n.forEach(r=>{s=s.insert(r.key,r)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const um="LocalStore",T6=3e8;class E6{constructor(e,n,i,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new ke(ae),this.xs=new qo(s=>jp(s),em),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new u6(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function S6(t,e,n,i){return new E6(t,e,n,i)}async function zC(t,e){const n=ee(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let o;return n.mutationQueue.getAllMutationBatches(i).next(s=>(o=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const r=[],a=[];let u=le();for(const c of o){r.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(i,u).next(c=>({Ls:c,removedBatchIds:r,addedBatchIds:a}))})})}function A6(t,e){const n=ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const o=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,u,c,h){const p=c.batch,m=p.keys();let _=q.resolve();return m.forEach(x=>{_=_.next(()=>h.getEntry(u,x)).next(D=>{const V=c.docVersions.get(x);_e(V!==null,48541),D.version.compareTo(V)<0&&(p.applyToRemoteDocument(D,c),D.isValidDocument()&&(D.setReadTime(c.commitVersion),h.addEntry(D)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let u=le();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(i,o))})}function HC(t){const e=ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function C6(t,e){const n=ee(t),i=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const r=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const a=[];e.targetChanges.forEach((h,p)=>{const m=o.get(p);if(!m)return;a.push(n.Pi.removeMatchingKeys(s,h.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(s,h.addedDocuments,p)));let _=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?_=_.withResumeToken(_t.EMPTY_BYTE_STRING,j.min()).withLastLimboFreeSnapshotVersion(j.min()):h.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(h.resumeToken,i)),o=o.insert(p,_),function(D,V,C){return D.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=T6?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(m,_,h)&&a.push(n.Pi.updateTargetData(s,_))});let u=ii(),c=le();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(I6(s,r,e.documentUpdates).next(h=>{u=h.ks,c=h.qs})),!i.isEqual(j.min())){const h=n.Pi.getLastRemoteSnapshotVersion(s).next(p=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(h)}return q.waitFor(a).next(()=>r.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.Ms=o,s))}function I6(t,e,n){let i=le(),o=le();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let r=ii();return n.forEach((a,u)=>{const c=s.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(o=o.add(a)),u.isNoDocument()&&u.version.isEqual(j.min())?(e.removeEntry(a,u.readTime),r=r.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),r=r.insert(a,u)):Y(um,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{ks:r,qs:o}})}function R6(t,e){const n=ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=Xp),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function w6(t,e){const n=ee(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let o;return n.Pi.getTargetData(i,e).next(s=>s?(o=s,q.resolve(o)):n.Pi.allocateTargetId(i).next(r=>(o=new wi(e,r,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,o).next(()=>o))))}).then(i=>{const o=n.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i})}async function Ah(t,e,n){const i=ee(t),o=i.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,r=>i.persistence.referenceDelegate.removeTarget(r,o))}catch(r){if(!nr(r))throw r;Y(um,`Failed to update sequence numbers for target ${e}: ${r}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function _T(t,e,n){const i=ee(t);let o=j.min(),s=le();return i.persistence.runTransaction("Execute query","readwrite",r=>function(u,c,h){const p=ee(u),m=p.xs.get(h);return m!==void 0?q.resolve(p.Ms.get(m)):p.Pi.getTargetData(c,h)}(i,r,In(e)).next(a=>{if(a)return o=a.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(r,a.targetId).next(u=>{s=u})}).next(()=>i.Fs.getDocumentsMatchingQuery(r,e,n?o:j.min(),n?s:le())).next(a=>(N6(i,hL(e),a),{documents:a,Qs:s})))}function N6(t,e,n){let i=t.Os.get(e)||j.min();n.forEach((o,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.Os.set(e,i)}class vT{constructor(){this.activeTargetIds=vL()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class M6{constructor(){this.Mo=new vT,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new vT,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x6{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT="ConnectivityMonitor";class ET{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Y(TT,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Y(TT,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bl=null;function Ch(){return bl===null?bl=function(){return 268435456+Math.round(2147483648*Math.random())}():bl++,"0x"+bl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zf="RestConnection",b6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class D6{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===Fu?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,n,i,o,s){const r=Ch(),a=this.zo(e,n.toUriEncodedString());Y(Zf,`Sending RPC '${e}' ${r}:`,a,i);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,o,s);const{host:c}=new URL(a),h=Op(c);return this.Jo(e,a,u,i,h).then(p=>(Y(Zf,`Received RPC '${e}' ${r}: `,p),p),p=>{throw ks(Zf,`RPC '${e}' ${r} failed with error: `,p,"url: ",a,"request:",i),p})}Ho(e,n,i,o,s,r){return this.Go(e,n,i,o,s)}jo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+er}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,s)=>e[s]=o),i&&i.headers.forEach((o,s)=>e[s]=o)}zo(e,n){const i=b6[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P6{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vt="WebChannelConnection";class V6 extends D6{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,o,s){const r=Ch();return new Promise((a,u)=>{const c=new QA;c.setWithCredentials(!0),c.listenOnce($A.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Xl.NO_ERROR:const p=c.getResponseJson();Y(vt,`XHR for RPC '${e}' ${r} received:`,JSON.stringify(p)),a(p);break;case Xl.TIMEOUT:Y(vt,`RPC '${e}' ${r} timed out`),u(new K(F.DEADLINE_EXCEEDED,"Request time out"));break;case Xl.HTTP_ERROR:const m=c.getStatus();if(Y(vt,`RPC '${e}' ${r} failed with status:`,m,"response text:",c.getResponseText()),m>0){let _=c.getResponseJson();Array.isArray(_)&&(_=_[0]);const x=_==null?void 0:_.error;if(x&&x.status&&x.message){const D=function(C){const E=C.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(E)>=0?E:F.UNKNOWN}(x.status);u(new K(D,x.message))}else u(new K(F.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new K(F.UNAVAILABLE,"Connection failed."));break;default:$(9055,{l_:e,streamId:r,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{Y(vt,`RPC '${e}' ${r} completed.`)}});const h=JSON.stringify(o);Y(vt,`RPC '${e}' ${r} sending request:`,o),c.send(n,"POST",h,i,15)})}T_(e,n,i){const o=Ch(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=ZA(),a=WA(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,i),u.encodeInitMessageHeaders=!0;const h=s.join("");Y(vt,`Creating RPC '${e}' stream ${o}: ${h}`,u);const p=r.createWebChannel(h,u);this.I_(p);let m=!1,_=!1;const x=new P6({Yo:V=>{_?Y(vt,`Not sending because RPC '${e}' stream ${o} is closed:`,V):(m||(Y(vt,`Opening RPC '${e}' stream ${o} transport.`),p.open(),m=!0),Y(vt,`RPC '${e}' stream ${o} sending:`,V),p.send(V))},Zo:()=>p.close()}),D=(V,C,E)=>{V.listen(C,I=>{try{E(I)}catch(b){setTimeout(()=>{throw b},0)}})};return D(p,kr.EventType.OPEN,()=>{_||(Y(vt,`RPC '${e}' stream ${o} transport opened.`),x.o_())}),D(p,kr.EventType.CLOSE,()=>{_||(_=!0,Y(vt,`RPC '${e}' stream ${o} transport closed`),x.a_(),this.E_(p))}),D(p,kr.EventType.ERROR,V=>{_||(_=!0,ks(vt,`RPC '${e}' stream ${o} transport errored. Name:`,V.name,"Message:",V.message),x.a_(new K(F.UNAVAILABLE,"The operation could not be completed")))}),D(p,kr.EventType.MESSAGE,V=>{var C;if(!_){const E=V.data[0];_e(!!E,16349);const I=E,b=(I==null?void 0:I.error)||((C=I[0])==null?void 0:C.error);if(b){Y(vt,`RPC '${e}' stream ${o} received error:`,b);const k=b.status;let B=function(T){const w=Ye[T];if(w!==void 0)return bC(w)}(k),A=b.message;B===void 0&&(B=F.INTERNAL,A="Unknown error status: "+k+" with message "+b.message),_=!0,x.a_(new K(B,A)),p.close()}else Y(vt,`RPC '${e}' stream ${o} received:`,E),x.u_(E)}}),D(a,XA.STAT_EVENT,V=>{V.stat===dh.PROXY?Y(vt,`RPC '${e}' stream ${o} detected buffering proxy`):V.stat===dh.NOPROXY&&Y(vt,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{x.__()},0),x}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function jf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uc(t){return new OL(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e,n,i=1e3,o=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=o,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-i);o>0&&Y("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST="PersistentStream";class JC{constructor(e,n,i,o,s,r,a,u){this.Mi=e,this.S_=i,this.b_=o,this.connection=s,this.authCredentialsProvider=r,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new YC(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(ni(n.toString()),ni("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,o])=>{this.D_===n&&this.G_(i,o)},i=>{e(()=>{const o=new K(F.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)})})}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(o=>{i(()=>this.z_(o))}),this.stream.onMessage(o=>{i(()=>++this.F_==1?this.J_(o):this.onNext(o))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Y(ST,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(Y(ST,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class U6 extends JC{constructor(e,n,i,o,s,r){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,o,r),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=FL(this.serializer,e),i=function(s){if(!("targetChange"in s))return j.min();const r=s.targetChange;return r.targetIds&&r.targetIds.length?j.min():r.readTime?Rn(r.readTime):j.min()}(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=Sh(this.serializer),n.addTarget=function(s,r){let a;const u=r.target;if(a=yh(u)?{documents:HL(s,u)}:{query:YL(s,u).ft},a.targetId=r.targetId,r.resumeToken.approximateByteSize()>0){a.resumeToken=VC(s,r.resumeToken);const c=vh(s,r.expectedCount);c!==null&&(a.expectedCount=c)}else if(r.snapshotVersion.compareTo(j.min())>0){a.readTime=Ku(s,r.snapshotVersion.toTimestamp());const c=vh(s,r.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const i=KL(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=Sh(this.serializer),n.removeTarget=e,this.q_(n)}}class L6 extends JC{constructor(e,n,i,o,s,r){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,o,r),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return _e(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,_e(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){_e(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=zL(e.writeResults,e.commitTime),i=Rn(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=Sh(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>GL(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k6{}class O6 extends k6{constructor(e,n,i,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new K(F.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,r])=>this.connection.Go(e,Th(n,i),o,s,r)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new K(F.UNKNOWN,s.toString())})}Ho(e,n,i,o,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,a])=>this.connection.Ho(e,Th(n,i),o,r,a,s)).catch(r=>{throw r.name==="FirebaseError"?(r.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new K(F.UNKNOWN,r.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class q6{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ni(n),this.aa=!1):Y("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo="RemoteStore";class B6{constructor(e,n,i,o,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(r=>{i.enqueueAndForget(async()=>{Fo(this)&&(Y(bo,"Restarting streams for network reachability change."),await async function(u){const c=ee(u);c.Ea.add(4),await Qa(c),c.Ra.set("Unknown"),c.Ea.delete(4),await Lc(c)}(this))})}),this.Ra=new q6(i,o)}}async function Lc(t){if(Fo(t))for(const e of t.da)await e(!0)}async function Qa(t){for(const e of t.da)await e(!1)}function KC(t,e){const n=ee(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),hm(n)?dm(n):ir(n).O_()&&fm(n,e))}function cm(t,e){const n=ee(t),i=ir(n);n.Ia.delete(e),i.O_()&&QC(n,e),n.Ia.size===0&&(i.O_()?i.L_():Fo(n)&&n.Ra.set("Unknown"))}function fm(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(j.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ir(t).Y_(e)}function QC(t,e){t.Va.Ue(e),ir(t).Z_(e)}function dm(t){t.Va=new VL({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),ir(t).start(),t.Ra.ua()}function hm(t){return Fo(t)&&!ir(t).x_()&&t.Ia.size>0}function Fo(t){return ee(t).Ea.size===0}function $C(t){t.Va=void 0}async function F6(t){t.Ra.set("Online")}async function G6(t){t.Ia.forEach((e,n)=>{fm(t,e)})}async function z6(t,e){$C(t),hm(t)?(t.Ra.ha(e),dm(t)):t.Ra.set("Unknown")}async function H6(t,e,n){if(t.Ra.set("Online"),e instanceof PC&&e.state===2&&e.cause)try{await async function(o,s){const r=s.cause;for(const a of s.targetIds)o.Ia.has(a)&&(await o.remoteSyncer.rejectListen(a,r),o.Ia.delete(a),o.Va.removeTarget(a))}(t,e)}catch(i){Y(bo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await $u(t,i)}else if(e instanceof eu?t.Va.Ze(e):e instanceof DC?t.Va.st(e):t.Va.tt(e),!n.isEqual(j.min()))try{const i=await HC(t.localStore);n.compareTo(i)>=0&&await function(s,r){const a=s.Va.Tt(r);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const h=s.Ia.get(c);h&&s.Ia.set(c,h.withResumeToken(u.resumeToken,r))}}),a.targetMismatches.forEach((u,c)=>{const h=s.Ia.get(u);if(!h)return;s.Ia.set(u,h.withResumeToken(_t.EMPTY_BYTE_STRING,h.snapshotVersion)),QC(s,u);const p=new wi(h.target,u,c,h.sequenceNumber);fm(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(i){Y(bo,"Failed to raise snapshot:",i),await $u(t,i)}}async function $u(t,e,n){if(!nr(e))throw e;t.Ea.add(1),await Qa(t),t.Ra.set("Offline"),n||(n=()=>HC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Y(bo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Lc(t)})}function XC(t,e){return e().catch(n=>$u(t,n,e))}async function kc(t){const e=ee(t),n=Xi(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Xp;for(;Y6(e);)try{const o=await R6(e.localStore,i);if(o===null){e.Ta.length===0&&n.L_();break}i=o.batchId,J6(e,o)}catch(o){await $u(e,o)}WC(e)&&ZC(e)}function Y6(t){return Fo(t)&&t.Ta.length<10}function J6(t,e){t.Ta.push(e);const n=Xi(t);n.O_()&&n.X_&&n.ea(e.mutations)}function WC(t){return Fo(t)&&!Xi(t).x_()&&t.Ta.length>0}function ZC(t){Xi(t).start()}async function K6(t){Xi(t).ra()}async function Q6(t){const e=Xi(t);for(const n of t.Ta)e.ea(n.mutations)}async function $6(t,e,n){const i=t.Ta.shift(),o=im.from(i,e,n);await XC(t,()=>t.remoteSyncer.applySuccessfulWrite(o)),await kc(t)}async function X6(t,e){e&&Xi(t).X_&&await async function(i,o){if(function(r){return bL(r)&&r!==F.ABORTED}(o.code)){const s=i.Ta.shift();Xi(i).B_(),await XC(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,o)),await kc(i)}}(t,e),WC(t)&&ZC(t)}async function AT(t,e){const n=ee(t);n.asyncQueue.verifyOperationInProgress(),Y(bo,"RemoteStore received new credentials");const i=Fo(n);n.Ea.add(3),await Qa(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Lc(n)}async function W6(t,e){const n=ee(t);e?(n.Ea.delete(2),await Lc(n)):e||(n.Ea.add(2),await Qa(n),n.Ra.set("Unknown"))}function ir(t){return t.ma||(t.ma=function(n,i,o){const s=ee(n);return s.sa(),new U6(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,o)}(t.datastore,t.asyncQueue,{Xo:F6.bind(null,t),t_:G6.bind(null,t),r_:z6.bind(null,t),H_:H6.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),hm(t)?dm(t):t.Ra.set("Unknown")):(await t.ma.stop(),$C(t))})),t.ma}function Xi(t){return t.fa||(t.fa=function(n,i,o){const s=ee(n);return s.sa(),new L6(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,o)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:K6.bind(null,t),r_:X6.bind(null,t),ta:Q6.bind(null,t),na:$6.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await kc(t)):(await t.fa.stop(),t.Ta.length>0&&(Y(bo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(e,n,i,o,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=o,this.removalCallback=s,this.deferred=new Bi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(r=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,o,s){const r=Date.now()+i,a=new pm(e,n,r,o,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function mm(t,e){if(ni("AsyncQueue",`${e}: ${t}`),nr(t))return new K(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{static emptySet(e){return new Is(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||Q.comparator(n.key,i.key):(n,i)=>Q.comparator(n.key,i.key),this.keyedMap=Or(),this.sortedSet=new ke(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Is)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,s=i.getNext().key;if(!o.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Is;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(){this.ga=new ke(Q.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):$(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,i)=>{e.push(i)}),e}}class Gs{constructor(e,n,i,o,s,r,a,u,c){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=s,this.fromCache=r,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,i,o,s){const r=[];return n.forEach(a=>{r.push({type:0,doc:a})}),new Gs(e,n,Is.emptySet(n),r,i,o,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==i[o].type||!n[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class j6{constructor(){this.queries=IT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const o=ee(n),s=o.queries;o.queries=IT(),s.forEach((r,a)=>{for(const u of a.Sa)u.onError(i)})})(this,new K(F.ABORTED,"Firestore shutting down"))}}function IT(){return new qo(t=>_C(t),xc)}async function e3(t,e){const n=ee(t);let i=3;const o=e.query;let s=n.queries.get(o);s?!s.ba()&&e.Da()&&(i=2):(s=new Z6,i=e.Da()?0:1);try{switch(i){case 0:s.wa=await n.onListen(o,!0);break;case 1:s.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(r){const a=mm(r,`Initialization of query '${Zo(e.query)}' failed`);return void e.onError(a)}n.queries.set(o,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&gm(n)}async function t3(t,e){const n=ee(t),i=e.query;let o=3;const s=n.queries.get(i);if(s){const r=s.Sa.indexOf(e);r>=0&&(s.Sa.splice(r,1),s.Sa.length===0?o=e.Da()?0:1:!s.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function n3(t,e){const n=ee(t);let i=!1;for(const o of e){const s=o.query,r=n.queries.get(s);if(r){for(const a of r.Sa)a.Fa(o)&&(i=!0);r.wa=o}}i&&gm(n)}function i3(t,e,n){const i=ee(t),o=i.queries.get(e);if(o)for(const s of o.Sa)s.onError(n);i.queries.delete(e)}function gm(t){t.Ca.forEach(e=>{e.next()})}var Ih,RT;(RT=Ih||(Ih={})).Ma="default",RT.Cache="cache";class o3{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Gs(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Gs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Ih.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e){this.key=e}}class eI{constructor(e){this.key=e}}class s3{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=le(),this.mutatedKeys=le(),this.eu=vC(e),this.tu=new Is(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new CT,o=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,r=o,a=!1;const u=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,c=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((h,p)=>{const m=o.get(h),_=bc(this.query,p)?p:null,x=!!m&&this.mutatedKeys.has(m.key),D=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let V=!1;m&&_?m.data.isEqual(_.data)?x!==D&&(i.track({type:3,doc:_}),V=!0):this.su(m,_)||(i.track({type:2,doc:_}),V=!0,(u&&this.eu(_,u)>0||c&&this.eu(_,c)<0)&&(a=!0)):!m&&_?(i.track({type:0,doc:_}),V=!0):m&&!_&&(i.track({type:1,doc:m}),V=!0,(u||c)&&(a=!0)),V&&(_?(r=r.add(_),s=D?s.add(h):s.delete(h)):(r=r.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;r.size>this.query.limit;){const h=this.query.limitType==="F"?r.last():r.first();r=r.delete(h.key),s=s.delete(h.key),i.track({type:1,doc:h})}return{tu:r,iu:i,Cs:a,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,o){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const r=e.iu.ya();r.sort((h,p)=>function(_,x){const D=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $(20277,{Rt:V})}};return D(_)-D(x)}(h.type,p.type)||this.eu(h.doc,p.doc)),this.ou(i),o=o??!1;const a=n&&!o?this._u():[],u=this.Xa.size===0&&this.current&&!o?1:0,c=u!==this.Za;return this.Za=u,r.length!==0||c?{snapshot:new Gs(this.query,e.tu,s,r,e.mutatedKeys,u===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new CT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=le(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return e.forEach(i=>{this.Xa.has(i)||n.push(new eI(i))}),this.Xa.forEach(i=>{e.has(i)||n.push(new jC(i))}),n}cu(e){this.Ya=e.Qs,this.Xa=le();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Gs.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ym="SyncEngine";class r3{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class a3{constructor(e){this.key=e,this.hu=!1}}class l3{constructor(e,n,i,o,s,r){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=o,this.currentUser=s,this.maxConcurrentLimboResolutions=r,this.Pu={},this.Tu=new qo(a=>_C(a),xc),this.Iu=new Map,this.Eu=new Set,this.du=new ke(Q.comparator),this.Au=new Map,this.Ru=new rm,this.Vu={},this.mu=new Map,this.fu=Fs.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function u3(t,e,n=!0){const i=rI(t);let o;const s=i.Tu.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),o=s.view.lu()):o=await tI(i,e,n,!0),o}async function c3(t,e){const n=rI(t);await tI(n,e,!0,!1)}async function tI(t,e,n,i){const o=await w6(t.localStore,In(e)),s=o.targetId,r=t.sharedClientState.addLocalQueryTarget(s,n);let a;return i&&(a=await f3(t,e,s,r==="current",o.resumeToken)),t.isPrimaryClient&&n&&KC(t.remoteStore,o),a}async function f3(t,e,n,i,o){t.pu=(p,m,_)=>async function(D,V,C,E){let I=V.view.ru(C);I.Cs&&(I=await _T(D.localStore,V.query,!1).then(({documents:A})=>V.view.ru(A,I)));const b=E&&E.targetChanges.get(V.targetId),k=E&&E.targetMismatches.get(V.targetId)!=null,B=V.view.applyChanges(I,D.isPrimaryClient,b,k);return NT(D,V.targetId,B.au),B.snapshot}(t,p,m,_);const s=await _T(t.localStore,e,!0),r=new s3(e,s.Qs),a=r.ru(s.documents),u=Ka.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",o),c=r.applyChanges(a,t.isPrimaryClient,u);NT(t,n,c.au);const h=new r3(e,n,r);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function d3(t,e,n){const i=ee(t),o=i.Tu.get(e),s=i.Iu.get(o.targetId);if(s.length>1)return i.Iu.set(o.targetId,s.filter(r=>!xc(r,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Ah(i.localStore,o.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(o.targetId),n&&cm(i.remoteStore,o.targetId),Rh(i,o.targetId)}).catch(tr)):(Rh(i,o.targetId),await Ah(i.localStore,o.targetId,!0))}async function h3(t,e){const n=ee(t),i=n.Tu.get(e),o=n.Iu.get(i.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),cm(n.remoteStore,i.targetId))}async function p3(t,e,n){const i=E3(t);try{const o=await function(r,a){const u=ee(r),c=be.now(),h=a.reduce((_,x)=>_.add(x.key),le());let p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let x=ii(),D=le();return u.Ns.getEntries(_,h).next(V=>{x=V,x.forEach((C,E)=>{E.isValidDocument()||(D=D.add(C))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,x)).next(V=>{p=V;const C=[];for(const E of a){const I=RL(E,p.get(E.key).overlayedDocument);I!=null&&C.push(new Bo(E.key,I,fC(I.value.mapValue),Kn.exists(!0)))}return u.mutationQueue.addMutationBatch(_,c,C,a)}).next(V=>{m=V;const C=V.applyToLocalDocumentSet(p,D);return u.documentOverlayCache.saveOverlays(_,V.batchId,C)})}).then(()=>({batchId:m.batchId,changes:EC(p)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),function(r,a,u){let c=r.Vu[r.currentUser.toKey()];c||(c=new ke(ae)),c=c.insert(a,u),r.Vu[r.currentUser.toKey()]=c}(i,o.batchId,n),await $a(i,o.changes),await kc(i.remoteStore)}catch(o){const s=mm(o,"Failed to persist write");n.reject(s)}}async function nI(t,e){const n=ee(t);try{const i=await C6(n.localStore,e);e.targetChanges.forEach((o,s)=>{const r=n.Au.get(s);r&&(_e(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?r.hu=!0:o.modifiedDocuments.size>0?_e(r.hu,14607):o.removedDocuments.size>0&&(_e(r.hu,42227),r.hu=!1))}),await $a(n,i,e)}catch(i){await tr(i)}}function wT(t,e,n){const i=ee(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const o=[];i.Tu.forEach((s,r)=>{const a=r.view.va(e);a.snapshot&&o.push(a.snapshot)}),function(r,a){const u=ee(r);u.onlineState=a;let c=!1;u.queries.forEach((h,p)=>{for(const m of p.Sa)m.va(a)&&(c=!0)}),c&&gm(u)}(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function m3(t,e,n){const i=ee(t);i.sharedClientState.updateQueryState(e,"rejected",n);const o=i.Au.get(e),s=o&&o.key;if(s){let r=new ke(Q.comparator);r=r.insert(s,Et.newNoDocument(s,j.min()));const a=le().add(s),u=new Vc(j.min(),new Map,new ke(ae),r,a);await nI(i,u),i.du=i.du.remove(s),i.Au.delete(e),_m(i)}else await Ah(i.localStore,e,!1).then(()=>Rh(i,e,n)).catch(tr)}async function g3(t,e){const n=ee(t),i=e.batch.batchId;try{const o=await A6(n.localStore,e);oI(n,i,null),iI(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await $a(n,o)}catch(o){await tr(o)}}async function y3(t,e,n){const i=ee(t);try{const o=await function(r,a){const u=ee(r);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return u.mutationQueue.lookupMutationBatch(c,a).next(p=>(_e(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(c,p))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>u.localDocuments.getDocuments(c,h))})}(i.localStore,e);oI(i,e,n),iI(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await $a(i,o)}catch(o){await tr(o)}}function iI(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function oI(t,e,n){const i=ee(t);let o=i.Vu[i.currentUser.toKey()];if(o){const s=o.get(e);s&&(n?s.reject(n):s.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function Rh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(i=>{t.Ru.containsKey(i)||sI(t,i)})}function sI(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(cm(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),_m(t))}function NT(t,e,n){for(const i of n)i instanceof jC?(t.Ru.addReference(i.key,e),_3(t,i)):i instanceof eI?(Y(ym,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||sI(t,i.key)):$(19791,{wu:i})}function _3(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(Y(ym,"New document in limbo: "+n),t.Eu.add(i),_m(t))}function _m(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Q(Le.fromString(e)),i=t.fu.next();t.Au.set(i,new a3(n)),t.du=t.du.insert(n,i),KC(t.remoteStore,new wi(In(tm(n.path)),i,"TargetPurposeLimboResolution",Rc.ce))}}async function $a(t,e,n){const i=ee(t),o=[],s=[],r=[];i.Tu.isEmpty()||(i.Tu.forEach((a,u)=>{r.push(i.pu(u,e,n).then(c=>{var h;if((c||n)&&i.isPrimaryClient){const p=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:h.current;i.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(c){o.push(c);const p=lm.As(u.targetId,c);s.push(p)}}))}),await Promise.all(r),i.Pu.H_(o),await async function(u,c){const h=ee(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>q.forEach(c,m=>q.forEach(m.Es,_=>h.persistence.referenceDelegate.addReference(p,m.targetId,_)).next(()=>q.forEach(m.ds,_=>h.persistence.referenceDelegate.removeReference(p,m.targetId,_)))))}catch(p){if(!nr(p))throw p;Y(um,"Failed to update sequence numbers: "+p)}for(const p of c){const m=p.targetId;if(!p.fromCache){const _=h.Ms.get(m),x=_.snapshotVersion,D=_.withLastLimboFreeSnapshotVersion(x);h.Ms=h.Ms.insert(m,D)}}}(i.localStore,s))}async function v3(t,e){const n=ee(t);if(!n.currentUser.isEqual(e)){Y(ym,"User change. New user:",e.toKey());const i=await zC(n.localStore,e);n.currentUser=e,function(s,r){s.mu.forEach(a=>{a.forEach(u=>{u.reject(new K(F.CANCELLED,r))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await $a(n,i.Ls)}}function T3(t,e){const n=ee(t),i=n.Au.get(e);if(i&&i.hu)return le().add(i.key);{let o=le();const s=n.Iu.get(e);if(!s)return o;for(const r of s){const a=n.Tu.get(r);o=o.unionWith(a.view.nu)}return o}}function rI(t){const e=ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=nI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=T3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=m3.bind(null,e),e.Pu.H_=n3.bind(null,e.eventManager),e.Pu.yu=i3.bind(null,e.eventManager),e}function E3(t){const e=ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=g3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=y3.bind(null,e),e}class Xu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Uc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return S6(this.persistence,new v6,e.initialUser,this.serializer)}Cu(e){return new GC(am.mi,this.serializer)}Du(e){return new M6}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xu.provider={build:()=>new Xu};class S3 extends Xu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){_e(this.persistence.referenceDelegate instanceof Qu,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new o6(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Pt.withCacheSize(this.cacheSizeBytes):Pt.DEFAULT;return new GC(i=>Qu.mi(i,n),this.serializer)}}class wh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>wT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=v3.bind(null,this.syncEngine),await W6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new j6}()}createDatastore(e){const n=Uc(e.databaseInfo.databaseId),i=function(s){return new V6(s)}(e.databaseInfo);return function(s,r,a,u){return new O6(s,r,a,u)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,o,s,r,a){return new B6(i,o,s,r,a)}(this.localStore,this.datastore,e.asyncQueue,n=>wT(this.syncEngine,n,0),function(){return ET.v()?new ET:new x6}())}createSyncEngine(e,n){return function(o,s,r,a,u,c,h){const p=new l3(o,s,r,a,u,c);return h&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(o){const s=ee(o);Y(bo,"RemoteStore shutting down."),s.Ea.add(5),await Qa(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}wh.provider={build:()=>new wh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A3{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ni("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wi="FirestoreClient";class C3{constructor(e,n,i,o,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=o,this.user=Tt.UNAUTHENTICATED,this.clientId=Qp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async r=>{Y(Wi,"Received user=",r.uid),await this.authCredentialListener(r),this.user=r}),this.appCheckCredentials.start(i,r=>(Y(Wi,"Received new app check token=",r),this.appCheckCredentialListener(r,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Bi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=mm(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function ed(t,e){t.asyncQueue.verifyOperationInProgress(),Y(Wi,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async o=>{i.isEqual(o)||(await zC(e.localStore,o),i=o)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function MT(t,e){t.asyncQueue.verifyOperationInProgress();const n=await I3(t);Y(Wi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>AT(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,o)=>AT(e.remoteStore,o)),t._onlineComponents=e}async function I3(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Y(Wi,"Using user provided OfflineComponentProvider");try{await ed(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(o){return o.name==="FirebaseError"?o.code===F.FAILED_PRECONDITION||o.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;ks("Error using user provided cache. Falling back to memory cache: "+n),await ed(t,new Xu)}}else Y(Wi,"Using default OfflineComponentProvider"),await ed(t,new S3(void 0));return t._offlineComponents}async function aI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Y(Wi,"Using user provided OnlineComponentProvider"),await MT(t,t._uninitializedComponentsProvider._online)):(Y(Wi,"Using default OnlineComponentProvider"),await MT(t,new wh))),t._onlineComponents}function R3(t){return aI(t).then(e=>e.syncEngine)}async function w3(t){const e=await aI(t),n=e.eventManager;return n.onListen=u3.bind(null,e.syncEngine),n.onUnlisten=d3.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=c3.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=h3.bind(null,e.syncEngine),n}function N3(t,e,n={}){const i=new Bi;return t.asyncQueue.enqueueAndForget(async()=>function(s,r,a,u,c){const h=new A3({next:m=>{h.Nu(),r.enqueueAndForget(()=>t3(s,p));const _=m.docs.has(a);!_&&m.fromCache?c.reject(new K(F.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&m.fromCache&&u&&u.source==="server"?c.reject(new K(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),p=new o3(tm(a.path),h,{includeMetadataChanges:!0,qa:!0});return e3(s,p)}(await w3(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI="firestore.googleapis.com",bT=!0;class DT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new K(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=uI,this.ssl=bT}else this.host=e.host,this.ssl=e.ssl??bT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=FC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<n6)throw new K(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}qU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lI(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new K(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new K(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new K(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,o){return i.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vm{constructor(e,n,i,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new DT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new DT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new NU;switch(i.type){case"firstParty":return new DU(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new K(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=xT.get(n);i&&(Y("ComponentProvider","Removing Datastore"),xT.delete(n),i.terminate())}(this),Promise.resolve()}}function M3(t,e,n,i={}){var c;t=Ca(t,vm);const o=Op(e),s=t._getSettings(),r={...s,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;o&&(PP(`https://${a}`),kP("Firestore",!0)),s.host!==uI&&s.host!==a&&ks("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...s,host:a,ssl:o,emulatorOptions:i};if(!Sa(u,r)&&(t._setSettings(u),i.mockUserToken)){let h,p;if(typeof i.mockUserToken=="string")h=i.mockUserToken,p=Tt.MOCK_USER;else{h=VP(i.mockUserToken,(c=t._app)==null?void 0:c.options.projectId);const m=i.mockUserToken.sub||i.mockUserToken.user_id;if(!m)throw new K(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Tt(m)}t._authCredentials=new MU(new eC(h,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Tm(this.firestore,e,this._query)}}class at{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ba(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new at(this.firestore,e,this._key)}toJSON(){return{type:at._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Ya(n,at._jsonSchema))return new at(e,i||null,new Q(Le.fromString(n.referencePath)))}}at._jsonSchemaVersion="firestore/documentReference/1.0",at._jsonSchema={type:Xe("string",at._jsonSchemaVersion),referencePath:Xe("string")};class ba extends Tm{constructor(e,n,i){super(e,n,tm(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new at(this.firestore,null,new Q(e))}withConverter(e){return new ba(this.firestore,e,this._path)}}function Em(t,e,...n){if(t=wo(t),arguments.length===1&&(e=Qp.newId()),OU("doc","path",e),t instanceof vm){const i=Le.fromString(e,...n);return Jv(i),new at(t,null,new Q(i))}{if(!(t instanceof at||t instanceof ba))throw new K(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Le.fromString(e,...n));return Jv(i),new at(t.firestore,t instanceof ba?t.converter:null,new Q(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT="AsyncQueue";class VT{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new YC(this,"async_queue_retry"),this._c=()=>{const i=jf();i&&Y(PT,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=jf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=jf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Bi;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!nr(e))throw e;Y(PT,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,ni("INTERNAL UNHANDLED ERROR: ",UT(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=pm.createAndSchedule(this,e,n,i,s=>this.hc(s));return this.tc.push(o),o}uc(){this.nc&&$(47125,{Pc:UT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function UT(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Sm extends vm{constructor(e,n,i,o){super(e,n,i,o),this.type="firestore",this._queue=new VT,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new VT(e),this._firestoreClient=void 0,await e}}}function x3(t,e){const n=typeof t=="object"?t:AA(),i=typeof t=="string"?t:Fu,o=Ha(n,"firestore").getImmediate({identifier:i});if(!o._initialized){const s=bP("firestore");s&&M3(o,...s)}return o}function cI(t){if(t._terminated)throw new K(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||b3(t),t._firestoreClient}function b3(t){var i,o,s;const e=t._freezeSettings(),n=function(a,u,c,h){return new XU(a,u,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,lI(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new C3(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const u=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new sn(_t.fromBase64String(e))}catch(n){throw new K(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new sn(_t.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:sn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ya(e,sn._jsonSchema))return sn.fromBase64String(e.bytes)}}sn._jsonSchemaVersion="firestore/bytes/1.0",sn._jsonSchema={type:Xe("string",sn._jsonSchemaVersion),bytes:Xe("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ae(this._lat,e._lat)||ae(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:wn._jsonSchemaVersion}}static fromJSON(e){if(Ya(e,wn._jsonSchema))return new wn(e.latitude,e.longitude)}}wn._jsonSchemaVersion="firestore/geoPoint/1.0",wn._jsonSchema={type:Xe("string",wn._jsonSchemaVersion),latitude:Xe("number"),longitude:Xe("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,o){if(i.length!==o.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==o[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Nn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ya(e,Nn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Nn(e.vectorValues);throw new K(F.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Nn._jsonSchemaVersion="firestore/vectorValue/1.0",Nn._jsonSchema={type:Xe("string",Nn._jsonSchemaVersion),vectorValues:Xe("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D3=/^__.*__$/;class P3{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Bo(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ja(e,this.data,n,this.fieldTransforms)}}function dI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $(40011,{Ac:t})}}class Cm{constructor(e,n,i,o,s,r){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=o,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=r||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Cm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Wu(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(dI(this.Ac)&&D3.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class V3{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Uc(e)}Cc(e,n,i,o=!1){return new Cm({Ac:e,methodName:n,Dc:i,path:mt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function U3(t){const e=t._freezeSettings(),n=Uc(t._databaseId);return new V3(t._databaseId,!!e.ignoreUndefinedProperties,n)}function L3(t,e,n,i,o,s={}){const r=t.Cc(s.merge||s.mergeFields?2:0,e,n,o);gI("Data must be an object, but it was:",r,i);const a=pI(i,r);let u,c;if(s.merge)u=new dn(r.fieldMask),c=r.fieldTransforms;else if(s.mergeFields){const h=[];for(const p of s.mergeFields){const m=k3(e,p,n);if(!r.contains(m))throw new K(F.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);q3(h,m)||h.push(m)}u=new dn(h),c=r.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,c=r.fieldTransforms;return new P3(new on(a),u,c)}function hI(t,e){if(mI(t=wo(t)))return gI("Unsupported field value:",e,t),pI(t,e);if(t instanceof fI)return function(i,o){if(!dI(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(o);s&&o.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(i,o){const s=[];let r=0;for(const a of i){let u=hI(a,o.wc(r));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),r++}return{arrayValue:{values:s}}}(t,e)}return function(i,o){if((i=wo(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return TL(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=be.fromDate(i);return{timestampValue:Ku(o.serializer,s)}}if(i instanceof be){const s=new be(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Ku(o.serializer,s)}}if(i instanceof wn)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof sn)return{bytesValue:VC(o.serializer,i._byteString)};if(i instanceof at){const s=o.databaseId,r=i.firestore._databaseId;if(!r.isEqual(s))throw o.Sc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:sm(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Nn)return function(r,a){return{mapValue:{fields:{[uC]:{stringValue:cC},[Gu]:{arrayValue:{values:r.toArray().map(c=>{if(typeof c!="number")throw a.Sc("VectorValues must only contain numeric values.");return nm(a.serializer,c)})}}}}}}(i,o);throw o.Sc(`Unsupported field value: ${$p(i)}`)}(t,e)}function pI(t,e){const n={};return iC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Oo(t,(i,o)=>{const s=hI(o,e.mc(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function mI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof be||t instanceof wn||t instanceof sn||t instanceof at||t instanceof fI||t instanceof Nn)}function gI(t,e,n){if(!mI(n)||!tC(n)){const i=$p(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function k3(t,e,n){if((e=wo(e))instanceof Am)return e._internalPath;if(typeof e=="string")return yI(t,e);throw Wu("Field path arguments must be of type string or ",t,!1,void 0,n)}const O3=new RegExp("[~\\*/\\[\\]]");function yI(t,e,n){if(e.search(O3)>=0)throw Wu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Am(...e.split("."))._internalPath}catch{throw Wu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Wu(t,e,n,i,o){const s=i&&!i.isEmpty(),r=o!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||r)&&(u+=" (found",s&&(u+=` in field ${i}`),r&&(u+=` in document ${o}`),u+=")"),new K(F.INVALID_ARGUMENT,a+t+u)}function q3(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e,n,i,o,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=o,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new at(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new B3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(vI("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class B3 extends _I{data(){return super.data()}}function vI(t,e){return typeof e=="string"?yI(t,e):e instanceof Am?e._internalPath:e._delegate._internalPath}class F3{convertValue(e,n="none"){switch($i(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ge(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Qi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw $(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Oo(e,(o,s)=>{i[o]=this.convertValue(s,n)}),i}convertVectorValue(e){var i,o,s;const n=(s=(o=(i=e.fields)==null?void 0:i[Gu].arrayValue)==null?void 0:o.values)==null?void 0:s.map(r=>Ge(r.doubleValue));return new Nn(n)}convertGeoPoint(e){return new wn(Ge(e.latitude),Ge(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Nc(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Ra(e));default:return null}}convertTimestamp(e){const n=Ki(e);return new be(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Le.fromString(e);_e(BC(i),9688,{name:e});const o=new wa(i.get(1),i.get(3)),s=new Q(i.popFirst(5));return o.isEqual(n)||ni(`Document ${s} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G3(t,e,n){let i;return i=t?t.toFirestore(e):e,i}class Br{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Eo extends _I{constructor(e,n,i,o,s,r){super(e,n,i,o,r),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new tu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(vI("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new K(F.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Eo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Eo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Eo._jsonSchema={type:Xe("string",Eo._jsonSchemaVersion),bundleSource:Xe("string","DocumentSnapshot"),bundleName:Xe("string"),bundle:Xe("string")};class tu extends Eo{data(e={}){return super.data(e)}}class aa{constructor(e,n,i,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Br(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new tu(this._firestore,this._userDataWriter,i.key,i,new Br(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,s){if(o._snapshot.oldDocs.isEmpty()){let r=0;return o._snapshot.docChanges.map(a=>{const u=new tu(o._firestore,o._userDataWriter,a.doc.key,a.doc,new Br(o._snapshot.mutatedKeys.has(a.doc.key),o._snapshot.fromCache),o.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:r++}})}{let r=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new tu(o._firestore,o._userDataWriter,a.doc.key,a.doc,new Br(o._snapshot.mutatedKeys.has(a.doc.key),o._snapshot.fromCache),o.query.converter);let c=-1,h=-1;return a.type!==0&&(c=r.indexOf(a.doc.key),r=r.delete(a.doc.key)),a.type!==1&&(r=r.add(a.doc),h=r.indexOf(a.doc.key)),{type:z3(a.type),doc:u,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new K(F.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=aa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Qp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],o=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),i.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),o.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function z3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Im(t){t=Ca(t,at);const e=Ca(t.firestore,Sm);return N3(cI(e),t._key).then(n=>J3(e,t,n))}aa._jsonSchemaVersion="firestore/querySnapshot/1.0",aa._jsonSchema={type:Xe("string",aa._jsonSchemaVersion),bundleSource:Xe("string","QuerySnapshot"),bundleName:Xe("string"),bundle:Xe("string")};class H3 extends F3{constructor(e){super(),this.firestore=e}convertBytes(e){return new sn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new at(this.firestore,null,n)}}function Rm(t,e,n){t=Ca(t,at);const i=Ca(t.firestore,Sm),o=G3(t.converter,e);return Y3(i,[L3(U3(i),"setDoc",t._key,o,t.converter!==null,n).toMutation(t._key,Kn.none())])}function Y3(t,e){return function(i,o){const s=new Bi;return i.asyncQueue.enqueueAndForget(async()=>p3(await R3(i),o,s)),s.promise}(cI(t),e)}function J3(t,e,n){const i=n.docs.get(e._key),o=new H3(t);return new Eo(t,o,e._key,i,new Br(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(o){er=o})(QV),Yi(new ei("firestore",(i,{instanceIdentifier:o,options:s})=>{const r=i.getProvider("app").getImmediate(),a=new Sm(new xU(i.getProvider("auth-internal")),new PU(r,i.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new K(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wa(c.options.projectId,h)}(r,o),r);return s={useFetchStreams:n,...s},a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Cn(Gv,zv,e),Cn(Gv,zv,"esm2020")})();const K3={apiKey:"AIzaSyDZFqt1-PXjcs9aGF8jeUL6PWzPwsuzhB8",authDomain:"teste-cnpj-cead3.firebaseapp.com",projectId:"teste-cnpj-cead3",storageBucket:"teste-cnpj-cead3.firebasestorage.app",messagingSenderId:"819206470986",appId:"1:819206470986:web:c3c61a284b3ebe7d0095b3",measurementId:"G-C3CMHXHYFZ"},TI=SA(K3);AU(TI);const wm=x3(TI),EI={AC:"Acre",AL:"Alagoas",AP:"Amap",AM:"Amazonas",BA:"Bahia",CE:"Cear",DF:"Distrito Federal",ES:"Esprito Santo",GO:"Gois",MA:"Maranho",MT:"Mato Grosso",MS:"Mato Grosso do Sul",MG:"Minas Gerais",PA:"Par",PB:"Paraba",PR:"Paran",PE:"Pernambuco",PI:"Piau",RJ:"Rio de Janeiro",RN:"Rio Grande do Norte",RS:"Rio Grande do Sul",RO:"Rondnia",RR:"Roraima",SC:"Santa Catarina",SP:"So Paulo",SE:"Sergipe",TO:"Tocantins"},Nm=(...t)=>t.join("-").toLowerCase().replace(/[^a-z0-9-]/g,"");async function Oc(t,e,n){var o,s,r,a,u;const i=["gemini-1.5-flash","gemini-1.5-pro","gemini-2.5-flash","gemini-2.0-flash-exp"];for(const c of i)for(let h=1;h<=3;h++)try{const p={};return n&&(p.responseMimeType="application/json",p.responseSchema=n),console.log(`Tentando modelo ${c} (Tentativa ${h})...`),await t.models.generateContent({model:c,contents:e,config:p})}catch(p){const m=((o=p.message)==null?void 0:o.includes("503"))||((s=p.message)==null?void 0:s.includes("overloaded")),_=(r=p.message)==null?void 0:r.includes("429"),x=((a=p.message)==null?void 0:a.includes("404"))||((u=p.message)==null?void 0:u.includes("not found"));if(_){console.warn(`Cota excedida para o modelo ${c} (429). Tentando prximo modelo...`);break}else if(x){console.warn(`Modelo ${c} no encontrado (404). Tentando prximo modelo...`);break}else if(m)if(h<3){const D=3e3*h;console.warn(`Modelo ${c} sobrecarregado (503). Aguardando ${D}ms...`),await new Promise(V=>setTimeout(V,D));continue}else{console.warn(`Modelo ${c} falhou aps 3 tentativas. Tentando prximo modelo...`);break}throw p}throw new Error("Falha na API Gemini. Possveis causas: Cota excedida (429) ou instabilidade nos servidores (503). Verifique o console para detalhes.")}const Zu="v2";async function Q3(t,e,n){const i=Nm("cnpj",Zu,e,n),o=Em(wm,"cnpj_searches",i);try{const u=await Im(o);if(u.exists()){const c=u.data();if(c.result&&c.result[0]&&"potencialCompra"in c.result[0])return console.log(" Dados enriquecidos recuperados do Cache (Firebase)!"),c.result;console.log(" Cache antigo detectado. Buscando novos dados...")}}catch(u){console.warn("Erro ao ler cache do Firebase:",u)}const s=new Sc({apiKey:t}),a=`
    Voc  um analista de inteligncia de mercado especializado no setor educacional pblico brasileiro.
    
    Gere um dossi completo de prospeco de rgos pblicos no estado de ${EI[e]||e} relacionados ao ramo "${n}".
    
    Para cada rgo, fornea:
    1. 'orgao': Nome completo do rgo (ex: 'Secretaria de Educao do Estado da Bahia', 'Prefeitura Municipal de Salvador')
    2. 'cnpj': CNPJ formatado como 'XX.XXX.XXX/XXXX-XX'
    3. 'localidade': Cidade e UF (ex: 'Salvador, BA')
    4. 'potencialCompra': Classifique como 'Alto', 'Mdio' ou 'Baixo' baseado em:
       - Oramento do rgo
       - Tamanho da populao atendida
       - Histrico de compras pblicas
       - Projetos recentes
    5. 'contatosChave': Array com at 3 decisores principais. Para cada contato:
       - 'nome': Nome completo
       - 'cargo': Cargo (ex: 'Secretrio de Educao', 'Diretor de Compras')
    6. 'iniciativasRecentes': Resumo de projetos, licitaes ou notcias recentes na rea de educao (mx 200 caracteres)
    7. 'fonteInformacao': URL da principal fonte de dados (site oficial, portal da transparncia, etc)
    
    Priorize:
    - Secretaria Estadual de Educao e fundos estaduais
    - Capitais e 20 maiores cidades do estado
    - rgos com histrico ativo de compras
    
    Retorne at 30 rgos.
  `;try{const u=await Oc(s,a,{type:se.ARRAY,items:{type:se.OBJECT,properties:{orgao:{type:se.STRING,description:"O nome completo do rgo pblico"},cnpj:{type:se.STRING,description:"O nmero do CNPJ formatado como 'XX.XXX.XXX/XXXX-XX'"},localidade:{type:se.STRING,description:"Cidade e estado (ex: 'Salvador, BA')"},potencialCompra:{type:se.STRING,description:"Classificao: 'Alto', 'Mdio' ou 'Baixo'",enum:["Alto","Mdio","Baixo"]},contatosChave:{type:se.ARRAY,description:"Lista de decisores principais",items:{type:se.OBJECT,properties:{nome:{type:se.STRING,description:"Nome completo do contato"},cargo:{type:se.STRING,description:"Cargo do contato"}},required:["nome","cargo"]}},iniciativasRecentes:{type:se.STRING,description:"Resumo de projetos ou licitaes recentes (mx 200 chars)"},fonteInformacao:{type:se.STRING,description:"URL da fonte principal dos dados"}},required:["orgao","cnpj","localidade","potencialCompra","contatosChave","iniciativasRecentes"]}});if(!u.text)throw new Error("A resposta da API estava vazia.");const c=u.text.trim(),h=JSON.parse(c);if(!Array.isArray(h))throw new Error("O formato da resposta da API no  um array JSON vlido.");if(!h.every(m=>typeof m=="object"&&m!==null&&"orgao"in m&&"cnpj"in m))throw new Error("Alguns itens na resposta da API no correspondem ao formato esperado.");try{await Rm(o,{result:h,createdAt:new Date().toISOString(),cacheVersion:Zu,estado:e,tipoOrgao:n}),console.log(" Cache atualizado com novos dados enriquecidos!")}catch(m){console.warn("Erro ao salvar no cache do Firebase:",m)}return h}catch(u){throw console.error("Erro ao chamar a API Gemini:",u),u instanceof Error&&u.message.includes("API key not valid")?new Error("A chave de API fornecida no  vlida."):new Error("No foi possvel gerar a lista de CNPJs.")}}async function $3(t,e,n,i){const o=Nm("leads",Zu,e,n,i),s=Em(wm,"leads_searches",o);try{const c=await Im(s);if(c.exists())return console.log(" Dados recuperados do Cache (Firebase)!"),c.data().result}catch(c){console.warn("Erro ao ler cache do Firebase:",c)}const r=new Sc({apiKey:t}),a=EI[e]||e,u=`
    Gere uma lista de contatos (leads) para prospeco de servios educacionais, com foco em "${i}" na cidade de "${n}", estado de ${a}.
    Para cada lead encontrado, fornea as seguintes informaes em formato JSON:
    1.  'entidade': O nome completo da instituio (ex: 'Colgio Anchieta', 'Secretaria Municipal de Educao de ${n}').
    2.  'cnpj': O CNPJ da instituio, se for publicamente disponvel. Formate como 'XX.XXX.XXX/XXXX-XX'. Se no encontrar, retorne null.
    3.  'tipo': O tipo de entidade (ex: 'Escola Privada', 'Prefeitura').
    4.  'localidade': A cidade e o estado (ex: '${n}, ${e}').
    5.  'contatoNome': O nome de um contato decisor relevante (ex: Diretor(a), Secretrio(a) de Educao, Coordenador(a) Pedaggico). Se no encontrar, retorne null.
    6.  'contatoCargo': O cargo do contato mencionado. Se no encontrar, retorne null.
    7.  'contatoPublico': O telefone de contato PBLICO e GERAL da instituio. Importante: NO fornea telefones pessoais/diretos de indivduos. Se no encontrar, retorne null.
    8.  'endereco': O endereo completo da instituio (Rua, Nmero, Bairro, CEP). Se no encontrar, retorne null.
    9.  'website': O website oficial da instituio. Se no encontrar, retorne null.
    10. 'email': O e-mail de contato PBLICO e GERAL da instituio (ex: contato@escola.com.br). NO fornea e-mails pessoais. Se no encontrar, retorne null.
    11. 'observacoes': Uma breve observao sobre a instituio (ex: "Escola tradicional com foco em esportes", "Rede com 3 unidades").
    
    Gere uma lista com at 50 resultados.
  `;try{const c=await Oc(r,u,{type:se.ARRAY,items:{type:se.OBJECT,properties:{entidade:{type:se.STRING},cnpj:{type:se.STRING,nullable:!0},tipo:{type:se.STRING},localidade:{type:se.STRING},contatoNome:{type:se.STRING,nullable:!0},contatoCargo:{type:se.STRING,nullable:!0},contatoPublico:{type:se.STRING,nullable:!0},endereco:{type:se.STRING,nullable:!0},website:{type:se.STRING,nullable:!0},email:{type:se.STRING,nullable:!0},observacoes:{type:se.STRING,nullable:!0}},required:["entidade","tipo","localidade"]}});if(!c.text)throw new Error("A resposta da API estava vazia.");const h=JSON.parse(c.text.trim());if(!Array.isArray(h))throw new Error("O formato da resposta da API no  um array JSON vlido.");try{await Rm(s,{result:h,createdAt:new Date().toISOString(),cacheVersion:Zu,estado:e,cidade:n,tipoEntidade:i})}catch(p){console.warn("Erro ao salvar no cache do Firebase:",p)}return h}catch(c){throw console.error("Erro ao chamar a API Gemini para buscar leads:",c),c instanceof Error&&c.message.includes("API key not valid")?new Error("A chave de API fornecida no  vlida."):new Error("No foi possvel gerar a lista de contatos.")}}async function X3(t,e,n){const i=Nm("details",e,n),o=Em(wm,"details_searches",i);try{const a=await Im(o);if(a.exists())return console.log(" Dados recuperados do Cache (Firebase)!"),a.data().result}catch(a){console.warn("Erro ao ler cache do Firebase:",a)}const s=new Sc({apiKey:t}),r=`
      Fornea um resumo detalhado e informativo sobre a entidade "${e}", localizada em "${n}".
      O resumo deve ser til para uma prospeco de negcios e incluir, se possvel:
      - **Misso e Foco:** Qual o principal objetivo ou rea de atuao da entidade?
      - **Principais Gestores:** Liste os nomes e cargos dos principais gestores ou decisores (ex: Prefeito, Secretrio de Educao, Diretor Geral).
      - **Projetos ou Iniciativas Recentes:** Mencione quaisquer projetos, programas ou notcias relevantes recentes associados  entidade.
      - **Tamanho e Relevncia:** Fornea uma noo do porte da entidade (ex: nmero de alunos, populao da cidade, oramento, etc.).

      Formate a resposta de forma clara e organizada, usando ttulos para cada seo. No use formatao JSON.
    `;try{const a=await Oc(s,r);if(!a.text)throw new Error("A resposta da API estava vazia.");try{await Rm(o,{result:a.text,createdAt:new Date().toISOString(),entityName:e,location:n})}catch(u){console.warn("Erro ao salvar no cache do Firebase:",u)}return a.text}catch(a){throw console.error("Erro ao buscar detalhes com a API Gemini:",a),a instanceof Error&&a.message.includes("API key not valid")?new Error("A chave de API fornecida no  vlida."):new Error(`No foi possvel obter detalhes para "${e}".`)}}async function W3(t,e,n){const i=new Sc({apiKey:n}),o=`Voc  um consultor de vendas snior especializado em educao e tecnologia educacional.

CONTEXTO:
- rgo Pblico: ${t}
- Iniciativas Recentes: ${e}

MISSO:
Sua empresa oferece solues de tecnologia educacional, plataformas digitais de aprendizagem, capacitao de professores e transformao digital para instituies de ensino.

Analise as iniciativas recentes deste rgo e crie de 2 a 3 frases de "gancho de vendas" altamente personalizadas e eficazes que um vendedor pode usar como abertura em um e-mail ou ligao.

REGRAS CRTICAS:
1. Cada frase deve conectar uma iniciativa especfica do rgo com uma soluo que sua empresa oferece
2. Use tom consultivo, no agressivo - mostre que voc entende os desafios deles
3. Seja especfico - mencione programas, projetos ou desafios que voc identificou
4. Frases devem ter entre 20-40 palavras
5. Foque em VALOR e RESULTADOS, no em caractersticas do produto
6. Use dados ou tendncias do mercado educacional quando relevante

FORMATO DE RESPOSTA:
Retorne um JSON com:
- "frases": array com 2-3 sugestes de abordagem
- "contexto": breve anlise (1-2 linhas) do cenrio do rgo que justifica essas abordagens

Exemplo do formato esperado:
{
  "frases": [
    "Vi que vocs lanaram o programa 'Escola Digital'. Temos ajudado secretarias como a de vocs a aumentar em 40% o engajamento dos alunos com plataformas adaptativas. Podemos agendar 15 minutos?",
    "Notei a iniciativa de capacitao de professores para metodologias ativas. Nossa soluo j treinou mais de 5.000 educadores no Nordeste com resultados comprovados. Vale uma conversa?"
  ],
  "contexto": "rgo em fase de transformao digital com foco em capacitao docente e engajamento estudantil."
}`,s={type:se.OBJECT,properties:{frases:{type:se.ARRAY,items:{type:se.STRING},description:"Array com 2-3 frases de abordagem de vendas personalizadas"},contexto:{type:se.STRING,description:"Breve anlise do cenrio do rgo (1-2 linhas)"}},required:["frases","contexto"]};try{console.log(` Gerando sugestes de abordagem para: ${t}`);const r=await Oc(i,o,s);if(!r.text)throw new Error("A resposta do modelo estava vazia");const a=JSON.parse(r.text);return console.log(` ${a.frases.length} sugestes geradas com sucesso`),a}catch(r){throw console.error("Erro ao gerar sugestes de abordagem:",r),r instanceof Error&&r.message.includes("API key not valid")?new Error("A chave de API fornecida no  vlida."):new Error(`No foi possvel gerar sugestes de abordagem para "${t}".`)}}const nu=({textToCopy:t})=>{const[e,n]=pe.useState(!1),i=()=>{navigator.clipboard.writeText(t).then(()=>{n(!0),setTimeout(()=>n(!1),2e3)}).catch(o=>{console.error("Failed to copy text: ",o)})};return R.jsx("button",{onClick:i,className:`p-1 rounded-md transition-colors duration-200 ${e?"bg-green-100 text-green-600":"bg-slate-100 text-slate-500 hover:bg-slate-200"}`,"aria-label":e?"Copiado!":"Copiar para a rea de transferncia",title:e?"Copiado!":"Copiar",children:e?R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}):R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})},Z3=({data:t,onDetails:e,onSuggestApproach:n})=>{if(t.length===0)return R.jsx("div",{className:"text-center py-10 text-slate-500",children:R.jsx("p",{children:"Nenhum resultado encontrado. Tente ajustar os filtros de busca."})});const i=o=>{const s={Alto:"bg-red-100 text-red-800 border-red-300",Mdio:"bg-yellow-100 text-yellow-800 border-yellow-300",Baixo:"bg-green-100 text-green-800 border-green-300"};return R.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-bold border-2 ${s[o]||"bg-gray-100 text-gray-800"}`,children:[o," Potencial"]})};return R.jsx("div",{className:"overflow-x-auto rounded-lg border border-slate-200 shadow-sm",children:R.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[R.jsx("thead",{className:"bg-slate-50",children:R.jsxs("tr",{children:[R.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"rgo / Dossi"}),R.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Potencial de Compra"}),R.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Contatos Chave"}),R.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Iniciativas e Notcias Recentes"}),R.jsx("th",{scope:"col",className:"px-6 py-3 text-center text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Aes"})]})}),R.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:t.map((o,s)=>R.jsxs("tr",{className:"hover:bg-slate-50 transition-colors duration-150",children:[R.jsx("td",{className:"px-6 py-4",children:R.jsxs("div",{className:"flex flex-col gap-2",children:[R.jsxs("div",{children:[R.jsx("p",{className:"text-sm font-semibold text-slate-900",children:o.orgao}),R.jsx("p",{className:"text-xs text-slate-500",children:o.localidade})]}),R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx("code",{className:"text-xs bg-slate-100 px-2 py-1 rounded text-indigo-600 font-mono",children:o.cnpj}),R.jsx(nu,{text:o.cnpj})]})]})}),R.jsx("td",{className:"px-6 py-4",children:i(o.potencialCompra)}),R.jsx("td",{className:"px-6 py-4",children:R.jsx("div",{className:"space-y-2",children:o.contatosChave&&o.contatosChave.length>0?o.contatosChave.map((r,a)=>R.jsxs("div",{className:"text-sm",children:[R.jsx("p",{className:"font-medium text-slate-900",children:r.nome}),R.jsx("p",{className:"text-xs text-slate-500",children:r.cargo})]},a)):R.jsx("p",{className:"text-xs text-slate-400 italic",children:"Sem contatos disponveis"})})}),R.jsx("td",{className:"px-6 py-4",children:R.jsxs("div",{className:"space-y-2",children:[R.jsx("p",{className:"text-sm text-slate-700 line-clamp-3",children:o.iniciativasRecentes}),o.fonteInformacao&&R.jsxs("a",{href:o.fonteInformacao,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-xs text-indigo-600 hover:text-indigo-800 hover:underline",children:[R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),"Ver fonte"]})]})}),R.jsx("td",{className:"px-6 py-4 text-center",children:R.jsxs("button",{onClick:()=>n(o.orgao,o.iniciativasRecentes),className:"inline-flex items-center gap-2 px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 transition-colors shadow-sm hover:shadow-md",title:"Gerar sugestes de abordagem com IA",children:[R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Sugerir Abordagem"]})})]},s))})]})})},j3=({data:t,onDetails:e})=>{const n=async i=>{let o="",s="";if(i.localidade){const u=i.localidade.split(",");u.length>=2?(o=u[0].trim(),s=u[1].trim()):o=i.localidade}let r=i.observacoes||"";i.contatoNome&&(r+=`
Contato Relevante: ${i.contatoNome} - ${i.contatoCargo||""}`),i.email&&(r+=`
Email: ${i.email}`),i.website&&(r+=`
Website: ${i.website}`),i.endereco&&(r+=`
Endereo: ${i.endereco}`);const a={nome:i.entidade,tipo:i.tipo,cnpj:i.cnpj||"",cidade:o,uf:s,telefone:i.contatoPublico||"",observacoes:r.trim()};if(!a.nome||!a.cnpj){if(alert("Ateno: Nome e CNPJ so obrigatrios para cadastrar o cliente."),!confirm("Deseja tentar cadastrar mesmo assim?"))return}else if(!confirm(`Deseja adicionar o cliente "${a.nome}" ao sistema?`))return;try{const u=await fetch("/api/clientes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(u.ok)alert("Cliente adicionado com sucesso!");else if(u.status===409)alert("Este cliente j est cadastrado no sistema (CNPJ duplicado).");else{const c=await u.json();alert(`Erro ao adicionar cliente: ${c.erro||"Erro desconhecido"}`)}}catch(u){console.error("Erro na requisio:",u),alert("Erro de conexo ao adicionar cliente.")}};return R.jsx("div",{className:"overflow-x-auto rounded-lg border border-slate-200 shadow-md",children:R.jsxs("table",{className:"w-full text-sm text-left text-slate-600",children:[R.jsx("thead",{className:"text-xs text-slate-700 uppercase bg-slate-100",children:R.jsxs("tr",{children:[R.jsx("th",{scope:"col",className:"px-6 py-3 font-bold",children:"Entidade"}),R.jsx("th",{scope:"col",className:"px-6 py-3 font-bold",children:"Contato Relevante"}),R.jsx("th",{scope:"col",className:"px-6 py-3 font-bold",children:"Informaes de Contato"}),R.jsx("th",{scope:"col",className:"px-6 py-3 font-bold",children:"Observaes"}),R.jsx("th",{scope:"col",className:"px-6 py-3 font-bold text-center",children:"Aes"})]})}),R.jsx("tbody",{children:t.map((i,o)=>R.jsxs("tr",{className:"bg-white border-b hover:bg-slate-50 transition-colors duration-200",children:[R.jsxs("td",{className:"px-6 py-4 font-medium text-slate-900 min-w-[250px] align-top",children:[R.jsx("div",{className:"font-bold text-base mb-1",children:i.entidade}),R.jsx("div",{className:"text-xs text-slate-500 mb-1",children:i.tipo}),R.jsx("div",{className:"text-xs text-slate-500 mb-2",children:i.localidade}),i.cnpj&&R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx("span",{className:"font-mono text-indigo-600 text-xs bg-indigo-50 px-2 py-1 rounded",children:i.cnpj}),R.jsx(nu,{textToCopy:i.cnpj})]})]}),R.jsx("td",{className:"px-6 py-4 min-w-[200px] align-top",children:i.contatoNome?R.jsxs(R.Fragment,{children:[R.jsx("div",{className:"font-semibold text-slate-800",children:i.contatoNome}),R.jsx("div",{className:"text-xs text-slate-500",children:i.contatoCargo})]}):R.jsx("span",{className:"text-slate-400 italic",children:"N/A"})}),R.jsx("td",{className:"px-6 py-4 min-w-[250px] align-top",children:R.jsxs("div",{className:"flex flex-col gap-2",children:[i.website&&R.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),R.jsx("a",{href:i.website.startsWith("http")?i.website:`https://${i.website}`,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:underline truncate max-w-[200px]",children:i.website})]}),i.email&&R.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),R.jsx("span",{className:"truncate max-w-[180px]",title:i.email,children:i.email}),R.jsx(nu,{textToCopy:i.email})]}),i.contatoPublico&&R.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),R.jsx("span",{children:i.contatoPublico}),R.jsx(nu,{textToCopy:i.contatoPublico})]}),!i.website&&!i.email&&!i.contatoPublico&&R.jsx("span",{className:"text-slate-400 italic text-xs",children:"Nenhuma informao disponvel"})]})}),R.jsx("td",{className:"px-6 py-4 min-w-[200px] align-top",children:R.jsx("p",{className:"text-xs text-slate-600 leading-relaxed",children:i.observacoes||R.jsx("span",{className:"text-slate-400 italic",children:"Sem observaes"})})}),R.jsx("td",{className:"px-6 py-4 align-top",children:R.jsxs("div",{className:"flex flex-col items-center justify-start gap-2",children:[R.jsx("button",{onClick:()=>e(i.entidade,i.localidade),className:"text-indigo-600 hover:text-indigo-800 font-semibold text-xs py-1 px-3 rounded-md border border-indigo-200 hover:bg-indigo-50 transition-all w-full",children:"Ver Detalhes"}),R.jsxs("button",{onClick:()=>n(i),className:"text-green-600 hover:text-green-800 font-semibold text-xs py-1 px-3 rounded-md border border-green-200 hover:bg-green-50 transition-all w-full flex items-center justify-center gap-1",title:"Adicionar ao Sistema",children:[R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})}),"Adicionar"]})]})})]},o))})]})})},SI=()=>R.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white",role:"status","aria-live":"polite",children:R.jsx("span",{className:"sr-only",children:"Carregando..."})}),ek=({message:t})=>R.jsxs("div",{className:"mt-8 bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-md",role:"alert",children:[R.jsx("p",{className:"font-bold",children:"Ocorreu um Erro"}),R.jsx("p",{children:t})]}),tk=({isOpen:t,onClose:e,apiKey:n,entityName:i,location:o})=>{const[s,r]=pe.useState(""),[a,u]=pe.useState(!1),[c,h]=pe.useState(null);return pe.useEffect(()=>{t&&(async()=>{u(!0),h(null),r("");try{const m=await X3(n,i,o);r(m)}catch(m){m instanceof Error?h(m.message):h("Ocorreu um erro desconhecido ao buscar os detalhes.")}finally{u(!1)}})()},[t,n,i,o]),t?R.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",onClick:e,role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:R.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col",onClick:p=>p.stopPropagation(),children:[R.jsxs("header",{className:"p-5 border-b border-slate-200 flex justify-between items-center sticky top-0 bg-white rounded-t-2xl",children:[R.jsxs("h2",{id:"modal-title",className:"text-xl font-bold text-slate-800",children:["Detalhes de: ",i]}),R.jsx("button",{onClick:e,className:"text-slate-500 hover:text-slate-800 transition-colors","aria-label":"Fechar modal",children:R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),R.jsxs("div",{className:"p-6 overflow-y-auto",children:[a&&R.jsxs("div",{className:"flex flex-col items-center justify-center h-48",children:[R.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"}),R.jsx("p",{className:"mt-4 text-slate-600",children:"Buscando informaes detalhadas..."})]}),c&&R.jsxs("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-md",role:"alert",children:[R.jsx("p",{className:"font-bold",children:"Erro ao carregar"}),R.jsx("p",{children:c})]}),s&&!a&&R.jsx("div",{className:"prose prose-slate max-w-none",dangerouslySetInnerHTML:{__html:s.replace(/\n/g,"<br />")}})]})]})}):null},nk=({isOpen:t,orgao:e,isLoading:n,sugestoes:i,contexto:o,error:s,onClose:r})=>{if(!t)return null;const a=u=>{navigator.clipboard.writeText(u)};return R.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:R.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[R.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-green-500 px-6 py-4 flex justify-between items-center",children:[R.jsxs("div",{children:[R.jsx("h2",{className:"text-xl font-bold text-white",children:" Sugestes de Abordagem"}),R.jsx("p",{className:"text-green-50 text-sm mt-1",children:e})]}),R.jsx("button",{onClick:r,className:"text-white hover:text-green-100 transition-colors p-2 hover:bg-green-700 rounded-full","aria-label":"Fechar",children:R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),R.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[n&&R.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[R.jsx(SI,{}),R.jsx("p",{className:"text-slate-600 mt-4 text-center",children:" Analisando iniciativas e gerando sugestes personalizadas..."}),R.jsx("p",{className:"text-slate-400 text-sm mt-2",children:"Isso pode levar alguns segundos"})]}),s&&R.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded",children:R.jsxs("div",{className:"flex items-start",children:[R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500 mt-0.5 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),R.jsxs("div",{children:[R.jsx("h3",{className:"text-red-800 font-semibold",children:"Erro ao gerar sugestes"}),R.jsx("p",{className:"text-red-700 text-sm mt-1",children:s})]})]})}),!n&&!s&&i&&i.length>0&&R.jsxs("div",{className:"space-y-6",children:[o&&R.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 rounded",children:[R.jsxs("h3",{className:"text-blue-900 font-semibold text-sm mb-2 flex items-center gap-2",children:[R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Anlise do Cenrio"]}),R.jsx("p",{className:"text-blue-800 text-sm",children:o})]}),R.jsxs("div",{children:[R.jsxs("h3",{className:"text-slate-700 font-semibold mb-4 flex items-center gap-2",children:[R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Frases para usar em e-mail ou ligao:"]}),R.jsx("div",{className:"space-y-4",children:i.map((u,c)=>R.jsx("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-4 hover:shadow-md transition-shadow duration-200",children:R.jsxs("div",{className:"flex items-start justify-between gap-3",children:[R.jsxs("div",{className:"flex-1",children:[R.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[R.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-green-600 text-white text-xs font-bold",children:c+1}),R.jsxs("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wide",children:["Sugesto ",c+1]})]}),R.jsx("p",{className:"text-slate-800 leading-relaxed",children:u})]}),R.jsx("button",{onClick:()=>a(u),className:"flex-shrink-0 p-2 text-slate-400 hover:text-green-600 hover:bg-green-50 rounded transition-colors",title:"Copiar para rea de transferncia",children:R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]})},c))})]}),R.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[R.jsxs("h4",{className:"text-yellow-900 font-semibold text-sm mb-2 flex items-center gap-2",children:[R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Dicas de uso"]}),R.jsxs("ul",{className:"text-yellow-800 text-sm space-y-1 ml-7",children:[R.jsx("li",{children:" Personalize ainda mais adicionando seu nome e empresa"}),R.jsx("li",{children:" Use como abertura e complemente com sua proposta de valor"}),R.jsx("li",{children:" Teste diferentes abordagens com diferentes contatos"}),R.jsx("li",{children:" Agende follow-up em 2-3 dias caso no tenha resposta"})]})]})]})]}),!n&&R.jsx("div",{className:"bg-slate-50 px-6 py-4 border-t border-slate-200 flex justify-end",children:R.jsx("button",{onClick:r,className:"px-6 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition-colors font-medium",children:"Fechar"})})]})})},LT=(t,e,n)=>{if(!n||n.length===0)return;const i=u=>{const c=u==null?"":String(u);return/[",\n]/.test(c)?`"${c.replace(/"/g,'""')}"`:c};let o=e.map(i).join(",")+`
`;o+=n.map(u=>u.map(i).join(",")).join(`
`);const s=new Blob([o],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a"),a=URL.createObjectURL(s);r.setAttribute("href",a),r.setAttribute("download",t),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(a)},kT=["Escola Privada","Escola Pblica Municipal","Escola Pblica Estadual","Prefeitura","SEDUC (Secretaria Estadual)","Secretaria Municipal de Educao","Livraria","Distribuidor de material didtico"],Dl=15,ik=()=>{const[t,e]=pe.useState(""),[n,i]=pe.useState(!1),[o,s]=pe.useState([]),[r,a]=pe.useState(!1),[u,c]=pe.useState(null),[h,p]=pe.useState("cnpj"),[m,_]=pe.useState(Dl),[x,D]=pe.useState([]),[V,C]=pe.useState([]),[E,I]=pe.useState(!1),[b,k]=pe.useState(""),[B,A]=pe.useState("educacionais"),[S,T]=pe.useState(""),[w,M]=pe.useState(kT[0]),[P,N]=pe.useState(!1),[Ue,ut]=pe.useState(null),[z,W]=pe.useState(!1),[Z,ve]=pe.useState(""),[Oe,mn]=pe.useState(!1),[Pn,gn]=pe.useState(null),[Nt,$t]=pe.useState(null),[or,ai]=pe.useState(null);pe.useEffect(()=>{(async()=>{try{const he=await fetch("https://servicodados.ibge.gov.br/api/v1/localidades/estados?orderBy=nome");if(!he.ok)throw new Error("Falha ao carregar estados.");const nt=await he.json();D(nt)}catch(he){console.error(he),c("No foi possvel carregar a lista de estados do IBGE.")}})()},[]),pe.useEffect(()=>{b?(async()=>{I(!0),C([]),T("");try{const he=await fetch(`https://servicodados.ibge.gov.br/api/v1/localidades/estados/${b}/municipios`);if(!he.ok)throw new Error("Falha ao carregar cidades.");const nt=await he.json();C(nt)}catch(he){console.error(he),c(`No foi possvel carregar as cidades para ${b}.`)}finally{I(!1)}})():(C([]),T(""))},[b]);const Go=(J,he)=>{ut({name:J,location:he}),N(!0)},Xa=()=>{N(!1),ut(null)},qc=async(J,he)=>{ve(J),W(!0),mn(!0),ai(null),gn(null),$t(null);try{const nt=await W3(J,he,t);gn(nt.frases),$t(nt.contexto)}catch(nt){nt instanceof Error?ai(nt.message):ai("Erro desconhecido ao gerar sugestes.")}finally{mn(!1)}},Bc=()=>{W(!1),ve(""),gn(null),$t(null),ai(null)},Wa=J=>{J.preventDefault(),t.trim()&&i(!0)},sr=pe.useCallback(async()=>{if(!t){c("A chave da API  necessria para fazer a busca."),i(!1);return}a(!0),c(null),s([]),_(Dl);try{if(h==="cnpj"){if(!b||!B)throw new Error("Por favor, selecione um estado e defina o ramo de atividade.");const J=await Q3(t,b,B);s(J)}else{if(!b||!S||!w)throw new Error("Por favor, preencha todos os campos para a busca de contatos.");const J=await $3(t,b,S,w);s(J)}}catch(J){J instanceof Error?c(`Falha ao buscar dados: ${J.message}. Verifique sua chave de API e tente novamente.`):c("Ocorreu um erro desconhecido. Por favor, tente novamente.")}finally{a(!1)}},[t,h,b,B,S,w]),Za=()=>{if(o.length!==0)if(h==="cnpj"){const J=["rgo","CNPJ","Localidade","Potencial de Compra","Contatos Chave","Iniciativas Recentes","Fonte"],he=o.map(ct=>[ct.orgao,ct.cnpj,ct.localidade,ct.potencialCompra,ct.contatosChave.map(ar=>`${ar.nome} (${ar.cargo})`).join("; "),ct.iniciativasRecentes,ct.fonteInformacao||""]),nt=`dossie_orgaos_${B.toLowerCase().replace(/\s/g,"_")}_${b}.csv`;LT(nt,J,he)}else{const J=["Entidade","CNPJ","Tipo","Localidade","Nome Contato","Cargo Contato","Contato Pblico"],he=o.map(ct=>[ct.entidade,ct.cnpj,ct.tipo,ct.localidade,ct.contatoNome,ct.contatoCargo,ct.contatoPublico]),nt=`leads_${w.toLowerCase().replace(/\s/g,"_")}_${S.toLowerCase().replace(/\s/g,"_")}_${b}.csv`;LT(nt,J,he)}},Fc=()=>{_(J=>J+Dl)},li=o.slice(0,m),rr=()=>R.jsxs(R.Fragment,{children:[R.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-500 text-blue-800 p-4 rounded-md mb-8",role:"alert",children:[R.jsx("p",{className:"font-bold",children:" Dossi de Inteligncia de Mercado"}),R.jsx("p",{children:"Gere um relatrio completo com anlise de potencial de compra, decisores-chave e iniciativas recentes de rgos pblicos."})]}),R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[R.jsxs("div",{children:[R.jsx("label",{htmlFor:"estado-select",className:"block text-sm font-medium text-slate-700 mb-2",children:"Estado (UF)"}),R.jsxs("select",{id:"estado-select",value:b,onChange:J=>k(J.target.value),className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",children:[R.jsx("option",{value:"",children:"Selecione um estado"}),x.map(J=>R.jsx("option",{value:J.sigla,children:J.nome},J.id))]})]}),R.jsxs("div",{children:[R.jsx("label",{htmlFor:"tipo-orgao-input",className:"block text-sm font-medium text-slate-700 mb-2",children:"Ramo de Atividade"}),R.jsx("input",{type:"text",id:"tipo-orgao-input",value:B,onChange:J=>A(J.target.value),placeholder:"Ex: educacional, sade",className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]})]})]}),ja=()=>R.jsxs(R.Fragment,{children:[R.jsxs("div",{className:"bg-green-50 border-l-4 border-green-500 text-green-800 p-4 rounded-md mb-8",role:"alert",children:[R.jsx("p",{className:"font-bold",children:"Busca por Contatos (Leads)"}),R.jsx("p",{children:"Mapeie contatos e perfis em entidades especficas. Preencha os campos para encontrar decisores e informaes de contato pblicas."})]}),R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[R.jsxs("div",{children:[R.jsx("label",{htmlFor:"estado-lead-select",className:"block text-sm font-medium text-slate-700 mb-2",children:"Estado (UF)"}),R.jsxs("select",{id:"estado-lead-select",value:b,onChange:J=>k(J.target.value),className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",children:[R.jsx("option",{value:"",children:"Selecione um estado"}),x.map(J=>R.jsx("option",{value:J.sigla,children:J.nome},J.id))]})]}),R.jsxs("div",{children:[R.jsx("label",{htmlFor:"cidade-select",className:"block text-sm font-medium text-slate-700 mb-2",children:"Cidade"}),R.jsxs("select",{id:"cidade-select",value:S,onChange:J=>T(J.target.value),disabled:!b||E,className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 disabled:bg-slate-50 disabled:text-slate-400 disabled:cursor-not-allowed",children:[R.jsx("option",{value:"",children:E?"Carregando cidades...":b?"Selecione uma cidade":"Selecione um estado primeiro"}),V.map(J=>R.jsx("option",{value:J.nome,children:J.nome},J.id))]})]}),R.jsxs("div",{children:[R.jsx("label",{htmlFor:"tipo-entidade-select",className:"block text-sm font-medium text-slate-700 mb-2",children:"Tipo de Entidade"}),R.jsx("select",{id:"tipo-entidade-select",value:w,onChange:J=>M(J.target.value),className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",children:kT.map(J=>R.jsx("option",{value:J,children:J},J))})]})]})]});return R.jsxs("div",{className:"min-h-screen font-sans text-slate-800 bg-[#f6f8fc] py-8 md:py-12",children:[R.jsx("main",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:R.jsxs("div",{className:"max-w-[1200px] mx-auto bg-white rounded-3xl shadow-[0_20px_60px_rgba(0,0,0,0.12)] p-8 sm:p-12",children:[R.jsx("div",{className:"mb-6",children:R.jsxs("a",{href:"/",className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-[#667eea] to-[#764ba2] text-white rounded-lg font-semibold shadow-md hover:shadow-lg transition-all duration-300",title:"Voltar para Clientes",children:[R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),R.jsx("span",{children:"Voltar para Clientes"})]})}),R.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-center mb-4 text-[#764ba2]",children:"Buscador de Contatos e CNPJs"}),R.jsx("p",{className:"text-center text-slate-500 text-lg mb-10",children:"Utilize a inteligncia artificial do Google Gemini para gerar listas de prospeco qualificadas."}),R.jsx("div",{className:"",children:n?R.jsxs(R.Fragment,{children:[R.jsx("div",{className:"mb-8",children:R.jsxs("div",{className:"flex justify-center border-b border-slate-200",children:[R.jsx("button",{onClick:()=>p("cnpj"),className:`px-6 py-3 font-semibold text-lg transition-colors duration-200 ${h==="cnpj"?"border-b-2 border-indigo-500 text-indigo-600":"text-slate-500 hover:text-indigo-500"}`,children:"Busca por rgos (CNPJ)"}),R.jsx("button",{onClick:()=>p("leads"),className:`px-6 py-3 font-semibold text-lg transition-colors duration-200 ${h==="leads"?"border-b-2 border-indigo-500 text-indigo-600":"text-slate-500 hover:text-indigo-500"}`,children:"Busca por Contatos (Leads)"})]})}),h==="cnpj"?rr():ja(),R.jsx("div",{className:"text-center",children:R.jsx("button",{onClick:sr,disabled:r,className:"inline-flex items-center justify-center bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-300 text-white font-bold py-3 px-8 rounded-lg shadow-md transition-transform transform hover:scale-105 disabled:cursor-not-allowed disabled:scale-100",children:r?R.jsxs(R.Fragment,{children:[R.jsx(SI,{}),R.jsx("span",{className:"ml-2",children:"Buscando..."})]}):R.jsxs(R.Fragment,{children:[R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Gerar Lista"]})})}),u&&R.jsx(ek,{message:u}),li.length>0&&!r&&R.jsxs("div",{className:"mt-10",children:[R.jsxs("div",{className:"flex flex-col items-start gap-4 sm:flex-row sm:justify-between sm:items-center mb-4",children:[R.jsx("h2",{className:"text-2xl font-bold text-slate-700",children:"Resultados Gerados"}),R.jsxs("button",{onClick:Za,className:"inline-flex items-center justify-center bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-transform transform hover:scale-105 text-sm",children:[R.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Exportar para CSV"]})]}),h==="cnpj"?R.jsx(Z3,{data:li,onDetails:Go,onSuggestApproach:qc}):R.jsx(j3,{data:li,onDetails:Go}),m<o.length&&R.jsx("div",{className:"text-center mt-8",children:R.jsxs("button",{onClick:Fc,className:"bg-slate-200 hover:bg-slate-300 text-slate-800 font-bold py-2 px-6 rounded-lg transition-colors duration-200 shadow-sm",children:["Carregar Mais Resultados (",li.length,"/",o.length,")"]})})]}),R.jsx("div",{className:"text-center mt-6",children:R.jsx("button",{onClick:()=>{i(!1),s([]),c(null),_(Dl)},className:"text-sm text-slate-500 hover:text-indigo-600 hover:underline",children:"Trocar API Key"})})]}):R.jsxs("form",{onSubmit:Wa,className:"space-y-4 max-w-lg mx-auto",children:[R.jsx("h2",{className:"text-xl font-semibold text-slate-700",children:"Chave da API do Google Gemini"}),R.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-500 text-yellow-800 p-4 rounded-md",children:R.jsx("p",{children:"Para usar esta aplicao, voc precisa de uma chave de API do Google AI Studio."})}),R.jsxs("div",{children:[R.jsx("label",{htmlFor:"api-key-input",className:"block text-sm font-medium text-slate-700 mb-2",children:"Sua API Key"}),R.jsx("input",{type:"password",id:"api-key-input",value:t,onChange:J=>e(J.target.value),placeholder:"Cole sua chave de API aqui",className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",required:!0}),R.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Obtenha sua chave no ",R.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:underline",children:"Google AI Studio"}),"."]})]}),R.jsx("div",{className:"text-center pt-4",children:R.jsx("button",{type:"submit",className:"inline-flex items-center justify-center bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 sm:px-8 rounded-lg shadow-md transition-transform transform hover:scale-105",children:"Salvar e Continuar"})})]})})]})}),P&&Ue&&R.jsx(tk,{isOpen:P,onClose:Xa,apiKey:t,entityName:Ue.name,location:Ue.location}),R.jsx(nk,{isOpen:z,orgao:Z,isLoading:Oe,sugestoes:Pn,contexto:Nt,error:or,onClose:Bc})]})},AI=document.getElementById("root");if(!AI)throw new Error("Could not find root element to mount to");const ok=K1.createRoot(AI);ok.render(R.jsx(hR.StrictMode,{children:R.jsx(ik,{})}));
