(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();function WT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ZT={exports:{}},Wc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gI=Symbol.for("react.transitional.element"),yI=Symbol.for("react.fragment");function jT(t,e,n){var i=null;if(n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),"key"in e){n={};for(var o in e)o!=="key"&&(n[o]=e[o])}else n=e;return e=n.ref,{$$typeof:gI,type:t,key:i,ref:e!==void 0?e:null,props:n}}Wc.Fragment=yI;Wc.jsx=jT;Wc.jsxs=jT;ZT.exports=Wc;var S=ZT.exports,e0={exports:{}},ne={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dp=Symbol.for("react.transitional.element"),vI=Symbol.for("react.portal"),_I=Symbol.for("react.fragment"),EI=Symbol.for("react.strict_mode"),TI=Symbol.for("react.profiler"),SI=Symbol.for("react.consumer"),AI=Symbol.for("react.context"),CI=Symbol.for("react.forward_ref"),RI=Symbol.for("react.suspense"),wI=Symbol.for("react.memo"),t0=Symbol.for("react.lazy"),II=Symbol.for("react.activity"),Sy=Symbol.iterator;function bI(t){return t===null||typeof t!="object"?null:(t=Sy&&t[Sy]||t["@@iterator"],typeof t=="function"?t:null)}var n0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},i0=Object.assign,o0={};function Ur(t,e,n){this.props=t,this.context=e,this.refs=o0,this.updater=n||n0}Ur.prototype.isReactComponent={};Ur.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ur.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function s0(){}s0.prototype=Ur.prototype;function Pp(t,e,n){this.props=t,this.context=e,this.refs=o0,this.updater=n||n0}var Vp=Pp.prototype=new s0;Vp.constructor=Pp;i0(Vp,Ur.prototype);Vp.isPureReactComponent=!0;var Ay=Array.isArray;function eh(){}var Le={H:null,A:null,T:null,S:null},r0=Object.prototype.hasOwnProperty;function Up(t,e,n){var i=n.ref;return{$$typeof:Dp,type:t,key:e,ref:i!==void 0?i:null,props:n}}function xI(t,e){return Up(t.type,e,t.props)}function Lp(t){return typeof t=="object"&&t!==null&&t.$$typeof===Dp}function NI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Cy=/\/+/g;function td(t,e){return typeof t=="object"&&t!==null&&t.key!=null?NI(""+t.key):e.toString(36)}function MI(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(eh,eh):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function Os(t,e,n,i,o){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var r=!1;if(t===null)r=!0;else switch(s){case"bigint":case"string":case"number":r=!0;break;case"object":switch(t.$$typeof){case Dp:case vI:r=!0;break;case t0:return r=t._init,Os(r(t._payload),e,n,i,o)}}if(r)return o=o(t),r=i===""?"."+td(t,0):i,Ay(o)?(n="",r!=null&&(n=r.replace(Cy,"$&/")+"/"),Os(o,e,n,"",function(c){return c})):o!=null&&(Lp(o)&&(o=xI(o,n+(o.key==null||t&&t.key===o.key?"":(""+o.key).replace(Cy,"$&/")+"/")+r)),e.push(o)),1;r=0;var a=i===""?".":i+":";if(Ay(t))for(var l=0;l<t.length;l++)i=t[l],s=a+td(i,l),r+=Os(i,e,n,s,o);else if(l=bI(t),typeof l=="function")for(t=l.call(t),l=0;!(i=t.next()).done;)i=i.value,s=a+td(i,l++),r+=Os(i,e,n,s,o);else if(s==="object"){if(typeof t.then=="function")return Os(MI(t),e,n,i,o);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return r}function ou(t,e,n){if(t==null)return t;var i=[],o=0;return Os(t,i,"","",function(s){return e.call(n,s,o++)}),i}function DI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ry=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},PI={map:ou,forEach:function(t,e,n){ou(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ou(t,function(){e++}),e},toArray:function(t){return ou(t,function(e){return e})||[]},only:function(t){if(!Lp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ne.Activity=II;ne.Children=PI;ne.Component=Ur;ne.Fragment=_I;ne.Profiler=TI;ne.PureComponent=Pp;ne.StrictMode=EI;ne.Suspense=RI;ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Le;ne.__COMPILER_RUNTIME={__proto__:null,c:function(t){return Le.H.useMemoCache(t)}};ne.cache=function(t){return function(){return t.apply(null,arguments)}};ne.cacheSignal=function(){return null};ne.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var i=i0({},t.props),o=t.key;if(e!=null)for(s in e.key!==void 0&&(o=""+e.key),e)!r0.call(e,s)||s==="key"||s==="__self"||s==="__source"||s==="ref"&&e.ref===void 0||(i[s]=e[s]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var r=Array(s),a=0;a<s;a++)r[a]=arguments[a+2];i.children=r}return Up(t.type,o,i)};ne.createContext=function(t){return t={$$typeof:AI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:SI,_context:t},t};ne.createElement=function(t,e,n){var i,o={},s=null;if(e!=null)for(i in e.key!==void 0&&(s=""+e.key),e)r0.call(e,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(o[i]=e[i]);var r=arguments.length-2;if(r===1)o.children=n;else if(1<r){for(var a=Array(r),l=0;l<r;l++)a[l]=arguments[l+2];o.children=a}if(t&&t.defaultProps)for(i in r=t.defaultProps,r)o[i]===void 0&&(o[i]=r[i]);return Up(t,s,o)};ne.createRef=function(){return{current:null}};ne.forwardRef=function(t){return{$$typeof:CI,render:t}};ne.isValidElement=Lp;ne.lazy=function(t){return{$$typeof:t0,_payload:{_status:-1,_result:t},_init:DI}};ne.memo=function(t,e){return{$$typeof:wI,type:t,compare:e===void 0?null:e}};ne.startTransition=function(t){var e=Le.T,n={};Le.T=n;try{var i=t(),o=Le.S;o!==null&&o(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(eh,Ry)}catch(s){Ry(s)}finally{e!==null&&n.types!==null&&(e.types=n.types),Le.T=e}};ne.unstable_useCacheRefresh=function(){return Le.H.useCacheRefresh()};ne.use=function(t){return Le.H.use(t)};ne.useActionState=function(t,e,n){return Le.H.useActionState(t,e,n)};ne.useCallback=function(t,e){return Le.H.useCallback(t,e)};ne.useContext=function(t){return Le.H.useContext(t)};ne.useDebugValue=function(){};ne.useDeferredValue=function(t,e){return Le.H.useDeferredValue(t,e)};ne.useEffect=function(t,e){return Le.H.useEffect(t,e)};ne.useEffectEvent=function(t){return Le.H.useEffectEvent(t)};ne.useId=function(){return Le.H.useId()};ne.useImperativeHandle=function(t,e,n){return Le.H.useImperativeHandle(t,e,n)};ne.useInsertionEffect=function(t,e){return Le.H.useInsertionEffect(t,e)};ne.useLayoutEffect=function(t,e){return Le.H.useLayoutEffect(t,e)};ne.useMemo=function(t,e){return Le.H.useMemo(t,e)};ne.useOptimistic=function(t,e){return Le.H.useOptimistic(t,e)};ne.useReducer=function(t,e,n){return Le.H.useReducer(t,e,n)};ne.useRef=function(t){return Le.H.useRef(t)};ne.useState=function(t){return Le.H.useState(t)};ne.useSyncExternalStore=function(t,e,n){return Le.H.useSyncExternalStore(t,e,n)};ne.useTransition=function(){return Le.H.useTransition()};ne.version="19.2.0";e0.exports=ne;var L=e0.exports;const ln=WT(L);var a0={exports:{}},Zc={},l0={exports:{}},u0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,Q){var Z=z.length;z.push(Q);e:for(;0<Z;){var re=Z-1>>>1,be=z[re];if(0<o(be,Q))z[re]=Q,z[Z]=be,Z=re;else break e}}function n(z){return z.length===0?null:z[0]}function i(z){if(z.length===0)return null;var Q=z[0],Z=z.pop();if(Z!==Q){z[0]=Z;e:for(var re=0,be=z.length,nn=be>>>1;re<nn;){var Et=2*(re+1)-1,Mt=z[Et],it=Et+1,Ot=z[it];if(0>o(Mt,Z))it<be&&0>o(Ot,Mt)?(z[re]=Ot,z[it]=Z,re=it):(z[re]=Mt,z[Et]=Z,re=Et);else if(it<be&&0>o(Ot,Z))z[re]=Ot,z[it]=Z,re=it;else break e}}return Q}function o(z,Q){var Z=z.sortIndex-Q.sortIndex;return Z!==0?Z:z.id-Q.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var r=Date,a=r.now();t.unstable_now=function(){return r.now()-a}}var l=[],c=[],h=1,p=null,m=3,y=!1,b=!1,x=!1,P=!1,R=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function D(z){for(var Q=n(c);Q!==null;){if(Q.callback===null)i(c);else if(Q.startTime<=z)i(c),Q.sortIndex=Q.expirationTime,e(l,Q);else break;Q=n(c)}}function O(z){if(x=!1,D(z),!b)if(n(l)!==null)b=!0,q||(q=!0,V());else{var Q=n(c);Q!==null&&Qe(O,Q.startTime-z)}}var q=!1,T=-1,_=5,A=-1;function I(){return P?!0:!(t.unstable_now()-A<_)}function M(){if(P=!1,q){var z=t.unstable_now();A=z;var Q=!0;try{e:{b=!1,x&&(x=!1,E(T),T=-1),y=!0;var Z=m;try{t:{for(D(z),p=n(l);p!==null&&!(p.expirationTime>z&&I());){var re=p.callback;if(typeof re=="function"){p.callback=null,m=p.priorityLevel;var be=re(p.expirationTime<=z);if(z=t.unstable_now(),typeof be=="function"){p.callback=be,D(z),Q=!0;break t}p===n(l)&&i(l),D(z)}else i(l);p=n(l)}if(p!==null)Q=!0;else{var nn=n(c);nn!==null&&Qe(O,nn.startTime-z),Q=!1}}break e}finally{p=null,m=Z,y=!1}Q=void 0}}finally{Q?V():q=!1}}}var V;if(typeof w=="function")V=function(){w(M)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,ye=N.port2;N.port1.onmessage=M,V=function(){ye.postMessage(null)}}else V=function(){R(M,0)};function Qe(z,Q){T=R(function(){z(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(z){switch(m){case 1:case 2:case 3:var Q=3;break;default:Q=m}var Z=m;m=Q;try{return z()}finally{m=Z}},t.unstable_requestPaint=function(){P=!0},t.unstable_runWithPriority=function(z,Q){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var Z=m;m=z;try{return Q()}finally{m=Z}},t.unstable_scheduleCallback=function(z,Q,Z){var re=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?re+Z:re):Z=re,z){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=Z+be,z={id:h++,callback:Q,priorityLevel:z,startTime:Z,expirationTime:be,sortIndex:-1},Z>re?(z.sortIndex=Z,e(c,z),n(l)===null&&z===n(c)&&(x?(E(T),T=-1):x=!0,Qe(O,Z-re))):(z.sortIndex=be,e(l,z),b||y||(b=!0,q||(q=!0,V()))),z},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(z){var Q=m;return function(){var Z=m;m=Q;try{return z.apply(this,arguments)}finally{m=Z}}}})(u0);l0.exports=u0;var VI=l0.exports,c0={exports:{}},zt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UI=L;function f0(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ji(){}var Ft={d:{f:ji,r:function(){throw Error(f0(522))},D:ji,C:ji,L:ji,m:ji,X:ji,S:ji,M:ji},p:0,findDOMNode:null},LI=Symbol.for("react.portal");function kI(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:LI,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}var Ia=UI.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function jc(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}zt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ft;zt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(f0(299));return kI(t,e,null,n)};zt.flushSync=function(t){var e=Ia.T,n=Ft.p;try{if(Ia.T=null,Ft.p=2,t)return t()}finally{Ia.T=e,Ft.p=n,Ft.d.f()}};zt.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,Ft.d.C(t,e))};zt.prefetchDNS=function(t){typeof t=="string"&&Ft.d.D(t)};zt.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,i=jc(n,e.crossOrigin),o=typeof e.integrity=="string"?e.integrity:void 0,s=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?Ft.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:i,integrity:o,fetchPriority:s}):n==="script"&&Ft.d.X(t,{crossOrigin:i,integrity:o,fetchPriority:s,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};zt.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=jc(e.as,e.crossOrigin);Ft.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&Ft.d.M(t)};zt.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,i=jc(n,e.crossOrigin);Ft.d.L(t,n,{crossOrigin:i,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};zt.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=jc(e.as,e.crossOrigin);Ft.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else Ft.d.m(t)};zt.requestFormReset=function(t){Ft.d.r(t)};zt.unstable_batchedUpdates=function(t,e){return t(e)};zt.useFormState=function(t,e,n){return Ia.H.useFormState(t,e,n)};zt.useFormStatus=function(){return Ia.H.useHostTransitionStatus()};zt.version="19.2.0";function d0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d0)}catch(t){console.error(t)}}d0(),c0.exports=zt;var Ys=c0.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dt=VI,h0=L,OI=Ys;function B(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function p0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Al(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function m0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function g0(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function wy(t){if(Al(t)!==t)throw Error(B(188))}function qI(t){var e=t.alternate;if(!e){if(e=Al(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,i=e;;){var o=n.return;if(o===null)break;var s=o.alternate;if(s===null){if(i=o.return,i!==null){n=i;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return wy(o),t;if(s===i)return wy(o),e;s=s.sibling}throw Error(B(188))}if(n.return!==i.return)n=o,i=s;else{for(var r=!1,a=o.child;a;){if(a===n){r=!0,n=o,i=s;break}if(a===i){r=!0,i=o,n=s;break}a=a.sibling}if(!r){for(a=s.child;a;){if(a===n){r=!0,n=s,i=o;break}if(a===i){r=!0,i=s,n=o;break}a=a.sibling}if(!r)throw Error(B(189))}}if(n.alternate!==i)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function y0(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=y0(t),e!==null)return e;t=t.sibling}return null}var ke=Object.assign,BI=Symbol.for("react.element"),su=Symbol.for("react.transitional.element"),va=Symbol.for("react.portal"),Js=Symbol.for("react.fragment"),v0=Symbol.for("react.strict_mode"),th=Symbol.for("react.profiler"),_0=Symbol.for("react.consumer"),Ai=Symbol.for("react.context"),kp=Symbol.for("react.forward_ref"),nh=Symbol.for("react.suspense"),ih=Symbol.for("react.suspense_list"),Op=Symbol.for("react.memo"),eo=Symbol.for("react.lazy"),oh=Symbol.for("react.activity"),FI=Symbol.for("react.memo_cache_sentinel"),Iy=Symbol.iterator;function ca(t){return t===null||typeof t!="object"?null:(t=Iy&&t[Iy]||t["@@iterator"],typeof t=="function"?t:null)}var GI=Symbol.for("react.client.reference");function sh(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===GI?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Js:return"Fragment";case th:return"Profiler";case v0:return"StrictMode";case nh:return"Suspense";case ih:return"SuspenseList";case oh:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case va:return"Portal";case Ai:return t.displayName||"Context";case _0:return(t._context.displayName||"Context")+".Consumer";case kp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Op:return e=t.displayName||null,e!==null?e:sh(t.type)||"Memo";case eo:e=t._payload,t=t._init;try{return sh(t(e))}catch{}}return null}var _a=Array.isArray,j=h0.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e=OI.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,as={pending:!1,data:null,method:null,action:null},rh=[],Ks=-1;function di(t){return{current:t}}function _t(t){0>Ks||(t.current=rh[Ks],rh[Ks]=null,Ks--)}function Ne(t,e){Ks++,rh[Ks]=t.current,t.current=e}var oi=di(null),Wa=di(null),po=di(null),Wu=di(null);function Zu(t,e){switch(Ne(po,e),Ne(Wa,t),Ne(oi,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?Pv(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=Pv(e),t=qA(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}_t(oi),Ne(oi,t)}function vr(){_t(oi),_t(Wa),_t(po)}function ah(t){t.memoizedState!==null&&Ne(Wu,t);var e=oi.current,n=qA(e,t.type);e!==n&&(Ne(Wa,t),Ne(oi,n))}function ju(t){Wa.current===t&&(_t(oi),_t(Wa)),Wu.current===t&&(_t(Wu),ll._currentValue=as)}var nd,by;function es(t){if(nd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);nd=e&&e[1]||"",by=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+nd+t+by}var id=!1;function od(t,e){if(!t||id)return"";id=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(e){var p=function(){throw Error()};if(Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(y){var m=y}Reflect.construct(t,[],p)}else{try{p.call()}catch(y){m=y}t.call(p.prototype)}}else{try{throw Error()}catch(y){m=y}(p=t())&&typeof p.catch=="function"&&p.catch(function(){})}}catch(y){if(y&&m&&typeof y.stack=="string")return[y.stack,m.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=i.DetermineComponentFrameRoot(),r=s[0],a=s[1];if(r&&a){var l=r.split(`
`),c=a.split(`
`);for(o=i=0;i<l.length&&!l[i].includes("DetermineComponentFrameRoot");)i++;for(;o<c.length&&!c[o].includes("DetermineComponentFrameRoot");)o++;if(i===l.length||o===c.length)for(i=l.length-1,o=c.length-1;1<=i&&0<=o&&l[i]!==c[o];)o--;for(;1<=i&&0<=o;i--,o--)if(l[i]!==c[o]){if(i!==1||o!==1)do if(i--,o--,0>o||l[i]!==c[o]){var h=`
`+l[i].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=i&&0<=o);break}}}finally{id=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?es(n):""}function zI(t,e){switch(t.tag){case 26:case 27:case 5:return es(t.type);case 16:return es("Lazy");case 13:return t.child!==e&&e!==null?es("Suspense Fallback"):es("Suspense");case 19:return es("SuspenseList");case 0:case 15:return od(t.type,!1);case 11:return od(t.type.render,!1);case 1:return od(t.type,!0);case 31:return es("Activity");default:return""}}function xy(t){try{var e="",n=null;do e+=zI(t,n),n=t,t=t.return;while(t);return e}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var lh=Object.prototype.hasOwnProperty,qp=dt.unstable_scheduleCallback,sd=dt.unstable_cancelCallback,HI=dt.unstable_shouldYield,YI=dt.unstable_requestPaint,dn=dt.unstable_now,JI=dt.unstable_getCurrentPriorityLevel,E0=dt.unstable_ImmediatePriority,T0=dt.unstable_UserBlockingPriority,ec=dt.unstable_NormalPriority,KI=dt.unstable_LowPriority,S0=dt.unstable_IdlePriority,$I=dt.log,QI=dt.unstable_setDisableYieldValue,Cl=null,hn=null;function ao(t){if(typeof $I=="function"&&QI(t),hn&&typeof hn.setStrictMode=="function")try{hn.setStrictMode(Cl,t)}catch{}}var pn=Math.clz32?Math.clz32:ZI,XI=Math.log,WI=Math.LN2;function ZI(t){return t>>>=0,t===0?32:31-(XI(t)/WI|0)|0}var ru=256,au=262144,lu=4194304;function ts(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function ef(t,e,n){var i=t.pendingLanes;if(i===0)return 0;var o=0,s=t.suspendedLanes,r=t.pingedLanes;t=t.warmLanes;var a=i&134217727;return a!==0?(i=a&~s,i!==0?o=ts(i):(r&=a,r!==0?o=ts(r):n||(n=a&~t,n!==0&&(o=ts(n))))):(a=i&~s,a!==0?o=ts(a):r!==0?o=ts(r):n||(n=i&~t,n!==0&&(o=ts(n)))),o===0?0:e!==0&&e!==o&&!(e&s)&&(s=o&-o,n=e&-e,s>=n||s===32&&(n&4194048)!==0)?e:o}function Rl(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function jI(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function A0(){var t=lu;return lu<<=1,!(lu&62914560)&&(lu=4194304),t}function rd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function wl(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function eb(t,e,n,i,o,s){var r=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var a=t.entanglements,l=t.expirationTimes,c=t.hiddenUpdates;for(n=r&~n;0<n;){var h=31-pn(n),p=1<<h;a[h]=0,l[h]=-1;var m=c[h];if(m!==null)for(c[h]=null,h=0;h<m.length;h++){var y=m[h];y!==null&&(y.lane&=-536870913)}n&=~p}i!==0&&C0(t,i,0),s!==0&&o===0&&t.tag!==0&&(t.suspendedLanes|=s&~(r&~e))}function C0(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var i=31-pn(e);t.entangledLanes|=e,t.entanglements[i]=t.entanglements[i]|1073741824|n&261930}function R0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-pn(n),o=1<<i;o&e|t[i]&e&&(t[i]|=e),n&=~o}}function w0(t,e){var n=e&-e;return n=n&42?1:Bp(n),n&(t.suspendedLanes|e)?0:n}function Bp(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Fp(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function I0(){var t=_e.p;return t!==0?t:(t=window.event,t===void 0?32:XA(t.type))}function Ny(t,e){var n=_e.p;try{return _e.p=t,e()}finally{_e.p=n}}var qo=Math.random().toString(36).slice(2),Rt="__reactFiber$"+qo,jt="__reactProps$"+qo,Lr="__reactContainer$"+qo,uh="__reactEvents$"+qo,tb="__reactListeners$"+qo,nb="__reactHandles$"+qo,My="__reactResources$"+qo,Il="__reactMarker$"+qo;function Gp(t){delete t[Rt],delete t[jt],delete t[uh],delete t[tb],delete t[nb]}function $s(t){var e=t[Rt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Lr]||n[Rt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Ov(t);t!==null;){if(n=t[Rt])return n;t=Ov(t)}return e}t=n,n=t.parentNode}return null}function kr(t){if(t=t[Rt]||t[Lr]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function Ea(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(B(33))}function sr(t){var e=t[My];return e||(e=t[My]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function yt(t){t[Il]=!0}var b0=new Set,x0={};function As(t,e){_r(t,e),_r(t+"Capture",e)}function _r(t,e){for(x0[t]=e,t=0;t<e.length;t++)b0.add(e[t])}var ib=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Dy={},Py={};function ob(t){return lh.call(Py,t)?!0:lh.call(Dy,t)?!1:ib.test(t)?Py[t]=!0:(Dy[t]=!0,!1)}function wu(t,e,n){if(ob(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var i=e.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function uu(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function gi(t,e,n,i){if(i===null)t.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+i)}}function Rn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function N0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function sb(t,e,n){var i=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var o=i.get,s=i.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(r){n=""+r,s.call(this,r)}}),Object.defineProperty(t,e,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(r){n=""+r},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ch(t){if(!t._valueTracker){var e=N0(t)?"checked":"value";t._valueTracker=sb(t,e,""+t[e])}}function M0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=N0(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function tc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var rb=/[\n"\\]/g;function bn(t){return t.replace(rb,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function fh(t,e,n,i,o,s,r,a){t.name="",r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"?t.type=r:t.removeAttribute("type"),e!=null?r==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+Rn(e)):t.value!==""+Rn(e)&&(t.value=""+Rn(e)):r!=="submit"&&r!=="reset"||t.removeAttribute("value"),e!=null?dh(t,r,Rn(e)):n!=null?dh(t,r,Rn(n)):i!=null&&t.removeAttribute("value"),o==null&&s!=null&&(t.defaultChecked=!!s),o!=null&&(t.checked=o&&typeof o!="function"&&typeof o!="symbol"),a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?t.name=""+Rn(a):t.removeAttribute("name")}function D0(t,e,n,i,o,s,r,a){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(t.type=s),e!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||e!=null)){ch(t);return}n=n!=null?""+Rn(n):"",e=e!=null?""+Rn(e):n,a||e===t.value||(t.value=e),t.defaultValue=e}i=i??o,i=typeof i!="function"&&typeof i!="symbol"&&!!i,t.checked=a?t.checked:!!i,t.defaultChecked=!!i,r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(t.name=r),ch(t)}function dh(t,e,n){e==="number"&&tc(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function rr(t,e,n,i){if(t=t.options,e){e={};for(var o=0;o<n.length;o++)e["$"+n[o]]=!0;for(n=0;n<t.length;n++)o=e.hasOwnProperty("$"+t[n].value),t[n].selected!==o&&(t[n].selected=o),o&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Rn(n),e=null,o=0;o<t.length;o++){if(t[o].value===n){t[o].selected=!0,i&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function P0(t,e,n){if(e!=null&&(e=""+Rn(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+Rn(n):""}function V0(t,e,n,i){if(e==null){if(i!=null){if(n!=null)throw Error(B(92));if(_a(i)){if(1<i.length)throw Error(B(93));i=i[0]}n=i}n==null&&(n=""),e=n}n=Rn(e),t.defaultValue=n,i=t.textContent,i===n&&i!==""&&i!==null&&(t.value=i),ch(t)}function Er(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ab=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vy(t,e,n){var i=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":i?t.setProperty(e,n):typeof n!="number"||n===0||ab.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function U0(t,e,n){if(e!=null&&typeof e!="object")throw Error(B(62));if(t=t.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||e!=null&&e.hasOwnProperty(i)||(i.indexOf("--")===0?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="");for(var o in e)i=e[o],e.hasOwnProperty(o)&&n[o]!==i&&Vy(t,o,i)}else for(var s in e)e.hasOwnProperty(s)&&Vy(t,s,e[s])}function zp(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lb=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ub=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Iu(t){return ub.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Ci(){}var hh=null;function Hp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Qs=null,ar=null;function Uy(t){var e=kr(t);if(e&&(t=e.stateNode)){var n=t[jt]||null;e:switch(t=e.stateNode,e.type){case"input":if(fh(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+bn(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var o=i[jt]||null;if(!o)throw Error(B(90));fh(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(e=0;e<n.length;e++)i=n[e],i.form===t.form&&M0(i)}break e;case"textarea":P0(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&rr(t,!!n.multiple,e,!1)}}}var ad=!1;function L0(t,e,n){if(ad)return t(e,n);ad=!0;try{var i=t(e);return i}finally{if(ad=!1,(Qs!==null||ar!==null)&&(hf(),Qs&&(e=Qs,t=ar,ar=Qs=null,Uy(e),t)))for(e=0;e<t.length;e++)Uy(t[e])}}function Za(t,e){var n=t.stateNode;if(n===null)return null;var i=n[jt]||null;if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var Ni=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ph=!1;if(Ni)try{var fa={};Object.defineProperty(fa,"passive",{get:function(){ph=!0}}),window.addEventListener("test",fa,fa),window.removeEventListener("test",fa,fa)}catch{ph=!1}var lo=null,Yp=null,bu=null;function k0(){if(bu)return bu;var t,e=Yp,n=e.length,i,o="value"in lo?lo.value:lo.textContent,s=o.length;for(t=0;t<n&&e[t]===o[t];t++);var r=n-t;for(i=1;i<=r&&e[n-i]===o[s-i];i++);return bu=o.slice(t,1<i?1-i:void 0)}function xu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function cu(){return!0}function Ly(){return!1}function en(t){function e(n,i,o,s,r){this._reactName=n,this._targetInst=o,this.type=i,this.nativeEvent=s,this.target=r,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?cu:Ly,this.isPropagationStopped=Ly,this}return ke(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=cu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=cu)},persist:function(){},isPersistent:cu}),e}var Cs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tf=en(Cs),bl=ke({},Cs,{view:0,detail:0}),cb=en(bl),ld,ud,da,nf=ke({},bl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==da&&(da&&t.type==="mousemove"?(ld=t.screenX-da.screenX,ud=t.screenY-da.screenY):ud=ld=0,da=t),ld)},movementY:function(t){return"movementY"in t?t.movementY:ud}}),ky=en(nf),fb=ke({},nf,{dataTransfer:0}),db=en(fb),hb=ke({},bl,{relatedTarget:0}),cd=en(hb),pb=ke({},Cs,{animationName:0,elapsedTime:0,pseudoElement:0}),mb=en(pb),gb=ke({},Cs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),yb=en(gb),vb=ke({},Cs,{data:0}),Oy=en(vb),_b={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Eb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sb(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Tb[t])?!!e[t]:!1}function Jp(){return Sb}var Ab=ke({},bl,{key:function(t){if(t.key){var e=_b[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=xu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Eb[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jp,charCode:function(t){return t.type==="keypress"?xu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?xu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Cb=en(Ab),Rb=ke({},nf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qy=en(Rb),wb=ke({},bl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jp}),Ib=en(wb),bb=ke({},Cs,{propertyName:0,elapsedTime:0,pseudoElement:0}),xb=en(bb),Nb=ke({},nf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Mb=en(Nb),Db=ke({},Cs,{newState:0,oldState:0}),Pb=en(Db),Vb=[9,13,27,32],Kp=Ni&&"CompositionEvent"in window,ba=null;Ni&&"documentMode"in document&&(ba=document.documentMode);var Ub=Ni&&"TextEvent"in window&&!ba,O0=Ni&&(!Kp||ba&&8<ba&&11>=ba),By=" ",Fy=!1;function q0(t,e){switch(t){case"keyup":return Vb.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function B0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Xs=!1;function Lb(t,e){switch(t){case"compositionend":return B0(e);case"keypress":return e.which!==32?null:(Fy=!0,By);case"textInput":return t=e.data,t===By&&Fy?null:t;default:return null}}function kb(t,e){if(Xs)return t==="compositionend"||!Kp&&q0(t,e)?(t=k0(),bu=Yp=lo=null,Xs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return O0&&e.locale!=="ko"?null:e.data;default:return null}}var Ob={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Ob[t.type]:e==="textarea"}function F0(t,e,n,i){Qs?ar?ar.push(i):ar=[i]:Qs=i,e=_c(e,"onChange"),0<e.length&&(n=new tf("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var xa=null,ja=null;function qb(t){LA(t,0)}function of(t){var e=Ea(t);if(M0(e))return t}function zy(t,e){if(t==="change")return e}var G0=!1;if(Ni){var fd;if(Ni){var dd="oninput"in document;if(!dd){var Hy=document.createElement("div");Hy.setAttribute("oninput","return;"),dd=typeof Hy.oninput=="function"}fd=dd}else fd=!1;G0=fd&&(!document.documentMode||9<document.documentMode)}function Yy(){xa&&(xa.detachEvent("onpropertychange",z0),ja=xa=null)}function z0(t){if(t.propertyName==="value"&&of(ja)){var e=[];F0(e,ja,t,Hp(t)),L0(qb,e)}}function Bb(t,e,n){t==="focusin"?(Yy(),xa=e,ja=n,xa.attachEvent("onpropertychange",z0)):t==="focusout"&&Yy()}function Fb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return of(ja)}function Gb(t,e){if(t==="click")return of(e)}function zb(t,e){if(t==="input"||t==="change")return of(e)}function Hb(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var yn=typeof Object.is=="function"?Object.is:Hb;function el(t,e){if(yn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var o=n[i];if(!lh.call(e,o)||!yn(t[o],e[o]))return!1}return!0}function Jy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ky(t,e){var n=Jy(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Jy(n)}}function H0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?H0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Y0(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=tc(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=tc(t.document)}return e}function $p(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var Yb=Ni&&"documentMode"in document&&11>=document.documentMode,Ws=null,mh=null,Na=null,gh=!1;function $y(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;gh||Ws==null||Ws!==tc(i)||(i=Ws,"selectionStart"in i&&$p(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Na&&el(Na,i)||(Na=i,i=_c(mh,"onSelect"),0<i.length&&(e=new tf("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Ws)))}function jo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Zs={animationend:jo("Animation","AnimationEnd"),animationiteration:jo("Animation","AnimationIteration"),animationstart:jo("Animation","AnimationStart"),transitionrun:jo("Transition","TransitionRun"),transitionstart:jo("Transition","TransitionStart"),transitioncancel:jo("Transition","TransitionCancel"),transitionend:jo("Transition","TransitionEnd")},hd={},J0={};Ni&&(J0=document.createElement("div").style,"AnimationEvent"in window||(delete Zs.animationend.animation,delete Zs.animationiteration.animation,delete Zs.animationstart.animation),"TransitionEvent"in window||delete Zs.transitionend.transition);function Rs(t){if(hd[t])return hd[t];if(!Zs[t])return t;var e=Zs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in J0)return hd[t]=e[n];return t}var K0=Rs("animationend"),$0=Rs("animationiteration"),Q0=Rs("animationstart"),Jb=Rs("transitionrun"),Kb=Rs("transitionstart"),$b=Rs("transitioncancel"),X0=Rs("transitionend"),W0=new Map,yh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");yh.push("scrollEnd");function zn(t,e){W0.set(t,e),As(e,[t])}var nc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},An=[],js=0,Qp=0;function sf(){for(var t=js,e=Qp=js=0;e<t;){var n=An[e];An[e++]=null;var i=An[e];An[e++]=null;var o=An[e];An[e++]=null;var s=An[e];if(An[e++]=null,i!==null&&o!==null){var r=i.pending;r===null?o.next=o:(o.next=r.next,r.next=o),i.pending=o}s!==0&&Z0(n,o,s)}}function rf(t,e,n,i){An[js++]=t,An[js++]=e,An[js++]=n,An[js++]=i,Qp|=i,t.lanes|=i,t=t.alternate,t!==null&&(t.lanes|=i)}function Xp(t,e,n,i){return rf(t,e,n,i),ic(t)}function ws(t,e){return rf(t,null,null,e),ic(t)}function Z0(t,e,n){t.lanes|=n;var i=t.alternate;i!==null&&(i.lanes|=n);for(var o=!1,s=t.return;s!==null;)s.childLanes|=n,i=s.alternate,i!==null&&(i.childLanes|=n),s.tag===22&&(t=s.stateNode,t===null||t._visibility&1||(o=!0)),t=s,s=s.return;return t.tag===3?(s=t.stateNode,o&&e!==null&&(o=31-pn(n),t=s.hiddenUpdates,i=t[o],i===null?t[o]=[e]:i.push(e),e.lane=n|536870912),s):null}function ic(t){if(50<qa)throw qa=0,Oh=null,Error(B(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var er={};function Qb(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cn(t,e,n,i){return new Qb(t,e,n,i)}function Wp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function wi(t,e){var n=t.alternate;return n===null?(n=cn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function j0(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function Nu(t,e,n,i,o,s){var r=0;if(i=t,typeof t=="function")Wp(t)&&(r=1);else if(typeof t=="string")r=eN(t,n,oi.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case oh:return t=cn(31,n,e,o),t.elementType=oh,t.lanes=s,t;case Js:return ls(n.children,o,s,e);case v0:r=8,o|=24;break;case th:return t=cn(12,n,e,o|2),t.elementType=th,t.lanes=s,t;case nh:return t=cn(13,n,e,o),t.elementType=nh,t.lanes=s,t;case ih:return t=cn(19,n,e,o),t.elementType=ih,t.lanes=s,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ai:r=10;break e;case _0:r=9;break e;case kp:r=11;break e;case Op:r=14;break e;case eo:r=16,i=null;break e}r=29,n=Error(B(130,t===null?"null":typeof t,"")),i=null}return e=cn(r,n,e,o),e.elementType=t,e.type=i,e.lanes=s,e}function ls(t,e,n,i){return t=cn(7,t,i,e),t.lanes=n,t}function pd(t,e,n){return t=cn(6,t,null,e),t.lanes=n,t}function eS(t){var e=cn(18,null,null,0);return e.stateNode=t,e}function md(t,e,n){return e=cn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var Qy=new WeakMap;function xn(t,e){if(typeof t=="object"&&t!==null){var n=Qy.get(t);return n!==void 0?n:(e={value:t,source:e,stack:xy(e)},Qy.set(t,e),e)}return{value:t,source:e,stack:xy(e)}}var tr=[],nr=0,oc=null,tl=0,wn=[],In=0,Io=null,ti=1,ni="";function Ti(t,e){tr[nr++]=tl,tr[nr++]=oc,oc=t,tl=e}function tS(t,e,n){wn[In++]=ti,wn[In++]=ni,wn[In++]=Io,Io=t;var i=ti;t=ni;var o=32-pn(i)-1;i&=~(1<<o),n+=1;var s=32-pn(e)+o;if(30<s){var r=o-o%5;s=(i&(1<<r)-1).toString(32),i>>=r,o-=r,ti=1<<32-pn(e)+o|n<<o|i,ni=s+t}else ti=1<<s|n<<o|i,ni=t}function Zp(t){t.return!==null&&(Ti(t,1),tS(t,1,0))}function jp(t){for(;t===oc;)oc=tr[--nr],tr[nr]=null,tl=tr[--nr],tr[nr]=null;for(;t===Io;)Io=wn[--In],wn[In]=null,ni=wn[--In],wn[In]=null,ti=wn[--In],wn[In]=null}function nS(t,e){wn[In++]=ti,wn[In++]=ni,wn[In++]=Io,ti=e.id,ni=e.overflow,Io=t}var wt=null,Ve=null,de=!1,mo=null,Nn=!1,vh=Error(B(519));function bo(t){var e=Error(B(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw nl(xn(e,t)),vh}function Xy(t){var e=t.stateNode,n=t.type,i=t.memoizedProps;switch(e[Rt]=t,e[jt]=i,n){case"dialog":ae("cancel",e),ae("close",e);break;case"iframe":case"object":case"embed":ae("load",e);break;case"video":case"audio":for(n=0;n<rl.length;n++)ae(rl[n],e);break;case"source":ae("error",e);break;case"img":case"image":case"link":ae("error",e),ae("load",e);break;case"details":ae("toggle",e);break;case"input":ae("invalid",e),D0(e,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":ae("invalid",e);break;case"textarea":ae("invalid",e),V0(e,i.value,i.defaultValue,i.children)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||i.suppressHydrationWarning===!0||OA(e.textContent,n)?(i.popover!=null&&(ae("beforetoggle",e),ae("toggle",e)),i.onScroll!=null&&ae("scroll",e),i.onScrollEnd!=null&&ae("scrollend",e),i.onClick!=null&&(e.onclick=Ci),e=!0):e=!1,e||bo(t,!0)}function Wy(t){for(wt=t.return;wt;)switch(wt.tag){case 5:case 31:case 13:Nn=!1;return;case 27:case 3:Nn=!0;return;default:wt=wt.return}}function Ls(t){if(t!==wt)return!1;if(!de)return Wy(t),de=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||zh(t.type,t.memoizedProps)),n=!n),n&&Ve&&bo(t),Wy(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));Ve=kv(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));Ve=kv(t)}else e===27?(e=Ve,Bo(t.type)?(t=Kh,Kh=null,Ve=t):Ve=e):Ve=wt?Vn(t.stateNode.nextSibling):null;return!0}function hs(){Ve=wt=null,de=!1}function gd(){var t=mo;return t!==null&&(Xt===null?Xt=t:Xt.push.apply(Xt,t),mo=null),t}function nl(t){mo===null?mo=[t]:mo.push(t)}var _h=di(null),Is=null,Ri=null;function io(t,e,n){Ne(_h,e._currentValue),e._currentValue=n}function Ii(t){t._currentValue=_h.current,_t(_h)}function Eh(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Th(t,e,n,i){var o=t.child;for(o!==null&&(o.return=t);o!==null;){var s=o.dependencies;if(s!==null){var r=o.child;s=s.firstContext;e:for(;s!==null;){var a=s;s=o;for(var l=0;l<e.length;l++)if(a.context===e[l]){s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Eh(s.return,n,t),i||(r=null);break e}s=a.next}}else if(o.tag===18){if(r=o.return,r===null)throw Error(B(341));r.lanes|=n,s=r.alternate,s!==null&&(s.lanes|=n),Eh(r,n,t),r=null}else r=o.child;if(r!==null)r.return=o;else for(r=o;r!==null;){if(r===t){r=null;break}if(o=r.sibling,o!==null){o.return=r.return,r=o;break}r=r.return}o=r}}function Or(t,e,n,i){t=null;for(var o=e,s=!1;o!==null;){if(!s){if(o.flags&524288)s=!0;else if(o.flags&262144)break}if(o.tag===10){var r=o.alternate;if(r===null)throw Error(B(387));if(r=r.memoizedProps,r!==null){var a=o.type;yn(o.pendingProps.value,r.value)||(t!==null?t.push(a):t=[a])}}else if(o===Wu.current){if(r=o.alternate,r===null)throw Error(B(387));r.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(t!==null?t.push(ll):t=[ll])}o=o.return}t!==null&&Th(e,t,n,i),e.flags|=262144}function sc(t){for(t=t.firstContext;t!==null;){if(!yn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ps(t){Is=t,Ri=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function bt(t){return iS(Is,t)}function fu(t,e){return Is===null&&ps(t),iS(t,e)}function iS(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},Ri===null){if(t===null)throw Error(B(308));Ri=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else Ri=Ri.next=e;return n}var Xb=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,i){t.push(i)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},Wb=dt.unstable_scheduleCallback,Zb=dt.unstable_NormalPriority,et={$$typeof:Ai,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function em(){return{controller:new Xb,data:new Map,refCount:0}}function xl(t){t.refCount--,t.refCount===0&&Wb(Zb,function(){t.controller.abort()})}var Ma=null,Sh=0,Tr=0,lr=null;function jb(t,e){if(Ma===null){var n=Ma=[];Sh=0,Tr=Rm(),lr={status:"pending",value:void 0,then:function(i){n.push(i)}}}return Sh++,e.then(Zy,Zy),e}function Zy(){if(--Sh===0&&Ma!==null){lr!==null&&(lr.status="fulfilled");var t=Ma;Ma=null,Tr=0,lr=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function ex(t,e){var n=[],i={status:"pending",value:null,reason:null,then:function(o){n.push(o)}};return t.then(function(){i.status="fulfilled",i.value=e;for(var o=0;o<n.length;o++)(0,n[o])(e)},function(o){for(i.status="rejected",i.reason=o,o=0;o<n.length;o++)(0,n[o])(void 0)}),i}var jy=j.S;j.S=function(t,e){yA=dn(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&jb(t,e),jy!==null&&jy(t,e)};var us=di(null);function tm(){var t=us.current;return t!==null?t:Ie.pooledCache}function Mu(t,e){e===null?Ne(us,us.current):Ne(us,e.pool)}function oS(){var t=tm();return t===null?null:{parent:et._currentValue,pool:t}}var qr=Error(B(460)),nm=Error(B(474)),af=Error(B(542)),rc={then:function(){}};function ev(t){return t=t.status,t==="fulfilled"||t==="rejected"}function sS(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(Ci,Ci),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,nv(t),t;default:if(typeof e.status=="string")e.then(Ci,Ci);else{if(t=Ie,t!==null&&100<t.shellSuspendCounter)throw Error(B(482));t=e,t.status="pending",t.then(function(i){if(e.status==="pending"){var o=e;o.status="fulfilled",o.value=i}},function(i){if(e.status==="pending"){var o=e;o.status="rejected",o.reason=i}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,nv(t),t}throw cs=e,qr}}function ns(t){try{var e=t._init;return e(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(cs=n,qr):n}}var cs=null;function tv(){if(cs===null)throw Error(B(459));var t=cs;return cs=null,t}function nv(t){if(t===qr||t===af)throw Error(B(483))}var ur=null,il=0;function du(t){var e=il;return il+=1,ur===null&&(ur=[]),sS(ur,t,e)}function ha(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function hu(t,e){throw e.$$typeof===BI?Error(B(525)):(t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function rS(t){function e(R,E){if(t){var w=R.deletions;w===null?(R.deletions=[E],R.flags|=16):w.push(E)}}function n(R,E){if(!t)return null;for(;E!==null;)e(R,E),E=E.sibling;return null}function i(R){for(var E=new Map;R!==null;)R.key!==null?E.set(R.key,R):E.set(R.index,R),R=R.sibling;return E}function o(R,E){return R=wi(R,E),R.index=0,R.sibling=null,R}function s(R,E,w){return R.index=w,t?(w=R.alternate,w!==null?(w=w.index,w<E?(R.flags|=67108866,E):w):(R.flags|=67108866,E)):(R.flags|=1048576,E)}function r(R){return t&&R.alternate===null&&(R.flags|=67108866),R}function a(R,E,w,D){return E===null||E.tag!==6?(E=pd(w,R.mode,D),E.return=R,E):(E=o(E,w),E.return=R,E)}function l(R,E,w,D){var O=w.type;return O===Js?h(R,E,w.props.children,D,w.key):E!==null&&(E.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===eo&&ns(O)===E.type)?(E=o(E,w.props),ha(E,w),E.return=R,E):(E=Nu(w.type,w.key,w.props,null,R.mode,D),ha(E,w),E.return=R,E)}function c(R,E,w,D){return E===null||E.tag!==4||E.stateNode.containerInfo!==w.containerInfo||E.stateNode.implementation!==w.implementation?(E=md(w,R.mode,D),E.return=R,E):(E=o(E,w.children||[]),E.return=R,E)}function h(R,E,w,D,O){return E===null||E.tag!==7?(E=ls(w,R.mode,D,O),E.return=R,E):(E=o(E,w),E.return=R,E)}function p(R,E,w){if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return E=pd(""+E,R.mode,w),E.return=R,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case su:return w=Nu(E.type,E.key,E.props,null,R.mode,w),ha(w,E),w.return=R,w;case va:return E=md(E,R.mode,w),E.return=R,E;case eo:return E=ns(E),p(R,E,w)}if(_a(E)||ca(E))return E=ls(E,R.mode,w,null),E.return=R,E;if(typeof E.then=="function")return p(R,du(E),w);if(E.$$typeof===Ai)return p(R,fu(R,E),w);hu(R,E)}return null}function m(R,E,w,D){var O=E!==null?E.key:null;if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return O!==null?null:a(R,E,""+w,D);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case su:return w.key===O?l(R,E,w,D):null;case va:return w.key===O?c(R,E,w,D):null;case eo:return w=ns(w),m(R,E,w,D)}if(_a(w)||ca(w))return O!==null?null:h(R,E,w,D,null);if(typeof w.then=="function")return m(R,E,du(w),D);if(w.$$typeof===Ai)return m(R,E,fu(R,w),D);hu(R,w)}return null}function y(R,E,w,D,O){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return R=R.get(w)||null,a(E,R,""+D,O);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case su:return R=R.get(D.key===null?w:D.key)||null,l(E,R,D,O);case va:return R=R.get(D.key===null?w:D.key)||null,c(E,R,D,O);case eo:return D=ns(D),y(R,E,w,D,O)}if(_a(D)||ca(D))return R=R.get(w)||null,h(E,R,D,O,null);if(typeof D.then=="function")return y(R,E,w,du(D),O);if(D.$$typeof===Ai)return y(R,E,w,fu(E,D),O);hu(E,D)}return null}function b(R,E,w,D){for(var O=null,q=null,T=E,_=E=0,A=null;T!==null&&_<w.length;_++){T.index>_?(A=T,T=null):A=T.sibling;var I=m(R,T,w[_],D);if(I===null){T===null&&(T=A);break}t&&T&&I.alternate===null&&e(R,T),E=s(I,E,_),q===null?O=I:q.sibling=I,q=I,T=A}if(_===w.length)return n(R,T),de&&Ti(R,_),O;if(T===null){for(;_<w.length;_++)T=p(R,w[_],D),T!==null&&(E=s(T,E,_),q===null?O=T:q.sibling=T,q=T);return de&&Ti(R,_),O}for(T=i(T);_<w.length;_++)A=y(T,R,_,w[_],D),A!==null&&(t&&A.alternate!==null&&T.delete(A.key===null?_:A.key),E=s(A,E,_),q===null?O=A:q.sibling=A,q=A);return t&&T.forEach(function(M){return e(R,M)}),de&&Ti(R,_),O}function x(R,E,w,D){if(w==null)throw Error(B(151));for(var O=null,q=null,T=E,_=E=0,A=null,I=w.next();T!==null&&!I.done;_++,I=w.next()){T.index>_?(A=T,T=null):A=T.sibling;var M=m(R,T,I.value,D);if(M===null){T===null&&(T=A);break}t&&T&&M.alternate===null&&e(R,T),E=s(M,E,_),q===null?O=M:q.sibling=M,q=M,T=A}if(I.done)return n(R,T),de&&Ti(R,_),O;if(T===null){for(;!I.done;_++,I=w.next())I=p(R,I.value,D),I!==null&&(E=s(I,E,_),q===null?O=I:q.sibling=I,q=I);return de&&Ti(R,_),O}for(T=i(T);!I.done;_++,I=w.next())I=y(T,R,_,I.value,D),I!==null&&(t&&I.alternate!==null&&T.delete(I.key===null?_:I.key),E=s(I,E,_),q===null?O=I:q.sibling=I,q=I);return t&&T.forEach(function(V){return e(R,V)}),de&&Ti(R,_),O}function P(R,E,w,D){if(typeof w=="object"&&w!==null&&w.type===Js&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case su:e:{for(var O=w.key;E!==null;){if(E.key===O){if(O=w.type,O===Js){if(E.tag===7){n(R,E.sibling),D=o(E,w.props.children),D.return=R,R=D;break e}}else if(E.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===eo&&ns(O)===E.type){n(R,E.sibling),D=o(E,w.props),ha(D,w),D.return=R,R=D;break e}n(R,E);break}else e(R,E);E=E.sibling}w.type===Js?(D=ls(w.props.children,R.mode,D,w.key),D.return=R,R=D):(D=Nu(w.type,w.key,w.props,null,R.mode,D),ha(D,w),D.return=R,R=D)}return r(R);case va:e:{for(O=w.key;E!==null;){if(E.key===O)if(E.tag===4&&E.stateNode.containerInfo===w.containerInfo&&E.stateNode.implementation===w.implementation){n(R,E.sibling),D=o(E,w.children||[]),D.return=R,R=D;break e}else{n(R,E);break}else e(R,E);E=E.sibling}D=md(w,R.mode,D),D.return=R,R=D}return r(R);case eo:return w=ns(w),P(R,E,w,D)}if(_a(w))return b(R,E,w,D);if(ca(w)){if(O=ca(w),typeof O!="function")throw Error(B(150));return w=O.call(w),x(R,E,w,D)}if(typeof w.then=="function")return P(R,E,du(w),D);if(w.$$typeof===Ai)return P(R,E,fu(R,w),D);hu(R,w)}return typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint"?(w=""+w,E!==null&&E.tag===6?(n(R,E.sibling),D=o(E,w),D.return=R,R=D):(n(R,E),D=pd(w,R.mode,D),D.return=R,R=D),r(R)):n(R,E)}return function(R,E,w,D){try{il=0;var O=P(R,E,w,D);return ur=null,O}catch(T){if(T===qr||T===af)throw T;var q=cn(29,T,null,R.mode);return q.lanes=D,q.return=R,q}finally{}}}var ms=rS(!0),aS=rS(!1),to=!1;function im(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ah(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function go(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function yo(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,ve&2){var o=i.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),i.pending=e,e=ic(t),Z0(t,null,n),e}return rf(t,i,e,n),ic(t)}function Da(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,R0(t,n)}}function yd(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var o=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var r={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?o=s=r:s=s.next=r,n=n.next}while(n!==null);s===null?o=s=e:s=s.next=e}else o=s=e;n={baseState:i.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var Ch=!1;function Pa(){if(Ch){var t=lr;if(t!==null)throw t}}function Va(t,e,n,i){Ch=!1;var o=t.updateQueue;to=!1;var s=o.firstBaseUpdate,r=o.lastBaseUpdate,a=o.shared.pending;if(a!==null){o.shared.pending=null;var l=a,c=l.next;l.next=null,r===null?s=c:r.next=c,r=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==r&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var p=o.baseState;r=0,h=c=l=null,a=s;do{var m=a.lane&-536870913,y=m!==a.lane;if(y?(fe&m)===m:(i&m)===m){m!==0&&m===Tr&&(Ch=!0),h!==null&&(h=h.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var b=t,x=a;m=e;var P=n;switch(x.tag){case 1:if(b=x.payload,typeof b=="function"){p=b.call(P,p,m);break e}p=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=x.payload,m=typeof b=="function"?b.call(P,p,m):b,m==null)break e;p=ke({},p,m);break e;case 2:to=!0}}m=a.callback,m!==null&&(t.flags|=64,y&&(t.flags|=8192),y=o.callbacks,y===null?o.callbacks=[m]:y.push(m))}else y={lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=y,l=p):h=h.next=y,r|=m;if(a=a.next,a===null){if(a=o.shared.pending,a===null)break;y=a,a=y.next,y.next=null,o.lastBaseUpdate=y,o.shared.pending=null}}while(!0);h===null&&(l=p),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=h,s===null&&(o.shared.lanes=0),No|=r,t.lanes=r,t.memoizedState=p}}function lS(t,e){if(typeof t!="function")throw Error(B(191,t));t.call(e)}function uS(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)lS(n[t],e)}var Sr=di(null),ac=di(0);function iv(t,e){t=Vi,Ne(ac,t),Ne(Sr,e),Vi=t|e.baseLanes}function Rh(){Ne(ac,Vi),Ne(Sr,Sr.current)}function om(){Vi=ac.current,_t(Sr),_t(ac)}var vn=di(null),Pn=null;function oo(t){var e=t.alternate;Ne(Ke,Ke.current&1),Ne(vn,t),Pn===null&&(e===null||Sr.current!==null||e.memoizedState!==null)&&(Pn=t)}function wh(t){Ne(Ke,Ke.current),Ne(vn,t),Pn===null&&(Pn=t)}function cS(t){t.tag===22?(Ne(Ke,Ke.current),Ne(vn,t),Pn===null&&(Pn=t)):so()}function so(){Ne(Ke,Ke.current),Ne(vn,vn.current)}function un(t){_t(vn),Pn===t&&(Pn=null),_t(Ke)}var Ke=di(0);function lc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Yh(n)||Jh(n)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Mi=0,ie=null,Ce=null,Ze=null,uc=!1,cr=!1,gs=!1,cc=0,ol=0,fr=null,tx=0;function He(){throw Error(B(321))}function sm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!yn(t[n],e[n]))return!1;return!0}function rm(t,e,n,i,o,s){return Mi=s,ie=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,j.H=t===null||t.memoizedState===null?FS:ym,gs=!1,s=n(i,o),gs=!1,cr&&(s=dS(e,n,i,o)),fS(t),s}function fS(t){j.H=sl;var e=Ce!==null&&Ce.next!==null;if(Mi=0,Ze=Ce=ie=null,uc=!1,ol=0,fr=null,e)throw Error(B(300));t===null||tt||(t=t.dependencies,t!==null&&sc(t)&&(tt=!0))}function dS(t,e,n,i){ie=t;var o=0;do{if(cr&&(fr=null),ol=0,cr=!1,25<=o)throw Error(B(301));if(o+=1,Ze=Ce=null,t.updateQueue!=null){var s=t.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}j.H=GS,s=e(n,i)}while(cr);return s}function nx(){var t=j.H,e=t.useState()[0];return e=typeof e.then=="function"?Nl(e):e,t=t.useState()[0],(Ce!==null?Ce.memoizedState:null)!==t&&(ie.flags|=1024),e}function am(){var t=cc!==0;return cc=0,t}function lm(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function um(t){if(uc){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}uc=!1}Mi=0,Ze=Ce=ie=null,cr=!1,ol=cc=0,fr=null}function Bt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ze===null?ie.memoizedState=Ze=t:Ze=Ze.next=t,Ze}function $e(){if(Ce===null){var t=ie.alternate;t=t!==null?t.memoizedState:null}else t=Ce.next;var e=Ze===null?ie.memoizedState:Ze.next;if(e!==null)Ze=e,Ce=t;else{if(t===null)throw ie.alternate===null?Error(B(467)):Error(B(310));Ce=t,t={memoizedState:Ce.memoizedState,baseState:Ce.baseState,baseQueue:Ce.baseQueue,queue:Ce.queue,next:null},Ze===null?ie.memoizedState=Ze=t:Ze=Ze.next=t}return Ze}function lf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Nl(t){var e=ol;return ol+=1,fr===null&&(fr=[]),t=sS(fr,t,e),e=ie,(Ze===null?e.memoizedState:Ze.next)===null&&(e=e.alternate,j.H=e===null||e.memoizedState===null?FS:ym),t}function uf(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Nl(t);if(t.$$typeof===Ai)return bt(t)}throw Error(B(438,String(t)))}function cm(t){var e=null,n=ie.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var i=ie.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(e={data:i.data.map(function(o){return o.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=lf(),ie.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),i=0;i<t;i++)n[i]=FI;return e.index++,n}function Di(t,e){return typeof e=="function"?e(t):e}function Du(t){var e=$e();return fm(e,Ce,t)}function fm(t,e,n){var i=t.queue;if(i===null)throw Error(B(311));i.lastRenderedReducer=n;var o=t.baseQueue,s=i.pending;if(s!==null){if(o!==null){var r=o.next;o.next=s.next,s.next=r}e.baseQueue=o=s,i.pending=null}if(s=t.baseState,o===null)t.memoizedState=s;else{e=o.next;var a=r=null,l=null,c=e,h=!1;do{var p=c.lane&-536870913;if(p!==c.lane?(fe&p)===p:(Mi&p)===p){var m=c.revertLane;if(m===0)l!==null&&(l=l.next={lane:0,revertLane:0,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),p===Tr&&(h=!0);else if((Mi&m)===m){c=c.next,m===Tr&&(h=!0);continue}else p={lane:0,revertLane:c.revertLane,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(a=l=p,r=s):l=l.next=p,ie.lanes|=m,No|=m;p=c.action,gs&&n(s,p),s=c.hasEagerState?c.eagerState:n(s,p)}else m={lane:p,revertLane:c.revertLane,gesture:c.gesture,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(a=l=m,r=s):l=l.next=m,ie.lanes|=p,No|=p;c=c.next}while(c!==null&&c!==e);if(l===null?r=s:l.next=a,!yn(s,t.memoizedState)&&(tt=!0,h&&(n=lr,n!==null)))throw n;t.memoizedState=s,t.baseState=r,t.baseQueue=l,i.lastRenderedState=s}return o===null&&(i.lanes=0),[t.memoizedState,i.dispatch]}function vd(t){var e=$e(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var i=n.dispatch,o=n.pending,s=e.memoizedState;if(o!==null){n.pending=null;var r=o=o.next;do s=t(s,r.action),r=r.next;while(r!==o);yn(s,e.memoizedState)||(tt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function hS(t,e,n){var i=ie,o=$e(),s=de;if(s){if(n===void 0)throw Error(B(407));n=n()}else n=e();var r=!yn((Ce||o).memoizedState,n);if(r&&(o.memoizedState=n,tt=!0),o=o.queue,dm(gS.bind(null,i,o,t),[t]),o.getSnapshot!==e||r||Ze!==null&&Ze.memoizedState.tag&1){if(i.flags|=2048,Ar(9,{destroy:void 0},mS.bind(null,i,o,n,e),null),Ie===null)throw Error(B(349));s||Mi&127||pS(i,e,n)}return n}function pS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ie.updateQueue,e===null?(e=lf(),ie.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function mS(t,e,n,i){e.value=n,e.getSnapshot=i,yS(e)&&vS(t)}function gS(t,e,n){return n(function(){yS(e)&&vS(t)})}function yS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!yn(t,n)}catch{return!0}}function vS(t){var e=ws(t,2);e!==null&&Zt(e,t,2)}function Ih(t){var e=Bt();if(typeof t=="function"){var n=t;if(t=n(),gs){ao(!0);try{n()}finally{ao(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Di,lastRenderedState:t},e}function _S(t,e,n,i){return t.baseState=n,fm(t,Ce,typeof i=="function"?i:Di)}function ix(t,e,n,i,o){if(ff(t))throw Error(B(485));if(t=e.action,t!==null){var s={payload:o,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(r){s.listeners.push(r)}};j.T!==null?n(!0):s.isTransition=!1,i(s),n=e.pending,n===null?(s.next=e.pending=s,ES(e,s)):(s.next=n.next,e.pending=n.next=s)}}function ES(t,e){var n=e.action,i=e.payload,o=t.state;if(e.isTransition){var s=j.T,r={};j.T=r;try{var a=n(o,i),l=j.S;l!==null&&l(r,a),ov(t,e,a)}catch(c){bh(t,e,c)}finally{s!==null&&r.types!==null&&(s.types=r.types),j.T=s}}else try{s=n(o,i),ov(t,e,s)}catch(c){bh(t,e,c)}}function ov(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){sv(t,e,i)},function(i){return bh(t,e,i)}):sv(t,e,n)}function sv(t,e,n){e.status="fulfilled",e.value=n,TS(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,ES(t,n)))}function bh(t,e,n){var i=t.pending;if(t.pending=null,i!==null){i=i.next;do e.status="rejected",e.reason=n,TS(e),e=e.next;while(e!==i)}t.action=null}function TS(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function SS(t,e){return e}function rv(t,e){if(de){var n=Ie.formState;if(n!==null){e:{var i=ie;if(de){if(Ve){t:{for(var o=Ve,s=Nn;o.nodeType!==8;){if(!s){o=null;break t}if(o=Vn(o.nextSibling),o===null){o=null;break t}}s=o.data,o=s==="F!"||s==="F"?o:null}if(o){Ve=Vn(o.nextSibling),i=o.data==="F!";break e}}bo(i)}i=!1}i&&(e=n[0])}}return n=Bt(),n.memoizedState=n.baseState=e,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:SS,lastRenderedState:e},n.queue=i,n=OS.bind(null,ie,i),i.dispatch=n,i=Ih(!1),s=gm.bind(null,ie,!1,i.queue),i=Bt(),o={state:e,dispatch:null,action:t,pending:null},i.queue=o,n=ix.bind(null,ie,o,s,n),o.dispatch=n,i.memoizedState=t,[e,n,!1]}function av(t){var e=$e();return AS(e,Ce,t)}function AS(t,e,n){if(e=fm(t,e,SS)[0],t=Du(Di)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var i=Nl(e)}catch(r){throw r===qr?af:r}else i=e;e=$e();var o=e.queue,s=o.dispatch;return n!==e.memoizedState&&(ie.flags|=2048,Ar(9,{destroy:void 0},ox.bind(null,o,n),null)),[i,s,t]}function ox(t,e){t.action=e}function lv(t){var e=$e(),n=Ce;if(n!==null)return AS(e,n,t);$e(),e=e.memoizedState,n=$e();var i=n.queue.dispatch;return n.memoizedState=t,[e,i,!1]}function Ar(t,e,n,i){return t={tag:t,create:n,deps:i,inst:e,next:null},e=ie.updateQueue,e===null&&(e=lf(),ie.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function CS(){return $e().memoizedState}function Pu(t,e,n,i){var o=Bt();ie.flags|=t,o.memoizedState=Ar(1|e,{destroy:void 0},n,i===void 0?null:i)}function cf(t,e,n,i){var o=$e();i=i===void 0?null:i;var s=o.memoizedState.inst;Ce!==null&&i!==null&&sm(i,Ce.memoizedState.deps)?o.memoizedState=Ar(e,s,n,i):(ie.flags|=t,o.memoizedState=Ar(1|e,s,n,i))}function uv(t,e){Pu(8390656,8,t,e)}function dm(t,e){cf(2048,8,t,e)}function sx(t){ie.flags|=4;var e=ie.updateQueue;if(e===null)e=lf(),ie.updateQueue=e,e.events=[t];else{var n=e.events;n===null?e.events=[t]:n.push(t)}}function RS(t){var e=$e().memoizedState;return sx({ref:e,nextImpl:t}),function(){if(ve&2)throw Error(B(440));return e.impl.apply(void 0,arguments)}}function wS(t,e){return cf(4,2,t,e)}function IS(t,e){return cf(4,4,t,e)}function bS(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function xS(t,e,n){n=n!=null?n.concat([t]):null,cf(4,4,bS.bind(null,e,t),n)}function hm(){}function NS(t,e){var n=$e();e=e===void 0?null:e;var i=n.memoizedState;return e!==null&&sm(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function MS(t,e){var n=$e();e=e===void 0?null:e;var i=n.memoizedState;if(e!==null&&sm(e,i[1]))return i[0];if(i=t(),gs){ao(!0);try{t()}finally{ao(!1)}}return n.memoizedState=[i,e],i}function pm(t,e,n){return n===void 0||Mi&1073741824&&!(fe&261930)?t.memoizedState=e:(t.memoizedState=n,t=_A(),ie.lanes|=t,No|=t,n)}function DS(t,e,n,i){return yn(n,e)?n:Sr.current!==null?(t=pm(t,n,i),yn(t,e)||(tt=!0),t):!(Mi&42)||Mi&1073741824&&!(fe&261930)?(tt=!0,t.memoizedState=n):(t=_A(),ie.lanes|=t,No|=t,e)}function PS(t,e,n,i,o){var s=_e.p;_e.p=s!==0&&8>s?s:8;var r=j.T,a={};j.T=a,gm(t,!1,e,n);try{var l=o(),c=j.S;if(c!==null&&c(a,l),l!==null&&typeof l=="object"&&typeof l.then=="function"){var h=ex(l,i);Ua(t,e,h,mn(t))}else Ua(t,e,i,mn(t))}catch(p){Ua(t,e,{then:function(){},status:"rejected",reason:p},mn())}finally{_e.p=s,r!==null&&a.types!==null&&(r.types=a.types),j.T=r}}function rx(){}function xh(t,e,n,i){if(t.tag!==5)throw Error(B(476));var o=VS(t).queue;PS(t,o,e,as,n===null?rx:function(){return US(t),n(i)})}function VS(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:as,baseState:as,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Di,lastRenderedState:as},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Di,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function US(t){var e=VS(t);e.next===null&&(e=t.alternate.memoizedState),Ua(t,e.next.queue,{},mn())}function mm(){return bt(ll)}function LS(){return $e().memoizedState}function kS(){return $e().memoizedState}function ax(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=mn();t=go(n);var i=yo(e,t,n);i!==null&&(Zt(i,e,n),Da(i,e,n)),e={cache:em()},t.payload=e;return}e=e.return}}function lx(t,e,n){var i=mn();n={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},ff(t)?qS(e,n):(n=Xp(t,e,n,i),n!==null&&(Zt(n,t,i),BS(n,e,i)))}function OS(t,e,n){var i=mn();Ua(t,e,n,i)}function Ua(t,e,n,i){var o={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(ff(t))qS(e,o);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var r=e.lastRenderedState,a=s(r,n);if(o.hasEagerState=!0,o.eagerState=a,yn(a,r))return rf(t,e,o,0),Ie===null&&sf(),!1}catch{}finally{}if(n=Xp(t,e,o,i),n!==null)return Zt(n,t,i),BS(n,e,i),!0}return!1}function gm(t,e,n,i){if(i={lane:2,revertLane:Rm(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},ff(t)){if(e)throw Error(B(479))}else e=Xp(t,n,i,2),e!==null&&Zt(e,t,2)}function ff(t){var e=t.alternate;return t===ie||e!==null&&e===ie}function qS(t,e){cr=uc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function BS(t,e,n){if(n&4194048){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,R0(t,n)}}var sl={readContext:bt,use:uf,useCallback:He,useContext:He,useEffect:He,useImperativeHandle:He,useLayoutEffect:He,useInsertionEffect:He,useMemo:He,useReducer:He,useRef:He,useState:He,useDebugValue:He,useDeferredValue:He,useTransition:He,useSyncExternalStore:He,useId:He,useHostTransitionStatus:He,useFormState:He,useActionState:He,useOptimistic:He,useMemoCache:He,useCacheRefresh:He};sl.useEffectEvent=He;var FS={readContext:bt,use:uf,useCallback:function(t,e){return Bt().memoizedState=[t,e===void 0?null:e],t},useContext:bt,useEffect:uv,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,Pu(4194308,4,bS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Pu(4194308,4,t,e)},useInsertionEffect:function(t,e){Pu(4,2,t,e)},useMemo:function(t,e){var n=Bt();e=e===void 0?null:e;var i=t();if(gs){ao(!0);try{t()}finally{ao(!1)}}return n.memoizedState=[i,e],i},useReducer:function(t,e,n){var i=Bt();if(n!==void 0){var o=n(e);if(gs){ao(!0);try{n(e)}finally{ao(!1)}}}else o=e;return i.memoizedState=i.baseState=o,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:o},i.queue=t,t=t.dispatch=lx.bind(null,ie,t),[i.memoizedState,t]},useRef:function(t){var e=Bt();return t={current:t},e.memoizedState=t},useState:function(t){t=Ih(t);var e=t.queue,n=OS.bind(null,ie,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:hm,useDeferredValue:function(t,e){var n=Bt();return pm(n,t,e)},useTransition:function(){var t=Ih(!1);return t=PS.bind(null,ie,t.queue,!0,!1),Bt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var i=ie,o=Bt();if(de){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),Ie===null)throw Error(B(349));fe&127||pS(i,e,n)}o.memoizedState=n;var s={value:n,getSnapshot:e};return o.queue=s,uv(gS.bind(null,i,s,t),[t]),i.flags|=2048,Ar(9,{destroy:void 0},mS.bind(null,i,s,n,e),null),n},useId:function(){var t=Bt(),e=Ie.identifierPrefix;if(de){var n=ni,i=ti;n=(i&~(1<<32-pn(i)-1)).toString(32)+n,e="_"+e+"R_"+n,n=cc++,0<n&&(e+="H"+n.toString(32)),e+="_"}else n=tx++,e="_"+e+"r_"+n.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:mm,useFormState:rv,useActionState:rv,useOptimistic:function(t){var e=Bt();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=gm.bind(null,ie,!0,n),n.dispatch=e,[t,e]},useMemoCache:cm,useCacheRefresh:function(){return Bt().memoizedState=ax.bind(null,ie)},useEffectEvent:function(t){var e=Bt(),n={impl:t};return e.memoizedState=n,function(){if(ve&2)throw Error(B(440));return n.impl.apply(void 0,arguments)}}},ym={readContext:bt,use:uf,useCallback:NS,useContext:bt,useEffect:dm,useImperativeHandle:xS,useInsertionEffect:wS,useLayoutEffect:IS,useMemo:MS,useReducer:Du,useRef:CS,useState:function(){return Du(Di)},useDebugValue:hm,useDeferredValue:function(t,e){var n=$e();return DS(n,Ce.memoizedState,t,e)},useTransition:function(){var t=Du(Di)[0],e=$e().memoizedState;return[typeof t=="boolean"?t:Nl(t),e]},useSyncExternalStore:hS,useId:LS,useHostTransitionStatus:mm,useFormState:av,useActionState:av,useOptimistic:function(t,e){var n=$e();return _S(n,Ce,t,e)},useMemoCache:cm,useCacheRefresh:kS};ym.useEffectEvent=RS;var GS={readContext:bt,use:uf,useCallback:NS,useContext:bt,useEffect:dm,useImperativeHandle:xS,useInsertionEffect:wS,useLayoutEffect:IS,useMemo:MS,useReducer:vd,useRef:CS,useState:function(){return vd(Di)},useDebugValue:hm,useDeferredValue:function(t,e){var n=$e();return Ce===null?pm(n,t,e):DS(n,Ce.memoizedState,t,e)},useTransition:function(){var t=vd(Di)[0],e=$e().memoizedState;return[typeof t=="boolean"?t:Nl(t),e]},useSyncExternalStore:hS,useId:LS,useHostTransitionStatus:mm,useFormState:lv,useActionState:lv,useOptimistic:function(t,e){var n=$e();return Ce!==null?_S(n,Ce,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:cm,useCacheRefresh:kS};GS.useEffectEvent=RS;function _d(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:ke({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Nh={enqueueSetState:function(t,e,n){t=t._reactInternals;var i=mn(),o=go(i);o.payload=e,n!=null&&(o.callback=n),e=yo(t,o,i),e!==null&&(Zt(e,t,i),Da(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=mn(),o=go(i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=yo(t,o,i),e!==null&&(Zt(e,t,i),Da(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=mn(),i=go(n);i.tag=2,e!=null&&(i.callback=e),e=yo(t,i,n),e!==null&&(Zt(e,t,n),Da(e,t,n))}};function cv(t,e,n,i,o,s,r){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,r):e.prototype&&e.prototype.isPureReactComponent?!el(n,i)||!el(o,s):!0}function fv(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Nh.enqueueReplaceState(e,e.state,null)}function ys(t,e){var n=e;if("ref"in e){n={};for(var i in e)i!=="ref"&&(n[i]=e[i])}if(t=t.defaultProps){n===e&&(n=ke({},n));for(var o in t)n[o]===void 0&&(n[o]=t[o])}return n}function zS(t){nc(t)}function HS(t){console.error(t)}function YS(t){nc(t)}function fc(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(i){setTimeout(function(){throw i})}}function dv(t,e,n){try{var i=t.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function Mh(t,e,n){return n=go(n),n.tag=3,n.payload={element:null},n.callback=function(){fc(t,e)},n}function JS(t){return t=go(t),t.tag=3,t}function KS(t,e,n,i){var o=n.type.getDerivedStateFromError;if(typeof o=="function"){var s=i.value;t.payload=function(){return o(s)},t.callback=function(){dv(e,n,i)}}var r=n.stateNode;r!==null&&typeof r.componentDidCatch=="function"&&(t.callback=function(){dv(e,n,i),typeof o!="function"&&(vo===null?vo=new Set([this]):vo.add(this));var a=i.stack;this.componentDidCatch(i.value,{componentStack:a!==null?a:""})})}function ux(t,e,n,i,o){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(e=n.alternate,e!==null&&Or(e,n,o,!0),n=vn.current,n!==null){switch(n.tag){case 31:case 13:return Pn===null?gc():n.alternate===null&&Ye===0&&(Ye=3),n.flags&=-257,n.flags|=65536,n.lanes=o,i===rc?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([i]):e.add(i),Nd(t,i,o)),!1;case 22:return n.flags|=65536,i===rc?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([i]):n.add(i)),Nd(t,i,o)),!1}throw Error(B(435,n.tag))}return Nd(t,i,o),gc(),!1}if(de)return e=vn.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=o,i!==vh&&(t=Error(B(422),{cause:i}),nl(xn(t,n)))):(i!==vh&&(e=Error(B(423),{cause:i}),nl(xn(e,n))),t=t.current.alternate,t.flags|=65536,o&=-o,t.lanes|=o,i=xn(i,n),o=Mh(t.stateNode,i,o),yd(t,o),Ye!==4&&(Ye=2)),!1;var s=Error(B(520),{cause:i});if(s=xn(s,n),Oa===null?Oa=[s]:Oa.push(s),Ye!==4&&(Ye=2),e===null)return!0;i=xn(i,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=o&-o,n.lanes|=t,t=Mh(n.stateNode,i,t),yd(n,t),!1;case 1:if(e=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(vo===null||!vo.has(s))))return n.flags|=65536,o&=-o,n.lanes|=o,o=JS(o),KS(o,t,n,i),yd(n,o),!1}n=n.return}while(n!==null);return!1}var vm=Error(B(461)),tt=!1;function At(t,e,n,i){e.child=t===null?aS(e,null,n,i):ms(e,t.child,n,i)}function hv(t,e,n,i,o){n=n.render;var s=e.ref;if("ref"in i){var r={};for(var a in i)a!=="ref"&&(r[a]=i[a])}else r=i;return ps(e),i=rm(t,e,n,r,s,o),a=am(),t!==null&&!tt?(lm(t,e,o),Pi(t,e,o)):(de&&a&&Zp(e),e.flags|=1,At(t,e,i,o),e.child)}function pv(t,e,n,i,o){if(t===null){var s=n.type;return typeof s=="function"&&!Wp(s)&&s.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=s,$S(t,e,s,i,o)):(t=Nu(n.type,null,i,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!_m(t,o)){var r=s.memoizedProps;if(n=n.compare,n=n!==null?n:el,n(r,i)&&t.ref===e.ref)return Pi(t,e,o)}return e.flags|=1,t=wi(s,i),t.ref=e.ref,t.return=e,e.child=t}function $S(t,e,n,i,o){if(t!==null){var s=t.memoizedProps;if(el(s,i)&&t.ref===e.ref)if(tt=!1,e.pendingProps=i=s,_m(t,o))t.flags&131072&&(tt=!0);else return e.lanes=t.lanes,Pi(t,e,o)}return Dh(t,e,n,i,o)}function QS(t,e,n,i){var o=i.children,s=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if(e.flags&128){if(s=s!==null?s.baseLanes|n:n,t!==null){for(i=e.child=t.child,o=0;i!==null;)o=o|i.lanes|i.childLanes,i=i.sibling;i=o&~s}else i=0,e.child=null;return mv(t,e,s,n,i)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&Mu(e,s!==null?s.cachePool:null),s!==null?iv(e,s):Rh(),cS(e);else return i=e.lanes=536870912,mv(t,e,s!==null?s.baseLanes|n:n,n,i)}else s!==null?(Mu(e,s.cachePool),iv(e,s),so(),e.memoizedState=null):(t!==null&&Mu(e,null),Rh(),so());return At(t,e,o,n),e.child}function Ta(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function mv(t,e,n,i,o){var s=tm();return s=s===null?null:{parent:et._currentValue,pool:s},e.memoizedState={baseLanes:n,cachePool:s},t!==null&&Mu(e,null),Rh(),cS(e),t!==null&&Or(t,e,i,!0),e.childLanes=o,null}function Vu(t,e){return e=dc({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function gv(t,e,n){return ms(e,t.child,null,n),t=Vu(e,e.pendingProps),t.flags|=2,un(e),e.memoizedState=null,t}function cx(t,e,n){var i=e.pendingProps,o=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(de){if(i.mode==="hidden")return t=Vu(e,i),e.lanes=536870912,Ta(null,t);if(wh(e),(t=Ve)?(t=FA(t,Nn),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Io!==null?{id:ti,overflow:ni}:null,retryLane:536870912,hydrationErrors:null},n=eS(t),n.return=e,e.child=n,wt=e,Ve=null)):t=null,t===null)throw bo(e);return e.lanes=536870912,null}return Vu(e,i)}var s=t.memoizedState;if(s!==null){var r=s.dehydrated;if(wh(e),o)if(e.flags&256)e.flags&=-257,e=gv(t,e,n);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(B(558));else if(tt||Or(t,e,n,!1),o=(n&t.childLanes)!==0,tt||o){if(i=Ie,i!==null&&(r=w0(i,n),r!==0&&r!==s.retryLane))throw s.retryLane=r,ws(t,r),Zt(i,t,r),vm;gc(),e=gv(t,e,n)}else t=s.treeContext,Ve=Vn(r.nextSibling),wt=e,de=!0,mo=null,Nn=!1,t!==null&&nS(e,t),e=Vu(e,i),e.flags|=4096;return e}return t=wi(t.child,{mode:i.mode,children:i.children}),t.ref=e.ref,e.child=t,t.return=e,t}function Uu(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(B(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function Dh(t,e,n,i,o){return ps(e),n=rm(t,e,n,i,void 0,o),i=am(),t!==null&&!tt?(lm(t,e,o),Pi(t,e,o)):(de&&i&&Zp(e),e.flags|=1,At(t,e,n,o),e.child)}function yv(t,e,n,i,o,s){return ps(e),e.updateQueue=null,n=dS(e,i,n,o),fS(t),i=am(),t!==null&&!tt?(lm(t,e,s),Pi(t,e,s)):(de&&i&&Zp(e),e.flags|=1,At(t,e,n,s),e.child)}function vv(t,e,n,i,o){if(ps(e),e.stateNode===null){var s=er,r=n.contextType;typeof r=="object"&&r!==null&&(s=bt(r)),s=new n(i,s),e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Nh,e.stateNode=s,s._reactInternals=e,s=e.stateNode,s.props=i,s.state=e.memoizedState,s.refs={},im(e),r=n.contextType,s.context=typeof r=="object"&&r!==null?bt(r):er,s.state=e.memoizedState,r=n.getDerivedStateFromProps,typeof r=="function"&&(_d(e,n,r,i),s.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(r=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),r!==s.state&&Nh.enqueueReplaceState(s,s.state,null),Va(e,i,s,o),Pa(),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308),i=!0}else if(t===null){s=e.stateNode;var a=e.memoizedProps,l=ys(n,a);s.props=l;var c=s.context,h=n.contextType;r=er,typeof h=="object"&&h!==null&&(r=bt(h));var p=n.getDerivedStateFromProps;h=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function",a=e.pendingProps!==a,h||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a||c!==r)&&fv(e,s,i,r),to=!1;var m=e.memoizedState;s.state=m,Va(e,i,s,o),Pa(),c=e.memoizedState,a||m!==c||to?(typeof p=="function"&&(_d(e,n,p,i),c=e.memoizedState),(l=to||cv(e,n,l,i,m,c,r))?(h||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=c),s.props=i,s.state=c,s.context=r,i=l):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{s=e.stateNode,Ah(t,e),r=e.memoizedProps,h=ys(n,r),s.props=h,p=e.pendingProps,m=s.context,c=n.contextType,l=er,typeof c=="object"&&c!==null&&(l=bt(c)),a=n.getDerivedStateFromProps,(c=typeof a=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(r!==p||m!==l)&&fv(e,s,i,l),to=!1,m=e.memoizedState,s.state=m,Va(e,i,s,o),Pa();var y=e.memoizedState;r!==p||m!==y||to||t!==null&&t.dependencies!==null&&sc(t.dependencies)?(typeof a=="function"&&(_d(e,n,a,i),y=e.memoizedState),(h=to||cv(e,n,h,i,m,y,l)||t!==null&&t.dependencies!==null&&sc(t.dependencies))?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,y,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,y,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||r===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||r===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=y),s.props=i,s.state=y,s.context=l,i=h):(typeof s.componentDidUpdate!="function"||r===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||r===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),i=!1)}return s=i,Uu(t,e),i=(e.flags&128)!==0,s||i?(s=e.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:s.render(),e.flags|=1,t!==null&&i?(e.child=ms(e,t.child,null,o),e.child=ms(e,null,n,o)):At(t,e,n,o),e.memoizedState=s.state,t=e.child):t=Pi(t,e,o),t}function _v(t,e,n,i){return hs(),e.flags|=256,At(t,e,n,i),e.child}var Ed={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Td(t){return{baseLanes:t,cachePool:oS()}}function Sd(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=fn),t}function XS(t,e,n){var i=e.pendingProps,o=!1,s=(e.flags&128)!==0,r;if((r=s)||(r=t!==null&&t.memoizedState===null?!1:(Ke.current&2)!==0),r&&(o=!0,e.flags&=-129),r=(e.flags&32)!==0,e.flags&=-33,t===null){if(de){if(o?oo(e):so(),(t=Ve)?(t=FA(t,Nn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Io!==null?{id:ti,overflow:ni}:null,retryLane:536870912,hydrationErrors:null},n=eS(t),n.return=e,e.child=n,wt=e,Ve=null)):t=null,t===null)throw bo(e);return Jh(t)?e.lanes=32:e.lanes=536870912,null}var a=i.children;return i=i.fallback,o?(so(),o=e.mode,a=dc({mode:"hidden",children:a},o),i=ls(i,o,n,null),a.return=e,i.return=e,a.sibling=i,e.child=a,i=e.child,i.memoizedState=Td(n),i.childLanes=Sd(t,r,n),e.memoizedState=Ed,Ta(null,i)):(oo(e),Ph(e,a))}var l=t.memoizedState;if(l!==null&&(a=l.dehydrated,a!==null)){if(s)e.flags&256?(oo(e),e.flags&=-257,e=Ad(t,e,n)):e.memoizedState!==null?(so(),e.child=t.child,e.flags|=128,e=null):(so(),a=i.fallback,o=e.mode,i=dc({mode:"visible",children:i.children},o),a=ls(a,o,n,null),a.flags|=2,i.return=e,a.return=e,i.sibling=a,e.child=i,ms(e,t.child,null,n),i=e.child,i.memoizedState=Td(n),i.childLanes=Sd(t,r,n),e.memoizedState=Ed,e=Ta(null,i));else if(oo(e),Jh(a)){if(r=a.nextSibling&&a.nextSibling.dataset,r)var c=r.dgst;r=c,i=Error(B(419)),i.stack="",i.digest=r,nl({value:i,source:null,stack:null}),e=Ad(t,e,n)}else if(tt||Or(t,e,n,!1),r=(n&t.childLanes)!==0,tt||r){if(r=Ie,r!==null&&(i=w0(r,n),i!==0&&i!==l.retryLane))throw l.retryLane=i,ws(t,i),Zt(r,t,i),vm;Yh(a)||gc(),e=Ad(t,e,n)}else Yh(a)?(e.flags|=192,e.child=t.child,e=null):(t=l.treeContext,Ve=Vn(a.nextSibling),wt=e,de=!0,mo=null,Nn=!1,t!==null&&nS(e,t),e=Ph(e,i.children),e.flags|=4096);return e}return o?(so(),a=i.fallback,o=e.mode,l=t.child,c=l.sibling,i=wi(l,{mode:"hidden",children:i.children}),i.subtreeFlags=l.subtreeFlags&65011712,c!==null?a=wi(c,a):(a=ls(a,o,n,null),a.flags|=2),a.return=e,i.return=e,i.sibling=a,e.child=i,Ta(null,i),i=e.child,a=t.child.memoizedState,a===null?a=Td(n):(o=a.cachePool,o!==null?(l=et._currentValue,o=o.parent!==l?{parent:l,pool:l}:o):o=oS(),a={baseLanes:a.baseLanes|n,cachePool:o}),i.memoizedState=a,i.childLanes=Sd(t,r,n),e.memoizedState=Ed,Ta(t.child,i)):(oo(e),n=t.child,t=n.sibling,n=wi(n,{mode:"visible",children:i.children}),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n)}function Ph(t,e){return e=dc({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function dc(t,e){return t=cn(22,t,null,e),t.lanes=0,t}function Ad(t,e,n){return ms(e,t.child,null,n),t=Ph(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Ev(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Eh(t.return,e,n)}function Cd(t,e,n,i,o,s){var r=t.memoizedState;r===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:o,treeForkCount:s}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=n,r.tailMode=o,r.treeForkCount=s)}function WS(t,e,n){var i=e.pendingProps,o=i.revealOrder,s=i.tail;i=i.children;var r=Ke.current,a=(r&2)!==0;if(a?(r=r&1|2,e.flags|=128):r&=1,Ne(Ke,r),At(t,e,i,n),i=de?tl:0,!a&&t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ev(t,n,e);else if(t.tag===19)Ev(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(o){case"forwards":for(n=e.child,o=null;n!==null;)t=n.alternate,t!==null&&lc(t)===null&&(o=n),n=n.sibling;n=o,n===null?(o=e.child,e.child=null):(o=n.sibling,n.sibling=null),Cd(e,!1,o,n,s,i);break;case"backwards":case"unstable_legacy-backwards":for(n=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&lc(t)===null){e.child=o;break}t=o.sibling,o.sibling=n,n=o,o=t}Cd(e,!0,n,null,s,i);break;case"together":Cd(e,!1,null,null,void 0,i);break;default:e.memoizedState=null}return e.child}function Pi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),No|=e.lanes,!(n&e.childLanes))if(t!==null){if(Or(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=wi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=wi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function _m(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&sc(t)))}function fx(t,e,n){switch(e.tag){case 3:Zu(e,e.stateNode.containerInfo),io(e,et,t.memoizedState.cache),hs();break;case 27:case 5:ah(e);break;case 4:Zu(e,e.stateNode.containerInfo);break;case 10:io(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,wh(e),null;break;case 13:var i=e.memoizedState;if(i!==null)return i.dehydrated!==null?(oo(e),e.flags|=128,null):n&e.child.childLanes?XS(t,e,n):(oo(e),t=Pi(t,e,n),t!==null?t.sibling:null);oo(e);break;case 19:var o=(t.flags&128)!==0;if(i=(n&e.childLanes)!==0,i||(Or(t,e,n,!1),i=(n&e.childLanes)!==0),o){if(i)return WS(t,e,n);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Ne(Ke,Ke.current),i)break;return null;case 22:return e.lanes=0,QS(t,e,n,e.pendingProps);case 24:io(e,et,t.memoizedState.cache)}return Pi(t,e,n)}function ZS(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)tt=!0;else{if(!_m(t,n)&&!(e.flags&128))return tt=!1,fx(t,e,n);tt=!!(t.flags&131072)}else tt=!1,de&&e.flags&1048576&&tS(e,tl,e.index);switch(e.lanes=0,e.tag){case 16:e:{var i=e.pendingProps;if(t=ns(e.elementType),e.type=t,typeof t=="function")Wp(t)?(i=ys(t,i),e.tag=1,e=vv(null,e,t,i,n)):(e.tag=0,e=Dh(null,e,t,i,n));else{if(t!=null){var o=t.$$typeof;if(o===kp){e.tag=11,e=hv(null,e,t,i,n);break e}else if(o===Op){e.tag=14,e=pv(null,e,t,i,n);break e}}throw e=sh(t)||t,Error(B(306,e,""))}}return e;case 0:return Dh(t,e,e.type,e.pendingProps,n);case 1:return i=e.type,o=ys(i,e.pendingProps),vv(t,e,i,o,n);case 3:e:{if(Zu(e,e.stateNode.containerInfo),t===null)throw Error(B(387));i=e.pendingProps;var s=e.memoizedState;o=s.element,Ah(t,e),Va(e,i,null,n);var r=e.memoizedState;if(i=r.cache,io(e,et,i),i!==s.cache&&Th(e,[et],n,!0),Pa(),i=r.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:r.cache},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){e=_v(t,e,i,n);break e}else if(i!==o){o=xn(Error(B(424)),e),nl(o),e=_v(t,e,i,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Ve=Vn(t.firstChild),wt=e,de=!0,mo=null,Nn=!0,n=aS(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(hs(),i===o){e=Pi(t,e,n);break e}At(t,e,i,n)}e=e.child}return e;case 26:return Uu(t,e),t===null?(n=Bv(e.type,null,e.pendingProps,null))?e.memoizedState=n:de||(n=e.type,t=e.pendingProps,i=Ec(po.current).createElement(n),i[Rt]=e,i[jt]=t,xt(i,n,t),yt(i),e.stateNode=i):e.memoizedState=Bv(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return ah(e),t===null&&de&&(i=e.stateNode=GA(e.type,e.pendingProps,po.current),wt=e,Nn=!0,o=Ve,Bo(e.type)?(Kh=o,Ve=Vn(i.firstChild)):Ve=o),At(t,e,e.pendingProps.children,n),Uu(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&de&&((o=i=Ve)&&(i=Fx(i,e.type,e.pendingProps,Nn),i!==null?(e.stateNode=i,wt=e,Ve=Vn(i.firstChild),Nn=!1,o=!0):o=!1),o||bo(e)),ah(e),o=e.type,s=e.pendingProps,r=t!==null?t.memoizedProps:null,i=s.children,zh(o,s)?i=null:r!==null&&zh(o,r)&&(e.flags|=32),e.memoizedState!==null&&(o=rm(t,e,nx,null,null,n),ll._currentValue=o),Uu(t,e),At(t,e,i,n),e.child;case 6:return t===null&&de&&((t=n=Ve)&&(n=Gx(n,e.pendingProps,Nn),n!==null?(e.stateNode=n,wt=e,Ve=null,t=!0):t=!1),t||bo(e)),null;case 13:return XS(t,e,n);case 4:return Zu(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=ms(e,null,i,n):At(t,e,i,n),e.child;case 11:return hv(t,e,e.type,e.pendingProps,n);case 7:return At(t,e,e.pendingProps,n),e.child;case 8:return At(t,e,e.pendingProps.children,n),e.child;case 12:return At(t,e,e.pendingProps.children,n),e.child;case 10:return i=e.pendingProps,io(e,e.type,i.value),At(t,e,i.children,n),e.child;case 9:return o=e.type._context,i=e.pendingProps.children,ps(e),o=bt(o),i=i(o),e.flags|=1,At(t,e,i,n),e.child;case 14:return pv(t,e,e.type,e.pendingProps,n);case 15:return $S(t,e,e.type,e.pendingProps,n);case 19:return WS(t,e,n);case 31:return cx(t,e,n);case 22:return QS(t,e,n,e.pendingProps);case 24:return ps(e),i=bt(et),t===null?(o=tm(),o===null&&(o=Ie,s=em(),o.pooledCache=s,s.refCount++,s!==null&&(o.pooledCacheLanes|=n),o=s),e.memoizedState={parent:i,cache:o},im(e),io(e,et,o)):(t.lanes&n&&(Ah(t,e),Va(e,null,null,n),Pa()),o=t.memoizedState,s=e.memoizedState,o.parent!==i?(o={parent:i,cache:i},e.memoizedState=o,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=o),io(e,et,i)):(i=s.cache,io(e,et,i),i!==o.cache&&Th(e,[et],n,!0))),At(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(B(156,e.tag))}function yi(t){t.flags|=4}function Rd(t,e,n,i,o){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(o&335544128)===o)if(t.stateNode.complete)t.flags|=8192;else if(SA())t.flags|=8192;else throw cs=rc,nm}else t.flags&=-16777217}function Tv(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!YA(e))if(SA())t.flags|=8192;else throw cs=rc,nm}function pu(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?A0():536870912,t.lanes|=e,Cr|=e)}function pa(t,e){if(!de)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function De(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var o=t.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags&65011712,i|=o.flags&65011712,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags,i|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function dx(t,e,n){var i=e.pendingProps;switch(jp(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return De(e),null;case 1:return De(e),null;case 3:return n=e.stateNode,i=null,t!==null&&(i=t.memoizedState.cache),e.memoizedState.cache!==i&&(e.flags|=2048),Ii(et),vr(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Ls(e)?yi(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,gd())),De(e),null;case 26:var o=e.type,s=e.memoizedState;return t===null?(yi(e),s!==null?(De(e),Tv(e,s)):(De(e),Rd(e,o,null,i,n))):s?s!==t.memoizedState?(yi(e),De(e),Tv(e,s)):(De(e),e.flags&=-16777217):(t=t.memoizedProps,t!==i&&yi(e),De(e),Rd(e,o,t,i,n)),null;case 27:if(ju(e),n=po.current,o=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&yi(e);else{if(!i){if(e.stateNode===null)throw Error(B(166));return De(e),null}t=oi.current,Ls(e)?Xy(e):(t=GA(o,i,n),e.stateNode=t,yi(e))}return De(e),null;case 5:if(ju(e),o=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&yi(e);else{if(!i){if(e.stateNode===null)throw Error(B(166));return De(e),null}if(s=oi.current,Ls(e))Xy(e);else{var r=Ec(po.current);switch(s){case 1:s=r.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:s=r.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":s=r.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":s=r.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":s=r.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof i.is=="string"?r.createElement("select",{is:i.is}):r.createElement("select"),i.multiple?s.multiple=!0:i.size&&(s.size=i.size);break;default:s=typeof i.is=="string"?r.createElement(o,{is:i.is}):r.createElement(o)}}s[Rt]=e,s[jt]=i;e:for(r=e.child;r!==null;){if(r.tag===5||r.tag===6)s.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break e;for(;r.sibling===null;){if(r.return===null||r.return===e)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}e.stateNode=s;e:switch(xt(s,o,i),o){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&yi(e)}}return De(e),Rd(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,n),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==i&&yi(e);else{if(typeof i!="string"&&e.stateNode===null)throw Error(B(166));if(t=po.current,Ls(e)){if(t=e.stateNode,n=e.memoizedProps,i=null,o=wt,o!==null)switch(o.tag){case 27:case 5:i=o.memoizedProps}t[Rt]=e,t=!!(t.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||OA(t.nodeValue,n)),t||bo(e,!0)}else t=Ec(t).createTextNode(i),t[Rt]=e,e.stateNode=t}return De(e),null;case 31:if(n=e.memoizedState,t===null||t.memoizedState!==null){if(i=Ls(e),n!==null){if(t===null){if(!i)throw Error(B(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(557));t[Rt]=e}else hs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;De(e),t=!1}else n=gd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return e.flags&256?(un(e),e):(un(e),null);if(e.flags&128)throw Error(B(558))}return De(e),null;case 13:if(i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(o=Ls(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(B(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(B(317));o[Rt]=e}else hs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;De(e),o=!1}else o=gd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=o),o=!0;if(!o)return e.flags&256?(un(e),e):(un(e),null)}return un(e),e.flags&128?(e.lanes=n,e):(n=i!==null,t=t!==null&&t.memoizedState!==null,n&&(i=e.child,o=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(o=i.alternate.memoizedState.cachePool.pool),s=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==o&&(i.flags|=2048)),n!==t&&n&&(e.child.flags|=8192),pu(e,e.updateQueue),De(e),null);case 4:return vr(),t===null&&wm(e.stateNode.containerInfo),De(e),null;case 10:return Ii(e.type),De(e),null;case 19:if(_t(Ke),i=e.memoizedState,i===null)return De(e),null;if(o=(e.flags&128)!==0,s=i.rendering,s===null)if(o)pa(i,!1);else{if(Ye!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=lc(t),s!==null){for(e.flags|=128,pa(i,!1),t=s.updateQueue,e.updateQueue=t,pu(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)j0(n,t),n=n.sibling;return Ne(Ke,Ke.current&1|2),de&&Ti(e,i.treeForkCount),e.child}t=t.sibling}i.tail!==null&&dn()>pc&&(e.flags|=128,o=!0,pa(i,!1),e.lanes=4194304)}else{if(!o)if(t=lc(s),t!==null){if(e.flags|=128,o=!0,t=t.updateQueue,e.updateQueue=t,pu(e,t),pa(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!de)return De(e),null}else 2*dn()-i.renderingStartTime>pc&&n!==536870912&&(e.flags|=128,o=!0,pa(i,!1),e.lanes=4194304);i.isBackwards?(s.sibling=e.child,e.child=s):(t=i.last,t!==null?t.sibling=s:e.child=s,i.last=s)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=dn(),t.sibling=null,n=Ke.current,Ne(Ke,o?n&1|2:n&1),de&&Ti(e,i.treeForkCount),t):(De(e),null);case 22:case 23:return un(e),om(),i=e.memoizedState!==null,t!==null?t.memoizedState!==null!==i&&(e.flags|=8192):i&&(e.flags|=8192),i?n&536870912&&!(e.flags&128)&&(De(e),e.subtreeFlags&6&&(e.flags|=8192)):De(e),n=e.updateQueue,n!==null&&pu(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),i=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),i!==n&&(e.flags|=2048),t!==null&&_t(us),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),Ii(et),De(e),null;case 25:return null;case 30:return null}throw Error(B(156,e.tag))}function hx(t,e){switch(jp(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ii(et),vr(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return ju(e),null;case 31:if(e.memoizedState!==null){if(un(e),e.alternate===null)throw Error(B(340));hs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(un(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));hs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return _t(Ke),null;case 4:return vr(),null;case 10:return Ii(e.type),null;case 22:case 23:return un(e),om(),t!==null&&_t(us),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return Ii(et),null;case 25:return null;default:return null}}function jS(t,e){switch(jp(e),e.tag){case 3:Ii(et),vr();break;case 26:case 27:case 5:ju(e);break;case 4:vr();break;case 31:e.memoizedState!==null&&un(e);break;case 13:un(e);break;case 19:_t(Ke);break;case 10:Ii(e.type);break;case 22:case 23:un(e),om(),t!==null&&_t(us);break;case 24:Ii(et)}}function Ml(t,e){try{var n=e.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var o=i.next;n=o;do{if((n.tag&t)===t){i=void 0;var s=n.create,r=n.inst;i=s(),r.destroy=i}n=n.next}while(n!==o)}}catch(a){Se(e,e.return,a)}}function xo(t,e,n){try{var i=e.updateQueue,o=i!==null?i.lastEffect:null;if(o!==null){var s=o.next;i=s;do{if((i.tag&t)===t){var r=i.inst,a=r.destroy;if(a!==void 0){r.destroy=void 0,o=e;var l=n,c=a;try{c()}catch(h){Se(o,l,h)}}}i=i.next}while(i!==s)}}catch(h){Se(e,e.return,h)}}function eA(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{uS(e,n)}catch(i){Se(t,t.return,i)}}}function tA(t,e,n){n.props=ys(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(i){Se(t,e,i)}}function La(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var i=t.stateNode;break;case 30:i=t.stateNode;break;default:i=t.stateNode}typeof n=="function"?t.refCleanup=n(i):n.current=i}}catch(o){Se(t,e,o)}}function ii(t,e){var n=t.ref,i=t.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(o){Se(t,e,o)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(o){Se(t,e,o)}else n.current=null}function nA(t){var e=t.type,n=t.memoizedProps,i=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(o){Se(t,t.return,o)}}function wd(t,e,n){try{var i=t.stateNode;Ux(i,t.type,n,e),i[jt]=e}catch(o){Se(t,t.return,o)}}function iA(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Bo(t.type)||t.tag===4}function Id(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||iA(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Bo(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Vh(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ci));else if(i!==4&&(i===27&&Bo(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(Vh(t,e,n),t=t.sibling;t!==null;)Vh(t,e,n),t=t.sibling}function hc(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(i===27&&Bo(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(hc(t,e,n),t=t.sibling;t!==null;)hc(t,e,n),t=t.sibling}function oA(t){var e=t.stateNode,n=t.memoizedProps;try{for(var i=t.type,o=e.attributes;o.length;)e.removeAttributeNode(o[0]);xt(e,i,n),e[Rt]=t,e[jt]=n}catch(s){Se(t,t.return,s)}}var Si=!1,je=!1,bd=!1,Sv=typeof WeakSet=="function"?WeakSet:Set,mt=null;function px(t,e){if(t=t.containerInfo,Fh=Cc,t=Y0(t),$p(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var o=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var r=0,a=-1,l=-1,c=0,h=0,p=t,m=null;t:for(;;){for(var y;p!==n||o!==0&&p.nodeType!==3||(a=r+o),p!==s||i!==0&&p.nodeType!==3||(l=r+i),p.nodeType===3&&(r+=p.nodeValue.length),(y=p.firstChild)!==null;)m=p,p=y;for(;;){if(p===t)break t;if(m===n&&++c===o&&(a=r),m===s&&++h===i&&(l=r),(y=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=y}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Gh={focusedElem:t,selectionRange:n},Cc=!1,mt=e;mt!==null;)if(e=mt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,mt=t;else for(;mt!==null;){switch(e=mt,s=e.alternate,t=e.flags,e.tag){case 0:if(t&4&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)o=t[n],o.ref.impl=o.nextImpl;break;case 11:case 15:break;case 1:if(t&1024&&s!==null){t=void 0,n=e,o=s.memoizedProps,s=s.memoizedState,i=n.stateNode;try{var b=ys(n.type,o);t=i.getSnapshotBeforeUpdate(b,s),i.__reactInternalSnapshotBeforeUpdate=t}catch(x){Se(n,n.return,x)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)Hh(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Hh(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(B(163))}if(t=e.sibling,t!==null){t.return=e.return,mt=t;break}mt=e.return}}function sA(t,e,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:_i(t,n),i&4&&Ml(5,n);break;case 1:if(_i(t,n),i&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(r){Se(n,n.return,r)}else{var o=ys(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(o,e,t.__reactInternalSnapshotBeforeUpdate)}catch(r){Se(n,n.return,r)}}i&64&&eA(n),i&512&&La(n,n.return);break;case 3:if(_i(t,n),i&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{uS(t,e)}catch(r){Se(n,n.return,r)}}break;case 27:e===null&&i&4&&oA(n);case 26:case 5:_i(t,n),e===null&&i&4&&nA(n),i&512&&La(n,n.return);break;case 12:_i(t,n);break;case 31:_i(t,n),i&4&&lA(t,n);break;case 13:_i(t,n),i&4&&uA(t,n),i&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=Ax.bind(null,n),zx(t,n))));break;case 22:if(i=n.memoizedState!==null||Si,!i){e=e!==null&&e.memoizedState!==null||je,o=Si;var s=je;Si=i,(je=e)&&!s?Ei(t,n,(n.subtreeFlags&8772)!==0):_i(t,n),Si=o,je=s}break;case 30:break;default:_i(t,n)}}function rA(t){var e=t.alternate;e!==null&&(t.alternate=null,rA(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&Gp(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var qe=null,Qt=!1;function vi(t,e,n){for(n=n.child;n!==null;)aA(t,e,n),n=n.sibling}function aA(t,e,n){if(hn&&typeof hn.onCommitFiberUnmount=="function")try{hn.onCommitFiberUnmount(Cl,n)}catch{}switch(n.tag){case 26:je||ii(n,e),vi(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:je||ii(n,e);var i=qe,o=Qt;Bo(n.type)&&(qe=n.stateNode,Qt=!1),vi(t,e,n),Ba(n.stateNode),qe=i,Qt=o;break;case 5:je||ii(n,e);case 6:if(i=qe,o=Qt,qe=null,vi(t,e,n),qe=i,Qt=o,qe!==null)if(Qt)try{(qe.nodeType===9?qe.body:qe.nodeName==="HTML"?qe.ownerDocument.body:qe).removeChild(n.stateNode)}catch(s){Se(n,e,s)}else try{qe.removeChild(n.stateNode)}catch(s){Se(n,e,s)}break;case 18:qe!==null&&(Qt?(t=qe,Uv(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),br(t)):Uv(qe,n.stateNode));break;case 4:i=qe,o=Qt,qe=n.stateNode.containerInfo,Qt=!0,vi(t,e,n),qe=i,Qt=o;break;case 0:case 11:case 14:case 15:xo(2,n,e),je||xo(4,n,e),vi(t,e,n);break;case 1:je||(ii(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"&&tA(n,e,i)),vi(t,e,n);break;case 21:vi(t,e,n);break;case 22:je=(i=je)||n.memoizedState!==null,vi(t,e,n),je=i;break;default:vi(t,e,n)}}function lA(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{br(t)}catch(n){Se(e,e.return,n)}}}function uA(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{br(t)}catch(n){Se(e,e.return,n)}}function mx(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new Sv),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new Sv),e;default:throw Error(B(435,t.tag))}}function mu(t,e){var n=mx(t);e.forEach(function(i){if(!n.has(i)){n.add(i);var o=Cx.bind(null,t,i);i.then(o,o)}})}function Kt(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var o=n[i],s=t,r=e,a=r;e:for(;a!==null;){switch(a.tag){case 27:if(Bo(a.type)){qe=a.stateNode,Qt=!1;break e}break;case 5:qe=a.stateNode,Qt=!1;break e;case 3:case 4:qe=a.stateNode.containerInfo,Qt=!0;break e}a=a.return}if(qe===null)throw Error(B(160));aA(s,r,o),qe=null,Qt=!1,s=o.alternate,s!==null&&(s.return=null),o.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)cA(e,t),e=e.sibling}var Bn=null;function cA(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Kt(e,t),$t(t),i&4&&(xo(3,t,t.return),Ml(3,t),xo(5,t,t.return));break;case 1:Kt(e,t),$t(t),i&512&&(je||n===null||ii(n,n.return)),i&64&&Si&&(t=t.updateQueue,t!==null&&(i=t.callbacks,i!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var o=Bn;if(Kt(e,t),$t(t),i&512&&(je||n===null||ii(n,n.return)),i&4){var s=n!==null?n.memoizedState:null;if(i=t.memoizedState,n===null)if(i===null)if(t.stateNode===null){e:{i=t.type,n=t.memoizedProps,o=o.ownerDocument||o;t:switch(i){case"title":s=o.getElementsByTagName("title")[0],(!s||s[Il]||s[Rt]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=o.createElement(i),o.head.insertBefore(s,o.querySelector("head > title"))),xt(s,i,n),s[Rt]=t,yt(s),i=s;break e;case"link":var r=Gv("link","href",o).get(i+(n.href||""));if(r){for(var a=0;a<r.length;a++)if(s=r[a],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){r.splice(a,1);break t}}s=o.createElement(i),xt(s,i,n),o.head.appendChild(s);break;case"meta":if(r=Gv("meta","content",o).get(i+(n.content||""))){for(a=0;a<r.length;a++)if(s=r[a],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){r.splice(a,1);break t}}s=o.createElement(i),xt(s,i,n),o.head.appendChild(s);break;default:throw Error(B(468,i))}s[Rt]=t,yt(s),i=s}t.stateNode=i}else zv(o,t.type,t.stateNode);else t.stateNode=Fv(o,i,t.memoizedProps);else s!==i?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,i===null?zv(o,t.type,t.stateNode):Fv(o,i,t.memoizedProps)):i===null&&t.stateNode!==null&&wd(t,t.memoizedProps,n.memoizedProps)}break;case 27:Kt(e,t),$t(t),i&512&&(je||n===null||ii(n,n.return)),n!==null&&i&4&&wd(t,t.memoizedProps,n.memoizedProps);break;case 5:if(Kt(e,t),$t(t),i&512&&(je||n===null||ii(n,n.return)),t.flags&32){o=t.stateNode;try{Er(o,"")}catch(b){Se(t,t.return,b)}}i&4&&t.stateNode!=null&&(o=t.memoizedProps,wd(t,o,n!==null?n.memoizedProps:o)),i&1024&&(bd=!0);break;case 6:if(Kt(e,t),$t(t),i&4){if(t.stateNode===null)throw Error(B(162));i=t.memoizedProps,n=t.stateNode;try{n.nodeValue=i}catch(b){Se(t,t.return,b)}}break;case 3:if(Ou=null,o=Bn,Bn=Tc(e.containerInfo),Kt(e,t),Bn=o,$t(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{br(e.containerInfo)}catch(b){Se(t,t.return,b)}bd&&(bd=!1,fA(t));break;case 4:i=Bn,Bn=Tc(t.stateNode.containerInfo),Kt(e,t),$t(t),Bn=i;break;case 12:Kt(e,t),$t(t);break;case 31:Kt(e,t),$t(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,mu(t,i)));break;case 13:Kt(e,t),$t(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(df=dn()),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,mu(t,i)));break;case 22:o=t.memoizedState!==null;var l=n!==null&&n.memoizedState!==null,c=Si,h=je;if(Si=c||o,je=h||l,Kt(e,t),je=h,Si=c,$t(t),i&8192)e:for(e=t.stateNode,e._visibility=o?e._visibility&-2:e._visibility|1,o&&(n===null||l||Si||je||is(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){l=n=e;try{if(s=l.stateNode,o)r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none";else{a=l.stateNode;var p=l.memoizedProps.style,m=p!=null&&p.hasOwnProperty("display")?p.display:null;a.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(b){Se(l,l.return,b)}}}else if(e.tag===6){if(n===null){l=e;try{l.stateNode.nodeValue=o?"":l.memoizedProps}catch(b){Se(l,l.return,b)}}}else if(e.tag===18){if(n===null){l=e;try{var y=l.stateNode;o?Lv(y,!0):Lv(l.stateNode,!1)}catch(b){Se(l,l.return,b)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}i&4&&(i=t.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,mu(t,n))));break;case 19:Kt(e,t),$t(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,mu(t,i)));break;case 30:break;case 21:break;default:Kt(e,t),$t(t)}}function $t(t){var e=t.flags;if(e&2){try{for(var n,i=t.return;i!==null;){if(iA(i)){n=i;break}i=i.return}if(n==null)throw Error(B(160));switch(n.tag){case 27:var o=n.stateNode,s=Id(t);hc(t,s,o);break;case 5:var r=n.stateNode;n.flags&32&&(Er(r,""),n.flags&=-33);var a=Id(t);hc(t,a,r);break;case 3:case 4:var l=n.stateNode.containerInfo,c=Id(t);Vh(t,c,l);break;default:throw Error(B(161))}}catch(h){Se(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function fA(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;fA(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function _i(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)sA(t,e.alternate,e),e=e.sibling}function is(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:xo(4,e,e.return),is(e);break;case 1:ii(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&tA(e,e.return,n),is(e);break;case 27:Ba(e.stateNode);case 26:case 5:ii(e,e.return),is(e);break;case 22:e.memoizedState===null&&is(e);break;case 30:is(e);break;default:is(e)}t=t.sibling}}function Ei(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var i=e.alternate,o=t,s=e,r=s.flags;switch(s.tag){case 0:case 11:case 15:Ei(o,s,n),Ml(4,s);break;case 1:if(Ei(o,s,n),i=s,o=i.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(c){Se(i,i.return,c)}if(i=s,o=i.updateQueue,o!==null){var a=i.stateNode;try{var l=o.shared.hiddenCallbacks;if(l!==null)for(o.shared.hiddenCallbacks=null,o=0;o<l.length;o++)lS(l[o],a)}catch(c){Se(i,i.return,c)}}n&&r&64&&eA(s),La(s,s.return);break;case 27:oA(s);case 26:case 5:Ei(o,s,n),n&&i===null&&r&4&&nA(s),La(s,s.return);break;case 12:Ei(o,s,n);break;case 31:Ei(o,s,n),n&&r&4&&lA(o,s);break;case 13:Ei(o,s,n),n&&r&4&&uA(o,s);break;case 22:s.memoizedState===null&&Ei(o,s,n),La(s,s.return);break;case 30:break;default:Ei(o,s,n)}e=e.sibling}}function Em(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&xl(n))}function Tm(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&xl(t))}function qn(t,e,n,i){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)dA(t,e,n,i),e=e.sibling}function dA(t,e,n,i){var o=e.flags;switch(e.tag){case 0:case 11:case 15:qn(t,e,n,i),o&2048&&Ml(9,e);break;case 1:qn(t,e,n,i);break;case 3:qn(t,e,n,i),o&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&xl(t)));break;case 12:if(o&2048){qn(t,e,n,i),t=e.stateNode;try{var s=e.memoizedProps,r=s.id,a=s.onPostCommit;typeof a=="function"&&a(r,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(l){Se(e,e.return,l)}}else qn(t,e,n,i);break;case 31:qn(t,e,n,i);break;case 13:qn(t,e,n,i);break;case 23:break;case 22:s=e.stateNode,r=e.alternate,e.memoizedState!==null?s._visibility&2?qn(t,e,n,i):ka(t,e):s._visibility&2?qn(t,e,n,i):(s._visibility|=2,qs(t,e,n,i,(e.subtreeFlags&10256)!==0||!1)),o&2048&&Em(r,e);break;case 24:qn(t,e,n,i),o&2048&&Tm(e.alternate,e);break;default:qn(t,e,n,i)}}function qs(t,e,n,i,o){for(o=o&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var s=t,r=e,a=n,l=i,c=r.flags;switch(r.tag){case 0:case 11:case 15:qs(s,r,a,l,o),Ml(8,r);break;case 23:break;case 22:var h=r.stateNode;r.memoizedState!==null?h._visibility&2?qs(s,r,a,l,o):ka(s,r):(h._visibility|=2,qs(s,r,a,l,o)),o&&c&2048&&Em(r.alternate,r);break;case 24:qs(s,r,a,l,o),o&&c&2048&&Tm(r.alternate,r);break;default:qs(s,r,a,l,o)}e=e.sibling}}function ka(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,i=e,o=i.flags;switch(i.tag){case 22:ka(n,i),o&2048&&Em(i.alternate,i);break;case 24:ka(n,i),o&2048&&Tm(i.alternate,i);break;default:ka(n,i)}e=e.sibling}}var Sa=8192;function ks(t,e,n){if(t.subtreeFlags&Sa)for(t=t.child;t!==null;)hA(t,e,n),t=t.sibling}function hA(t,e,n){switch(t.tag){case 26:ks(t,e,n),t.flags&Sa&&t.memoizedState!==null&&tN(n,Bn,t.memoizedState,t.memoizedProps);break;case 5:ks(t,e,n);break;case 3:case 4:var i=Bn;Bn=Tc(t.stateNode.containerInfo),ks(t,e,n),Bn=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=Sa,Sa=16777216,ks(t,e,n),Sa=i):ks(t,e,n));break;default:ks(t,e,n)}}function pA(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function ma(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];mt=i,gA(i,t)}pA(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)mA(t),t=t.sibling}function mA(t){switch(t.tag){case 0:case 11:case 15:ma(t),t.flags&2048&&xo(9,t,t.return);break;case 3:ma(t);break;case 12:ma(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,Lu(t)):ma(t);break;default:ma(t)}}function Lu(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];mt=i,gA(i,t)}pA(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:xo(8,e,e.return),Lu(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,Lu(e));break;default:Lu(e)}t=t.sibling}}function gA(t,e){for(;mt!==null;){var n=mt;switch(n.tag){case 0:case 11:case 15:xo(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:xl(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,mt=i;else e:for(n=t;mt!==null;){i=mt;var o=i.sibling,s=i.return;if(rA(i),i===n){mt=null;break e}if(o!==null){o.return=s,mt=o;break e}mt=s}}}var gx={getCacheForType:function(t){var e=bt(et),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n},cacheSignal:function(){return bt(et).controller.signal}},yx=typeof WeakMap=="function"?WeakMap:Map,ve=0,Ie=null,le=null,fe=0,Te=0,an=null,uo=!1,Br=!1,Sm=!1,Vi=0,Ye=0,No=0,fs=0,Am=0,fn=0,Cr=0,Oa=null,Xt=null,Uh=!1,df=0,yA=0,pc=1/0,mc=null,vo=null,ut=0,_o=null,Rr=null,bi=0,Lh=0,kh=null,vA=null,qa=0,Oh=null;function mn(){return ve&2&&fe!==0?fe&-fe:j.T!==null?Rm():I0()}function _A(){if(fn===0)if(!(fe&536870912)||de){var t=au;au<<=1,!(au&3932160)&&(au=262144),fn=t}else fn=536870912;return t=vn.current,t!==null&&(t.flags|=32),fn}function Zt(t,e,n){(t===Ie&&(Te===2||Te===9)||t.cancelPendingCommit!==null)&&(wr(t,0),co(t,fe,fn,!1)),wl(t,n),(!(ve&2)||t!==Ie)&&(t===Ie&&(!(ve&2)&&(fs|=n),Ye===4&&co(t,fe,fn,!1)),hi(t))}function EA(t,e,n){if(ve&6)throw Error(B(327));var i=!n&&(e&127)===0&&(e&t.expiredLanes)===0||Rl(t,e),o=i?Ex(t,e):xd(t,e,!0),s=i;do{if(o===0){Br&&!i&&co(t,e,0,!1);break}else{if(n=t.current.alternate,s&&!vx(n)){o=xd(t,e,!1),s=!1;continue}if(o===2){if(s=e,t.errorRecoveryDisabledLanes&s)var r=0;else r=t.pendingLanes&-536870913,r=r!==0?r:r&536870912?536870912:0;if(r!==0){e=r;e:{var a=t;o=Oa;var l=a.current.memoizedState.isDehydrated;if(l&&(wr(a,r).flags|=256),r=xd(a,r,!1),r!==2){if(Sm&&!l){a.errorRecoveryDisabledLanes|=s,fs|=s,o=4;break e}s=Xt,Xt=o,s!==null&&(Xt===null?Xt=s:Xt.push.apply(Xt,s))}o=r}if(s=!1,o!==2)continue}}if(o===1){wr(t,0),co(t,e,0,!0);break}e:{switch(i=t,s=o,s){case 0:case 1:throw Error(B(345));case 4:if((e&4194048)!==e)break;case 6:co(i,e,fn,!uo);break e;case 2:Xt=null;break;case 3:case 5:break;default:throw Error(B(329))}if((e&62914560)===e&&(o=df+300-dn(),10<o)){if(co(i,e,fn,!uo),ef(i,0,!0)!==0)break e;bi=e,i.timeoutHandle=BA(Av.bind(null,i,n,Xt,mc,Uh,e,fn,fs,Cr,uo,s,"Throttled",-0,0),o);break e}Av(i,n,Xt,mc,Uh,e,fn,fs,Cr,uo,s,null,-0,0)}}break}while(!0);hi(t)}function Av(t,e,n,i,o,s,r,a,l,c,h,p,m,y){if(t.timeoutHandle=-1,p=e.subtreeFlags,p&8192||(p&16785408)===16785408){p={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ci},hA(e,s,p);var b=(s&62914560)===s?df-dn():(s&4194048)===s?yA-dn():0;if(b=nN(p,b),b!==null){bi=s,t.cancelPendingCommit=b(Rv.bind(null,t,e,s,n,i,o,r,a,l,h,p,null,m,y)),co(t,s,r,!c);return}}Rv(t,e,s,n,i,o,r,a,l)}function vx(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var o=n[i],s=o.getSnapshot;o=o.value;try{if(!yn(s(),o))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function co(t,e,n,i){e&=~Am,e&=~fs,t.suspendedLanes|=e,t.pingedLanes&=~e,i&&(t.warmLanes|=e),i=t.expirationTimes;for(var o=e;0<o;){var s=31-pn(o),r=1<<s;i[s]=-1,o&=~r}n!==0&&C0(t,n,e)}function hf(){return ve&6?!0:(Dl(0),!1)}function Cm(){if(le!==null){if(Te===0)var t=le.return;else t=le,Ri=Is=null,um(t),ur=null,il=0,t=le;for(;t!==null;)jS(t.alternate,t),t=t.return;le=null}}function wr(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,Ox(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),bi=0,Cm(),Ie=t,le=n=wi(t.current,null),fe=e,Te=0,an=null,uo=!1,Br=Rl(t,e),Sm=!1,Cr=fn=Am=fs=No=Ye=0,Xt=Oa=null,Uh=!1,e&8&&(e|=e&32);var i=t.entangledLanes;if(i!==0)for(t=t.entanglements,i&=e;0<i;){var o=31-pn(i),s=1<<o;e|=t[o],i&=~s}return Vi=e,sf(),n}function TA(t,e){ie=null,j.H=sl,e===qr||e===af?(e=tv(),Te=3):e===nm?(e=tv(),Te=4):Te=e===vm?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,an=e,le===null&&(Ye=1,fc(t,xn(e,t.current)))}function SA(){var t=vn.current;return t===null?!0:(fe&4194048)===fe?Pn===null:(fe&62914560)===fe||fe&536870912?t===Pn:!1}function AA(){var t=j.H;return j.H=sl,t===null?sl:t}function CA(){var t=j.A;return j.A=gx,t}function gc(){Ye=4,uo||(fe&4194048)!==fe&&vn.current!==null||(Br=!0),!(No&134217727)&&!(fs&134217727)||Ie===null||co(Ie,fe,fn,!1)}function xd(t,e,n){var i=ve;ve|=2;var o=AA(),s=CA();(Ie!==t||fe!==e)&&(mc=null,wr(t,e)),e=!1;var r=Ye;e:do try{if(Te!==0&&le!==null){var a=le,l=an;switch(Te){case 8:Cm(),r=6;break e;case 3:case 2:case 9:case 6:vn.current===null&&(e=!0);var c=Te;if(Te=0,an=null,ir(t,a,l,c),n&&Br){r=0;break e}break;default:c=Te,Te=0,an=null,ir(t,a,l,c)}}_x(),r=Ye;break}catch(h){TA(t,h)}while(!0);return e&&t.shellSuspendCounter++,Ri=Is=null,ve=i,j.H=o,j.A=s,le===null&&(Ie=null,fe=0,sf()),r}function _x(){for(;le!==null;)RA(le)}function Ex(t,e){var n=ve;ve|=2;var i=AA(),o=CA();Ie!==t||fe!==e?(mc=null,pc=dn()+500,wr(t,e)):Br=Rl(t,e);e:do try{if(Te!==0&&le!==null){e=le;var s=an;t:switch(Te){case 1:Te=0,an=null,ir(t,e,s,1);break;case 2:case 9:if(ev(s)){Te=0,an=null,Cv(e);break}e=function(){Te!==2&&Te!==9||Ie!==t||(Te=7),hi(t)},s.then(e,e);break e;case 3:Te=7;break e;case 4:Te=5;break e;case 7:ev(s)?(Te=0,an=null,Cv(e)):(Te=0,an=null,ir(t,e,s,7));break;case 5:var r=null;switch(le.tag){case 26:r=le.memoizedState;case 5:case 27:var a=le;if(r?YA(r):a.stateNode.complete){Te=0,an=null;var l=a.sibling;if(l!==null)le=l;else{var c=a.return;c!==null?(le=c,pf(c)):le=null}break t}}Te=0,an=null,ir(t,e,s,5);break;case 6:Te=0,an=null,ir(t,e,s,6);break;case 8:Cm(),Ye=6;break e;default:throw Error(B(462))}}Tx();break}catch(h){TA(t,h)}while(!0);return Ri=Is=null,j.H=i,j.A=o,ve=n,le!==null?0:(Ie=null,fe=0,sf(),Ye)}function Tx(){for(;le!==null&&!HI();)RA(le)}function RA(t){var e=ZS(t.alternate,t,Vi);t.memoizedProps=t.pendingProps,e===null?pf(t):le=e}function Cv(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=yv(n,e,e.pendingProps,e.type,void 0,fe);break;case 11:e=yv(n,e,e.pendingProps,e.type.render,e.ref,fe);break;case 5:um(e);default:jS(n,e),e=le=j0(e,Vi),e=ZS(n,e,Vi)}t.memoizedProps=t.pendingProps,e===null?pf(t):le=e}function ir(t,e,n,i){Ri=Is=null,um(e),ur=null,il=0;var o=e.return;try{if(ux(t,o,e,n,fe)){Ye=1,fc(t,xn(n,t.current)),le=null;return}}catch(s){if(o!==null)throw le=o,s;Ye=1,fc(t,xn(n,t.current)),le=null;return}e.flags&32768?(de||i===1?t=!0:Br||fe&536870912?t=!1:(uo=t=!0,(i===2||i===9||i===3||i===6)&&(i=vn.current,i!==null&&i.tag===13&&(i.flags|=16384))),wA(e,t)):pf(e)}function pf(t){var e=t;do{if(e.flags&32768){wA(e,uo);return}t=e.return;var n=dx(e.alternate,e,Vi);if(n!==null){le=n;return}if(e=e.sibling,e!==null){le=e;return}le=e=t}while(e!==null);Ye===0&&(Ye=5)}function wA(t,e){do{var n=hx(t.alternate,t);if(n!==null){n.flags&=32767,le=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){le=t;return}le=t=n}while(t!==null);Ye=6,le=null}function Rv(t,e,n,i,o,s,r,a,l){t.cancelPendingCommit=null;do mf();while(ut!==0);if(ve&6)throw Error(B(327));if(e!==null){if(e===t.current)throw Error(B(177));if(s=e.lanes|e.childLanes,s|=Qp,eb(t,n,s,r,a,l),t===Ie&&(le=Ie=null,fe=0),Rr=e,_o=t,bi=n,Lh=s,kh=o,vA=i,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,Rx(ec,function(){return MA(),null})):(t.callbackNode=null,t.callbackPriority=0),i=(e.flags&13878)!==0,e.subtreeFlags&13878||i){i=j.T,j.T=null,o=_e.p,_e.p=2,r=ve,ve|=4;try{px(t,e,n)}finally{ve=r,_e.p=o,j.T=i}}ut=1,IA(),bA(),xA()}}function IA(){if(ut===1){ut=0;var t=_o,e=Rr,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=j.T,j.T=null;var i=_e.p;_e.p=2;var o=ve;ve|=4;try{cA(e,t);var s=Gh,r=Y0(t.containerInfo),a=s.focusedElem,l=s.selectionRange;if(r!==a&&a&&a.ownerDocument&&H0(a.ownerDocument.documentElement,a)){if(l!==null&&$p(a)){var c=l.start,h=l.end;if(h===void 0&&(h=c),"selectionStart"in a)a.selectionStart=c,a.selectionEnd=Math.min(h,a.value.length);else{var p=a.ownerDocument||document,m=p&&p.defaultView||window;if(m.getSelection){var y=m.getSelection(),b=a.textContent.length,x=Math.min(l.start,b),P=l.end===void 0?x:Math.min(l.end,b);!y.extend&&x>P&&(r=P,P=x,x=r);var R=Ky(a,x),E=Ky(a,P);if(R&&E&&(y.rangeCount!==1||y.anchorNode!==R.node||y.anchorOffset!==R.offset||y.focusNode!==E.node||y.focusOffset!==E.offset)){var w=p.createRange();w.setStart(R.node,R.offset),y.removeAllRanges(),x>P?(y.addRange(w),y.extend(E.node,E.offset)):(w.setEnd(E.node,E.offset),y.addRange(w))}}}}for(p=[],y=a;y=y.parentNode;)y.nodeType===1&&p.push({element:y,left:y.scrollLeft,top:y.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<p.length;a++){var D=p[a];D.element.scrollLeft=D.left,D.element.scrollTop=D.top}}Cc=!!Fh,Gh=Fh=null}finally{ve=o,_e.p=i,j.T=n}}t.current=e,ut=2}}function bA(){if(ut===2){ut=0;var t=_o,e=Rr,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=j.T,j.T=null;var i=_e.p;_e.p=2;var o=ve;ve|=4;try{sA(t,e.alternate,e)}finally{ve=o,_e.p=i,j.T=n}}ut=3}}function xA(){if(ut===4||ut===3){ut=0,YI();var t=_o,e=Rr,n=bi,i=vA;e.subtreeFlags&10256||e.flags&10256?ut=5:(ut=0,Rr=_o=null,NA(t,t.pendingLanes));var o=t.pendingLanes;if(o===0&&(vo=null),Fp(n),e=e.stateNode,hn&&typeof hn.onCommitFiberRoot=="function")try{hn.onCommitFiberRoot(Cl,e,void 0,(e.current.flags&128)===128)}catch{}if(i!==null){e=j.T,o=_e.p,_e.p=2,j.T=null;try{for(var s=t.onRecoverableError,r=0;r<i.length;r++){var a=i[r];s(a.value,{componentStack:a.stack})}}finally{j.T=e,_e.p=o}}bi&3&&mf(),hi(t),o=t.pendingLanes,n&261930&&o&42?t===Oh?qa++:(qa=0,Oh=t):qa=0,Dl(0)}}function NA(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,xl(e)))}function mf(){return IA(),bA(),xA(),MA()}function MA(){if(ut!==5)return!1;var t=_o,e=Lh;Lh=0;var n=Fp(bi),i=j.T,o=_e.p;try{_e.p=32>n?32:n,j.T=null,n=kh,kh=null;var s=_o,r=bi;if(ut=0,Rr=_o=null,bi=0,ve&6)throw Error(B(331));var a=ve;if(ve|=4,mA(s.current),dA(s,s.current,r,n),ve=a,Dl(0,!1),hn&&typeof hn.onPostCommitFiberRoot=="function")try{hn.onPostCommitFiberRoot(Cl,s)}catch{}return!0}finally{_e.p=o,j.T=i,NA(t,e)}}function wv(t,e,n){e=xn(n,e),e=Mh(t.stateNode,e,2),t=yo(t,e,2),t!==null&&(wl(t,2),hi(t))}function Se(t,e,n){if(t.tag===3)wv(t,t,n);else for(;e!==null;){if(e.tag===3){wv(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(vo===null||!vo.has(i))){t=xn(n,t),n=JS(2),i=yo(e,n,2),i!==null&&(KS(n,i,e,t),wl(i,2),hi(i));break}}e=e.return}}function Nd(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new yx;var o=new Set;i.set(e,o)}else o=i.get(e),o===void 0&&(o=new Set,i.set(e,o));o.has(n)||(Sm=!0,o.add(n),t=Sx.bind(null,t,e,n),e.then(t,t))}function Sx(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,Ie===t&&(fe&n)===n&&(Ye===4||Ye===3&&(fe&62914560)===fe&&300>dn()-df?!(ve&2)&&wr(t,0):Am|=n,Cr===fe&&(Cr=0)),hi(t)}function DA(t,e){e===0&&(e=A0()),t=ws(t,e),t!==null&&(wl(t,e),hi(t))}function Ax(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),DA(t,n)}function Cx(t,e){var n=0;switch(t.tag){case 31:case 13:var i=t.stateNode,o=t.memoizedState;o!==null&&(n=o.retryLane);break;case 19:i=t.stateNode;break;case 22:i=t.stateNode._retryCache;break;default:throw Error(B(314))}i!==null&&i.delete(e),DA(t,n)}function Rx(t,e){return qp(t,e)}var yc=null,Bs=null,qh=!1,vc=!1,Md=!1,fo=0;function hi(t){t!==Bs&&t.next===null&&(Bs===null?yc=Bs=t:Bs=Bs.next=t),vc=!0,qh||(qh=!0,Ix())}function Dl(t,e){if(!Md&&vc){Md=!0;do for(var n=!1,i=yc;i!==null;){if(t!==0){var o=i.pendingLanes;if(o===0)var s=0;else{var r=i.suspendedLanes,a=i.pingedLanes;s=(1<<31-pn(42|t)+1)-1,s&=o&~(r&~a),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,Iv(i,s))}else s=fe,s=ef(i,i===Ie?s:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(s&3)||Rl(i,s)||(n=!0,Iv(i,s));i=i.next}while(n);Md=!1}}function wx(){PA()}function PA(){vc=qh=!1;var t=0;fo!==0&&kx()&&(t=fo);for(var e=dn(),n=null,i=yc;i!==null;){var o=i.next,s=VA(i,e);s===0?(i.next=null,n===null?yc=o:n.next=o,o===null&&(Bs=n)):(n=i,(t!==0||s&3)&&(vc=!0)),i=o}ut!==0&&ut!==5||Dl(t),fo!==0&&(fo=0)}function VA(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,o=t.expirationTimes,s=t.pendingLanes&-62914561;0<s;){var r=31-pn(s),a=1<<r,l=o[r];l===-1?(!(a&n)||a&i)&&(o[r]=jI(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}if(e=Ie,n=fe,n=ef(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i=t.callbackNode,n===0||t===e&&(Te===2||Te===9)||t.cancelPendingCommit!==null)return i!==null&&i!==null&&sd(i),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||Rl(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(i!==null&&sd(i),Fp(n)){case 2:case 8:n=T0;break;case 32:n=ec;break;case 268435456:n=S0;break;default:n=ec}return i=UA.bind(null,t),n=qp(n,i),t.callbackPriority=e,t.callbackNode=n,e}return i!==null&&i!==null&&sd(i),t.callbackPriority=2,t.callbackNode=null,2}function UA(t,e){if(ut!==0&&ut!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(mf()&&t.callbackNode!==n)return null;var i=fe;return i=ef(t,t===Ie?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i===0?null:(EA(t,i,e),VA(t,dn()),t.callbackNode!=null&&t.callbackNode===n?UA.bind(null,t):null)}function Iv(t,e){if(mf())return null;EA(t,e,!0)}function Ix(){qx(function(){ve&6?qp(E0,wx):PA()})}function Rm(){if(fo===0){var t=Tr;t===0&&(t=ru,ru<<=1,!(ru&261888)&&(ru=256)),fo=t}return fo}function bv(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Iu(""+t)}function xv(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function bx(t,e,n,i,o){if(e==="submit"&&n&&n.stateNode===o){var s=bv((o[jt]||null).action),r=i.submitter;r&&(e=(e=r[jt]||null)?bv(e.formAction):r.getAttribute("formAction"),e!==null&&(s=e,r=null));var a=new tf("action","action",null,i,o);t.push({event:a,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(fo!==0){var l=r?xv(o,r):new FormData(o);xh(n,{pending:!0,data:l,method:o.method,action:s},null,l)}}else typeof s=="function"&&(a.preventDefault(),l=r?xv(o,r):new FormData(o),xh(n,{pending:!0,data:l,method:o.method,action:s},s,l))},currentTarget:o}]})}}for(var Dd=0;Dd<yh.length;Dd++){var Pd=yh[Dd],xx=Pd.toLowerCase(),Nx=Pd[0].toUpperCase()+Pd.slice(1);zn(xx,"on"+Nx)}zn(K0,"onAnimationEnd");zn($0,"onAnimationIteration");zn(Q0,"onAnimationStart");zn("dblclick","onDoubleClick");zn("focusin","onFocus");zn("focusout","onBlur");zn(Jb,"onTransitionRun");zn(Kb,"onTransitionStart");zn($b,"onTransitionCancel");zn(X0,"onTransitionEnd");_r("onMouseEnter",["mouseout","mouseover"]);_r("onMouseLeave",["mouseout","mouseover"]);_r("onPointerEnter",["pointerout","pointerover"]);_r("onPointerLeave",["pointerout","pointerover"]);As("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));As("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));As("onBeforeInput",["compositionend","keypress","textInput","paste"]);As("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));As("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));As("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(rl));function LA(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],o=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var r=i.length-1;0<=r;r--){var a=i[r],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&o.isPropagationStopped())break e;s=a,o.currentTarget=c;try{s(o)}catch(h){nc(h)}o.currentTarget=null,s=l}else for(r=0;r<i.length;r++){if(a=i[r],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&o.isPropagationStopped())break e;s=a,o.currentTarget=c;try{s(o)}catch(h){nc(h)}o.currentTarget=null,s=l}}}}function ae(t,e){var n=e[uh];n===void 0&&(n=e[uh]=new Set);var i=t+"__bubble";n.has(i)||(kA(e,t,2,!1),n.add(i))}function Vd(t,e,n){var i=0;e&&(i|=4),kA(n,t,i,e)}var gu="_reactListening"+Math.random().toString(36).slice(2);function wm(t){if(!t[gu]){t[gu]=!0,b0.forEach(function(n){n!=="selectionchange"&&(Mx.has(n)||Vd(n,!1,t),Vd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[gu]||(e[gu]=!0,Vd("selectionchange",!1,e))}}function kA(t,e,n,i){switch(XA(e)){case 2:var o=sN;break;case 8:o=rN;break;default:o=Nm}n=o.bind(null,e,n,t),o=void 0,!ph||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),i?o!==void 0?t.addEventListener(e,n,{capture:!0,passive:o}):t.addEventListener(e,n,!0):o!==void 0?t.addEventListener(e,n,{passive:o}):t.addEventListener(e,n,!1)}function Ud(t,e,n,i,o){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var r=i.tag;if(r===3||r===4){var a=i.stateNode.containerInfo;if(a===o)break;if(r===4)for(r=i.return;r!==null;){var l=r.tag;if((l===3||l===4)&&r.stateNode.containerInfo===o)return;r=r.return}for(;a!==null;){if(r=$s(a),r===null)return;if(l=r.tag,l===5||l===6||l===26||l===27){i=s=r;continue e}a=a.parentNode}}i=i.return}L0(function(){var c=s,h=Hp(n),p=[];e:{var m=W0.get(t);if(m!==void 0){var y=tf,b=t;switch(t){case"keypress":if(xu(n)===0)break e;case"keydown":case"keyup":y=Cb;break;case"focusin":b="focus",y=cd;break;case"focusout":b="blur",y=cd;break;case"beforeblur":case"afterblur":y=cd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=ky;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=db;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=Ib;break;case K0:case $0:case Q0:y=mb;break;case X0:y=xb;break;case"scroll":case"scrollend":y=cb;break;case"wheel":y=Mb;break;case"copy":case"cut":case"paste":y=yb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=qy;break;case"toggle":case"beforetoggle":y=Pb}var x=(e&4)!==0,P=!x&&(t==="scroll"||t==="scrollend"),R=x?m!==null?m+"Capture":null:m;x=[];for(var E=c,w;E!==null;){var D=E;if(w=D.stateNode,D=D.tag,D!==5&&D!==26&&D!==27||w===null||R===null||(D=Za(E,R),D!=null&&x.push(al(E,D,w))),P)break;E=E.return}0<x.length&&(m=new y(m,b,null,n,h),p.push({event:m,listeners:x}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",m&&n!==hh&&(b=n.relatedTarget||n.fromElement)&&($s(b)||b[Lr]))break e;if((y||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,y?(b=n.relatedTarget||n.toElement,y=c,b=b?$s(b):null,b!==null&&(P=Al(b),x=b.tag,b!==P||x!==5&&x!==27&&x!==6)&&(b=null)):(y=null,b=c),y!==b)){if(x=ky,D="onMouseLeave",R="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(x=qy,D="onPointerLeave",R="onPointerEnter",E="pointer"),P=y==null?m:Ea(y),w=b==null?m:Ea(b),m=new x(D,E+"leave",y,n,h),m.target=P,m.relatedTarget=w,D=null,$s(h)===c&&(x=new x(R,E+"enter",b,n,h),x.target=w,x.relatedTarget=P,D=x),P=D,y&&b)t:{for(x=Dx,R=y,E=b,w=0,D=R;D;D=x(D))w++;D=0;for(var O=E;O;O=x(O))D++;for(;0<w-D;)R=x(R),w--;for(;0<D-w;)E=x(E),D--;for(;w--;){if(R===E||E!==null&&R===E.alternate){x=R;break t}R=x(R),E=x(E)}x=null}else x=null;y!==null&&Nv(p,m,y,x,!1),b!==null&&P!==null&&Nv(p,P,b,x,!0)}}e:{if(m=c?Ea(c):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var q=zy;else if(Gy(m))if(G0)q=zb;else{q=Fb;var T=Bb}else y=m.nodeName,!y||y.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?c&&zp(c.elementType)&&(q=zy):q=Gb;if(q&&(q=q(t,c))){F0(p,q,n,h);break e}T&&T(t,m,c),t==="focusout"&&c&&m.type==="number"&&c.memoizedProps.value!=null&&dh(m,"number",m.value)}switch(T=c?Ea(c):window,t){case"focusin":(Gy(T)||T.contentEditable==="true")&&(Ws=T,mh=c,Na=null);break;case"focusout":Na=mh=Ws=null;break;case"mousedown":gh=!0;break;case"contextmenu":case"mouseup":case"dragend":gh=!1,$y(p,n,h);break;case"selectionchange":if(Yb)break;case"keydown":case"keyup":$y(p,n,h)}var _;if(Kp)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Xs?q0(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(O0&&n.locale!=="ko"&&(Xs||A!=="onCompositionStart"?A==="onCompositionEnd"&&Xs&&(_=k0()):(lo=h,Yp="value"in lo?lo.value:lo.textContent,Xs=!0)),T=_c(c,A),0<T.length&&(A=new Oy(A,t,null,n,h),p.push({event:A,listeners:T}),_?A.data=_:(_=B0(n),_!==null&&(A.data=_)))),(_=Ub?Lb(t,n):kb(t,n))&&(A=_c(c,"onBeforeInput"),0<A.length&&(T=new Oy("onBeforeInput","beforeinput",null,n,h),p.push({event:T,listeners:A}),T.data=_)),bx(p,t,c,n,h)}LA(p,e)})}function al(t,e,n){return{instance:t,listener:e,currentTarget:n}}function _c(t,e){for(var n=e+"Capture",i=[];t!==null;){var o=t,s=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||s===null||(o=Za(t,n),o!=null&&i.unshift(al(t,o,s)),o=Za(t,e),o!=null&&i.push(al(t,o,s))),t.tag===3)return i;t=t.return}return[]}function Dx(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Nv(t,e,n,i,o){for(var s=e._reactName,r=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(a=a.tag,l!==null&&l===i)break;a!==5&&a!==26&&a!==27||c===null||(l=c,o?(c=Za(n,s),c!=null&&r.unshift(al(n,c,l))):o||(c=Za(n,s),c!=null&&r.push(al(n,c,l)))),n=n.return}r.length!==0&&t.push({event:e,listeners:r})}var Px=/\r\n?/g,Vx=/\u0000|\uFFFD/g;function Mv(t){return(typeof t=="string"?t:""+t).replace(Px,`
`).replace(Vx,"")}function OA(t,e){return e=Mv(e),Mv(t)===e}function Ae(t,e,n,i,o,s){switch(n){case"children":typeof i=="string"?e==="body"||e==="textarea"&&i===""||Er(t,i):(typeof i=="number"||typeof i=="bigint")&&e!=="body"&&Er(t,""+i);break;case"className":uu(t,"class",i);break;case"tabIndex":uu(t,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":uu(t,n,i);break;case"style":U0(t,i,s);break;case"data":if(e!=="object"){uu(t,"data",i);break}case"src":case"href":if(i===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=Iu(""+i),t.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(e!=="input"&&Ae(t,e,"name",o.name,o,null),Ae(t,e,"formEncType",o.formEncType,o,null),Ae(t,e,"formMethod",o.formMethod,o,null),Ae(t,e,"formTarget",o.formTarget,o,null)):(Ae(t,e,"encType",o.encType,o,null),Ae(t,e,"method",o.method,o,null),Ae(t,e,"target",o.target,o,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=Iu(""+i),t.setAttribute(n,i);break;case"onClick":i!=null&&(t.onclick=Ci);break;case"onScroll":i!=null&&ae("scroll",t);break;case"onScrollEnd":i!=null&&ae("scrollend",t);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(B(61));if(n=i.__html,n!=null){if(o.children!=null)throw Error(B(60));t.innerHTML=n}}break;case"multiple":t.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":t.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){t.removeAttribute("xlink:href");break}n=Iu(""+i),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""+i):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":i===!0?t.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,i):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?t.setAttribute(n,i):t.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?t.removeAttribute(n):t.setAttribute(n,i);break;case"popover":ae("beforetoggle",t),ae("toggle",t),wu(t,"popover",i);break;case"xlinkActuate":gi(t,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":gi(t,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":gi(t,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":gi(t,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":gi(t,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":gi(t,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":gi(t,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":gi(t,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":gi(t,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":wu(t,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=lb.get(n)||n,wu(t,n,i))}}function Bh(t,e,n,i,o,s){switch(n){case"style":U0(t,i,s);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(B(61));if(n=i.__html,n!=null){if(o.children!=null)throw Error(B(60));t.innerHTML=n}}break;case"children":typeof i=="string"?Er(t,i):(typeof i=="number"||typeof i=="bigint")&&Er(t,""+i);break;case"onScroll":i!=null&&ae("scroll",t);break;case"onScrollEnd":i!=null&&ae("scrollend",t);break;case"onClick":i!=null&&(t.onclick=Ci);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!x0.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(o=n.endsWith("Capture"),e=n.slice(2,o?n.length-7:void 0),s=t[jt]||null,s=s!=null?s[n]:null,typeof s=="function"&&t.removeEventListener(e,s,o),typeof i=="function")){typeof s!="function"&&s!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,i,o);break e}n in t?t[n]=i:i===!0?t.setAttribute(n,""):wu(t,n,i)}}}function xt(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ae("error",t),ae("load",t);var i=!1,o=!1,s;for(s in n)if(n.hasOwnProperty(s)){var r=n[s];if(r!=null)switch(s){case"src":i=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(B(137,e));default:Ae(t,e,s,r,n,null)}}o&&Ae(t,e,"srcSet",n.srcSet,n,null),i&&Ae(t,e,"src",n.src,n,null);return;case"input":ae("invalid",t);var a=s=r=o=null,l=null,c=null;for(i in n)if(n.hasOwnProperty(i)){var h=n[i];if(h!=null)switch(i){case"name":o=h;break;case"type":r=h;break;case"checked":l=h;break;case"defaultChecked":c=h;break;case"value":s=h;break;case"defaultValue":a=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(B(137,e));break;default:Ae(t,e,i,h,n,null)}}D0(t,s,a,l,c,r,o,!1);return;case"select":ae("invalid",t),i=r=s=null;for(o in n)if(n.hasOwnProperty(o)&&(a=n[o],a!=null))switch(o){case"value":s=a;break;case"defaultValue":r=a;break;case"multiple":i=a;default:Ae(t,e,o,a,n,null)}e=s,n=r,t.multiple=!!i,e!=null?rr(t,!!i,e,!1):n!=null&&rr(t,!!i,n,!0);return;case"textarea":ae("invalid",t),s=o=i=null;for(r in n)if(n.hasOwnProperty(r)&&(a=n[r],a!=null))switch(r){case"value":i=a;break;case"defaultValue":o=a;break;case"children":s=a;break;case"dangerouslySetInnerHTML":if(a!=null)throw Error(B(91));break;default:Ae(t,e,r,a,n,null)}V0(t,i,o,s);return;case"option":for(l in n)if(n.hasOwnProperty(l)&&(i=n[l],i!=null))switch(l){case"selected":t.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:Ae(t,e,l,i,n,null)}return;case"dialog":ae("beforetoggle",t),ae("toggle",t),ae("cancel",t),ae("close",t);break;case"iframe":case"object":ae("load",t);break;case"video":case"audio":for(i=0;i<rl.length;i++)ae(rl[i],t);break;case"image":ae("error",t),ae("load",t);break;case"details":ae("toggle",t);break;case"embed":case"source":case"link":ae("error",t),ae("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&(i=n[c],i!=null))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(B(137,e));default:Ae(t,e,c,i,n,null)}return;default:if(zp(e)){for(h in n)n.hasOwnProperty(h)&&(i=n[h],i!==void 0&&Bh(t,e,h,i,n,void 0));return}}for(a in n)n.hasOwnProperty(a)&&(i=n[a],i!=null&&Ae(t,e,a,i,n,null))}function Ux(t,e,n,i){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,s=null,r=null,a=null,l=null,c=null,h=null;for(y in n){var p=n[y];if(n.hasOwnProperty(y)&&p!=null)switch(y){case"checked":break;case"value":break;case"defaultValue":l=p;default:i.hasOwnProperty(y)||Ae(t,e,y,null,i,p)}}for(var m in i){var y=i[m];if(p=n[m],i.hasOwnProperty(m)&&(y!=null||p!=null))switch(m){case"type":s=y;break;case"name":o=y;break;case"checked":c=y;break;case"defaultChecked":h=y;break;case"value":r=y;break;case"defaultValue":a=y;break;case"children":case"dangerouslySetInnerHTML":if(y!=null)throw Error(B(137,e));break;default:y!==p&&Ae(t,e,m,y,i,p)}}fh(t,r,a,l,c,h,s,o);return;case"select":y=r=a=m=null;for(s in n)if(l=n[s],n.hasOwnProperty(s)&&l!=null)switch(s){case"value":break;case"multiple":y=l;default:i.hasOwnProperty(s)||Ae(t,e,s,null,i,l)}for(o in i)if(s=i[o],l=n[o],i.hasOwnProperty(o)&&(s!=null||l!=null))switch(o){case"value":m=s;break;case"defaultValue":a=s;break;case"multiple":r=s;default:s!==l&&Ae(t,e,o,s,i,l)}e=a,n=r,i=y,m!=null?rr(t,!!n,m,!1):!!i!=!!n&&(e!=null?rr(t,!!n,e,!0):rr(t,!!n,n?[]:"",!1));return;case"textarea":y=m=null;for(a in n)if(o=n[a],n.hasOwnProperty(a)&&o!=null&&!i.hasOwnProperty(a))switch(a){case"value":break;case"children":break;default:Ae(t,e,a,null,i,o)}for(r in i)if(o=i[r],s=n[r],i.hasOwnProperty(r)&&(o!=null||s!=null))switch(r){case"value":m=o;break;case"defaultValue":y=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(B(91));break;default:o!==s&&Ae(t,e,r,o,i,s)}P0(t,m,y);return;case"option":for(var b in n)if(m=n[b],n.hasOwnProperty(b)&&m!=null&&!i.hasOwnProperty(b))switch(b){case"selected":t.selected=!1;break;default:Ae(t,e,b,null,i,m)}for(l in i)if(m=i[l],y=n[l],i.hasOwnProperty(l)&&m!==y&&(m!=null||y!=null))switch(l){case"selected":t.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:Ae(t,e,l,m,i,y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var x in n)m=n[x],n.hasOwnProperty(x)&&m!=null&&!i.hasOwnProperty(x)&&Ae(t,e,x,null,i,m);for(c in i)if(m=i[c],y=n[c],i.hasOwnProperty(c)&&m!==y&&(m!=null||y!=null))switch(c){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(B(137,e));break;default:Ae(t,e,c,m,i,y)}return;default:if(zp(e)){for(var P in n)m=n[P],n.hasOwnProperty(P)&&m!==void 0&&!i.hasOwnProperty(P)&&Bh(t,e,P,void 0,i,m);for(h in i)m=i[h],y=n[h],!i.hasOwnProperty(h)||m===y||m===void 0&&y===void 0||Bh(t,e,h,m,i,y);return}}for(var R in n)m=n[R],n.hasOwnProperty(R)&&m!=null&&!i.hasOwnProperty(R)&&Ae(t,e,R,null,i,m);for(p in i)m=i[p],y=n[p],!i.hasOwnProperty(p)||m===y||m==null&&y==null||Ae(t,e,p,m,i,y)}function Dv(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Lx(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,n=performance.getEntriesByType("resource"),i=0;i<n.length;i++){var o=n[i],s=o.transferSize,r=o.initiatorType,a=o.duration;if(s&&a&&Dv(r)){for(r=0,a=o.responseEnd,i+=1;i<n.length;i++){var l=n[i],c=l.startTime;if(c>a)break;var h=l.transferSize,p=l.initiatorType;h&&Dv(p)&&(l=l.responseEnd,r+=h*(l<a?1:(a-c)/(l-c)))}if(--i,e+=8*(s+r)/(o.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Fh=null,Gh=null;function Ec(t){return t.nodeType===9?t:t.ownerDocument}function Pv(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function qA(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function zh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ld=null;function kx(){var t=window.event;return t&&t.type==="popstate"?t===Ld?!1:(Ld=t,!0):(Ld=null,!1)}var BA=typeof setTimeout=="function"?setTimeout:void 0,Ox=typeof clearTimeout=="function"?clearTimeout:void 0,Vv=typeof Promise=="function"?Promise:void 0,qx=typeof queueMicrotask=="function"?queueMicrotask:typeof Vv<"u"?function(t){return Vv.resolve(null).then(t).catch(Bx)}:BA;function Bx(t){setTimeout(function(){throw t})}function Bo(t){return t==="head"}function Uv(t,e){var n=e,i=0;do{var o=n.nextSibling;if(t.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"||n==="/&"){if(i===0){t.removeChild(o),br(e);return}i--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")i++;else if(n==="html")Ba(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,Ba(n);for(var s=n.firstChild;s;){var r=s.nextSibling,a=s.nodeName;s[Il]||a==="SCRIPT"||a==="STYLE"||a==="LINK"&&s.rel.toLowerCase()==="stylesheet"||n.removeChild(s),s=r}}else n==="body"&&Ba(t.ownerDocument.body);n=o}while(n);br(e)}function Lv(t,e){var n=t;t=0;do{var i=n.nextSibling;if(n.nodeType===1?e?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(e?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=i}while(n)}function Hh(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Hh(n),Gp(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function Fx(t,e,n,i){for(;t.nodeType===1;){var o=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!i&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(i){if(!t[Il])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(s=t.getAttribute("rel"),s==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(s!==o.rel||t.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||t.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||t.getAttribute("title")!==(o.title==null?null:o.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(s=t.getAttribute("src"),(s!==(o.src==null?null:o.src)||t.getAttribute("type")!==(o.type==null?null:o.type)||t.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&s&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var s=o.name==null?null:""+o.name;if(o.type==="hidden"&&t.getAttribute("name")===s)return t}else return t;if(t=Vn(t.nextSibling),t===null)break}return null}function Gx(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=Vn(t.nextSibling),t===null))return null;return t}function FA(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=Vn(t.nextSibling),t===null))return null;return t}function Yh(t){return t.data==="$?"||t.data==="$~"}function Jh(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function zx(t,e){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||n.readyState!=="loading")e();else{var i=function(){e(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),t._reactRetry=i}}function Vn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var Kh=null;function kv(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(e===0)return Vn(t.nextSibling);e--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||e++}t=t.nextSibling}return null}function Ov(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(e===0)return t;e--}else n!=="/$"&&n!=="/&"||e++}t=t.previousSibling}return null}function GA(t,e,n){switch(e=Ec(n),t){case"html":if(t=e.documentElement,!t)throw Error(B(452));return t;case"head":if(t=e.head,!t)throw Error(B(453));return t;case"body":if(t=e.body,!t)throw Error(B(454));return t;default:throw Error(B(451))}}function Ba(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);Gp(t)}var Ln=new Map,qv=new Set;function Tc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Bi=_e.d;_e.d={f:Hx,r:Yx,D:Jx,C:Kx,L:$x,m:Qx,X:Wx,S:Xx,M:Zx};function Hx(){var t=Bi.f(),e=hf();return t||e}function Yx(t){var e=kr(t);e!==null&&e.tag===5&&e.type==="form"?US(e):Bi.r(t)}var Fr=typeof document>"u"?null:document;function zA(t,e,n){var i=Fr;if(i&&typeof e=="string"&&e){var o=bn(e);o='link[rel="'+t+'"][href="'+o+'"]',typeof n=="string"&&(o+='[crossorigin="'+n+'"]'),qv.has(o)||(qv.add(o),t={rel:t,crossOrigin:n,href:e},i.querySelector(o)===null&&(e=i.createElement("link"),xt(e,"link",t),yt(e),i.head.appendChild(e)))}}function Jx(t){Bi.D(t),zA("dns-prefetch",t,null)}function Kx(t,e){Bi.C(t,e),zA("preconnect",t,e)}function $x(t,e,n){Bi.L(t,e,n);var i=Fr;if(i&&t&&e){var o='link[rel="preload"][as="'+bn(e)+'"]';e==="image"&&n&&n.imageSrcSet?(o+='[imagesrcset="'+bn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(o+='[imagesizes="'+bn(n.imageSizes)+'"]')):o+='[href="'+bn(t)+'"]';var s=o;switch(e){case"style":s=Ir(t);break;case"script":s=Gr(t)}Ln.has(s)||(t=ke({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),Ln.set(s,t),i.querySelector(o)!==null||e==="style"&&i.querySelector(Pl(s))||e==="script"&&i.querySelector(Vl(s))||(e=i.createElement("link"),xt(e,"link",t),yt(e),i.head.appendChild(e)))}}function Qx(t,e){Bi.m(t,e);var n=Fr;if(n&&t){var i=e&&typeof e.as=="string"?e.as:"script",o='link[rel="modulepreload"][as="'+bn(i)+'"][href="'+bn(t)+'"]',s=o;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Gr(t)}if(!Ln.has(s)&&(t=ke({rel:"modulepreload",href:t},e),Ln.set(s,t),n.querySelector(o)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Vl(s)))return}i=n.createElement("link"),xt(i,"link",t),yt(i),n.head.appendChild(i)}}}function Xx(t,e,n){Bi.S(t,e,n);var i=Fr;if(i&&t){var o=sr(i).hoistableStyles,s=Ir(t);e=e||"default";var r=o.get(s);if(!r){var a={loading:0,preload:null};if(r=i.querySelector(Pl(s)))a.loading=5;else{t=ke({rel:"stylesheet",href:t,"data-precedence":e},n),(n=Ln.get(s))&&Im(t,n);var l=r=i.createElement("link");yt(l),xt(l,"link",t),l._p=new Promise(function(c,h){l.onload=c,l.onerror=h}),l.addEventListener("load",function(){a.loading|=1}),l.addEventListener("error",function(){a.loading|=2}),a.loading|=4,ku(r,e,i)}r={type:"stylesheet",instance:r,count:1,state:a},o.set(s,r)}}}function Wx(t,e){Bi.X(t,e);var n=Fr;if(n&&t){var i=sr(n).hoistableScripts,o=Gr(t),s=i.get(o);s||(s=n.querySelector(Vl(o)),s||(t=ke({src:t,async:!0},e),(e=Ln.get(o))&&bm(t,e),s=n.createElement("script"),yt(s),xt(s,"link",t),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(o,s))}}function Zx(t,e){Bi.M(t,e);var n=Fr;if(n&&t){var i=sr(n).hoistableScripts,o=Gr(t),s=i.get(o);s||(s=n.querySelector(Vl(o)),s||(t=ke({src:t,async:!0,type:"module"},e),(e=Ln.get(o))&&bm(t,e),s=n.createElement("script"),yt(s),xt(s,"link",t),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(o,s))}}function Bv(t,e,n,i){var o=(o=po.current)?Tc(o):null;if(!o)throw Error(B(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=Ir(n.href),n=sr(o).hoistableStyles,i=n.get(e),i||(i={type:"style",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=Ir(n.href);var s=sr(o).hoistableStyles,r=s.get(t);if(r||(o=o.ownerDocument||o,r={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(t,r),(s=o.querySelector(Pl(t)))&&!s._p&&(r.instance=s,r.state.loading=5),Ln.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Ln.set(t,n),s||jx(o,t,n,r.state))),e&&i===null)throw Error(B(528,""));return r}if(e&&i!==null)throw Error(B(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=Gr(n),n=sr(o).hoistableScripts,i=n.get(e),i||(i={type:"script",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(B(444,t))}}function Ir(t){return'href="'+bn(t)+'"'}function Pl(t){return'link[rel="stylesheet"]['+t+"]"}function HA(t){return ke({},t,{"data-precedence":t.precedence,precedence:null})}function jx(t,e,n,i){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?i.loading=1:(e=t.createElement("link"),i.preload=e,e.addEventListener("load",function(){return i.loading|=1}),e.addEventListener("error",function(){return i.loading|=2}),xt(e,"link",n),yt(e),t.head.appendChild(e))}function Gr(t){return'[src="'+bn(t)+'"]'}function Vl(t){return"script[async]"+t}function Fv(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var i=t.querySelector('style[data-href~="'+bn(n.href)+'"]');if(i)return e.instance=i,yt(i),i;var o=ke({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(t.ownerDocument||t).createElement("style"),yt(i),xt(i,"style",o),ku(i,n.precedence,t),e.instance=i;case"stylesheet":o=Ir(n.href);var s=t.querySelector(Pl(o));if(s)return e.state.loading|=4,e.instance=s,yt(s),s;i=HA(n),(o=Ln.get(o))&&Im(i,o),s=(t.ownerDocument||t).createElement("link"),yt(s);var r=s;return r._p=new Promise(function(a,l){r.onload=a,r.onerror=l}),xt(s,"link",i),e.state.loading|=4,ku(s,n.precedence,t),e.instance=s;case"script":return s=Gr(n.src),(o=t.querySelector(Vl(s)))?(e.instance=o,yt(o),o):(i=n,(o=Ln.get(s))&&(i=ke({},n),bm(i,o)),t=t.ownerDocument||t,o=t.createElement("script"),yt(o),xt(o,"link",i),t.head.appendChild(o),e.instance=o);case"void":return null;default:throw Error(B(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(i=e.instance,e.state.loading|=4,ku(i,n.precedence,t));return e.instance}function ku(t,e,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=i.length?i[i.length-1]:null,s=o,r=0;r<i.length;r++){var a=i[r];if(a.dataset.precedence===e)s=a;else if(s!==o)break}s?s.parentNode.insertBefore(t,s.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function Im(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function bm(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var Ou=null;function Gv(t,e,n){if(Ou===null){var i=new Map,o=Ou=new Map;o.set(n,i)}else o=Ou,i=o.get(n),i||(i=new Map,o.set(n,i));if(i.has(t))return i;for(i.set(t,null),n=n.getElementsByTagName(t),o=0;o<n.length;o++){var s=n[o];if(!(s[Il]||s[Rt]||t==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var r=s.getAttribute(e)||"";r=t+r;var a=i.get(r);a?a.push(s):i.set(r,[s])}}return i}function zv(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function eN(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function YA(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}function tN(t,e,n,i){if(n.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var o=Ir(i.href),s=e.querySelector(Pl(o));if(s){e=s._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=Sc.bind(t),e.then(t,t)),n.state.loading|=4,n.instance=s,yt(s);return}s=e.ownerDocument||e,i=HA(i),(o=Ln.get(o))&&Im(i,o),s=s.createElement("link"),yt(s);var r=s;r._p=new Promise(function(a,l){r.onload=a,r.onerror=l}),xt(s,"link",i),n.instance=s}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,e),(e=n.state.preload)&&!(n.state.loading&3)&&(t.count++,n=Sc.bind(t),e.addEventListener("load",n),e.addEventListener("error",n))}}var kd=0;function nN(t,e){return t.stylesheets&&t.count===0&&qu(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var i=setTimeout(function(){if(t.stylesheets&&qu(t,t.stylesheets),t.unsuspend){var s=t.unsuspend;t.unsuspend=null,s()}},6e4+e);0<t.imgBytes&&kd===0&&(kd=62500*Lx());var o=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&qu(t,t.stylesheets),t.unsuspend)){var s=t.unsuspend;t.unsuspend=null,s()}},(t.imgBytes>kd?50:800)+e);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(i),clearTimeout(o)}}:null}function Sc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)qu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Ac=null;function qu(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Ac=new Map,e.forEach(iN,t),Ac=null,Sc.call(t))}function iN(t,e){if(!(e.state.loading&4)){var n=Ac.get(t);if(n)var i=n.get(null);else{n=new Map,Ac.set(t,n);for(var o=t.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<o.length;s++){var r=o[s];(r.nodeName==="LINK"||r.getAttribute("media")!=="not all")&&(n.set(r.dataset.precedence,r),i=r)}i&&n.set(null,i)}o=e.instance,r=o.getAttribute("data-precedence"),s=n.get(r)||i,s===i&&n.set(null,o),n.set(r,o),this.count++,i=Sc.bind(this),o.addEventListener("load",i),o.addEventListener("error",i),s?s.parentNode.insertBefore(o,s.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(o,t.firstChild)),e.state.loading|=4}}var ll={$$typeof:Ai,Provider:null,Consumer:null,_currentValue:as,_currentValue2:as,_threadCount:0};function oN(t,e,n,i,o,s,r,a,l){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=rd(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rd(0),this.hiddenUpdates=rd(null),this.identifierPrefix=i,this.onUncaughtError=o,this.onCaughtError=s,this.onRecoverableError=r,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function JA(t,e,n,i,o,s,r,a,l,c,h,p){return t=new oN(t,e,n,r,l,c,h,p,a),e=1,s===!0&&(e|=24),s=cn(3,null,null,e),t.current=s,s.stateNode=t,e=em(),e.refCount++,t.pooledCache=e,e.refCount++,s.memoizedState={element:i,isDehydrated:n,cache:e},im(s),t}function KA(t){return t?(t=er,t):er}function $A(t,e,n,i,o,s){o=KA(o),i.context===null?i.context=o:i.pendingContext=o,i=go(e),i.payload={element:n},s=s===void 0?null:s,s!==null&&(i.callback=s),n=yo(t,i,e),n!==null&&(Zt(n,t,e),Da(n,t,e))}function Hv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function xm(t,e){Hv(t,e),(t=t.alternate)&&Hv(t,e)}function QA(t){if(t.tag===13||t.tag===31){var e=ws(t,67108864);e!==null&&Zt(e,t,67108864),xm(t,67108864)}}function Yv(t){if(t.tag===13||t.tag===31){var e=mn();e=Bp(e);var n=ws(t,e);n!==null&&Zt(n,t,e),xm(t,e)}}var Cc=!0;function sN(t,e,n,i){var o=j.T;j.T=null;var s=_e.p;try{_e.p=2,Nm(t,e,n,i)}finally{_e.p=s,j.T=o}}function rN(t,e,n,i){var o=j.T;j.T=null;var s=_e.p;try{_e.p=8,Nm(t,e,n,i)}finally{_e.p=s,j.T=o}}function Nm(t,e,n,i){if(Cc){var o=$h(i);if(o===null)Ud(t,e,i,Rc,n),Jv(t,i);else if(lN(o,t,e,n,i))i.stopPropagation();else if(Jv(t,i),e&4&&-1<aN.indexOf(t)){for(;o!==null;){var s=kr(o);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var r=ts(s.pendingLanes);if(r!==0){var a=s;for(a.pendingLanes|=2,a.entangledLanes|=2;r;){var l=1<<31-pn(r);a.entanglements[1]|=l,r&=~l}hi(s),!(ve&6)&&(pc=dn()+500,Dl(0))}}break;case 31:case 13:a=ws(s,2),a!==null&&Zt(a,s,2),hf(),xm(s,2)}if(s=$h(i),s===null&&Ud(t,e,i,Rc,n),s===o)break;o=s}o!==null&&i.stopPropagation()}else Ud(t,e,i,null,n)}}function $h(t){return t=Hp(t),Mm(t)}var Rc=null;function Mm(t){if(Rc=null,t=$s(t),t!==null){var e=Al(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=m0(e),t!==null)return t;t=null}else if(n===31){if(t=g0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return Rc=t,null}function XA(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(JI()){case E0:return 2;case T0:return 8;case ec:case KI:return 32;case S0:return 268435456;default:return 32}default:return 32}}var Qh=!1,Eo=null,To=null,So=null,ul=new Map,cl=new Map,ro=[],aN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Jv(t,e){switch(t){case"focusin":case"focusout":Eo=null;break;case"dragenter":case"dragleave":To=null;break;case"mouseover":case"mouseout":So=null;break;case"pointerover":case"pointerout":ul.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":cl.delete(e.pointerId)}}function ga(t,e,n,i,o,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[o]},e!==null&&(e=kr(e),e!==null&&QA(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function lN(t,e,n,i,o){switch(e){case"focusin":return Eo=ga(Eo,t,e,n,i,o),!0;case"dragenter":return To=ga(To,t,e,n,i,o),!0;case"mouseover":return So=ga(So,t,e,n,i,o),!0;case"pointerover":var s=o.pointerId;return ul.set(s,ga(ul.get(s)||null,t,e,n,i,o)),!0;case"gotpointercapture":return s=o.pointerId,cl.set(s,ga(cl.get(s)||null,t,e,n,i,o)),!0}return!1}function WA(t){var e=$s(t.target);if(e!==null){var n=Al(e);if(n!==null){if(e=n.tag,e===13){if(e=m0(n),e!==null){t.blockedOn=e,Ny(t.priority,function(){Yv(n)});return}}else if(e===31){if(e=g0(n),e!==null){t.blockedOn=e,Ny(t.priority,function(){Yv(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Bu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=$h(t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);hh=i,n.target.dispatchEvent(i),hh=null}else return e=kr(n),e!==null&&QA(e),t.blockedOn=n,!1;e.shift()}return!0}function Kv(t,e,n){Bu(t)&&n.delete(e)}function uN(){Qh=!1,Eo!==null&&Bu(Eo)&&(Eo=null),To!==null&&Bu(To)&&(To=null),So!==null&&Bu(So)&&(So=null),ul.forEach(Kv),cl.forEach(Kv)}function yu(t,e){t.blockedOn===e&&(t.blockedOn=null,Qh||(Qh=!0,dt.unstable_scheduleCallback(dt.unstable_NormalPriority,uN)))}var vu=null;function $v(t){vu!==t&&(vu=t,dt.unstable_scheduleCallback(dt.unstable_NormalPriority,function(){vu===t&&(vu=null);for(var e=0;e<t.length;e+=3){var n=t[e],i=t[e+1],o=t[e+2];if(typeof i!="function"){if(Mm(i||n)===null)continue;break}var s=kr(n);s!==null&&(t.splice(e,3),e-=3,xh(s,{pending:!0,data:o,method:n.method,action:i},i,o))}}))}function br(t){function e(l){return yu(l,t)}Eo!==null&&yu(Eo,t),To!==null&&yu(To,t),So!==null&&yu(So,t),ul.forEach(e),cl.forEach(e);for(var n=0;n<ro.length;n++){var i=ro[n];i.blockedOn===t&&(i.blockedOn=null)}for(;0<ro.length&&(n=ro[0],n.blockedOn===null);)WA(n),n.blockedOn===null&&ro.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var o=n[i],s=n[i+1],r=o[jt]||null;if(typeof s=="function")r||$v(n);else if(r){var a=null;if(s&&s.hasAttribute("formAction")){if(o=s,r=s[jt]||null)a=r.formAction;else if(Mm(o)!==null)continue}else a=r.action;typeof a=="function"?n[i+1]=a:(n.splice(i,3),i-=3),$v(n)}}}function ZA(){function t(s){s.canIntercept&&s.info==="react-transition"&&s.intercept({handler:function(){return new Promise(function(r){return o=r})},focusReset:"manual",scroll:"manual"})}function e(){o!==null&&(o(),o=null),i||setTimeout(n,20)}function n(){if(!i&&!navigation.transition){var s=navigation.currentEntry;s&&s.url!=null&&navigation.navigate(s.url,{state:s.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,o=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(n,100),function(){i=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),o!==null&&(o(),o=null)}}}function Dm(t){this._internalRoot=t}gf.prototype.render=Dm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));var n=e.current,i=mn();$A(n,i,t,e,null,null)};gf.prototype.unmount=Dm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;$A(t.current,2,null,t,null,null),hf(),e[Lr]=null}};function gf(t){this._internalRoot=t}gf.prototype.unstable_scheduleHydration=function(t){if(t){var e=I0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ro.length&&e!==0&&e<ro[n].priority;n++);ro.splice(n,0,t),n===0&&WA(t)}};var Qv=h0.version;if(Qv!=="19.2.0")throw Error(B(527,Qv,"19.2.0"));_e.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=qI(e),t=t!==null?y0(t):null,t=t===null?null:t.stateNode,t};var cN={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_u.isDisabled&&_u.supportsFiber)try{Cl=_u.inject(cN),hn=_u}catch{}}Zc.createRoot=function(t,e){if(!p0(t))throw Error(B(299));var n=!1,i="",o=zS,s=HS,r=YS;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onUncaughtError!==void 0&&(o=e.onUncaughtError),e.onCaughtError!==void 0&&(s=e.onCaughtError),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=JA(t,1,!1,null,null,n,i,null,o,s,r,ZA),t[Lr]=e.current,wm(t),new Dm(e)};Zc.hydrateRoot=function(t,e,n){if(!p0(t))throw Error(B(299));var i=!1,o="",s=zS,r=HS,a=YS,l=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(r=n.onCaughtError),n.onRecoverableError!==void 0&&(a=n.onRecoverableError),n.formState!==void 0&&(l=n.formState)),e=JA(t,1,!0,e,n??null,i,o,l,s,r,a,ZA),e.context=KA(null),n=e.current,i=mn(),i=Bp(i),o=go(i),o.callback=null,yo(n,o,i),n=i,e.current.lanes=n,wl(e,n),hi(e),t[Lr]=e.current,wm(t),new gf(e)};Zc.version="19.2.0";function jA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(jA)}catch(t){console.error(t)}}jA(),a0.exports=Zc;var fN=a0.exports;const dN=WT(fN);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let hN,pN;function mN(){return{geminiUrl:hN,vertexUrl:pN}}function gN(t,e,n,i){var o,s;if(!(t!=null&&t.baseUrl)){const r=mN();return e?(o=r.vertexUrl)!==null&&o!==void 0?o:n:(s=r.geminiUrl)!==null&&s!==void 0?s:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fi{}function Y(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const s=e[o];return s!=null?String(s):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function f(t,e,n){for(let s=0;s<e.length-1;s++){const r=e[s];if(r.endsWith("[]")){const a=r.slice(0,-2);if(!(a in t))if(Array.isArray(n))t[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${r}`);if(Array.isArray(t[a])){const l=t[a];if(Array.isArray(n))for(let c=0;c<l.length;c++){const h=l[c];f(h,e.slice(s+1),n[c])}else for(const c of l)f(c,e.slice(s+1),n)}return}else if(r.endsWith("[0]")){const a=r.slice(0,-3);a in t||(t[a]=[{}]);const l=t[a];f(l[0],e.slice(s+1),n);return}(!t[r]||typeof t[r]!="object")&&(t[r]={}),t=t[r]}const i=e[e.length-1],o=t[i];if(o!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===o)return;if(typeof o=="object"&&typeof n=="object"&&o!==null&&n!==null)Object.assign(o,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function u(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return n;const o=e[i];if(o.endsWith("[]")){const s=o.slice(0,-2);if(s in t){const r=t[s];return Array.isArray(r)?r.map(a=>u(a,e.slice(i+1),n)):n}else return n}else t=t[o]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}function yN(t,e){for(const[n,i]of Object.entries(e)){const o=n.split("."),s=i.split("."),r=new Set;let a=-1;for(let l=0;l<o.length;l++)if(o[l]==="*"){a=l;break}if(a!==-1&&s.length>a)for(let l=a;l<s.length;l++){const c=s[l];c!=="*"&&!c.endsWith("[]")&&!c.endsWith("[0]")&&r.add(c)}Xh(t,o,s,0,r)}}function Xh(t,e,n,i,o){if(i>=e.length||typeof t!="object"||t===null)return;const s=e[i];if(s.endsWith("[]")){const r=s.slice(0,-2),a=t;if(r in a&&Array.isArray(a[r]))for(const l of a[r])Xh(l,e,n,i+1,o)}else if(s==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const r=t,a=Object.keys(r).filter(c=>!c.startsWith("_")&&!o.has(c)),l={};for(const c of a)l[c]=r[c];for(const[c,h]of Object.entries(l)){const p=[];for(const m of n.slice(i))m==="*"?p.push(c):p.push(m);f(r,p,h)}for(const c of a)delete r[c]}}else{const r=t;s in r&&Xh(r[s],e,n,i+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Pm(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vN(t){const e={},n=u(t,["operationName"]);n!=null&&f(e,["operationName"],n);const i=u(t,["resourceName"]);return i!=null&&f(e,["_url","resourceName"],i),e}function _N(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const i=u(t,["metadata"]);i!=null&&f(e,["metadata"],i);const o=u(t,["done"]);o!=null&&f(e,["done"],o);const s=u(t,["error"]);s!=null&&f(e,["error"],s);const r=u(t,["response","generateVideoResponse"]);return r!=null&&f(e,["response"],TN(r)),e}function EN(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const i=u(t,["metadata"]);i!=null&&f(e,["metadata"],i);const o=u(t,["done"]);o!=null&&f(e,["done"],o);const s=u(t,["error"]);s!=null&&f(e,["error"],s);const r=u(t,["response"]);return r!=null&&f(e,["response"],SN(r)),e}function TN(t){const e={},n=u(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>AN(r))),f(e,["generatedVideos"],s)}const i=u(t,["raiMediaFilteredCount"]);i!=null&&f(e,["raiMediaFilteredCount"],i);const o=u(t,["raiMediaFilteredReasons"]);return o!=null&&f(e,["raiMediaFilteredReasons"],o),e}function SN(t){const e={},n=u(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>CN(r))),f(e,["generatedVideos"],s)}const i=u(t,["raiMediaFilteredCount"]);i!=null&&f(e,["raiMediaFilteredCount"],i);const o=u(t,["raiMediaFilteredReasons"]);return o!=null&&f(e,["raiMediaFilteredReasons"],o),e}function AN(t){const e={},n=u(t,["video"]);return n!=null&&f(e,["video"],NN(n)),e}function CN(t){const e={},n=u(t,["_self"]);return n!=null&&f(e,["video"],MN(n)),e}function RN(t){const e={},n=u(t,["operationName"]);return n!=null&&f(e,["_url","operationName"],n),e}function wN(t){const e={},n=u(t,["operationName"]);return n!=null&&f(e,["_url","operationName"],n),e}function IN(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const i=u(t,["metadata"]);i!=null&&f(e,["metadata"],i);const o=u(t,["done"]);o!=null&&f(e,["done"],o);const s=u(t,["error"]);s!=null&&f(e,["error"],s);const r=u(t,["response"]);return r!=null&&f(e,["response"],bN(r)),e}function bN(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["parent"]);i!=null&&f(e,["parent"],i);const o=u(t,["documentName"]);return o!=null&&f(e,["documentName"],o),e}function eC(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const i=u(t,["metadata"]);i!=null&&f(e,["metadata"],i);const o=u(t,["done"]);o!=null&&f(e,["done"],o);const s=u(t,["error"]);s!=null&&f(e,["error"],s);const r=u(t,["response"]);return r!=null&&f(e,["response"],xN(r)),e}function xN(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["parent"]);i!=null&&f(e,["parent"],i);const o=u(t,["documentName"]);return o!=null&&f(e,["documentName"],o),e}function NN(t){const e={},n=u(t,["uri"]);n!=null&&f(e,["uri"],n);const i=u(t,["encodedVideo"]);i!=null&&f(e,["videoBytes"],Pm(i));const o=u(t,["encoding"]);return o!=null&&f(e,["mimeType"],o),e}function MN(t){const e={},n=u(t,["gcsUri"]);n!=null&&f(e,["uri"],n);const i=u(t,["bytesBase64Encoded"]);i!=null&&f(e,["videoBytes"],Pm(i));const o=u(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Xv;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Xv||(Xv={}));var Wv;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Wv||(Wv={}));var Zv;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Zv||(Zv={}));var se;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(se||(se={}));var jv;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(jv||(jv={}));var e_;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(e_||(e_={}));var t_;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(t_||(t_={}));var n_;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(n_||(n_={}));var i_;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(i_||(i_={}));var o_;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})(o_||(o_={}));var s_;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(s_||(s_={}));var r_;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(r_||(r_={}));var a_;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(a_||(a_={}));var l_;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(l_||(l_={}));var u_;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(u_||(u_={}));var c_;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(c_||(c_={}));var f_;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(f_||(f_={}));var d_;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(d_||(d_={}));var h_;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(h_||(h_={}));var wc;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(wc||(wc={}));var p_;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(p_||(p_={}));var m_;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(m_||(m_={}));var g_;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(g_||(g_={}));var Wh;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Wh||(Wh={}));var y_;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(y_||(y_={}));var v_;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(v_||(v_={}));var __;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(__||(__={}));var E_;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(E_||(E_={}));var T_;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(T_||(T_={}));var S_;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(S_||(S_={}));var A_;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(A_||(A_={}));var C_;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(C_||(C_={}));var R_;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(R_||(R_={}));var w_;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(w_||(w_={}));var I_;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(I_||(I_={}));var b_;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(b_||(b_={}));var x_;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(x_||(x_={}));var N_;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(N_||(N_={}));var M_;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(M_||(M_={}));var D_;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(D_||(D_={}));var P_;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(P_||(P_={}));var V_;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(V_||(V_={}));var U_;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(U_||(U_={}));var L_;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(L_||(L_={}));var k_;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(k_||(k_={}));var O_;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(O_||(O_={}));var q_;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(q_||(q_={}));var B_;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(B_||(B_={}));var F_;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(F_||(F_={}));var G_;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(G_||(G_={}));var z_;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(z_||(z_={}));var H_;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(H_||(H_={}));var Y_;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Y_||(Y_={}));var J_;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(J_||(J_={}));var or;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(or||(or={}));class Zh{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class ya{get text(){var e,n,i,o,s,r,a,l;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",h=!1;const p=[];for(const m of(l=(a=(r=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[y,b]of Object.entries(m))y!=="text"&&y!=="thought"&&y!=="thoughtSignature"&&(b!==null||b!==void 0)&&p.push(y);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;h=!0,c+=m.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),h?c:void 0}get data(){var e,n,i,o,s,r,a,l;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const h=[];for(const p of(l=(a=(r=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[m,y]of Object.entries(p))m!=="inlineData"&&(y!==null||y!==void 0)&&h.push(m);p.inlineData&&typeof p.inlineData.data=="string"&&(c+=atob(p.inlineData.data))}return h.length>0&&console.warn(`there are non-data parts ${h} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,n,i,o,s,r,a,l;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(l=(a=(r=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(h=>h.functionCall).map(h=>h.functionCall).filter(h=>h!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,n,i,o,s,r,a,l,c;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const h=(l=(a=(r=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((h==null?void 0:h.length)!==0)return(c=h==null?void 0:h[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,n,i,o,s,r,a,l,c;if(((o=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const h=(l=(a=(r=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((h==null?void 0:h.length)!==0)return(c=h==null?void 0:h[0])===null||c===void 0?void 0:c.output}}class K_{}class $_{}class DN{}class PN{}class VN{}class UN{}class Q_{}class X_{}class W_{}class LN{}class Ic{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new Ic;let o;const s=e;return n?o=EN(s):o=_N(s),Object.assign(i,o),i}}class Z_{}class j_{}class eE{}class kN{}class ON{}class qN{}class Vm{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new Vm,s=IN(e);return Object.assign(i,s),i}}class BN{}class FN{}class GN{}class tE{}class zN{get text(){var e,n,i;let o="",s=!1;const r=[];for(const a of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[l,c]of Object.entries(a))l!=="text"&&l!=="thought"&&c!==null&&r.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;s=!0,o+=a.text}}return r.length>0&&console.warn(`there are non-text parts ${r} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?o:void 0}get data(){var e,n,i;let o="";const s=[];for(const r of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[a,l]of Object.entries(r))a!=="inlineData"&&l!==null&&s.push(a);r.inlineData&&typeof r.inlineData.data=="string"&&(o+=atob(r.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class HN{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Um{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new Um,s=eC(e);return Object.assign(i,s),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ge(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function tC(t,e){const n=ge(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function nC(t){return Array.isArray(t)?t.map(e=>bc(e)):[bc(t)]}function bc(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function iC(t){const e=bc(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function oC(t){const e=bc(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function nE(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function sC(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>nE(e)):[nE(t)]}function jh(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function iE(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function oE(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function kt(t){if(t==null)throw new Error("ContentUnion is required");return jh(t)?t:{role:"user",parts:sC(t)}}function Lm(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=kt(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=kt(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>kt(n)):[kt(e)]}function Un(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(iE(t)||oE(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[kt(t)]}const e=[],n=[],i=jh(t[0]);for(const o of t){const s=jh(o);if(s!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)e.push(o);else{if(iE(o)||oE(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(o)}}return i||e.push({role:"user",parts:sC(n)}),e}function YN(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(se).includes(n[0].toUpperCase())?n[0].toUpperCase():se.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(se).includes(i.toUpperCase())?i.toUpperCase():se.TYPE_UNSPECIFIED})}}function dr(t){const e={},n=["items"],i=["anyOf"],o=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const s=t.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(e.nullable=!0,t=s[1]):s[1].type==="null"&&(e.nullable=!0,t=s[0])),t.type instanceof Array&&YN(t.type,e);for(const[r,a]of Object.entries(t))if(a!=null)if(r=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(se).includes(a.toUpperCase())?a.toUpperCase():se.TYPE_UNSPECIFIED}else if(n.includes(r))e[r]=dr(a);else if(i.includes(r)){const l=[];for(const c of a){if(c.type=="null"){e.nullable=!0;continue}l.push(dr(c))}e[r]=l}else if(o.includes(r)){const l={};for(const[c,h]of Object.entries(a))l[c]=dr(h);e[r]=l}else{if(r==="additionalProperties")continue;e[r]=a}return e}function km(t){return dr(t)}function Om(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function qm(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function zr(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=dr(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=dr(e.response));return t}function Hr(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function JN(t,e,n,i=1){const o=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:o?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:o?`${n}/${e}`:e}function Gi(t,e){if(typeof e!="string")throw new Error("name must be a string");return JN(t,e,"cachedContents")}function rC(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Fo(t){return Pm(t)}function KN(t){return t!=null&&typeof t=="object"&&"name"in t}function $N(t){return t!=null&&typeof t=="object"&&"video"in t}function QN(t){return t!=null&&typeof t=="object"&&"uri"in t}function aC(t){var e;let n;if(KN(t)&&(n=t.name),!(QN(t)&&(n=t.uri,n===void 0))&&!($N(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const o=n.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${n}`);n=o[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function lC(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function uC(t){for(const e of["models","tunedModels","publisherModels"])if(XN(t,e))return t[e];return[]}function XN(t,e){return t!==null&&typeof t=="object"&&e in t}function WN(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function ZN(t,e={}){const n=[],i=new Set;for(const o of t){const s=o.name;if(i.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);i.add(s);const r=WN(o,e);r.functionDeclarations&&n.push(...r.functionDeclarations)}return{functionDeclarations:n}}function cC(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,o=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(o>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function jN(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function fC(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const o=n.inlinedResponses;if(!Array.isArray(o)||o.length===0)return t;let s=!1;for(const r of o){if(typeof r!="object"||r===null)continue;const l=r.response;if(typeof l!="object"||l===null)continue;if(l.embedding!==void 0){s=!0;break}}return s&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Yr(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function dC(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function e1(t){const e={},n=u(t,["responsesFile"]);n!=null&&f(e,["fileName"],n);const i=u(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>V1(r))),f(e,["inlinedResponses"],s)}const o=u(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),f(e,["inlinedEmbedContentResponses"],s)}return e}function t1(t){const e={},n=u(t,["predictionsFormat"]);n!=null&&f(e,["format"],n);const i=u(t,["gcsDestination","outputUriPrefix"]);i!=null&&f(e,["gcsUri"],i);const o=u(t,["bigqueryDestination","outputUri"]);return o!=null&&f(e,["bigqueryUri"],o),e}function n1(t){const e={},n=u(t,["format"]);n!=null&&f(e,["predictionsFormat"],n);const i=u(t,["gcsUri"]);i!=null&&f(e,["gcsDestination","outputUriPrefix"],i);const o=u(t,["bigqueryUri"]);if(o!=null&&f(e,["bigqueryDestination","outputUri"],o),u(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(u(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Fu(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const i=u(t,["metadata","displayName"]);i!=null&&f(e,["displayName"],i);const o=u(t,["metadata","state"]);o!=null&&f(e,["state"],dC(o));const s=u(t,["metadata","createTime"]);s!=null&&f(e,["createTime"],s);const r=u(t,["metadata","endTime"]);r!=null&&f(e,["endTime"],r);const a=u(t,["metadata","updateTime"]);a!=null&&f(e,["updateTime"],a);const l=u(t,["metadata","model"]);l!=null&&f(e,["model"],l);const c=u(t,["metadata","output"]);return c!=null&&f(e,["dest"],e1(fC(c))),e}function ep(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const i=u(t,["displayName"]);i!=null&&f(e,["displayName"],i);const o=u(t,["state"]);o!=null&&f(e,["state"],dC(o));const s=u(t,["error"]);s!=null&&f(e,["error"],s);const r=u(t,["createTime"]);r!=null&&f(e,["createTime"],r);const a=u(t,["startTime"]);a!=null&&f(e,["startTime"],a);const l=u(t,["endTime"]);l!=null&&f(e,["endTime"],l);const c=u(t,["updateTime"]);c!=null&&f(e,["updateTime"],c);const h=u(t,["model"]);h!=null&&f(e,["model"],h);const p=u(t,["inputConfig"]);p!=null&&f(e,["src"],i1(p));const m=u(t,["outputConfig"]);m!=null&&f(e,["dest"],t1(fC(m)));const y=u(t,["completionStats"]);return y!=null&&f(e,["completionStats"],y),e}function i1(t){const e={},n=u(t,["instancesFormat"]);n!=null&&f(e,["format"],n);const i=u(t,["gcsSource","uris"]);i!=null&&f(e,["gcsUri"],i);const o=u(t,["bigquerySource","inputUri"]);return o!=null&&f(e,["bigqueryUri"],o),e}function o1(t,e){const n={};if(u(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(u(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=u(e,["fileName"]);i!=null&&f(n,["fileName"],i);const o=u(e,["inlinedRequests"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>P1(t,r))),f(n,["requests","requests"],s)}return n}function s1(t){const e={},n=u(t,["format"]);n!=null&&f(e,["instancesFormat"],n);const i=u(t,["gcsUri"]);i!=null&&f(e,["gcsSource","uris"],i);const o=u(t,["bigqueryUri"]);if(o!=null&&f(e,["bigquerySource","inputUri"],o),u(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function r1(t){const e={},n=u(t,["data"]);if(n!=null&&f(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function a1(t,e){const n={},i=u(e,["name"]);return i!=null&&f(n,["_url","name"],Yr(t,i)),n}function l1(t,e){const n={},i=u(e,["name"]);return i!=null&&f(n,["_url","name"],Yr(t,i)),n}function u1(t){const e={},n=u(t,["content"]);n!=null&&f(e,["content"],n);const i=u(t,["citationMetadata"]);i!=null&&f(e,["citationMetadata"],c1(i));const o=u(t,["tokenCount"]);o!=null&&f(e,["tokenCount"],o);const s=u(t,["finishReason"]);s!=null&&f(e,["finishReason"],s);const r=u(t,["avgLogprobs"]);r!=null&&f(e,["avgLogprobs"],r);const a=u(t,["groundingMetadata"]);a!=null&&f(e,["groundingMetadata"],a);const l=u(t,["index"]);l!=null&&f(e,["index"],l);const c=u(t,["logprobsResult"]);c!=null&&f(e,["logprobsResult"],c);const h=u(t,["safetyRatings"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(y=>y)),f(e,["safetyRatings"],m)}const p=u(t,["urlContextMetadata"]);return p!=null&&f(e,["urlContextMetadata"],p),e}function c1(t){const e={},n=u(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),f(e,["citations"],i)}return e}function hC(t){const e={},n=u(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>F1(s))),f(e,["parts"],o)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function f1(t,e){const n={},i=u(t,["displayName"]);if(e!==void 0&&i!=null&&f(e,["batch","displayName"],i),u(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function d1(t,e){const n={},i=u(t,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);const o=u(t,["dest"]);return e!==void 0&&o!=null&&f(e,["outputConfig"],n1(jN(o))),n}function sE(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ge(t,i));const o=u(e,["src"]);o!=null&&f(n,["batch","inputConfig"],o1(t,cC(t,o)));const s=u(e,["config"]);return s!=null&&f1(s,n),n}function h1(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["model"],ge(t,i));const o=u(e,["src"]);o!=null&&f(n,["inputConfig"],s1(cC(t,o)));const s=u(e,["config"]);return s!=null&&d1(s,n),n}function p1(t,e){const n={},i=u(t,["displayName"]);return e!==void 0&&i!=null&&f(e,["batch","displayName"],i),n}function m1(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ge(t,i));const o=u(e,["src"]);o!=null&&f(n,["batch","inputConfig"],S1(t,o));const s=u(e,["config"]);return s!=null&&p1(s,n),n}function g1(t,e){const n={},i=u(e,["name"]);return i!=null&&f(n,["_url","name"],Yr(t,i)),n}function y1(t,e){const n={},i=u(e,["name"]);return i!=null&&f(n,["_url","name"],Yr(t,i)),n}function v1(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["name"]);i!=null&&f(e,["name"],i);const o=u(t,["done"]);o!=null&&f(e,["done"],o);const s=u(t,["error"]);return s!=null&&f(e,["error"],s),e}function _1(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["name"]);i!=null&&f(e,["name"],i);const o=u(t,["done"]);o!=null&&f(e,["done"],o);const s=u(t,["error"]);return s!=null&&f(e,["error"],s),e}function E1(t,e){const n={},i=u(e,["contents"]);if(i!=null){let s=Lm(t,i);Array.isArray(s)&&(s=s.map(r=>r)),f(n,["requests[]","request","content"],s)}const o=u(e,["config"]);return o!=null&&(f(n,["_self"],T1(o,n)),yN(n,{"requests[].*":"requests[].request.*"})),n}function T1(t,e){const n={},i=u(t,["taskType"]);e!==void 0&&i!=null&&f(e,["requests[]","taskType"],i);const o=u(t,["title"]);e!==void 0&&o!=null&&f(e,["requests[]","title"],o);const s=u(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&f(e,["requests[]","outputDimensionality"],s),u(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function S1(t,e){const n={},i=u(e,["fileName"]);i!=null&&f(n,["file_name"],i);const o=u(e,["inlinedRequests"]);return o!=null&&f(n,["requests"],E1(t,o)),n}function A1(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function C1(t){const e={},n=u(t,["id"]);n!=null&&f(e,["id"],n);const i=u(t,["args"]);i!=null&&f(e,["args"],i);const o=u(t,["name"]);if(o!=null&&f(e,["name"],o),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function R1(t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["allowedFunctionNames"]);if(i!=null&&f(e,["allowedFunctionNames"],i),u(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function w1(t,e,n){const i={},o=u(e,["systemInstruction"]);n!==void 0&&o!=null&&f(n,["systemInstruction"],hC(kt(o)));const s=u(e,["temperature"]);s!=null&&f(i,["temperature"],s);const r=u(e,["topP"]);r!=null&&f(i,["topP"],r);const a=u(e,["topK"]);a!=null&&f(i,["topK"],a);const l=u(e,["candidateCount"]);l!=null&&f(i,["candidateCount"],l);const c=u(e,["maxOutputTokens"]);c!=null&&f(i,["maxOutputTokens"],c);const h=u(e,["stopSequences"]);h!=null&&f(i,["stopSequences"],h);const p=u(e,["responseLogprobs"]);p!=null&&f(i,["responseLogprobs"],p);const m=u(e,["logprobs"]);m!=null&&f(i,["logprobs"],m);const y=u(e,["presencePenalty"]);y!=null&&f(i,["presencePenalty"],y);const b=u(e,["frequencyPenalty"]);b!=null&&f(i,["frequencyPenalty"],b);const x=u(e,["seed"]);x!=null&&f(i,["seed"],x);const P=u(e,["responseMimeType"]);P!=null&&f(i,["responseMimeType"],P);const R=u(e,["responseSchema"]);R!=null&&f(i,["responseSchema"],km(R));const E=u(e,["responseJsonSchema"]);if(E!=null&&f(i,["responseJsonSchema"],E),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const w=u(e,["safetySettings"]);if(n!==void 0&&w!=null){let V=w;Array.isArray(V)&&(V=V.map(N=>G1(N))),f(n,["safetySettings"],V)}const D=u(e,["tools"]);if(n!==void 0&&D!=null){let V=Hr(D);Array.isArray(V)&&(V=V.map(N=>H1(zr(N)))),f(n,["tools"],V)}const O=u(e,["toolConfig"]);if(n!==void 0&&O!=null&&f(n,["toolConfig"],z1(O)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const q=u(e,["cachedContent"]);n!==void 0&&q!=null&&f(n,["cachedContent"],Gi(t,q));const T=u(e,["responseModalities"]);T!=null&&f(i,["responseModalities"],T);const _=u(e,["mediaResolution"]);_!=null&&f(i,["mediaResolution"],_);const A=u(e,["speechConfig"]);if(A!=null&&f(i,["speechConfig"],Om(A)),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const I=u(e,["thinkingConfig"]);I!=null&&f(i,["thinkingConfig"],I);const M=u(e,["imageConfig"]);return M!=null&&f(i,["imageConfig"],D1(M)),i}function I1(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["candidates"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>u1(c))),f(e,["candidates"],l)}const o=u(t,["modelVersion"]);o!=null&&f(e,["modelVersion"],o);const s=u(t,["promptFeedback"]);s!=null&&f(e,["promptFeedback"],s);const r=u(t,["responseId"]);r!=null&&f(e,["responseId"],r);const a=u(t,["usageMetadata"]);return a!=null&&f(e,["usageMetadata"],a),e}function b1(t,e){const n={},i=u(e,["name"]);return i!=null&&f(n,["_url","name"],Yr(t,i)),n}function x1(t,e){const n={},i=u(e,["name"]);return i!=null&&f(n,["_url","name"],Yr(t,i)),n}function N1(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function M1(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function D1(t){const e={},n=u(t,["aspectRatio"]);n!=null&&f(e,["aspectRatio"],n);const i=u(t,["imageSize"]);if(i!=null&&f(e,["imageSize"],i),u(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(u(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function P1(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["request","model"],ge(t,i));const o=u(e,["contents"]);if(o!=null){let a=Un(o);Array.isArray(a)&&(a=a.map(l=>hC(l))),f(n,["request","contents"],a)}const s=u(e,["metadata"]);s!=null&&f(n,["metadata"],s);const r=u(e,["config"]);return r!=null&&f(n,["request","generationConfig"],w1(t,r,u(n,["request"],{}))),n}function V1(t){const e={},n=u(t,["response"]);n!=null&&f(e,["response"],I1(n));const i=u(t,["error"]);return i!=null&&f(e,["error"],i),e}function U1(t,e){const n={},i=u(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const o=u(t,["pageToken"]);if(e!==void 0&&o!=null&&f(e,["_query","pageToken"],o),u(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function L1(t,e){const n={},i=u(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const o=u(t,["pageToken"]);e!==void 0&&o!=null&&f(e,["_query","pageToken"],o);const s=u(t,["filter"]);return e!==void 0&&s!=null&&f(e,["_query","filter"],s),n}function k1(t){const e={},n=u(t,["config"]);return n!=null&&U1(n,e),e}function O1(t){const e={},n=u(t,["config"]);return n!=null&&L1(n,e),e}function q1(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const o=u(t,["operations"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>Fu(r))),f(e,["batchJobs"],s)}return e}function B1(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const o=u(t,["batchPredictionJobs"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>ep(r))),f(e,["batchJobs"],s)}return e}function F1(t){const e={},n=u(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const i=u(t,["codeExecutionResult"]);i!=null&&f(e,["codeExecutionResult"],i);const o=u(t,["executableCode"]);o!=null&&f(e,["executableCode"],o);const s=u(t,["fileData"]);s!=null&&f(e,["fileData"],A1(s));const r=u(t,["functionCall"]);r!=null&&f(e,["functionCall"],C1(r));const a=u(t,["functionResponse"]);a!=null&&f(e,["functionResponse"],a);const l=u(t,["inlineData"]);l!=null&&f(e,["inlineData"],r1(l));const c=u(t,["text"]);c!=null&&f(e,["text"],c);const h=u(t,["thought"]);h!=null&&f(e,["thought"],h);const p=u(t,["thoughtSignature"]);p!=null&&f(e,["thoughtSignature"],p);const m=u(t,["videoMetadata"]);return m!=null&&f(e,["videoMetadata"],m),e}function G1(t){const e={},n=u(t,["category"]);if(n!=null&&f(e,["category"],n),u(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=u(t,["threshold"]);return i!=null&&f(e,["threshold"],i),e}function z1(t){const e={},n=u(t,["functionCallingConfig"]);n!=null&&f(e,["functionCallingConfig"],R1(n));const i=u(t,["retrievalConfig"]);return i!=null&&f(e,["retrievalConfig"],i),e}function H1(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>p)),f(e,["functionDeclarations"],h)}if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(t,["googleSearchRetrieval"]);i!=null&&f(e,["googleSearchRetrieval"],i);const o=u(t,["computerUse"]);o!=null&&f(e,["computerUse"],o);const s=u(t,["fileSearch"]);s!=null&&f(e,["fileSearch"],s);const r=u(t,["codeExecution"]);if(r!=null&&f(e,["codeExecution"],r),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=u(t,["googleMaps"]);a!=null&&f(e,["googleMaps"],N1(a));const l=u(t,["googleSearch"]);l!=null&&f(e,["googleSearch"],M1(l));const c=u(t,["urlContext"]);return c!=null&&f(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ui;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Ui||(Ui={}));class bs{constructor(e,n,i,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,o)}init(e,n,i){var o,s;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let r={config:{}};!i||Object.keys(i).length===0?r={config:{}}:typeof i=="object"?r=Object.assign({},i):r=i,r.config&&(r.config.pageToken=n.nextPageToken),this.paramsInternal=r,this.pageInternalSize=(s=(o=r.config)===null||o===void 0?void 0:o.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Y1 extends Fi{constructor(e){super(),this.apiClient=e,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new bs(Ui.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=sE(this.apiClient,e),i=n._url,o=Y("{model}:batchGenerateContent",i),a=n.batch.inputConfig.requests,l=a.requests,c=[];for(const h of l){const p=Object.assign({},h);if(p.systemInstruction){const m=p.systemInstruction;delete p.systemInstruction;const y=p.request;y.systemInstruction=m,p.request=y}c.push(p)}return a.requests=c,delete n.config,delete n._url,delete n._query,{path:o,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const i=n?Object.assign({},n):{},o=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${o}`),i.dest===void 0){const s=this.getGcsUri(e),r=this.getBigqueryUri(e);if(s)s.endsWith(".jsonl")?i.dest=`${s.slice(0,-6)}/dest`:i.dest=`${s}_dest_${o}`;else if(r)i.dest=`${r}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=h1(this.apiClient,e);return a=Y("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>ep(h))}else{const c=sE(this.apiClient,e);return a=Y("{model}:batchGenerateContent",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),r.then(h=>Fu(h))}}async createEmbeddingsInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=m1(this.apiClient,e);return s=Y("{model}:asyncBatchEmbedContent",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>Fu(l))}}async get(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=x1(this.apiClient,e);return a=Y("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>ep(h))}else{const c=b1(this.apiClient,e);return a=Y("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),r.then(h=>Fu(h))}}async cancel(e){var n,i,o,s;let r="",a={};if(this.apiClient.isVertexAI()){const l=l1(this.apiClient,e);r=Y("batchPredictionJobs/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const l=a1(this.apiClient,e);r=Y("batches/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=O1(e);return a=Y("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const p=B1(h),m=new tE;return Object.assign(m,p),m})}else{const c=k1(e);return a=Y("batches",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const p=q1(h),m=new tE;return Object.assign(m,p),m})}}async delete(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=y1(this.apiClient,e);return a=Y("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>_1(h))}else{const c=g1(this.apiClient,e);return a=Y("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>v1(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function J1(t){const e={},n=u(t,["data"]);if(n!=null&&f(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function rE(t){const e={},n=u(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>mM(s))),f(e,["parts"],o)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function K1(t,e){const n={},i=u(t,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);const o=u(t,["expireTime"]);e!==void 0&&o!=null&&f(e,["expireTime"],o);const s=u(t,["displayName"]);e!==void 0&&s!=null&&f(e,["displayName"],s);const r=u(t,["contents"]);if(e!==void 0&&r!=null){let h=Un(r);Array.isArray(h)&&(h=h.map(p=>rE(p))),f(e,["contents"],h)}const a=u(t,["systemInstruction"]);e!==void 0&&a!=null&&f(e,["systemInstruction"],rE(kt(a)));const l=u(t,["tools"]);if(e!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(p=>yM(p))),f(e,["tools"],h)}const c=u(t,["toolConfig"]);if(e!==void 0&&c!=null&&f(e,["toolConfig"],gM(c)),u(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function $1(t,e){const n={},i=u(t,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);const o=u(t,["expireTime"]);e!==void 0&&o!=null&&f(e,["expireTime"],o);const s=u(t,["displayName"]);e!==void 0&&s!=null&&f(e,["displayName"],s);const r=u(t,["contents"]);if(e!==void 0&&r!=null){let p=Un(r);Array.isArray(p)&&(p=p.map(m=>m)),f(e,["contents"],p)}const a=u(t,["systemInstruction"]);e!==void 0&&a!=null&&f(e,["systemInstruction"],kt(a));const l=u(t,["tools"]);if(e!==void 0&&l!=null){let p=l;Array.isArray(p)&&(p=p.map(m=>vM(m))),f(e,["tools"],p)}const c=u(t,["toolConfig"]);e!==void 0&&c!=null&&f(e,["toolConfig"],c);const h=u(t,["kmsKeyName"]);return e!==void 0&&h!=null&&f(e,["encryption_spec","kmsKeyName"],h),n}function Q1(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["model"],tC(t,i));const o=u(e,["config"]);return o!=null&&K1(o,n),n}function X1(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["model"],tC(t,i));const o=u(e,["config"]);return o!=null&&$1(o,n),n}function W1(t,e){const n={},i=u(e,["name"]);return i!=null&&f(n,["_url","name"],Gi(t,i)),n}function Z1(t,e){const n={},i=u(e,["name"]);return i!=null&&f(n,["_url","name"],Gi(t,i)),n}function j1(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function eM(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function tM(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function nM(t){const e={},n=u(t,["id"]);n!=null&&f(e,["id"],n);const i=u(t,["args"]);i!=null&&f(e,["args"],i);const o=u(t,["name"]);if(o!=null&&f(e,["name"],o),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function iM(t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["allowedFunctionNames"]);if(i!=null&&f(e,["allowedFunctionNames"],i),u(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function oM(t){const e={};if(u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=u(t,["description"]);n!=null&&f(e,["description"],n);const i=u(t,["name"]);i!=null&&f(e,["name"],i);const o=u(t,["parameters"]);o!=null&&f(e,["parameters"],o);const s=u(t,["parametersJsonSchema"]);s!=null&&f(e,["parametersJsonSchema"],s);const r=u(t,["response"]);r!=null&&f(e,["response"],r);const a=u(t,["responseJsonSchema"]);return a!=null&&f(e,["responseJsonSchema"],a),e}function sM(t,e){const n={},i=u(e,["name"]);return i!=null&&f(n,["_url","name"],Gi(t,i)),n}function rM(t,e){const n={},i=u(e,["name"]);return i!=null&&f(n,["_url","name"],Gi(t,i)),n}function aM(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function lM(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function uM(t,e){const n={},i=u(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const o=u(t,["pageToken"]);return e!==void 0&&o!=null&&f(e,["_query","pageToken"],o),n}function cM(t,e){const n={},i=u(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const o=u(t,["pageToken"]);return e!==void 0&&o!=null&&f(e,["_query","pageToken"],o),n}function fM(t){const e={},n=u(t,["config"]);return n!=null&&uM(n,e),e}function dM(t){const e={},n=u(t,["config"]);return n!=null&&cM(n,e),e}function hM(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const o=u(t,["cachedContents"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),f(e,["cachedContents"],s)}return e}function pM(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const o=u(t,["cachedContents"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),f(e,["cachedContents"],s)}return e}function mM(t){const e={},n=u(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const i=u(t,["codeExecutionResult"]);i!=null&&f(e,["codeExecutionResult"],i);const o=u(t,["executableCode"]);o!=null&&f(e,["executableCode"],o);const s=u(t,["fileData"]);s!=null&&f(e,["fileData"],tM(s));const r=u(t,["functionCall"]);r!=null&&f(e,["functionCall"],nM(r));const a=u(t,["functionResponse"]);a!=null&&f(e,["functionResponse"],a);const l=u(t,["inlineData"]);l!=null&&f(e,["inlineData"],J1(l));const c=u(t,["text"]);c!=null&&f(e,["text"],c);const h=u(t,["thought"]);h!=null&&f(e,["thought"],h);const p=u(t,["thoughtSignature"]);p!=null&&f(e,["thoughtSignature"],p);const m=u(t,["videoMetadata"]);return m!=null&&f(e,["videoMetadata"],m),e}function gM(t){const e={},n=u(t,["functionCallingConfig"]);n!=null&&f(e,["functionCallingConfig"],iM(n));const i=u(t,["retrievalConfig"]);return i!=null&&f(e,["retrievalConfig"],i),e}function yM(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>p)),f(e,["functionDeclarations"],h)}if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(t,["googleSearchRetrieval"]);i!=null&&f(e,["googleSearchRetrieval"],i);const o=u(t,["computerUse"]);o!=null&&f(e,["computerUse"],o);const s=u(t,["fileSearch"]);s!=null&&f(e,["fileSearch"],s);const r=u(t,["codeExecution"]);if(r!=null&&f(e,["codeExecution"],r),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=u(t,["googleMaps"]);a!=null&&f(e,["googleMaps"],aM(a));const l=u(t,["googleSearch"]);l!=null&&f(e,["googleSearch"],lM(l));const c=u(t,["urlContext"]);return c!=null&&f(e,["urlContext"],c),e}function vM(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>oM(m))),f(e,["functionDeclarations"],p)}const i=u(t,["retrieval"]);i!=null&&f(e,["retrieval"],i);const o=u(t,["googleSearchRetrieval"]);o!=null&&f(e,["googleSearchRetrieval"],o);const s=u(t,["computerUse"]);if(s!=null&&f(e,["computerUse"],s),u(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=u(t,["codeExecution"]);r!=null&&f(e,["codeExecution"],r);const a=u(t,["enterpriseWebSearch"]);a!=null&&f(e,["enterpriseWebSearch"],a);const l=u(t,["googleMaps"]);l!=null&&f(e,["googleMaps"],l);const c=u(t,["googleSearch"]);c!=null&&f(e,["googleSearch"],c);const h=u(t,["urlContext"]);return h!=null&&f(e,["urlContext"],h),e}function _M(t,e){const n={},i=u(t,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);const o=u(t,["expireTime"]);return e!==void 0&&o!=null&&f(e,["expireTime"],o),n}function EM(t,e){const n={},i=u(t,["ttl"]);e!==void 0&&i!=null&&f(e,["ttl"],i);const o=u(t,["expireTime"]);return e!==void 0&&o!=null&&f(e,["expireTime"],o),n}function TM(t,e){const n={},i=u(e,["name"]);i!=null&&f(n,["_url","name"],Gi(t,i));const o=u(e,["config"]);return o!=null&&_M(o,n),n}function SM(t,e){const n={},i=u(e,["name"]);i!=null&&f(n,["_url","name"],Gi(t,i));const o=u(e,["config"]);return o!=null&&EM(o,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class AM extends Fi{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new bs(Ui.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=X1(this.apiClient,e);return a=Y("cachedContents",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>h)}else{const c=Q1(this.apiClient,e);return a=Y("cachedContents",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),r.then(h=>h)}}async get(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=rM(this.apiClient,e);return a=Y("{name}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>h)}else{const c=sM(this.apiClient,e);return a=Y("{name}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),r.then(h=>h)}}async delete(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=Z1(this.apiClient,e);return a=Y("{name}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const p=eM(h),m=new j_;return Object.assign(m,p),m})}else{const c=W1(this.apiClient,e);return a=Y("{name}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const p=j1(h),m=new j_;return Object.assign(m,p),m})}}async update(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=SM(this.apiClient,e);return a=Y("{name}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>h)}else{const c=TM(this.apiClient,e);return a=Y("{name}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),r.then(h=>h)}}async listInternal(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=dM(e);return a=Y("cachedContents",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const p=pM(h),m=new eE;return Object.assign(m,p),m})}else{const c=fM(e);return a=Y("cachedContents",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const p=hM(h),m=new eE;return Object.assign(m,p),m})}}}function aE(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Pe(t){return this instanceof Pe?(this.v=t,this):new Pe(t)}function hr(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),o,s=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",r),o[Symbol.asyncIterator]=function(){return this},o;function r(y){return function(b){return Promise.resolve(b).then(y,p)}}function a(y,b){i[y]&&(o[y]=function(x){return new Promise(function(P,R){s.push([y,x,P,R])>1||l(y,x)})},b&&(o[y]=b(o[y])))}function l(y,b){try{c(i[y](b))}catch(x){m(s[0][3],x)}}function c(y){y.value instanceof Pe?Promise.resolve(y.value.v).then(h,p):m(s[0][2],y)}function h(y){l("next",y)}function p(y){l("throw",y)}function m(y,b){y(b),s.shift(),s.length&&l(s[0][0],s[0][1])}}function Fa(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof aE=="function"?aE(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(s){n[s]=t[s]&&function(r){return new Promise(function(a,l){r=t[s](r),o(a,l,r.done,r.value)})}}function o(s,r,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function CM(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:pC(n)}function pC(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function RM(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function lE(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const o=[];let s=!0;for(;i<n&&t[i].role==="model";)o.push(t[i]),s&&!pC(t[i])&&(s=!1),i++;s?e.push(...o):e.pop()}return e}class wM{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new IM(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class IM{constructor(e,n,i,o={},s=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=o,this.history=s,this.sendPromise=Promise.resolve(),RM(s)}async sendMessage(e){var n;await this.sendPromise;const i=kt(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var s,r,a;const l=await o,c=(r=(s=l.candidates)===null||s===void 0?void 0:s[0])===null||r===void 0?void 0:r.content,h=l.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let m=[];h!=null&&(m=(a=h.slice(p))!==null&&a!==void 0?a:[]);const y=c?[c]:[];this.recordHistory(i,y,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var n;await this.sendPromise;const i=kt(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const s=await o;return this.processStreamResponse(s,i)}getHistory(e=!1){const n=e?lE(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var i,o;return hr(this,arguments,function*(){var r,a,l,c;const h=[];try{for(var p=!0,m=Fa(e),y;y=yield Pe(m.next()),r=y.done,!r;p=!0){c=y.value,p=!1;const b=c;if(CM(b)){const x=(o=(i=b.candidates)===null||i===void 0?void 0:i[0])===null||o===void 0?void 0:o.content;x!==void 0&&h.push(x)}yield yield Pe(b)}}catch(b){a={error:b}}finally{try{!p&&!r&&(l=m.return)&&(yield Pe(l.call(m)))}finally{if(a)throw a.error}}this.recordHistory(n,h)})}recordHistory(e,n,i){let o=[];n.length>0&&n.every(s=>s.role!==void 0)?o=n:o.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...lE(i)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yf extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,yf.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bM(t){const e={},n=u(t,["file"]);return n!=null&&f(e,["file"],n),e}function xM(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function NM(t){const e={},n=u(t,["name"]);return n!=null&&f(e,["_url","file"],aC(n)),e}function MM(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function DM(t){const e={},n=u(t,["name"]);return n!=null&&f(e,["_url","file"],aC(n)),e}function PM(t,e){const n={},i=u(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const o=u(t,["pageToken"]);return e!==void 0&&o!=null&&f(e,["_query","pageToken"],o),n}function VM(t){const e={},n=u(t,["config"]);return n!=null&&PM(n,e),e}function UM(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const o=u(t,["files"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),f(e,["files"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class LM extends Fi{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new bs(Ui.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=VM(e);return s=Y("files",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:l.headers},h})),o.then(l=>{const c=UM(l),h=new BN;return Object.assign(h,c),h})}}async createInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=bM(e);return s=Y("upload/v1beta/files",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>{const c=xM(l),h=new FN;return Object.assign(h,c),h})}}async get(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=DM(e);return s=Y("files/{file}",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>l)}}async delete(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=NM(e);return s=Y("files/{file}",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:l.headers},h})),o.then(l=>{const c=MM(l),h=new GN;return Object.assign(h,c),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Gu(t){const e={},n=u(t,["data"]);if(n!=null&&f(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function kM(t){const e={},n=u(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>jM(s))),f(e,["parts"],o)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function OM(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function qM(t){const e={},n=u(t,["id"]);n!=null&&f(e,["id"],n);const i=u(t,["args"]);i!=null&&f(e,["args"],i);const o=u(t,["name"]);if(o!=null&&f(e,["name"],o),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function BM(t){const e={};if(u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=u(t,["description"]);n!=null&&f(e,["description"],n);const i=u(t,["name"]);i!=null&&f(e,["name"],i);const o=u(t,["parameters"]);o!=null&&f(e,["parameters"],o);const s=u(t,["parametersJsonSchema"]);s!=null&&f(e,["parametersJsonSchema"],s);const r=u(t,["response"]);r!=null&&f(e,["response"],r);const a=u(t,["responseJsonSchema"]);return a!=null&&f(e,["responseJsonSchema"],a),e}function FM(t){const e={},n=u(t,["modelSelectionConfig"]);n!=null&&f(e,["modelConfig"],n);const i=u(t,["responseJsonSchema"]);i!=null&&f(e,["responseJsonSchema"],i);const o=u(t,["audioTimestamp"]);o!=null&&f(e,["audioTimestamp"],o);const s=u(t,["candidateCount"]);s!=null&&f(e,["candidateCount"],s);const r=u(t,["enableAffectiveDialog"]);r!=null&&f(e,["enableAffectiveDialog"],r);const a=u(t,["frequencyPenalty"]);a!=null&&f(e,["frequencyPenalty"],a);const l=u(t,["logprobs"]);l!=null&&f(e,["logprobs"],l);const c=u(t,["maxOutputTokens"]);c!=null&&f(e,["maxOutputTokens"],c);const h=u(t,["mediaResolution"]);h!=null&&f(e,["mediaResolution"],h);const p=u(t,["presencePenalty"]);p!=null&&f(e,["presencePenalty"],p);const m=u(t,["responseLogprobs"]);m!=null&&f(e,["responseLogprobs"],m);const y=u(t,["responseMimeType"]);y!=null&&f(e,["responseMimeType"],y);const b=u(t,["responseModalities"]);b!=null&&f(e,["responseModalities"],b);const x=u(t,["responseSchema"]);x!=null&&f(e,["responseSchema"],x);const P=u(t,["routingConfig"]);P!=null&&f(e,["routingConfig"],P);const R=u(t,["seed"]);R!=null&&f(e,["seed"],R);const E=u(t,["speechConfig"]);E!=null&&f(e,["speechConfig"],mC(E));const w=u(t,["stopSequences"]);w!=null&&f(e,["stopSequences"],w);const D=u(t,["temperature"]);D!=null&&f(e,["temperature"],D);const O=u(t,["thinkingConfig"]);O!=null&&f(e,["thinkingConfig"],O);const q=u(t,["topK"]);q!=null&&f(e,["topK"],q);const T=u(t,["topP"]);if(T!=null&&f(e,["topP"],T),u(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function GM(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function zM(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function HM(t,e){const n={},i=u(t,["generationConfig"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig"],i);const o=u(t,["responseModalities"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","responseModalities"],o);const s=u(t,["temperature"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig","temperature"],s);const r=u(t,["topP"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","topP"],r);const a=u(t,["topK"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","topK"],a);const l=u(t,["maxOutputTokens"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","maxOutputTokens"],l);const c=u(t,["mediaResolution"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","mediaResolution"],c);const h=u(t,["seed"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","seed"],h);const p=u(t,["speechConfig"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","speechConfig"],qm(p));const m=u(t,["thinkingConfig"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","thinkingConfig"],m);const y=u(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],y);const b=u(t,["systemInstruction"]);e!==void 0&&b!=null&&f(e,["setup","systemInstruction"],kM(kt(b)));const x=u(t,["tools"]);if(e!==void 0&&x!=null){let q=Hr(x);Array.isArray(q)&&(q=q.map(T=>tD(zr(T)))),f(e,["setup","tools"],q)}const P=u(t,["sessionResumption"]);e!==void 0&&P!=null&&f(e,["setup","sessionResumption"],eD(P));const R=u(t,["inputAudioTranscription"]);e!==void 0&&R!=null&&f(e,["setup","inputAudioTranscription"],R);const E=u(t,["outputAudioTranscription"]);e!==void 0&&E!=null&&f(e,["setup","outputAudioTranscription"],E);const w=u(t,["realtimeInputConfig"]);e!==void 0&&w!=null&&f(e,["setup","realtimeInputConfig"],w);const D=u(t,["contextWindowCompression"]);e!==void 0&&D!=null&&f(e,["setup","contextWindowCompression"],D);const O=u(t,["proactivity"]);return e!==void 0&&O!=null&&f(e,["setup","proactivity"],O),n}function YM(t,e){const n={},i=u(t,["generationConfig"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig"],FM(i));const o=u(t,["responseModalities"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","responseModalities"],o);const s=u(t,["temperature"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig","temperature"],s);const r=u(t,["topP"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","topP"],r);const a=u(t,["topK"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","topK"],a);const l=u(t,["maxOutputTokens"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","maxOutputTokens"],l);const c=u(t,["mediaResolution"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","mediaResolution"],c);const h=u(t,["seed"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","seed"],h);const p=u(t,["speechConfig"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","speechConfig"],mC(qm(p)));const m=u(t,["thinkingConfig"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","thinkingConfig"],m);const y=u(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],y);const b=u(t,["systemInstruction"]);e!==void 0&&b!=null&&f(e,["setup","systemInstruction"],kt(b));const x=u(t,["tools"]);if(e!==void 0&&x!=null){let q=Hr(x);Array.isArray(q)&&(q=q.map(T=>nD(zr(T)))),f(e,["setup","tools"],q)}const P=u(t,["sessionResumption"]);e!==void 0&&P!=null&&f(e,["setup","sessionResumption"],P);const R=u(t,["inputAudioTranscription"]);e!==void 0&&R!=null&&f(e,["setup","inputAudioTranscription"],R);const E=u(t,["outputAudioTranscription"]);e!==void 0&&E!=null&&f(e,["setup","outputAudioTranscription"],E);const w=u(t,["realtimeInputConfig"]);e!==void 0&&w!=null&&f(e,["setup","realtimeInputConfig"],w);const D=u(t,["contextWindowCompression"]);e!==void 0&&D!=null&&f(e,["setup","contextWindowCompression"],D);const O=u(t,["proactivity"]);return e!==void 0&&O!=null&&f(e,["setup","proactivity"],O),n}function JM(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["setup","model"],ge(t,i));const o=u(e,["config"]);return o!=null&&f(n,["config"],HM(o,n)),n}function KM(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["setup","model"],ge(t,i));const o=u(e,["config"]);return o!=null&&f(n,["config"],YM(o,n)),n}function $M(t){const e={},n=u(t,["musicGenerationConfig"]);return n!=null&&f(e,["musicGenerationConfig"],n),e}function QM(t){const e={},n=u(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),f(e,["weightedPrompts"],i)}return e}function XM(t){const e={},n=u(t,["media"]);if(n!=null){let c=nC(n);Array.isArray(c)&&(c=c.map(h=>Gu(h))),f(e,["mediaChunks"],c)}const i=u(t,["audio"]);i!=null&&f(e,["audio"],Gu(oC(i)));const o=u(t,["audioStreamEnd"]);o!=null&&f(e,["audioStreamEnd"],o);const s=u(t,["video"]);s!=null&&f(e,["video"],Gu(iC(s)));const r=u(t,["text"]);r!=null&&f(e,["text"],r);const a=u(t,["activityStart"]);a!=null&&f(e,["activityStart"],a);const l=u(t,["activityEnd"]);return l!=null&&f(e,["activityEnd"],l),e}function WM(t){const e={},n=u(t,["media"]);if(n!=null){let c=nC(n);Array.isArray(c)&&(c=c.map(h=>h)),f(e,["mediaChunks"],c)}const i=u(t,["audio"]);i!=null&&f(e,["audio"],oC(i));const o=u(t,["audioStreamEnd"]);o!=null&&f(e,["audioStreamEnd"],o);const s=u(t,["video"]);s!=null&&f(e,["video"],iC(s));const r=u(t,["text"]);r!=null&&f(e,["text"],r);const a=u(t,["activityStart"]);a!=null&&f(e,["activityStart"],a);const l=u(t,["activityEnd"]);return l!=null&&f(e,["activityEnd"],l),e}function ZM(t){const e={},n=u(t,["setupComplete"]);n!=null&&f(e,["setupComplete"],n);const i=u(t,["serverContent"]);i!=null&&f(e,["serverContent"],i);const o=u(t,["toolCall"]);o!=null&&f(e,["toolCall"],o);const s=u(t,["toolCallCancellation"]);s!=null&&f(e,["toolCallCancellation"],s);const r=u(t,["usageMetadata"]);r!=null&&f(e,["usageMetadata"],iD(r));const a=u(t,["goAway"]);a!=null&&f(e,["goAway"],a);const l=u(t,["sessionResumptionUpdate"]);return l!=null&&f(e,["sessionResumptionUpdate"],l),e}function jM(t){const e={},n=u(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const i=u(t,["codeExecutionResult"]);i!=null&&f(e,["codeExecutionResult"],i);const o=u(t,["executableCode"]);o!=null&&f(e,["executableCode"],o);const s=u(t,["fileData"]);s!=null&&f(e,["fileData"],OM(s));const r=u(t,["functionCall"]);r!=null&&f(e,["functionCall"],qM(r));const a=u(t,["functionResponse"]);a!=null&&f(e,["functionResponse"],a);const l=u(t,["inlineData"]);l!=null&&f(e,["inlineData"],Gu(l));const c=u(t,["text"]);c!=null&&f(e,["text"],c);const h=u(t,["thought"]);h!=null&&f(e,["thought"],h);const p=u(t,["thoughtSignature"]);p!=null&&f(e,["thoughtSignature"],p);const m=u(t,["videoMetadata"]);return m!=null&&f(e,["videoMetadata"],m),e}function eD(t){const e={},n=u(t,["handle"]);if(n!=null&&f(e,["handle"],n),u(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function mC(t){const e={},n=u(t,["languageCode"]);n!=null&&f(e,["languageCode"],n);const i=u(t,["voiceConfig"]);if(i!=null&&f(e,["voiceConfig"],i),u(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function tD(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>p)),f(e,["functionDeclarations"],h)}if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(t,["googleSearchRetrieval"]);i!=null&&f(e,["googleSearchRetrieval"],i);const o=u(t,["computerUse"]);o!=null&&f(e,["computerUse"],o);const s=u(t,["fileSearch"]);s!=null&&f(e,["fileSearch"],s);const r=u(t,["codeExecution"]);if(r!=null&&f(e,["codeExecution"],r),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=u(t,["googleMaps"]);a!=null&&f(e,["googleMaps"],GM(a));const l=u(t,["googleSearch"]);l!=null&&f(e,["googleSearch"],zM(l));const c=u(t,["urlContext"]);return c!=null&&f(e,["urlContext"],c),e}function nD(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>BM(m))),f(e,["functionDeclarations"],p)}const i=u(t,["retrieval"]);i!=null&&f(e,["retrieval"],i);const o=u(t,["googleSearchRetrieval"]);o!=null&&f(e,["googleSearchRetrieval"],o);const s=u(t,["computerUse"]);if(s!=null&&f(e,["computerUse"],s),u(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=u(t,["codeExecution"]);r!=null&&f(e,["codeExecution"],r);const a=u(t,["enterpriseWebSearch"]);a!=null&&f(e,["enterpriseWebSearch"],a);const l=u(t,["googleMaps"]);l!=null&&f(e,["googleMaps"],l);const c=u(t,["googleSearch"]);c!=null&&f(e,["googleSearch"],c);const h=u(t,["urlContext"]);return h!=null&&f(e,["urlContext"],h),e}function iD(t){const e={},n=u(t,["promptTokenCount"]);n!=null&&f(e,["promptTokenCount"],n);const i=u(t,["cachedContentTokenCount"]);i!=null&&f(e,["cachedContentTokenCount"],i);const o=u(t,["candidatesTokenCount"]);o!=null&&f(e,["responseTokenCount"],o);const s=u(t,["toolUsePromptTokenCount"]);s!=null&&f(e,["toolUsePromptTokenCount"],s);const r=u(t,["thoughtsTokenCount"]);r!=null&&f(e,["thoughtsTokenCount"],r);const a=u(t,["totalTokenCount"]);a!=null&&f(e,["totalTokenCount"],a);const l=u(t,["promptTokensDetails"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(b=>b)),f(e,["promptTokensDetails"],y)}const c=u(t,["cacheTokensDetails"]);if(c!=null){let y=c;Array.isArray(y)&&(y=y.map(b=>b)),f(e,["cacheTokensDetails"],y)}const h=u(t,["candidatesTokensDetails"]);if(h!=null){let y=h;Array.isArray(y)&&(y=y.map(b=>b)),f(e,["responseTokensDetails"],y)}const p=u(t,["toolUsePromptTokensDetails"]);if(p!=null){let y=p;Array.isArray(y)&&(y=y.map(b=>b)),f(e,["toolUsePromptTokensDetails"],y)}const m=u(t,["trafficType"]);return m!=null&&f(e,["trafficType"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oD(t){const e={},n=u(t,["data"]);if(n!=null&&f(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function sD(t){const e={},n=u(t,["content"]);n!=null&&f(e,["content"],n);const i=u(t,["citationMetadata"]);i!=null&&f(e,["citationMetadata"],rD(i));const o=u(t,["tokenCount"]);o!=null&&f(e,["tokenCount"],o);const s=u(t,["finishReason"]);s!=null&&f(e,["finishReason"],s);const r=u(t,["avgLogprobs"]);r!=null&&f(e,["avgLogprobs"],r);const a=u(t,["groundingMetadata"]);a!=null&&f(e,["groundingMetadata"],a);const l=u(t,["index"]);l!=null&&f(e,["index"],l);const c=u(t,["logprobsResult"]);c!=null&&f(e,["logprobsResult"],c);const h=u(t,["safetyRatings"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(y=>y)),f(e,["safetyRatings"],m)}const p=u(t,["urlContextMetadata"]);return p!=null&&f(e,["urlContextMetadata"],p),e}function rD(t){const e={},n=u(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>o)),f(e,["citations"],i)}return e}function aD(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ge(t,i));const o=u(e,["contents"]);if(o!=null){let s=Un(o);Array.isArray(s)&&(s=s.map(r=>r)),f(n,["contents"],s)}return n}function lD(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["tokensInfo"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),f(e,["tokensInfo"],o)}return e}function uD(t){const e={},n=u(t,["values"]);n!=null&&f(e,["values"],n);const i=u(t,["statistics"]);return i!=null&&f(e,["statistics"],cD(i)),e}function cD(t){const e={},n=u(t,["truncated"]);n!=null&&f(e,["truncated"],n);const i=u(t,["token_count"]);return i!=null&&f(e,["tokenCount"],i),e}function vf(t){const e={},n=u(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>_2(s))),f(e,["parts"],o)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function fD(t){const e={},n=u(t,["controlType"]);n!=null&&f(e,["controlType"],n);const i=u(t,["enableControlImageComputation"]);return i!=null&&f(e,["computeControl"],i),e}function dD(t){const e={};if(u(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(u(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(u(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function hD(t,e){const n={},i=u(t,["systemInstruction"]);e!==void 0&&i!=null&&f(e,["systemInstruction"],kt(i));const o=u(t,["tools"]);if(e!==void 0&&o!=null){let r=o;Array.isArray(r)&&(r=r.map(a=>EC(a))),f(e,["tools"],r)}const s=u(t,["generationConfig"]);return e!==void 0&&s!=null&&f(e,["generationConfig"],o2(s)),n}function pD(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ge(t,i));const o=u(e,["contents"]);if(o!=null){let r=Un(o);Array.isArray(r)&&(r=r.map(a=>vf(a))),f(n,["contents"],r)}const s=u(e,["config"]);return s!=null&&dD(s),n}function mD(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ge(t,i));const o=u(e,["contents"]);if(o!=null){let r=Un(o);Array.isArray(r)&&(r=r.map(a=>a)),f(n,["contents"],r)}const s=u(e,["config"]);return s!=null&&hD(s,n),n}function gD(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["totalTokens"]);i!=null&&f(e,["totalTokens"],i);const o=u(t,["cachedContentTokenCount"]);return o!=null&&f(e,["cachedContentTokenCount"],o),e}function yD(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["totalTokens"]);return i!=null&&f(e,["totalTokens"],i),e}function vD(t,e){const n={},i=u(e,["model"]);return i!=null&&f(n,["_url","name"],ge(t,i)),n}function _D(t,e){const n={},i=u(e,["model"]);return i!=null&&f(n,["_url","name"],ge(t,i)),n}function ED(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function TD(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function SD(t,e){const n={},i=u(t,["outputGcsUri"]);e!==void 0&&i!=null&&f(e,["parameters","storageUri"],i);const o=u(t,["negativePrompt"]);e!==void 0&&o!=null&&f(e,["parameters","negativePrompt"],o);const s=u(t,["numberOfImages"]);e!==void 0&&s!=null&&f(e,["parameters","sampleCount"],s);const r=u(t,["aspectRatio"]);e!==void 0&&r!=null&&f(e,["parameters","aspectRatio"],r);const a=u(t,["guidanceScale"]);e!==void 0&&a!=null&&f(e,["parameters","guidanceScale"],a);const l=u(t,["seed"]);e!==void 0&&l!=null&&f(e,["parameters","seed"],l);const c=u(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&f(e,["parameters","safetySetting"],c);const h=u(t,["personGeneration"]);e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h);const p=u(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&f(e,["parameters","includeSafetyAttributes"],p);const m=u(t,["includeRaiReason"]);e!==void 0&&m!=null&&f(e,["parameters","includeRaiReason"],m);const y=u(t,["language"]);e!==void 0&&y!=null&&f(e,["parameters","language"],y);const b=u(t,["outputMimeType"]);e!==void 0&&b!=null&&f(e,["parameters","outputOptions","mimeType"],b);const x=u(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&f(e,["parameters","outputOptions","compressionQuality"],x);const P=u(t,["addWatermark"]);e!==void 0&&P!=null&&f(e,["parameters","addWatermark"],P);const R=u(t,["labels"]);e!==void 0&&R!=null&&f(e,["labels"],R);const E=u(t,["editMode"]);e!==void 0&&E!=null&&f(e,["parameters","editMode"],E);const w=u(t,["baseSteps"]);return e!==void 0&&w!=null&&f(e,["parameters","editConfig","baseSteps"],w),n}function AD(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ge(t,i));const o=u(e,["prompt"]);o!=null&&f(n,["instances[0]","prompt"],o);const s=u(e,["referenceImages"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>R2(l))),f(n,["instances[0]","referenceImages"],a)}const r=u(e,["config"]);return r!=null&&SD(r,n),n}function CD(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>_f(s))),f(e,["generatedImages"],o)}return e}function RD(t,e){const n={},i=u(t,["taskType"]);e!==void 0&&i!=null&&f(e,["requests[]","taskType"],i);const o=u(t,["title"]);e!==void 0&&o!=null&&f(e,["requests[]","title"],o);const s=u(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&f(e,["requests[]","outputDimensionality"],s),u(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function wD(t,e){const n={},i=u(t,["taskType"]);e!==void 0&&i!=null&&f(e,["instances[]","task_type"],i);const o=u(t,["title"]);e!==void 0&&o!=null&&f(e,["instances[]","title"],o);const s=u(t,["outputDimensionality"]);e!==void 0&&s!=null&&f(e,["parameters","outputDimensionality"],s);const r=u(t,["mimeType"]);e!==void 0&&r!=null&&f(e,["instances[]","mimeType"],r);const a=u(t,["autoTruncate"]);return e!==void 0&&a!=null&&f(e,["parameters","autoTruncate"],a),n}function ID(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ge(t,i));const o=u(e,["contents"]);if(o!=null){let a=Lm(t,o);Array.isArray(a)&&(a=a.map(l=>l)),f(n,["requests[]","content"],a)}const s=u(e,["config"]);s!=null&&RD(s,n);const r=u(e,["model"]);return r!==void 0&&f(n,["requests[]","model"],ge(t,r)),n}function bD(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ge(t,i));const o=u(e,["contents"]);if(o!=null){let r=Lm(t,o);Array.isArray(r)&&(r=r.map(a=>a)),f(n,["instances[]","content"],r)}const s=u(e,["config"]);return s!=null&&wD(s,n),n}function xD(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>r)),f(e,["embeddings"],s)}const o=u(t,["metadata"]);return o!=null&&f(e,["metadata"],o),e}function ND(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["predictions[]","embeddings"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>uD(r))),f(e,["embeddings"],s)}const o=u(t,["metadata"]);return o!=null&&f(e,["metadata"],o),e}function MD(t){const e={},n=u(t,["endpoint"]);n!=null&&f(e,["name"],n);const i=u(t,["deployedModelId"]);return i!=null&&f(e,["deployedModelId"],i),e}function DD(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function PD(t){const e={},n=u(t,["id"]);n!=null&&f(e,["id"],n);const i=u(t,["args"]);i!=null&&f(e,["args"],i);const o=u(t,["name"]);if(o!=null&&f(e,["name"],o),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function VD(t){const e={},n=u(t,["mode"]);n!=null&&f(e,["mode"],n);const i=u(t,["allowedFunctionNames"]);if(i!=null&&f(e,["allowedFunctionNames"],i),u(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function UD(t){const e={};if(u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=u(t,["description"]);n!=null&&f(e,["description"],n);const i=u(t,["name"]);i!=null&&f(e,["name"],i);const o=u(t,["parameters"]);o!=null&&f(e,["parameters"],o);const s=u(t,["parametersJsonSchema"]);s!=null&&f(e,["parametersJsonSchema"],s);const r=u(t,["response"]);r!=null&&f(e,["response"],r);const a=u(t,["responseJsonSchema"]);return a!=null&&f(e,["responseJsonSchema"],a),e}function LD(t,e,n){const i={},o=u(e,["systemInstruction"]);n!==void 0&&o!=null&&f(n,["systemInstruction"],vf(kt(o)));const s=u(e,["temperature"]);s!=null&&f(i,["temperature"],s);const r=u(e,["topP"]);r!=null&&f(i,["topP"],r);const a=u(e,["topK"]);a!=null&&f(i,["topK"],a);const l=u(e,["candidateCount"]);l!=null&&f(i,["candidateCount"],l);const c=u(e,["maxOutputTokens"]);c!=null&&f(i,["maxOutputTokens"],c);const h=u(e,["stopSequences"]);h!=null&&f(i,["stopSequences"],h);const p=u(e,["responseLogprobs"]);p!=null&&f(i,["responseLogprobs"],p);const m=u(e,["logprobs"]);m!=null&&f(i,["logprobs"],m);const y=u(e,["presencePenalty"]);y!=null&&f(i,["presencePenalty"],y);const b=u(e,["frequencyPenalty"]);b!=null&&f(i,["frequencyPenalty"],b);const x=u(e,["seed"]);x!=null&&f(i,["seed"],x);const P=u(e,["responseMimeType"]);P!=null&&f(i,["responseMimeType"],P);const R=u(e,["responseSchema"]);R!=null&&f(i,["responseSchema"],km(R));const E=u(e,["responseJsonSchema"]);if(E!=null&&f(i,["responseJsonSchema"],E),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const w=u(e,["safetySettings"]);if(n!==void 0&&w!=null){let V=w;Array.isArray(V)&&(V=V.map(N=>w2(N))),f(n,["safetySettings"],V)}const D=u(e,["tools"]);if(n!==void 0&&D!=null){let V=Hr(D);Array.isArray(V)&&(V=V.map(N=>P2(zr(N)))),f(n,["tools"],V)}const O=u(e,["toolConfig"]);if(n!==void 0&&O!=null&&f(n,["toolConfig"],D2(O)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const q=u(e,["cachedContent"]);n!==void 0&&q!=null&&f(n,["cachedContent"],Gi(t,q));const T=u(e,["responseModalities"]);T!=null&&f(i,["responseModalities"],T);const _=u(e,["mediaResolution"]);_!=null&&f(i,["mediaResolution"],_);const A=u(e,["speechConfig"]);if(A!=null&&f(i,["speechConfig"],Om(A)),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const I=u(e,["thinkingConfig"]);I!=null&&f(i,["thinkingConfig"],I);const M=u(e,["imageConfig"]);return M!=null&&f(i,["imageConfig"],u2(M)),i}function kD(t,e,n){const i={},o=u(e,["systemInstruction"]);n!==void 0&&o!=null&&f(n,["systemInstruction"],kt(o));const s=u(e,["temperature"]);s!=null&&f(i,["temperature"],s);const r=u(e,["topP"]);r!=null&&f(i,["topP"],r);const a=u(e,["topK"]);a!=null&&f(i,["topK"],a);const l=u(e,["candidateCount"]);l!=null&&f(i,["candidateCount"],l);const c=u(e,["maxOutputTokens"]);c!=null&&f(i,["maxOutputTokens"],c);const h=u(e,["stopSequences"]);h!=null&&f(i,["stopSequences"],h);const p=u(e,["responseLogprobs"]);p!=null&&f(i,["responseLogprobs"],p);const m=u(e,["logprobs"]);m!=null&&f(i,["logprobs"],m);const y=u(e,["presencePenalty"]);y!=null&&f(i,["presencePenalty"],y);const b=u(e,["frequencyPenalty"]);b!=null&&f(i,["frequencyPenalty"],b);const x=u(e,["seed"]);x!=null&&f(i,["seed"],x);const P=u(e,["responseMimeType"]);P!=null&&f(i,["responseMimeType"],P);const R=u(e,["responseSchema"]);R!=null&&f(i,["responseSchema"],km(R));const E=u(e,["responseJsonSchema"]);E!=null&&f(i,["responseJsonSchema"],E);const w=u(e,["routingConfig"]);w!=null&&f(i,["routingConfig"],w);const D=u(e,["modelSelectionConfig"]);D!=null&&f(i,["modelConfig"],D);const O=u(e,["safetySettings"]);if(n!==void 0&&O!=null){let z=O;Array.isArray(z)&&(z=z.map(Q=>Q)),f(n,["safetySettings"],z)}const q=u(e,["tools"]);if(n!==void 0&&q!=null){let z=Hr(q);Array.isArray(z)&&(z=z.map(Q=>EC(zr(Q)))),f(n,["tools"],z)}const T=u(e,["toolConfig"]);n!==void 0&&T!=null&&f(n,["toolConfig"],T);const _=u(e,["labels"]);n!==void 0&&_!=null&&f(n,["labels"],_);const A=u(e,["cachedContent"]);n!==void 0&&A!=null&&f(n,["cachedContent"],Gi(t,A));const I=u(e,["responseModalities"]);I!=null&&f(i,["responseModalities"],I);const M=u(e,["mediaResolution"]);M!=null&&f(i,["mediaResolution"],M);const V=u(e,["speechConfig"]);V!=null&&f(i,["speechConfig"],_C(Om(V)));const N=u(e,["audioTimestamp"]);N!=null&&f(i,["audioTimestamp"],N);const ye=u(e,["thinkingConfig"]);ye!=null&&f(i,["thinkingConfig"],ye);const Qe=u(e,["imageConfig"]);return Qe!=null&&f(i,["imageConfig"],c2(Qe)),i}function uE(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ge(t,i));const o=u(e,["contents"]);if(o!=null){let r=Un(o);Array.isArray(r)&&(r=r.map(a=>vf(a))),f(n,["contents"],r)}const s=u(e,["config"]);return s!=null&&f(n,["generationConfig"],LD(t,s,n)),n}function cE(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ge(t,i));const o=u(e,["contents"]);if(o!=null){let r=Un(o);Array.isArray(r)&&(r=r.map(a=>a)),f(n,["contents"],r)}const s=u(e,["config"]);return s!=null&&f(n,["generationConfig"],kD(t,s,n)),n}function fE(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["candidates"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>sD(c))),f(e,["candidates"],l)}const o=u(t,["modelVersion"]);o!=null&&f(e,["modelVersion"],o);const s=u(t,["promptFeedback"]);s!=null&&f(e,["promptFeedback"],s);const r=u(t,["responseId"]);r!=null&&f(e,["responseId"],r);const a=u(t,["usageMetadata"]);return a!=null&&f(e,["usageMetadata"],a),e}function dE(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["candidates"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(h=>h)),f(e,["candidates"],c)}const o=u(t,["createTime"]);o!=null&&f(e,["createTime"],o);const s=u(t,["modelVersion"]);s!=null&&f(e,["modelVersion"],s);const r=u(t,["promptFeedback"]);r!=null&&f(e,["promptFeedback"],r);const a=u(t,["responseId"]);a!=null&&f(e,["responseId"],a);const l=u(t,["usageMetadata"]);return l!=null&&f(e,["usageMetadata"],l),e}function OD(t,e){const n={};if(u(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=u(t,["numberOfImages"]);e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i);const o=u(t,["aspectRatio"]);e!==void 0&&o!=null&&f(e,["parameters","aspectRatio"],o);const s=u(t,["guidanceScale"]);if(e!==void 0&&s!=null&&f(e,["parameters","guidanceScale"],s),u(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const r=u(t,["safetyFilterLevel"]);e!==void 0&&r!=null&&f(e,["parameters","safetySetting"],r);const a=u(t,["personGeneration"]);e!==void 0&&a!=null&&f(e,["parameters","personGeneration"],a);const l=u(t,["includeSafetyAttributes"]);e!==void 0&&l!=null&&f(e,["parameters","includeSafetyAttributes"],l);const c=u(t,["includeRaiReason"]);e!==void 0&&c!=null&&f(e,["parameters","includeRaiReason"],c);const h=u(t,["language"]);e!==void 0&&h!=null&&f(e,["parameters","language"],h);const p=u(t,["outputMimeType"]);e!==void 0&&p!=null&&f(e,["parameters","outputOptions","mimeType"],p);const m=u(t,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&f(e,["parameters","outputOptions","compressionQuality"],m),u(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(u(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const y=u(t,["imageSize"]);if(e!==void 0&&y!=null&&f(e,["parameters","sampleImageSize"],y),u(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function qD(t,e){const n={},i=u(t,["outputGcsUri"]);e!==void 0&&i!=null&&f(e,["parameters","storageUri"],i);const o=u(t,["negativePrompt"]);e!==void 0&&o!=null&&f(e,["parameters","negativePrompt"],o);const s=u(t,["numberOfImages"]);e!==void 0&&s!=null&&f(e,["parameters","sampleCount"],s);const r=u(t,["aspectRatio"]);e!==void 0&&r!=null&&f(e,["parameters","aspectRatio"],r);const a=u(t,["guidanceScale"]);e!==void 0&&a!=null&&f(e,["parameters","guidanceScale"],a);const l=u(t,["seed"]);e!==void 0&&l!=null&&f(e,["parameters","seed"],l);const c=u(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&f(e,["parameters","safetySetting"],c);const h=u(t,["personGeneration"]);e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h);const p=u(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&f(e,["parameters","includeSafetyAttributes"],p);const m=u(t,["includeRaiReason"]);e!==void 0&&m!=null&&f(e,["parameters","includeRaiReason"],m);const y=u(t,["language"]);e!==void 0&&y!=null&&f(e,["parameters","language"],y);const b=u(t,["outputMimeType"]);e!==void 0&&b!=null&&f(e,["parameters","outputOptions","mimeType"],b);const x=u(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&f(e,["parameters","outputOptions","compressionQuality"],x);const P=u(t,["addWatermark"]);e!==void 0&&P!=null&&f(e,["parameters","addWatermark"],P);const R=u(t,["labels"]);e!==void 0&&R!=null&&f(e,["labels"],R);const E=u(t,["imageSize"]);e!==void 0&&E!=null&&f(e,["parameters","sampleImageSize"],E);const w=u(t,["enhancePrompt"]);return e!==void 0&&w!=null&&f(e,["parameters","enhancePrompt"],w),n}function BD(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ge(t,i));const o=u(e,["prompt"]);o!=null&&f(n,["instances[0]","prompt"],o);const s=u(e,["config"]);return s!=null&&OD(s,n),n}function FD(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ge(t,i));const o=u(e,["prompt"]);o!=null&&f(n,["instances[0]","prompt"],o);const s=u(e,["config"]);return s!=null&&qD(s,n),n}function GD(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>e2(r))),f(e,["generatedImages"],s)}const o=u(t,["positivePromptSafetyAttributes"]);return o!=null&&f(e,["positivePromptSafetyAttributes"],yC(o)),e}function zD(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>_f(r))),f(e,["generatedImages"],s)}const o=u(t,["positivePromptSafetyAttributes"]);return o!=null&&f(e,["positivePromptSafetyAttributes"],vC(o)),e}function HD(t,e){const n={},i=u(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i),u(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=u(t,["durationSeconds"]);if(e!==void 0&&o!=null&&f(e,["parameters","durationSeconds"],o),u(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=u(t,["aspectRatio"]);e!==void 0&&s!=null&&f(e,["parameters","aspectRatio"],s);const r=u(t,["resolution"]);e!==void 0&&r!=null&&f(e,["parameters","resolution"],r);const a=u(t,["personGeneration"]);if(e!==void 0&&a!=null&&f(e,["parameters","personGeneration"],a),u(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const l=u(t,["negativePrompt"]);e!==void 0&&l!=null&&f(e,["parameters","negativePrompt"],l);const c=u(t,["enhancePrompt"]);if(e!==void 0&&c!=null&&f(e,["parameters","enhancePrompt"],c),u(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const h=u(t,["lastFrame"]);e!==void 0&&h!=null&&f(e,["instances[0]","lastFrame"],Ef(h));const p=u(t,["referenceImages"]);if(e!==void 0&&p!=null){let m=p;Array.isArray(m)&&(m=m.map(y=>J2(y))),f(e,["instances[0]","referenceImages"],m)}if(u(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(u(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function YD(t,e){const n={},i=u(t,["numberOfVideos"]);e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i);const o=u(t,["outputGcsUri"]);e!==void 0&&o!=null&&f(e,["parameters","storageUri"],o);const s=u(t,["fps"]);e!==void 0&&s!=null&&f(e,["parameters","fps"],s);const r=u(t,["durationSeconds"]);e!==void 0&&r!=null&&f(e,["parameters","durationSeconds"],r);const a=u(t,["seed"]);e!==void 0&&a!=null&&f(e,["parameters","seed"],a);const l=u(t,["aspectRatio"]);e!==void 0&&l!=null&&f(e,["parameters","aspectRatio"],l);const c=u(t,["resolution"]);e!==void 0&&c!=null&&f(e,["parameters","resolution"],c);const h=u(t,["personGeneration"]);e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h);const p=u(t,["pubsubTopic"]);e!==void 0&&p!=null&&f(e,["parameters","pubsubTopic"],p);const m=u(t,["negativePrompt"]);e!==void 0&&m!=null&&f(e,["parameters","negativePrompt"],m);const y=u(t,["enhancePrompt"]);e!==void 0&&y!=null&&f(e,["parameters","enhancePrompt"],y);const b=u(t,["generateAudio"]);e!==void 0&&b!=null&&f(e,["parameters","generateAudio"],b);const x=u(t,["lastFrame"]);e!==void 0&&x!=null&&f(e,["instances[0]","lastFrame"],Hn(x));const P=u(t,["referenceImages"]);if(e!==void 0&&P!=null){let w=P;Array.isArray(w)&&(w=w.map(D=>K2(D))),f(e,["instances[0]","referenceImages"],w)}const R=u(t,["mask"]);e!==void 0&&R!=null&&f(e,["instances[0]","mask"],Y2(R));const E=u(t,["compressionQuality"]);return e!==void 0&&E!=null&&f(e,["parameters","compressionQuality"],E),n}function JD(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const i=u(t,["metadata"]);i!=null&&f(e,["metadata"],i);const o=u(t,["done"]);o!=null&&f(e,["done"],o);const s=u(t,["error"]);s!=null&&f(e,["error"],s);const r=u(t,["response","generateVideoResponse"]);return r!=null&&f(e,["response"],XD(r)),e}function KD(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const i=u(t,["metadata"]);i!=null&&f(e,["metadata"],i);const o=u(t,["done"]);o!=null&&f(e,["done"],o);const s=u(t,["error"]);s!=null&&f(e,["error"],s);const r=u(t,["response"]);return r!=null&&f(e,["response"],WD(r)),e}function $D(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ge(t,i));const o=u(e,["prompt"]);o!=null&&f(n,["instances[0]","prompt"],o);const s=u(e,["image"]);s!=null&&f(n,["instances[0]","image"],Ef(s));const r=u(e,["video"]);r!=null&&f(n,["instances[0]","video"],TC(r));const a=u(e,["source"]);a!=null&&ZD(a,n);const l=u(e,["config"]);return l!=null&&HD(l,n),n}function QD(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ge(t,i));const o=u(e,["prompt"]);o!=null&&f(n,["instances[0]","prompt"],o);const s=u(e,["image"]);s!=null&&f(n,["instances[0]","image"],Hn(s));const r=u(e,["video"]);r!=null&&f(n,["instances[0]","video"],SC(r));const a=u(e,["source"]);a!=null&&jD(a,n);const l=u(e,["config"]);return l!=null&&YD(l,n),n}function XD(t){const e={},n=u(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>n2(r))),f(e,["generatedVideos"],s)}const i=u(t,["raiMediaFilteredCount"]);i!=null&&f(e,["raiMediaFilteredCount"],i);const o=u(t,["raiMediaFilteredReasons"]);return o!=null&&f(e,["raiMediaFilteredReasons"],o),e}function WD(t){const e={},n=u(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>i2(r))),f(e,["generatedVideos"],s)}const i=u(t,["raiMediaFilteredCount"]);i!=null&&f(e,["raiMediaFilteredCount"],i);const o=u(t,["raiMediaFilteredReasons"]);return o!=null&&f(e,["raiMediaFilteredReasons"],o),e}function ZD(t,e){const n={},i=u(t,["prompt"]);e!==void 0&&i!=null&&f(e,["instances[0]","prompt"],i);const o=u(t,["image"]);e!==void 0&&o!=null&&f(e,["instances[0]","image"],Ef(o));const s=u(t,["video"]);return e!==void 0&&s!=null&&f(e,["instances[0]","video"],TC(s)),n}function jD(t,e){const n={},i=u(t,["prompt"]);e!==void 0&&i!=null&&f(e,["instances[0]","prompt"],i);const o=u(t,["image"]);e!==void 0&&o!=null&&f(e,["instances[0]","image"],Hn(o));const s=u(t,["video"]);return e!==void 0&&s!=null&&f(e,["instances[0]","video"],SC(s)),n}function e2(t){const e={},n=u(t,["_self"]);n!=null&&f(e,["image"],f2(n));const i=u(t,["raiFilteredReason"]);i!=null&&f(e,["raiFilteredReason"],i);const o=u(t,["_self"]);return o!=null&&f(e,["safetyAttributes"],yC(o)),e}function _f(t){const e={},n=u(t,["_self"]);n!=null&&f(e,["image"],gC(n));const i=u(t,["raiFilteredReason"]);i!=null&&f(e,["raiFilteredReason"],i);const o=u(t,["_self"]);o!=null&&f(e,["safetyAttributes"],vC(o));const s=u(t,["prompt"]);return s!=null&&f(e,["enhancedPrompt"],s),e}function t2(t){const e={},n=u(t,["_self"]);n!=null&&f(e,["mask"],gC(n));const i=u(t,["labels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),f(e,["labels"],o)}return e}function n2(t){const e={},n=u(t,["video"]);return n!=null&&f(e,["video"],z2(n)),e}function i2(t){const e={},n=u(t,["_self"]);return n!=null&&f(e,["video"],H2(n)),e}function o2(t){const e={},n=u(t,["modelSelectionConfig"]);n!=null&&f(e,["modelConfig"],n);const i=u(t,["responseJsonSchema"]);i!=null&&f(e,["responseJsonSchema"],i);const o=u(t,["audioTimestamp"]);o!=null&&f(e,["audioTimestamp"],o);const s=u(t,["candidateCount"]);s!=null&&f(e,["candidateCount"],s);const r=u(t,["enableAffectiveDialog"]);r!=null&&f(e,["enableAffectiveDialog"],r);const a=u(t,["frequencyPenalty"]);a!=null&&f(e,["frequencyPenalty"],a);const l=u(t,["logprobs"]);l!=null&&f(e,["logprobs"],l);const c=u(t,["maxOutputTokens"]);c!=null&&f(e,["maxOutputTokens"],c);const h=u(t,["mediaResolution"]);h!=null&&f(e,["mediaResolution"],h);const p=u(t,["presencePenalty"]);p!=null&&f(e,["presencePenalty"],p);const m=u(t,["responseLogprobs"]);m!=null&&f(e,["responseLogprobs"],m);const y=u(t,["responseMimeType"]);y!=null&&f(e,["responseMimeType"],y);const b=u(t,["responseModalities"]);b!=null&&f(e,["responseModalities"],b);const x=u(t,["responseSchema"]);x!=null&&f(e,["responseSchema"],x);const P=u(t,["routingConfig"]);P!=null&&f(e,["routingConfig"],P);const R=u(t,["seed"]);R!=null&&f(e,["seed"],R);const E=u(t,["speechConfig"]);E!=null&&f(e,["speechConfig"],_C(E));const w=u(t,["stopSequences"]);w!=null&&f(e,["stopSequences"],w);const D=u(t,["temperature"]);D!=null&&f(e,["temperature"],D);const O=u(t,["thinkingConfig"]);O!=null&&f(e,["thinkingConfig"],O);const q=u(t,["topK"]);q!=null&&f(e,["topK"],q);const T=u(t,["topP"]);if(T!=null&&f(e,["topP"],T),u(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function s2(t,e){const n={},i=u(e,["model"]);return i!=null&&f(n,["_url","name"],ge(t,i)),n}function r2(t,e){const n={},i=u(e,["model"]);return i!=null&&f(n,["_url","name"],ge(t,i)),n}function a2(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function l2(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function u2(t){const e={},n=u(t,["aspectRatio"]);n!=null&&f(e,["aspectRatio"],n);const i=u(t,["imageSize"]);if(i!=null&&f(e,["imageSize"],i),u(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(u(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function c2(t){const e={},n=u(t,["aspectRatio"]);n!=null&&f(e,["aspectRatio"],n);const i=u(t,["imageSize"]);i!=null&&f(e,["imageSize"],i);const o=u(t,["outputMimeType"]);o!=null&&f(e,["imageOutputOptions","mimeType"],o);const s=u(t,["outputCompressionQuality"]);return s!=null&&f(e,["imageOutputOptions","compressionQuality"],s),e}function f2(t){const e={},n=u(t,["bytesBase64Encoded"]);n!=null&&f(e,["imageBytes"],Fo(n));const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function gC(t){const e={},n=u(t,["gcsUri"]);n!=null&&f(e,["gcsUri"],n);const i=u(t,["bytesBase64Encoded"]);i!=null&&f(e,["imageBytes"],Fo(i));const o=u(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function Ef(t){const e={};if(u(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=u(t,["imageBytes"]);n!=null&&f(e,["bytesBase64Encoded"],Fo(n));const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function Hn(t){const e={},n=u(t,["gcsUri"]);n!=null&&f(e,["gcsUri"],n);const i=u(t,["imageBytes"]);i!=null&&f(e,["bytesBase64Encoded"],Fo(i));const o=u(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function d2(t,e,n){const i={},o=u(e,["pageSize"]);n!==void 0&&o!=null&&f(n,["_query","pageSize"],o);const s=u(e,["pageToken"]);n!==void 0&&s!=null&&f(n,["_query","pageToken"],s);const r=u(e,["filter"]);n!==void 0&&r!=null&&f(n,["_query","filter"],r);const a=u(e,["queryBase"]);return n!==void 0&&a!=null&&f(n,["_url","models_url"],lC(t,a)),i}function h2(t,e,n){const i={},o=u(e,["pageSize"]);n!==void 0&&o!=null&&f(n,["_query","pageSize"],o);const s=u(e,["pageToken"]);n!==void 0&&s!=null&&f(n,["_query","pageToken"],s);const r=u(e,["filter"]);n!==void 0&&r!=null&&f(n,["_query","filter"],r);const a=u(e,["queryBase"]);return n!==void 0&&a!=null&&f(n,["_url","models_url"],lC(t,a)),i}function p2(t,e){const n={},i=u(e,["config"]);return i!=null&&d2(t,i,n),n}function m2(t,e){const n={},i=u(e,["config"]);return i!=null&&h2(t,i,n),n}function g2(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const o=u(t,["_self"]);if(o!=null){let s=uC(o);Array.isArray(s)&&(s=s.map(r=>tp(r))),f(e,["models"],s)}return e}function y2(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const o=u(t,["_self"]);if(o!=null){let s=uC(o);Array.isArray(s)&&(s=s.map(r=>np(r))),f(e,["models"],s)}return e}function v2(t){const e={},n=u(t,["maskMode"]);n!=null&&f(e,["maskMode"],n);const i=u(t,["segmentationClasses"]);i!=null&&f(e,["maskClasses"],i);const o=u(t,["maskDilation"]);return o!=null&&f(e,["dilation"],o),e}function tp(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const i=u(t,["displayName"]);i!=null&&f(e,["displayName"],i);const o=u(t,["description"]);o!=null&&f(e,["description"],o);const s=u(t,["version"]);s!=null&&f(e,["version"],s);const r=u(t,["_self"]);r!=null&&f(e,["tunedModelInfo"],V2(r));const a=u(t,["inputTokenLimit"]);a!=null&&f(e,["inputTokenLimit"],a);const l=u(t,["outputTokenLimit"]);l!=null&&f(e,["outputTokenLimit"],l);const c=u(t,["supportedGenerationMethods"]);c!=null&&f(e,["supportedActions"],c);const h=u(t,["temperature"]);h!=null&&f(e,["temperature"],h);const p=u(t,["maxTemperature"]);p!=null&&f(e,["maxTemperature"],p);const m=u(t,["topP"]);m!=null&&f(e,["topP"],m);const y=u(t,["topK"]);y!=null&&f(e,["topK"],y);const b=u(t,["thinking"]);return b!=null&&f(e,["thinking"],b),e}function np(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const i=u(t,["displayName"]);i!=null&&f(e,["displayName"],i);const o=u(t,["description"]);o!=null&&f(e,["description"],o);const s=u(t,["versionId"]);s!=null&&f(e,["version"],s);const r=u(t,["deployedModels"]);if(r!=null){let p=r;Array.isArray(p)&&(p=p.map(m=>MD(m))),f(e,["endpoints"],p)}const a=u(t,["labels"]);a!=null&&f(e,["labels"],a);const l=u(t,["_self"]);l!=null&&f(e,["tunedModelInfo"],U2(l));const c=u(t,["defaultCheckpointId"]);c!=null&&f(e,["defaultCheckpointId"],c);const h=u(t,["checkpoints"]);if(h!=null){let p=h;Array.isArray(p)&&(p=p.map(m=>m)),f(e,["checkpoints"],p)}return e}function _2(t){const e={},n=u(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const i=u(t,["codeExecutionResult"]);i!=null&&f(e,["codeExecutionResult"],i);const o=u(t,["executableCode"]);o!=null&&f(e,["executableCode"],o);const s=u(t,["fileData"]);s!=null&&f(e,["fileData"],DD(s));const r=u(t,["functionCall"]);r!=null&&f(e,["functionCall"],PD(r));const a=u(t,["functionResponse"]);a!=null&&f(e,["functionResponse"],a);const l=u(t,["inlineData"]);l!=null&&f(e,["inlineData"],oD(l));const c=u(t,["text"]);c!=null&&f(e,["text"],c);const h=u(t,["thought"]);h!=null&&f(e,["thought"],h);const p=u(t,["thoughtSignature"]);p!=null&&f(e,["thoughtSignature"],p);const m=u(t,["videoMetadata"]);return m!=null&&f(e,["videoMetadata"],m),e}function E2(t){const e={},n=u(t,["productImage"]);return n!=null&&f(e,["image"],Hn(n)),e}function T2(t,e){const n={},i=u(t,["numberOfImages"]);e!==void 0&&i!=null&&f(e,["parameters","sampleCount"],i);const o=u(t,["baseSteps"]);e!==void 0&&o!=null&&f(e,["parameters","baseSteps"],o);const s=u(t,["outputGcsUri"]);e!==void 0&&s!=null&&f(e,["parameters","storageUri"],s);const r=u(t,["seed"]);e!==void 0&&r!=null&&f(e,["parameters","seed"],r);const a=u(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&f(e,["parameters","safetySetting"],a);const l=u(t,["personGeneration"]);e!==void 0&&l!=null&&f(e,["parameters","personGeneration"],l);const c=u(t,["addWatermark"]);e!==void 0&&c!=null&&f(e,["parameters","addWatermark"],c);const h=u(t,["outputMimeType"]);e!==void 0&&h!=null&&f(e,["parameters","outputOptions","mimeType"],h);const p=u(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&f(e,["parameters","outputOptions","compressionQuality"],p);const m=u(t,["enhancePrompt"]);e!==void 0&&m!=null&&f(e,["parameters","enhancePrompt"],m);const y=u(t,["labels"]);return e!==void 0&&y!=null&&f(e,["labels"],y),n}function S2(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ge(t,i));const o=u(e,["source"]);o!=null&&C2(o,n);const s=u(e,["config"]);return s!=null&&T2(s,n),n}function A2(t){const e={},n=u(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>_f(o))),f(e,["generatedImages"],i)}return e}function C2(t,e){const n={},i=u(t,["prompt"]);e!==void 0&&i!=null&&f(e,["instances[0]","prompt"],i);const o=u(t,["personImage"]);e!==void 0&&o!=null&&f(e,["instances[0]","personImage","image"],Hn(o));const s=u(t,["productImages"]);if(e!==void 0&&s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>E2(a))),f(e,["instances[0]","productImages"],r)}return n}function R2(t){const e={},n=u(t,["referenceImage"]);n!=null&&f(e,["referenceImage"],Hn(n));const i=u(t,["referenceId"]);i!=null&&f(e,["referenceId"],i);const o=u(t,["referenceType"]);o!=null&&f(e,["referenceType"],o);const s=u(t,["maskImageConfig"]);s!=null&&f(e,["maskImageConfig"],v2(s));const r=u(t,["controlImageConfig"]);r!=null&&f(e,["controlImageConfig"],fD(r));const a=u(t,["styleImageConfig"]);a!=null&&f(e,["styleImageConfig"],a);const l=u(t,["subjectImageConfig"]);return l!=null&&f(e,["subjectImageConfig"],l),e}function yC(t){const e={},n=u(t,["safetyAttributes","categories"]);n!=null&&f(e,["categories"],n);const i=u(t,["safetyAttributes","scores"]);i!=null&&f(e,["scores"],i);const o=u(t,["contentType"]);return o!=null&&f(e,["contentType"],o),e}function vC(t){const e={},n=u(t,["safetyAttributes","categories"]);n!=null&&f(e,["categories"],n);const i=u(t,["safetyAttributes","scores"]);i!=null&&f(e,["scores"],i);const o=u(t,["contentType"]);return o!=null&&f(e,["contentType"],o),e}function w2(t){const e={},n=u(t,["category"]);if(n!=null&&f(e,["category"],n),u(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=u(t,["threshold"]);return i!=null&&f(e,["threshold"],i),e}function I2(t){const e={},n=u(t,["image"]);return n!=null&&f(e,["image"],Hn(n)),e}function b2(t,e){const n={},i=u(t,["mode"]);e!==void 0&&i!=null&&f(e,["parameters","mode"],i);const o=u(t,["maxPredictions"]);e!==void 0&&o!=null&&f(e,["parameters","maxPredictions"],o);const s=u(t,["confidenceThreshold"]);e!==void 0&&s!=null&&f(e,["parameters","confidenceThreshold"],s);const r=u(t,["maskDilation"]);e!==void 0&&r!=null&&f(e,["parameters","maskDilation"],r);const a=u(t,["binaryColorThreshold"]);e!==void 0&&a!=null&&f(e,["parameters","binaryColorThreshold"],a);const l=u(t,["labels"]);return e!==void 0&&l!=null&&f(e,["labels"],l),n}function x2(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ge(t,i));const o=u(e,["source"]);o!=null&&M2(o,n);const s=u(e,["config"]);return s!=null&&b2(s,n),n}function N2(t){const e={},n=u(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>t2(o))),f(e,["generatedMasks"],i)}return e}function M2(t,e){const n={},i=u(t,["prompt"]);e!==void 0&&i!=null&&f(e,["instances[0]","prompt"],i);const o=u(t,["image"]);e!==void 0&&o!=null&&f(e,["instances[0]","image"],Hn(o));const s=u(t,["scribbleImage"]);return e!==void 0&&s!=null&&f(e,["instances[0]","scribble"],I2(s)),n}function _C(t){const e={},n=u(t,["languageCode"]);n!=null&&f(e,["languageCode"],n);const i=u(t,["voiceConfig"]);if(i!=null&&f(e,["voiceConfig"],i),u(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function D2(t){const e={},n=u(t,["functionCallingConfig"]);n!=null&&f(e,["functionCallingConfig"],VD(n));const i=u(t,["retrievalConfig"]);return i!=null&&f(e,["retrievalConfig"],i),e}function P2(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>p)),f(e,["functionDeclarations"],h)}if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(t,["googleSearchRetrieval"]);i!=null&&f(e,["googleSearchRetrieval"],i);const o=u(t,["computerUse"]);o!=null&&f(e,["computerUse"],o);const s=u(t,["fileSearch"]);s!=null&&f(e,["fileSearch"],s);const r=u(t,["codeExecution"]);if(r!=null&&f(e,["codeExecution"],r),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=u(t,["googleMaps"]);a!=null&&f(e,["googleMaps"],a2(a));const l=u(t,["googleSearch"]);l!=null&&f(e,["googleSearch"],l2(l));const c=u(t,["urlContext"]);return c!=null&&f(e,["urlContext"],c),e}function EC(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>UD(m))),f(e,["functionDeclarations"],p)}const i=u(t,["retrieval"]);i!=null&&f(e,["retrieval"],i);const o=u(t,["googleSearchRetrieval"]);o!=null&&f(e,["googleSearchRetrieval"],o);const s=u(t,["computerUse"]);if(s!=null&&f(e,["computerUse"],s),u(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=u(t,["codeExecution"]);r!=null&&f(e,["codeExecution"],r);const a=u(t,["enterpriseWebSearch"]);a!=null&&f(e,["enterpriseWebSearch"],a);const l=u(t,["googleMaps"]);l!=null&&f(e,["googleMaps"],l);const c=u(t,["googleSearch"]);c!=null&&f(e,["googleSearch"],c);const h=u(t,["urlContext"]);return h!=null&&f(e,["urlContext"],h),e}function V2(t){const e={},n=u(t,["baseModel"]);n!=null&&f(e,["baseModel"],n);const i=u(t,["createTime"]);i!=null&&f(e,["createTime"],i);const o=u(t,["updateTime"]);return o!=null&&f(e,["updateTime"],o),e}function U2(t){const e={},n=u(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&f(e,["baseModel"],n);const i=u(t,["createTime"]);i!=null&&f(e,["createTime"],i);const o=u(t,["updateTime"]);return o!=null&&f(e,["updateTime"],o),e}function L2(t,e){const n={},i=u(t,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);const o=u(t,["description"]);e!==void 0&&o!=null&&f(e,["description"],o);const s=u(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&f(e,["defaultCheckpointId"],s),n}function k2(t,e){const n={},i=u(t,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);const o=u(t,["description"]);e!==void 0&&o!=null&&f(e,["description"],o);const s=u(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&f(e,["defaultCheckpointId"],s),n}function O2(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","name"],ge(t,i));const o=u(e,["config"]);return o!=null&&L2(o,n),n}function q2(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ge(t,i));const o=u(e,["config"]);return o!=null&&k2(o,n),n}function B2(t,e){const n={},i=u(t,["outputGcsUri"]);e!==void 0&&i!=null&&f(e,["parameters","storageUri"],i);const o=u(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&f(e,["parameters","safetySetting"],o);const s=u(t,["personGeneration"]);e!==void 0&&s!=null&&f(e,["parameters","personGeneration"],s);const r=u(t,["includeRaiReason"]);e!==void 0&&r!=null&&f(e,["parameters","includeRaiReason"],r);const a=u(t,["outputMimeType"]);e!==void 0&&a!=null&&f(e,["parameters","outputOptions","mimeType"],a);const l=u(t,["outputCompressionQuality"]);e!==void 0&&l!=null&&f(e,["parameters","outputOptions","compressionQuality"],l);const c=u(t,["enhanceInputImage"]);e!==void 0&&c!=null&&f(e,["parameters","upscaleConfig","enhanceInputImage"],c);const h=u(t,["imagePreservationFactor"]);e!==void 0&&h!=null&&f(e,["parameters","upscaleConfig","imagePreservationFactor"],h);const p=u(t,["labels"]);e!==void 0&&p!=null&&f(e,["labels"],p);const m=u(t,["numberOfImages"]);e!==void 0&&m!=null&&f(e,["parameters","sampleCount"],m);const y=u(t,["mode"]);return e!==void 0&&y!=null&&f(e,["parameters","mode"],y),n}function F2(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["_url","model"],ge(t,i));const o=u(e,["image"]);o!=null&&f(n,["instances[0]","image"],Hn(o));const s=u(e,["upscaleFactor"]);s!=null&&f(n,["parameters","upscaleConfig","upscaleFactor"],s);const r=u(e,["config"]);return r!=null&&B2(r,n),n}function G2(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>_f(s))),f(e,["generatedImages"],o)}return e}function z2(t){const e={},n=u(t,["uri"]);n!=null&&f(e,["uri"],n);const i=u(t,["encodedVideo"]);i!=null&&f(e,["videoBytes"],Fo(i));const o=u(t,["encoding"]);return o!=null&&f(e,["mimeType"],o),e}function H2(t){const e={},n=u(t,["gcsUri"]);n!=null&&f(e,["uri"],n);const i=u(t,["bytesBase64Encoded"]);i!=null&&f(e,["videoBytes"],Fo(i));const o=u(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}function Y2(t){const e={},n=u(t,["image"]);n!=null&&f(e,["_self"],Hn(n));const i=u(t,["maskMode"]);return i!=null&&f(e,["maskMode"],i),e}function J2(t){const e={},n=u(t,["image"]);n!=null&&f(e,["image"],Ef(n));const i=u(t,["referenceType"]);return i!=null&&f(e,["referenceType"],i),e}function K2(t){const e={},n=u(t,["image"]);n!=null&&f(e,["image"],Hn(n));const i=u(t,["referenceType"]);return i!=null&&f(e,["referenceType"],i),e}function TC(t){const e={},n=u(t,["uri"]);n!=null&&f(e,["uri"],n);const i=u(t,["videoBytes"]);i!=null&&f(e,["encodedVideo"],Fo(i));const o=u(t,["mimeType"]);return o!=null&&f(e,["encoding"],o),e}function SC(t){const e={},n=u(t,["uri"]);n!=null&&f(e,["gcsUri"],n);const i=u(t,["videoBytes"]);i!=null&&f(e,["bytesBase64Encoded"],Fo(i));const o=u(t,["mimeType"]);return o!=null&&f(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $2="Content-Type",Q2="X-Server-Timeout",X2="User-Agent",ip="x-goog-api-client",W2="1.30.0",Z2=`google-genai-sdk/${W2}`,j2="v1beta1",eP="v1beta",hE=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class tP{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:j2,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:eP,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const o=[this.getRequestUrlInternal(n)];return i&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[r,a]of Object.entries(e.queryParams))o.searchParams.append(r,String(a));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,n,o.toString(),e.abortSignal),this.unaryApiCall(o,s,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[o,s]of Object.entries(n))typeof s=="object"?i[o]=Object.assign(Object.assign({},i[o]),s):s!==void 0&&(i[o]=s);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,n,i);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,n,o.toString(),e.abortSignal),this.streamApiCall(o,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i,o){if(n&&n.timeout||o){const s=new AbortController,r=s.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const a=setTimeout(()=>s.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}o&&o.addEventListener("abort",()=>{s.abort()}),e.signal=r}return n&&n.extraBody!==null&&nP(e,n.extraBody),e.headers=await this.getHeadersInternal(n,i),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await pE(o),new Zh(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async o=>(await pE(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var n;return hr(this,arguments,function*(){const o=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),s=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let r="";for(;;){const{done:a,value:l}=yield Pe(o.read());if(a){if(r.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const c=s.decode(l,{stream:!0});try{const p=JSON.parse(c);if("error"in p){const m=JSON.parse(JSON.stringify(p.error)),y=m.status,b=m.code,x=`got status: ${y}. ${JSON.stringify(p)}`;if(b>=400&&b<600)throw new yf({message:x,status:b})}}catch(p){if(p.name==="ApiError")throw p}r+=c;let h=r.match(hE);for(;h;){const p=h[1];try{const m=new Response(p,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Pe(new Zh(m)),r=r.slice(h[0].length),h=r.match(hE)}catch(m){throw new Error(`exception parsing stream chunk ${p}. ${m}`)}}}}finally{o.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=Z2+" "+this.clientOptions.userAgentExtra;return e[X2]=n,e[ip]=n,e[$2]="application/json",e}async getHeadersInternal(e,n){const i=new Headers;if(e&&e.headers){for(const[o,s]of Object.entries(e.headers))i.append(o,s);e.timeout&&e.timeout>0&&i.append(Q2,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(e){var n;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(e,n){var i;const o={};n!=null&&(o.mimeType=n.mimeType,o.name=n.name,o.displayName=n.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const s=this.clientOptions.uploader,r=await s.stat(e);o.sizeBytes=String(r.size);const a=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:r.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=a;const l={file:o},c=this.getFileName(e),h=Y("upload/v1beta/files",l._url),p=await this.fetchUploadUrl(h,o.sizeBytes,o.mimeType,c,l,n==null?void 0:n.httpOptions);return s.upload(e,p,this)}async uploadFileToFileSearchStore(e,n,i){var o;const s=this.clientOptions.uploader,r=await s.stat(n),a=String(r.size),l=(o=i==null?void 0:i.mimeType)!==null&&o!==void 0?o:r.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const c=`upload/v1beta/${e}:uploadToFileSearchStore`,h=this.getFileName(n),p={};i!=null&&i.customMetadata&&(p.customMetadata=i.customMetadata),i!=null&&i.chunkingConfig&&(p.chunkingConfig=i.chunkingConfig);const m=await this.fetchUploadUrl(c,a,l,h,p,i==null?void 0:i.httpOptions);return s.uploadToFileSearchStore(n,m,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,i,o,s,r){var a;let l={};r?l=r:l={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},o?{"X-Goog-Upload-File-Name":o}:{})};const c=await this.request({path:e,body:JSON.stringify(s),httpMethod:"POST",httpOptions:l});if(!c||!(c!=null&&c.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const h=(a=c==null?void 0:c.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(h===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return h}}async function pE(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const o=JSON.stringify(i);throw n>=400&&n<600?new yf({message:o,status:n}):new Error(o)}}function nP(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const s=JSON.parse(t.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))n=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(s,r){const a=Object.assign({},s);for(const l in r)if(Object.prototype.hasOwnProperty.call(r,l)){const c=r[l],h=a[l];c&&typeof c=="object"&&!Array.isArray(c)&&h&&typeof h=="object"&&!Array.isArray(h)?a[l]=i(h,c):(h&&c&&typeof h!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof h}, New type: ${typeof c}. Overwriting.`),a[l]=c)}return a}const o=i(n,e);t.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const iP="mcp_used/unknown";let oP=!1;function AC(t){for(const e of t)if(sP(e)||typeof e=="object"&&"inputSchema"in e)return!0;return oP}function CC(t){var e;const n=(e=t[ip])!==null&&e!==void 0?e:"";t[ip]=(n+` ${iP}`).trimStart()}function sP(t){return t!==null&&typeof t=="object"&&t instanceof Bm}function rP(t,e=100){return hr(this,arguments,function*(){let i,o=0;for(;o<e;){const s=yield Pe(t.listTools({cursor:i}));for(const r of s.tools)yield yield Pe(r),o++;if(!s.nextCursor)break;i=s.nextCursor}})}class Bm{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Bm(e,n)}async initialize(){var e,n,i,o;if(this.mcpTools.length>0)return;const s={},r=[];for(const h of this.mcpClients)try{for(var a=!0,l=(n=void 0,Fa(rP(h))),c;c=await l.next(),e=c.done,!e;a=!0){o=c.value,a=!1;const p=o;r.push(p);const m=p.name;if(s[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);s[m]=h}}catch(p){n={error:p}}finally{try{!a&&!e&&(i=l.return)&&await i.call(l)}finally{if(n)throw n.error}}this.mcpTools=r,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),ZN(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[i.name];let s;this.config.timeout&&(s={timeout:this.config.timeout});const r=await o.callTool({name:i.name,arguments:i.args},void 0,s);n.push({functionResponse:{name:i.name,response:r.isError?{error:r}:r}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function aP(t,e,n){const i=new HN;let o;n.data instanceof Blob?o=JSON.parse(await n.data.text()):o=JSON.parse(n.data),Object.assign(i,o),e(i)}class lP{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),r=fP(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${o}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${a}`;let c=()=>{};const h=new Promise(w=>{c=w}),p=e.callbacks,m=function(){c({})},y=this.apiClient,b={onopen:m,onmessage:w=>{aP(y,p.onmessage,w)},onerror:(n=p==null?void 0:p.onerror)!==null&&n!==void 0?n:function(w){},onclose:(i=p==null?void 0:p.onclose)!==null&&i!==void 0?i:function(w){}},x=this.webSocketFactory.create(l,cP(r),b);x.connect(),await h;const E={setup:{model:ge(this.apiClient,e.model)}};return x.send(JSON.stringify(E)),new uP(x,this.apiClient)}}class uP{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=QM(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=$M(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(or.PLAY)}pause(){this.sendPlaybackControl(or.PAUSE)}stop(){this.sendPlaybackControl(or.STOP)}resetContext(){this.sendPlaybackControl(or.RESET_CONTEXT)}close(){this.conn.close()}}function cP(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function fP(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dP="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function hP(t,e,n){const i=new zN;let o;n.data instanceof Blob?o=await n.data.text():n.data instanceof ArrayBuffer?o=new TextDecoder().decode(n.data):o=n.data;const s=JSON.parse(o);if(t.isVertexAI()){const r=ZM(s);Object.assign(i,r)}else Object.assign(i,s);e(i)}class pP{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new lP(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,o,s,r,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let h;const p=this.apiClient.getHeaders();e.config&&e.config.tools&&AC(e.config.tools)&&CC(p);const m=vP(p);if(this.apiClient.isVertexAI())h=`${l}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m,h);else{const A=this.apiClient.getApiKey();let I="BidiGenerateContent",M="key";A!=null&&A.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),I="BidiGenerateContentConstrained",M="access_token"),h=`${l}/ws/google.ai.generativelanguage.${c}.GenerativeService.${I}?${M}=${A}`}let y=()=>{};const b=new Promise(A=>{y=A}),x=e.callbacks,P=function(){var A;(A=x==null?void 0:x.onopen)===null||A===void 0||A.call(x),y({})},R=this.apiClient,E={onopen:P,onmessage:A=>{hP(R,x.onmessage,A)},onerror:(n=x==null?void 0:x.onerror)!==null&&n!==void 0?n:function(A){},onclose:(i=x==null?void 0:x.onclose)!==null&&i!==void 0?i:function(A){}},w=this.webSocketFactory.create(h,yP(m),E);w.connect(),await b;let D=ge(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&D.startsWith("publishers/")){const A=this.apiClient.getProject(),I=this.apiClient.getLocation();D=`projects/${A}/locations/${I}/`+D}let O={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[wc.AUDIO]}:e.config.responseModalities=[wc.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const q=(a=(r=e.config)===null||r===void 0?void 0:r.tools)!==null&&a!==void 0?a:[],T=[];for(const A of q)if(this.isCallableTool(A)){const I=A;T.push(await I.tool())}else T.push(A);T.length>0&&(e.config.tools=T);const _={model:D,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?O=KM(this.apiClient,_):O=JM(this.apiClient,_),delete O.config,w.send(JSON.stringify(O)),new gP(w,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const mP={turnComplete:!0};class gP{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=Un(n.turns),e.isVertexAI()||(i=i.map(o=>vf(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const s of i){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(dP)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},mP),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:WM(e)}:n={realtimeInput:XM(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function yP(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function vP(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mE=10;function gE(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const r of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(pr(r)){o=!0;break}if(!o)return!0;const s=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function pr(t){return"callTool"in t&&typeof t.callTool=="function"}function _P(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(o=>pr(o)))!==null&&i!==void 0?i:!1}function yE(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((i,o)=>{if(pr(i))return;const s=i;s.functionDeclarations&&s.functionDeclarations.length>0&&n.push(o)}),n}function vE(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class EP extends Fi{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,o,s,r,a;const l=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!_P(n)||gE(n.config))return await this.generateContentInternal(l);const c=yE(n);if(c.length>0){const x=c.map(P=>`tools[${P}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${x}.`)}let h,p;const m=Un(l.contents),y=(s=(o=(i=l.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&s!==void 0?s:mE;let b=0;for(;b<y&&(h=await this.generateContentInternal(l),!(!h.functionCalls||h.functionCalls.length===0));){const x=h.candidates[0].content,P=[];for(const R of(a=(r=n.config)===null||r===void 0?void 0:r.tools)!==null&&a!==void 0?a:[])if(pr(R)){const w=await R.callTool(h.functionCalls);P.push(...w)}b++,p={role:"user",parts:P},l.contents=Un(l.contents),l.contents.push(x),l.contents.push(p),vE(l.config)&&(m.push(x),m.push(p))}return vE(l.config)&&(h.automaticFunctionCallingHistory=m),h},this.generateContentStream=async n=>{var i,o,s,r,a;if(this.maybeMoveToResponseJsonSchem(n),gE(n.config)){const p=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(p)}const l=yE(n);if(l.length>0){const p=l.map(m=>`tools[${m}]`).join(", ");throw new Error(`Incompatible tools found at ${p}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const c=(s=(o=(i=n==null?void 0:n.config)===null||i===void 0?void 0:i.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||s===void 0?void 0:s.streamFunctionCallArguments,h=(a=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||a===void 0?void 0:a.disable;if(c&&!h)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var o;let s;const r=[];if(i!=null&&i.generatedImages)for(const l of i.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((o=l==null?void 0:l.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?s=l==null?void 0:l.safetyAttributes:r.push(l);let a;return s?a={generatedImages:r,positivePromptSafetyAttributes:s,sdkHttpResponse:i.sdkHttpResponse}:a={generatedImages:r,sdkHttpResponse:i.sdkHttpResponse},a}),this.list=async n=>{var i;const r={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!r.config.queryBase){if(!((i=r.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");r.config.filter="labels.tune-type:*"}return new bs(Ui.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(r),r)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const o={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(o)},this.generateVideos=async n=>{var i,o,s,r,a,l;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((o=n.video)===null||o===void 0)&&o.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((r=(s=n.source)===null||s===void 0?void 0:s.video)===null||r===void 0)&&r.uri&&(!((l=(a=n.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,o;const s=(n=e.config)===null||n===void 0?void 0:n.tools;if(!s)return e;const r=await Promise.all(s.map(async l=>pr(l)?await l.tool():l)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:r})};if(a.config.tools=r,e.config&&e.config.tools&&AC(e.config.tools)){const l=(o=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&o!==void 0?o:{};let c=Object.assign({},l);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),CC(c),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return a}async initAfcToolsMap(e){var n,i,o;const s=new Map;for(const r of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(pr(r)){const a=r,l=await a.tool();for(const c of(o=l.functionDeclarations)!==null&&o!==void 0?o:[]){if(!c.name)throw new Error("Function declaration name is required.");if(s.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);s.set(c.name,a)}}return s}async processAfcStream(e){var n,i,o;const s=(o=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:mE;let r=!1,a=0;const l=await this.initAfcToolsMap(e);return function(c,h,p){var m,y;return hr(this,arguments,function*(){for(var b,x,P,R;a<s;){r&&(a++,r=!1);const O=yield Pe(c.processParamsMaybeAddMcpUsage(p)),q=yield Pe(c.generateContentStreamInternal(O)),T=[],_=[];try{for(var E=!0,w=(x=void 0,Fa(q)),D;D=yield Pe(w.next()),b=D.done,!b;E=!0){R=D.value,E=!1;const A=R;if(yield yield Pe(A),A.candidates&&(!((m=A.candidates[0])===null||m===void 0)&&m.content)){_.push(A.candidates[0].content);for(const I of(y=A.candidates[0].content.parts)!==null&&y!==void 0?y:[])if(a<s&&I.functionCall){if(!I.functionCall.name)throw new Error("Function call name was not returned by the model.");if(h.has(I.functionCall.name)){const M=yield Pe(h.get(I.functionCall.name).callTool([I.functionCall]));T.push(...M)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${h.keys()}, mising tool: ${I.functionCall.name}`)}}}}catch(A){x={error:A}}finally{try{!E&&!b&&(P=w.return)&&(yield Pe(P.call(w)))}finally{if(x)throw x.error}}if(T.length>0){r=!0;const A=new ya;A.candidates=[{content:{role:"user",parts:T}}],yield yield Pe(A);const I=[];I.push(..._),I.push({role:"user",parts:T});const M=Un(p.contents).concat(I);p.contents=M}else break}})}(this,l,e)}async generateContentInternal(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=cE(this.apiClient,e);return a=Y("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const p=dE(h),m=new ya;return Object.assign(m,p),m})}else{const c=uE(this.apiClient,e);return a=Y("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const p=fE(h),m=new ya;return Object.assign(m,p),m})}}async generateContentStreamInternal(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=cE(this.apiClient,e);return a=Y("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),r.then(function(p){return hr(this,arguments,function*(){var m,y,b,x;try{for(var P=!0,R=Fa(p),E;E=yield Pe(R.next()),m=E.done,!m;P=!0){x=E.value,P=!1;const w=x,D=dE(yield Pe(w.json()));D.sdkHttpResponse={headers:w.headers};const O=new ya;Object.assign(O,D),yield yield Pe(O)}}catch(w){y={error:w}}finally{try{!P&&!m&&(b=R.return)&&(yield Pe(b.call(R)))}finally{if(y)throw y.error}}})})}else{const c=uE(this.apiClient,e);return a=Y("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),r.then(function(p){return hr(this,arguments,function*(){var m,y,b,x;try{for(var P=!0,R=Fa(p),E;E=yield Pe(R.next()),m=E.done,!m;P=!0){x=E.value,P=!1;const w=x,D=fE(yield Pe(w.json()));D.sdkHttpResponse={headers:w.headers};const O=new ya;Object.assign(O,D),yield yield Pe(O)}}catch(w){y={error:w}}finally{try{!P&&!m&&(b=R.return)&&(yield Pe(b.call(R)))}finally{if(y)throw y.error}}})})}}async embedContent(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=bD(this.apiClient,e);return a=Y("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const p=ND(h),m=new K_;return Object.assign(m,p),m})}else{const c=ID(this.apiClient,e);return a=Y("{model}:batchEmbedContents",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const p=xD(h),m=new K_;return Object.assign(m,p),m})}}async generateImagesInternal(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=FD(this.apiClient,e);return a=Y("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const p=zD(h),m=new $_;return Object.assign(m,p),m})}else{const c=BD(this.apiClient,e);return a=Y("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const p=GD(h),m=new $_;return Object.assign(m,p),m})}}async editImageInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI()){const a=AD(this.apiClient,e);return s=Y("{model}:predict",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:l.headers},h})),o.then(l=>{const c=CD(l),h=new DN;return Object.assign(h,c),h})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI()){const a=F2(this.apiClient,e);return s=Y("{model}:predict",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:l.headers},h})),o.then(l=>{const c=G2(l),h=new PN;return Object.assign(h,c),h})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI()){const a=S2(this.apiClient,e);return s=Y("{model}:predict",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>{const c=A2(l),h=new VN;return Object.assign(h,c),h})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI()){const a=x2(this.apiClient,e);return s=Y("{model}:predict",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>{const c=N2(l),h=new UN;return Object.assign(h,c),h})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=r2(this.apiClient,e);return a=Y("{name}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>np(h))}else{const c=s2(this.apiClient,e);return a=Y("{name}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),r.then(h=>tp(h))}}async listInternal(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=m2(this.apiClient,e);return a=Y("{models_url}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const p=y2(h),m=new Q_;return Object.assign(m,p),m})}else{const c=p2(this.apiClient,e);return a=Y("{models_url}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const p=g2(h),m=new Q_;return Object.assign(m,p),m})}}async update(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=q2(this.apiClient,e);return a=Y("{model}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>np(h))}else{const c=O2(this.apiClient,e);return a=Y("{name}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),r.then(h=>tp(h))}}async delete(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=_D(this.apiClient,e);return a=Y("{name}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const p=TD(h),m=new X_;return Object.assign(m,p),m})}else{const c=vD(this.apiClient,e);return a=Y("{name}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const p=ED(h),m=new X_;return Object.assign(m,p),m})}}async countTokens(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=mD(this.apiClient,e);return a=Y("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const p=yD(h),m=new W_;return Object.assign(m,p),m})}else{const c=pD(this.apiClient,e);return a=Y("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const p=gD(h),m=new W_;return Object.assign(m,p),m})}}async computeTokens(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI()){const a=aD(this.apiClient,e);return s=Y("{model}:computeTokens",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:l.headers},h})),o.then(l=>{const c=lD(l),h=new LN;return Object.assign(h,c),h})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=QD(this.apiClient,e);return a=Y("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>{const p=KD(h),m=new Ic;return Object.assign(m,p),m})}else{const c=$D(this.apiClient,e);return a=Y("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),r.then(h=>{const p=JD(h),m=new Ic;return Object.assign(m,p),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class TP extends Fi{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let s;i&&"httpOptions"in i&&(s=i.httpOptions);const r=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let s;i&&"httpOptions"in i&&(s=i.httpOptions);const r=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=wN(e);return a=Y("{operationName}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r}else{const c=RN(e);return a=Y("{operationName}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),r}}async fetchPredictVideosOperationInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI()){const a=vN(e);return s=Y("{resourceName}:fetchPredictOperation",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function SP(t){const e={},n=u(t,["data"]);if(n!=null&&f(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function AP(t){const e={},n=u(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>DP(s))),f(e,["parts"],o)}const i=u(t,["role"]);return i!=null&&f(e,["role"],i),e}function CP(t,e,n){const i={},o=u(e,["expireTime"]);n!==void 0&&o!=null&&f(n,["expireTime"],o);const s=u(e,["newSessionExpireTime"]);n!==void 0&&s!=null&&f(n,["newSessionExpireTime"],s);const r=u(e,["uses"]);n!==void 0&&r!=null&&f(n,["uses"],r);const a=u(e,["liveConnectConstraints"]);n!==void 0&&a!=null&&f(n,["bidiGenerateContentSetup"],MP(t,a));const l=u(e,["lockAdditionalFields"]);return n!==void 0&&l!=null&&f(n,["fieldMask"],l),i}function RP(t,e){const n={},i=u(e,["config"]);return i!=null&&f(n,["config"],CP(t,i,n)),n}function wP(t){const e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=u(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const i=u(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function IP(t){const e={},n=u(t,["id"]);n!=null&&f(e,["id"],n);const i=u(t,["args"]);i!=null&&f(e,["args"],i);const o=u(t,["name"]);if(o!=null&&f(e,["name"],o),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function bP(t){const e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=u(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function xP(t){const e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=u(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function NP(t,e){const n={},i=u(t,["generationConfig"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig"],i);const o=u(t,["responseModalities"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","responseModalities"],o);const s=u(t,["temperature"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig","temperature"],s);const r=u(t,["topP"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig","topP"],r);const a=u(t,["topK"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","topK"],a);const l=u(t,["maxOutputTokens"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","maxOutputTokens"],l);const c=u(t,["mediaResolution"]);e!==void 0&&c!=null&&f(e,["setup","generationConfig","mediaResolution"],c);const h=u(t,["seed"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","seed"],h);const p=u(t,["speechConfig"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","speechConfig"],qm(p));const m=u(t,["thinkingConfig"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","thinkingConfig"],m);const y=u(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],y);const b=u(t,["systemInstruction"]);e!==void 0&&b!=null&&f(e,["setup","systemInstruction"],AP(kt(b)));const x=u(t,["tools"]);if(e!==void 0&&x!=null){let q=Hr(x);Array.isArray(q)&&(q=q.map(T=>VP(zr(T)))),f(e,["setup","tools"],q)}const P=u(t,["sessionResumption"]);e!==void 0&&P!=null&&f(e,["setup","sessionResumption"],PP(P));const R=u(t,["inputAudioTranscription"]);e!==void 0&&R!=null&&f(e,["setup","inputAudioTranscription"],R);const E=u(t,["outputAudioTranscription"]);e!==void 0&&E!=null&&f(e,["setup","outputAudioTranscription"],E);const w=u(t,["realtimeInputConfig"]);e!==void 0&&w!=null&&f(e,["setup","realtimeInputConfig"],w);const D=u(t,["contextWindowCompression"]);e!==void 0&&D!=null&&f(e,["setup","contextWindowCompression"],D);const O=u(t,["proactivity"]);return e!==void 0&&O!=null&&f(e,["setup","proactivity"],O),n}function MP(t,e){const n={},i=u(e,["model"]);i!=null&&f(n,["setup","model"],ge(t,i));const o=u(e,["config"]);return o!=null&&f(n,["config"],NP(o,n)),n}function DP(t){const e={},n=u(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const i=u(t,["codeExecutionResult"]);i!=null&&f(e,["codeExecutionResult"],i);const o=u(t,["executableCode"]);o!=null&&f(e,["executableCode"],o);const s=u(t,["fileData"]);s!=null&&f(e,["fileData"],wP(s));const r=u(t,["functionCall"]);r!=null&&f(e,["functionCall"],IP(r));const a=u(t,["functionResponse"]);a!=null&&f(e,["functionResponse"],a);const l=u(t,["inlineData"]);l!=null&&f(e,["inlineData"],SP(l));const c=u(t,["text"]);c!=null&&f(e,["text"],c);const h=u(t,["thought"]);h!=null&&f(e,["thought"],h);const p=u(t,["thoughtSignature"]);p!=null&&f(e,["thoughtSignature"],p);const m=u(t,["videoMetadata"]);return m!=null&&f(e,["videoMetadata"],m),e}function PP(t){const e={},n=u(t,["handle"]);if(n!=null&&f(e,["handle"],n),u(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function VP(t){const e={},n=u(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>p)),f(e,["functionDeclarations"],h)}if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(t,["googleSearchRetrieval"]);i!=null&&f(e,["googleSearchRetrieval"],i);const o=u(t,["computerUse"]);o!=null&&f(e,["computerUse"],o);const s=u(t,["fileSearch"]);s!=null&&f(e,["fileSearch"],s);const r=u(t,["codeExecution"]);if(r!=null&&f(e,["codeExecution"],r),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=u(t,["googleMaps"]);a!=null&&f(e,["googleMaps"],bP(a));const l=u(t,["googleSearch"]);l!=null&&f(e,["googleSearch"],xP(l));const c=u(t,["urlContext"]);return c!=null&&f(e,["urlContext"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function UP(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const o=Object.keys(i).map(s=>`${n}.${s}`);e.push(...o)}else e.push(n)}return e.join(",")}function LP(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const s=i.setup;typeof s=="object"&&s!==null?(t.bidiGenerateContentSetup=s,n=s):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const o=t.fieldMask;if(n){const s=UP(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)s?t.fieldMask=s:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const r=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];o.length>0&&(a=o.map(c=>r.includes(c)?`generationConfig.${c}`:c));const l=[];s&&l.push(s),a.length>0&&l.push(...a),l.length>0?t.fieldMask=l.join(","):delete t.fieldMask}else delete t.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?t.fieldMask=o.join(","):delete t.fieldMask;return t}class kP extends Fi{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=RP(this.apiClient,e);s=Y("auth_tokens",a._url),r=a._query,delete a.config,delete a._url,delete a._query;const l=LP(a,e.config);return o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),o.then(c=>c)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function OP(t,e){const n={},i=u(t,["displayName"]);return e!==void 0&&i!=null&&f(e,["displayName"],i),n}function qP(t){const e={},n=u(t,["config"]);return n!=null&&OP(n,e),e}function BP(t,e){const n={},i=u(t,["force"]);return e!==void 0&&i!=null&&f(e,["_query","force"],i),n}function FP(t){const e={},n=u(t,["name"]);n!=null&&f(e,["_url","name"],n);const i=u(t,["config"]);return i!=null&&BP(i,e),e}function GP(t){const e={},n=u(t,["name"]);return n!=null&&f(e,["_url","name"],n),e}function zP(t,e){const n={},i=u(t,["customMetadata"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>r)),f(e,["customMetadata"],s)}const o=u(t,["chunkingConfig"]);return e!==void 0&&o!=null&&f(e,["chunkingConfig"],o),n}function HP(t){const e={},n=u(t,["name"]);n!=null&&f(e,["name"],n);const i=u(t,["metadata"]);i!=null&&f(e,["metadata"],i);const o=u(t,["done"]);o!=null&&f(e,["done"],o);const s=u(t,["error"]);s!=null&&f(e,["error"],s);const r=u(t,["response"]);return r!=null&&f(e,["response"],JP(r)),e}function YP(t){const e={},n=u(t,["fileSearchStoreName"]);n!=null&&f(e,["_url","file_search_store_name"],n);const i=u(t,["fileName"]);i!=null&&f(e,["fileName"],i);const o=u(t,["config"]);return o!=null&&zP(o,e),e}function JP(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["parent"]);i!=null&&f(e,["parent"],i);const o=u(t,["documentName"]);return o!=null&&f(e,["documentName"],o),e}function KP(t,e){const n={},i=u(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const o=u(t,["pageToken"]);return e!==void 0&&o!=null&&f(e,["_query","pageToken"],o),n}function $P(t){const e={},n=u(t,["config"]);return n!=null&&KP(n,e),e}function QP(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const o=u(t,["fileSearchStores"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),f(e,["fileSearchStores"],s)}return e}function XP(t,e){const n={},i=u(t,["mimeType"]);e!==void 0&&i!=null&&f(e,["mimeType"],i);const o=u(t,["displayName"]);e!==void 0&&o!=null&&f(e,["displayName"],o);const s=u(t,["customMetadata"]);if(e!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),f(e,["customMetadata"],a)}const r=u(t,["chunkingConfig"]);return e!==void 0&&r!=null&&f(e,["chunkingConfig"],r),n}function WP(t){const e={},n=u(t,["fileSearchStoreName"]);n!=null&&f(e,["_url","file_search_store_name"],n);const i=u(t,["config"]);return i!=null&&XP(i,e),e}function ZP(t){const e={},n=u(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jP(t,e){const n={},i=u(t,["force"]);return e!==void 0&&i!=null&&f(e,["_query","force"],i),n}function eV(t){const e={},n=u(t,["name"]);n!=null&&f(e,["_url","name"],n);const i=u(t,["config"]);return i!=null&&jP(i,e),e}function tV(t){const e={},n=u(t,["name"]);return n!=null&&f(e,["_url","name"],n),e}function nV(t,e){const n={},i=u(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const o=u(t,["pageToken"]);return e!==void 0&&o!=null&&f(e,["_query","pageToken"],o),n}function iV(t){const e={},n=u(t,["parent"]);n!=null&&f(e,["_url","parent"],n);const i=u(t,["config"]);return i!=null&&nV(i,e),e}function oV(t){const e={},n=u(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const i=u(t,["nextPageToken"]);i!=null&&f(e,["nextPageToken"],i);const o=u(t,["documents"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(r=>r)),f(e,["documents"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sV extends Fi{constructor(e){super(),this.apiClient=e,this.list=async n=>new bs(Ui.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=tV(e);return s=Y("{name}",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>l)}}async delete(e){var n,i;let o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const r=eV(e);o=Y("{name}",r._url),s=r._query,delete r._url,delete r._query,await this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(r),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=iV(e);return s=Y("{parent}/documents",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>{const c=oV(l),h=new kN;return Object.assign(h,c),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rV extends Fi{constructor(e,n=new sV(e)){super(),this.apiClient=e,this.documents=n,this.list=async(i={})=>new bs(Ui.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=qP(e);return s=Y("fileSearchStores",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>l)}}async get(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=GP(e);return s=Y("{name}",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>l)}}async delete(e){var n,i;let o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const r=FP(e);o=Y("{name}",r._url),s=r._query,delete r._url,delete r._query,await this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(r),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=$P(e);return s=Y("fileSearchStores",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>{const c=QP(l),h=new ON;return Object.assign(h,c),h})}}async uploadToFileSearchStoreInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=WP(e);return s=Y("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>{const c=ZP(l),h=new qN;return Object.assign(h,c),h})}}async importFile(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=YP(e);return s=Y("{file_search_store_name}:importFile",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),o.then(l=>{const c=HP(l),h=new Vm;return Object.assign(h,c),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aV(t,e){const n={},i=u(t,["name"]);return i!=null&&f(n,["_url","name"],i),n}function lV(t,e){const n={},i=u(t,["name"]);return i!=null&&f(n,["_url","name"],i),n}function uV(t,e,n){const i={};if(u(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=u(t,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&f(e,["displayName"],o),u(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=u(t,["epochCount"]);e!==void 0&&s!=null&&f(e,["tuningTask","hyperparameters","epochCount"],s);const r=u(t,["learningRateMultiplier"]);if(r!=null&&f(i,["tuningTask","hyperparameters","learningRateMultiplier"],r),u(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(u(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(u(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=u(t,["batchSize"]);e!==void 0&&a!=null&&f(e,["tuningTask","hyperparameters","batchSize"],a);const l=u(t,["learningRate"]);if(e!==void 0&&l!=null&&f(e,["tuningTask","hyperparameters","learningRate"],l),u(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(u(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function cV(t,e,n){const i={};let o=u(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const y=u(t,["validationDataset"]);e!==void 0&&y!=null&&f(e,["supervisedTuningSpec"],_E(y))}else if(o==="PREFERENCE_TUNING"){const y=u(t,["validationDataset"]);e!==void 0&&y!=null&&f(e,["preferenceOptimizationSpec"],_E(y))}const s=u(t,["tunedModelDisplayName"]);e!==void 0&&s!=null&&f(e,["tunedModelDisplayName"],s);const r=u(t,["description"]);e!==void 0&&r!=null&&f(e,["description"],r);let a=u(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const y=u(t,["epochCount"]);e!==void 0&&y!=null&&f(e,["supervisedTuningSpec","hyperParameters","epochCount"],y)}else if(a==="PREFERENCE_TUNING"){const y=u(t,["epochCount"]);e!==void 0&&y!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],y)}let l=u(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const y=u(t,["learningRateMultiplier"]);e!==void 0&&y!=null&&f(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],y)}else if(l==="PREFERENCE_TUNING"){const y=u(t,["learningRateMultiplier"]);e!==void 0&&y!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],y)}let c=u(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const y=u(t,["exportLastCheckpointOnly"]);e!==void 0&&y!=null&&f(e,["supervisedTuningSpec","exportLastCheckpointOnly"],y)}else if(c==="PREFERENCE_TUNING"){const y=u(t,["exportLastCheckpointOnly"]);e!==void 0&&y!=null&&f(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],y)}let h=u(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const y=u(t,["adapterSize"]);e!==void 0&&y!=null&&f(e,["supervisedTuningSpec","hyperParameters","adapterSize"],y)}else if(h==="PREFERENCE_TUNING"){const y=u(t,["adapterSize"]);e!==void 0&&y!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],y)}if(u(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(u(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const p=u(t,["labels"]);e!==void 0&&p!=null&&f(e,["labels"],p);const m=u(t,["beta"]);return e!==void 0&&m!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","beta"],m),i}function fV(t,e){const n={},i=u(t,["baseModel"]);i!=null&&f(n,["baseModel"],i);const o=u(t,["preTunedModel"]);o!=null&&f(n,["preTunedModel"],o);const s=u(t,["trainingDataset"]);s!=null&&SV(s);const r=u(t,["config"]);return r!=null&&uV(r,n),n}function dV(t,e){const n={},i=u(t,["baseModel"]);i!=null&&f(n,["baseModel"],i);const o=u(t,["preTunedModel"]);o!=null&&f(n,["preTunedModel"],o);const s=u(t,["trainingDataset"]);s!=null&&AV(s,n,e);const r=u(t,["config"]);return r!=null&&cV(r,n,e),n}function hV(t,e){const n={},i=u(t,["name"]);return i!=null&&f(n,["_url","name"],i),n}function pV(t,e){const n={},i=u(t,["name"]);return i!=null&&f(n,["_url","name"],i),n}function mV(t,e,n){const i={},o=u(t,["pageSize"]);e!==void 0&&o!=null&&f(e,["_query","pageSize"],o);const s=u(t,["pageToken"]);e!==void 0&&s!=null&&f(e,["_query","pageToken"],s);const r=u(t,["filter"]);return e!==void 0&&r!=null&&f(e,["_query","filter"],r),i}function gV(t,e,n){const i={},o=u(t,["pageSize"]);e!==void 0&&o!=null&&f(e,["_query","pageSize"],o);const s=u(t,["pageToken"]);e!==void 0&&s!=null&&f(e,["_query","pageToken"],s);const r=u(t,["filter"]);return e!==void 0&&r!=null&&f(e,["_query","filter"],r),i}function yV(t,e){const n={},i=u(t,["config"]);return i!=null&&mV(i,n),n}function vV(t,e){const n={},i=u(t,["config"]);return i!=null&&gV(i,n),n}function _V(t,e){const n={},i=u(t,["sdkHttpResponse"]);i!=null&&f(n,["sdkHttpResponse"],i);const o=u(t,["nextPageToken"]);o!=null&&f(n,["nextPageToken"],o);const s=u(t,["tunedModels"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>RC(a))),f(n,["tuningJobs"],r)}return n}function EV(t,e){const n={},i=u(t,["sdkHttpResponse"]);i!=null&&f(n,["sdkHttpResponse"],i);const o=u(t,["nextPageToken"]);o!=null&&f(n,["nextPageToken"],o);const s=u(t,["tuningJobs"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>op(a))),f(n,["tuningJobs"],r)}return n}function TV(t,e){const n={},i=u(t,["name"]);i!=null&&f(n,["model"],i);const o=u(t,["name"]);return o!=null&&f(n,["endpoint"],o),n}function SV(t,e){const n={};if(u(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=u(t,["examples"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),f(n,["examples","examples"],o)}return n}function AV(t,e,n){const i={};let o=u(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const r=u(t,["gcsUri"]);e!==void 0&&r!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],r)}else if(o==="PREFERENCE_TUNING"){const r=u(t,["gcsUri"]);e!==void 0&&r!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],r)}let s=u(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const r=u(t,["vertexDatasetResource"]);e!==void 0&&r!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],r)}else if(s==="PREFERENCE_TUNING"){const r=u(t,["vertexDatasetResource"]);e!==void 0&&r!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],r)}if(u(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function RC(t,e){const n={},i=u(t,["sdkHttpResponse"]);i!=null&&f(n,["sdkHttpResponse"],i);const o=u(t,["name"]);o!=null&&f(n,["name"],o);const s=u(t,["state"]);s!=null&&f(n,["state"],rC(s));const r=u(t,["createTime"]);r!=null&&f(n,["createTime"],r);const a=u(t,["tuningTask","startTime"]);a!=null&&f(n,["startTime"],a);const l=u(t,["tuningTask","completeTime"]);l!=null&&f(n,["endTime"],l);const c=u(t,["updateTime"]);c!=null&&f(n,["updateTime"],c);const h=u(t,["description"]);h!=null&&f(n,["description"],h);const p=u(t,["baseModel"]);p!=null&&f(n,["baseModel"],p);const m=u(t,["_self"]);return m!=null&&f(n,["tunedModel"],TV(m)),n}function op(t,e){const n={},i=u(t,["sdkHttpResponse"]);i!=null&&f(n,["sdkHttpResponse"],i);const o=u(t,["name"]);o!=null&&f(n,["name"],o);const s=u(t,["state"]);s!=null&&f(n,["state"],rC(s));const r=u(t,["createTime"]);r!=null&&f(n,["createTime"],r);const a=u(t,["startTime"]);a!=null&&f(n,["startTime"],a);const l=u(t,["endTime"]);l!=null&&f(n,["endTime"],l);const c=u(t,["updateTime"]);c!=null&&f(n,["updateTime"],c);const h=u(t,["error"]);h!=null&&f(n,["error"],h);const p=u(t,["description"]);p!=null&&f(n,["description"],p);const m=u(t,["baseModel"]);m!=null&&f(n,["baseModel"],m);const y=u(t,["tunedModel"]);y!=null&&f(n,["tunedModel"],y);const b=u(t,["preTunedModel"]);b!=null&&f(n,["preTunedModel"],b);const x=u(t,["supervisedTuningSpec"]);x!=null&&f(n,["supervisedTuningSpec"],x);const P=u(t,["preferenceOptimizationSpec"]);P!=null&&f(n,["preferenceOptimizationSpec"],P);const R=u(t,["tuningDataStats"]);R!=null&&f(n,["tuningDataStats"],R);const E=u(t,["encryptionSpec"]);E!=null&&f(n,["encryptionSpec"],E);const w=u(t,["partnerModelTuningSpec"]);w!=null&&f(n,["partnerModelTuningSpec"],w);const D=u(t,["customBaseModel"]);D!=null&&f(n,["customBaseModel"],D);const O=u(t,["experiment"]);O!=null&&f(n,["experiment"],O);const q=u(t,["labels"]);q!=null&&f(n,["labels"],q);const T=u(t,["outputUri"]);T!=null&&f(n,["outputUri"],T);const _=u(t,["pipelineJob"]);_!=null&&f(n,["pipelineJob"],_);const A=u(t,["serviceAccount"]);A!=null&&f(n,["serviceAccount"],A);const I=u(t,["tunedModelDisplayName"]);I!=null&&f(n,["tunedModelDisplayName"],I);const M=u(t,["veoTuningSpec"]);return M!=null&&f(n,["veoTuningSpec"],M),n}function CV(t,e){const n={},i=u(t,["sdkHttpResponse"]);i!=null&&f(n,["sdkHttpResponse"],i);const o=u(t,["name"]);o!=null&&f(n,["name"],o);const s=u(t,["metadata"]);s!=null&&f(n,["metadata"],s);const r=u(t,["done"]);r!=null&&f(n,["done"],r);const a=u(t,["error"]);return a!=null&&f(n,["error"],a),n}function _E(t,e){const n={},i=u(t,["gcsUri"]);i!=null&&f(n,["validationDatasetUri"],i);const o=u(t,["vertexDatasetResource"]);return o!=null&&f(n,["validationDatasetUri"],o),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class RV extends Fi{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new bs(Ui.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const o={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(o.checkpointId=n.config.preTunedModelCheckpointId);const s=Object.assign(Object.assign({},n),{preTunedModel:o});return s.baseModel=void 0,await this.tuneInternal(s)}else{const o=Object.assign({},n);return await this.tuneInternal(o)}else{const o=Object.assign({},n),s=await this.tuneMldevInternal(o);let r="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?r=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(r=s.name.split("/operations/")[0]),{name:r,state:Wh.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=pV(e);return a=Y("{name}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>op(h))}else{const c=hV(e);return a=Y("{name}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>RC(h))}}async listInternal(e){var n,i,o,s;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=vV(e);return a=Y("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const p=EV(h),m=new Z_;return Object.assign(m,p),m})}else{const c=yV(e);return a=Y("tunedModels",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),r.then(h=>{const p=_V(h),m=new Z_;return Object.assign(m,p),m})}}async cancel(e){var n,i,o,s;let r="",a={};if(this.apiClient.isVertexAI()){const l=lV(e);r=Y("{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const l=aV(e);r=Y("{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async tuneInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI()){const a=dV(e,e);return s=Y("tuningJobs",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:l.headers},h})),o.then(l=>op(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let o,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=fV(e);return s=Y("tunedModels",a._url),r=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(c=>{const h=c;return h.sdkHttpResponse={headers:l.headers},h})),o.then(l=>CV(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wV{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const IV=1024*1024*8,bV=3,xV=1e3,NV=2,xc="x-goog-upload-status";async function MV(t,e,n){var i;const o=await wC(t,e,n),s=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[xc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return s.file}async function DV(t,e,n){var i;const o=await wC(t,e,n),s=await(o==null?void 0:o.json());if(((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[xc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const r=eC(s),a=new Um;return Object.assign(a,r),a}async function wC(t,e,n){var i,o;let s=0,r=0,a=new Zh(new Response),l="upload";for(s=t.size;r<s;){const c=Math.min(IV,s-r),h=t.slice(r,r+c);r+c>=s&&(l+=", finalize");let p=0,m=xV;for(;p<bV&&(a=await n.request({path:"",body:h,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(r),"Content-Length":String(c)}}}),!(!((i=a==null?void 0:a.headers)===null||i===void 0)&&i[xc]));)p++,await VV(m),m=m*NV;if(r+=c,((o=a==null?void 0:a.headers)===null||o===void 0?void 0:o[xc])!=="active")break;if(s<=r)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function PV(t){return{size:t.size,type:t.type}}function VV(t){return new Promise(e=>setTimeout(e,t))}class UV{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await MV(e,n,i)}async uploadToFileSearchStore(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await DV(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await PV(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class LV{create(e,n,i){return new kV(e,n,i)}}class kV{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const EE="x-goog-api-key";class OV{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(EE)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(EE,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qV="gl-node/";class Tf{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=gN(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const o=new OV(this.apiKey);this.apiClient=new tP({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:qV+"web",uploader:new UV,downloader:new wV}),this.models=new EP(this.apiClient),this.live=new pP(this.apiClient,o,new LV),this.batches=new Y1(this.apiClient),this.chats=new wM(this.models,this.apiClient),this.caches=new AM(this.apiClient),this.files=new LM(this.apiClient),this.operations=new TP(this.apiClient),this.authTokens=new kP(this.apiClient),this.tunings=new RV(this.apiClient),this.fileSearchStores=new rV(this.apiClient)}}const BV=()=>{};var TE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let o=t.charCodeAt(i);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},FV=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const o=t[n++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const s=t[n++];e[i++]=String.fromCharCode((o&31)<<6|s&63)}else if(o>239&&o<365){const s=t[n++],r=t[n++],a=t[n++],l=((o&7)<<18|(s&63)<<12|(r&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],r=t[n++];e[i++]=String.fromCharCode((o&15)<<12|(s&63)<<6|r&63)}}return e.join("")},bC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<t.length;o+=3){const s=t[o],r=o+1<t.length,a=r?t[o+1]:0,l=o+2<t.length,c=l?t[o+2]:0,h=s>>2,p=(s&3)<<4|a>>4;let m=(a&15)<<2|c>>6,y=c&63;l||(y=64,r||(m=64)),i.push(n[h],n[p],n[m],n[y])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(IC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):FV(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<t.length;){const s=n[t.charAt(o++)],a=o<t.length?n[t.charAt(o)]:0;++o;const c=o<t.length?n[t.charAt(o)]:64;++o;const p=o<t.length?n[t.charAt(o)]:64;if(++o,s==null||a==null||c==null||p==null)throw new GV;const m=s<<2|a>>4;if(i.push(m),c!==64){const y=a<<4&240|c>>2;if(i.push(y),p!==64){const b=c<<6&192|p;i.push(b)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class GV extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const zV=function(t){const e=IC(t);return bC.encodeByteArray(e,!0)},Nc=function(t){return zV(t).replace(/\./g,"")},HV=function(t){try{return bC.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YV(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JV=()=>YV().__FIREBASE_DEFAULTS__,KV=()=>{if(typeof process>"u"||typeof TE>"u")return;const t=TE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},$V=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&HV(t[1]);return e&&JSON.parse(e)},Fm=()=>{try{return BV()||JV()||KV()||$V()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},QV=t=>{var e,n;return(n=(e=Fm())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},XV=t=>{const e=QV(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},xC=()=>{var t;return(t=Fm())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gm(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ZV(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jV(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",o=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const r={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Nc(JSON.stringify(n)),Nc(JSON.stringify(r)),""].join(".")}const Ga={};function e4(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ga))Ga[e]?t.emulator.push(e):t.prod.push(e);return t}function t4(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let SE=!1;function n4(t,e){if(typeof window>"u"||typeof document>"u"||!Gm(window.location.host)||Ga[t]===e||Ga[t]||SE)return;Ga[t]=e;function n(m){return`__firebase__banner__${m}`}const i="__firebase__banner",s=e4().prod.length>0;function r(){const m=document.getElementById(i);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function l(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function c(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{SE=!0,r()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){const m=t4(i),y=n("text"),b=document.getElementById(y)||document.createElement("span"),x=n("learnmore"),P=document.getElementById(x)||document.createElement("a"),R=n("preprendIcon"),E=document.getElementById(R)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const w=m.element;a(w),h(P,x);const D=c();l(E,R),w.append(E,b,P,D),document.body.appendChild(w)}s?(b.innerText="Preview backend disconnected.",E.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(E.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i4(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function o4(){var e;const t=(e=Fm())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function s4(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function r4(){return!o4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function NC(){try{return typeof indexedDB=="object"}catch{return!1}}function MC(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var s;e(((s=o.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}function a4(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l4="FirebaseError";class Go extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=l4,Object.setPrototypeOf(this,Go.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Sf.prototype.create)}}class Sf{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},o=`${this.service}/${e}`,s=this.errors[e],r=s?u4(s,i):"Error",a=`${this.serviceName}: ${r} (${o}).`;return new Go(o,a,i)}}function u4(t,e){return t.replace(c4,(n,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const c4=/\{\$([^}]+)}/g;function fl(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const o of n){if(!i.includes(o))return!1;const s=t[o],r=e[o];if(AE(s)&&AE(r)){if(!fl(s,r))return!1}else if(s!==r)return!1}for(const o of i)if(!n.includes(o))return!1;return!0}function AE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f4=1e3,d4=2,h4=4*60*60*1e3,p4=.5;function CE(t,e=f4,n=d4){const i=e*Math.pow(n,t),o=Math.round(p4*i*(Math.random()-.5)*2);return Math.min(h4,i+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vs(t){return t&&t._delegate?t._delegate:t}class Li{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const os="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new WV;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(y4(e))try{this.getOrInitializeService({instanceIdentifier:os})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:o});i.resolve(s)}catch{}}}}clearInstance(e=os){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=os){return this.instances.has(e)}getOptions(e=os){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&r.resolve(o)}return o}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const o of i)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:g4(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=os){return this.component?this.component.multipleInstances?e:os:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function g4(t){return t===os?void 0:t}function y4(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new m4(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(pe||(pe={}));const _4={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},E4=pe.INFO,T4={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},S4=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),o=T4[e];if(o)console[o](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class zm{constructor(e){this.name=e,this._logLevel=E4,this._logHandler=S4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?_4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}}const A4=(t,e)=>e.some(n=>t instanceof n);let RE,wE;function C4(){return RE||(RE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function R4(){return wE||(wE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const DC=new WeakMap,sp=new WeakMap,PC=new WeakMap,Od=new WeakMap,Hm=new WeakMap;function w4(t){const e=new Promise((n,i)=>{const o=()=>{t.removeEventListener("success",s),t.removeEventListener("error",r)},s=()=>{n(Ao(t.result)),o()},r=()=>{i(t.error),o()};t.addEventListener("success",s),t.addEventListener("error",r)});return e.then(n=>{n instanceof IDBCursor&&DC.set(n,t)}).catch(()=>{}),Hm.set(e,t),e}function I4(t){if(sp.has(t))return;const e=new Promise((n,i)=>{const o=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",r),t.removeEventListener("abort",r)},s=()=>{n(),o()},r=()=>{i(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",s),t.addEventListener("error",r),t.addEventListener("abort",r)});sp.set(t,e)}let rp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return sp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||PC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ao(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function b4(t){rp=t(rp)}function x4(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(qd(this),e,...n);return PC.set(i,e.sort?e.sort():[e]),Ao(i)}:R4().includes(t)?function(...e){return t.apply(qd(this),e),Ao(DC.get(this))}:function(...e){return Ao(t.apply(qd(this),e))}}function N4(t){return typeof t=="function"?x4(t):(t instanceof IDBTransaction&&I4(t),A4(t,C4())?new Proxy(t,rp):t)}function Ao(t){if(t instanceof IDBRequest)return w4(t);if(Od.has(t))return Od.get(t);const e=N4(t);return e!==t&&(Od.set(t,e),Hm.set(e,t)),e}const qd=t=>Hm.get(t);function VC(t,e,{blocked:n,upgrade:i,blocking:o,terminated:s}={}){const r=indexedDB.open(t,e),a=Ao(r);return i&&r.addEventListener("upgradeneeded",l=>{i(Ao(r.result),l.oldVersion,l.newVersion,Ao(r.transaction),l)}),n&&r.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),o&&l.addEventListener("versionchange",c=>o(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const M4=["get","getKey","getAll","getAllKeys","count"],D4=["put","add","delete","clear"],Bd=new Map;function IE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Bd.get(e))return Bd.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,o=D4.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(o||M4.includes(n)))return;const s=async function(r,...a){const l=this.transaction(r,o?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),o&&l.done]))[0]};return Bd.set(e,s),s}b4(t=>({...t,get:(e,n,i)=>IE(e,n)||t.get(e,n,i),has:(e,n)=>!!IE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(V4(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function V4(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ap="@firebase/app",bE="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ki=new zm("@firebase/app"),U4="@firebase/app-compat",L4="@firebase/analytics-compat",k4="@firebase/analytics",O4="@firebase/app-check-compat",q4="@firebase/app-check",B4="@firebase/auth",F4="@firebase/auth-compat",G4="@firebase/database",z4="@firebase/data-connect",H4="@firebase/database-compat",Y4="@firebase/functions",J4="@firebase/functions-compat",K4="@firebase/installations",$4="@firebase/installations-compat",Q4="@firebase/messaging",X4="@firebase/messaging-compat",W4="@firebase/performance",Z4="@firebase/performance-compat",j4="@firebase/remote-config",eU="@firebase/remote-config-compat",tU="@firebase/storage",nU="@firebase/storage-compat",iU="@firebase/firestore",oU="@firebase/ai",sU="@firebase/firestore-compat",rU="firebase",aU="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lp="[DEFAULT]",lU={[ap]:"fire-core",[U4]:"fire-core-compat",[k4]:"fire-analytics",[L4]:"fire-analytics-compat",[q4]:"fire-app-check",[O4]:"fire-app-check-compat",[B4]:"fire-auth",[F4]:"fire-auth-compat",[G4]:"fire-rtdb",[z4]:"fire-data-connect",[H4]:"fire-rtdb-compat",[Y4]:"fire-fn",[J4]:"fire-fn-compat",[K4]:"fire-iid",[$4]:"fire-iid-compat",[Q4]:"fire-fcm",[X4]:"fire-fcm-compat",[W4]:"fire-perf",[Z4]:"fire-perf-compat",[j4]:"fire-rc",[eU]:"fire-rc-compat",[tU]:"fire-gcs",[nU]:"fire-gcs-compat",[iU]:"fire-fst",[sU]:"fire-fst-compat",[oU]:"fire-vertex","fire-js":"fire-js",[rU]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mc=new Map,uU=new Map,up=new Map;function xE(t,e){try{t.container.addComponent(e)}catch(n){ki.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Mo(t){const e=t.name;if(up.has(e))return ki.debug(`There were multiple attempts to register component ${e}.`),!1;up.set(e,t);for(const n of Mc.values())xE(n,t);for(const n of uU.values())xE(n,t);return!0}function Ul(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function cU(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fU={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Co=new Sf("app","Firebase",fU);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dU{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Li("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Co.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hU=aU;function UC(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:lp,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw Co.create("bad-app-name",{appName:String(o)});if(n||(n=xC()),!n)throw Co.create("no-options");const s=Mc.get(o);if(s){if(fl(n,s.options)&&fl(i,s.config))return s;throw Co.create("duplicate-app",{appName:o})}const r=new v4(o);for(const l of up.values())r.addComponent(l);const a=new dU(n,i,r);return Mc.set(o,a),a}function LC(t=lp){const e=Mc.get(t);if(!e&&t===lp&&xC())return UC();if(!e)throw Co.create("no-app",{appName:t});return e}function si(t,e,n){let i=lU[t]??t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const r=[`Unable to register library "${i}" with version "${e}":`];o&&r.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&r.push("and"),s&&r.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ki.warn(r.join(" "));return}Mo(new Li(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pU="firebase-heartbeat-database",mU=1,dl="firebase-heartbeat-store";let Fd=null;function kC(){return Fd||(Fd=VC(pU,mU,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(dl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Co.create("idb-open",{originalErrorMessage:t.message})})),Fd}async function gU(t){try{const n=(await kC()).transaction(dl),i=await n.objectStore(dl).get(OC(t));return await n.done,i}catch(e){if(e instanceof Go)ki.warn(e.message);else{const n=Co.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ki.warn(n.message)}}}async function NE(t,e){try{const i=(await kC()).transaction(dl,"readwrite");await i.objectStore(dl).put(e,OC(t)),await i.done}catch(n){if(n instanceof Go)ki.warn(n.message);else{const i=Co.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ki.warn(i.message)}}}function OC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yU=1024,vU=30;class _U{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new TU(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=ME();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(r=>r.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:o}),this._heartbeatsCache.heartbeats.length>vU){const r=SU(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ki.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ME(),{heartbeatsToSend:i,unsentEntries:o}=EU(this._heartbeatsCache.heartbeats),s=Nc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return ki.warn(n),""}}}function ME(){return new Date().toISOString().substring(0,10)}function EU(t,e=yU){const n=[];let i=t.slice();for(const o of t){const s=n.find(r=>r.agent===o.agent);if(s){if(s.dates.push(o.date),DE(n)>e){s.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),DE(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class TU{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return NC()?MC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await gU(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return NE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return NE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function DE(t){return Nc(JSON.stringify({version:2,heartbeats:t})).length}function SU(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AU(t){Mo(new Li("platform-logger",e=>new P4(e),"PRIVATE")),Mo(new Li("heartbeat",e=>new _U(e),"PRIVATE")),si(ap,bE,t),si(ap,bE,"esm2020"),si("fire-js","")}AU("");var CU="firebase",RU="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */si(CU,RU,"app");const qC="@firebase/installations",Ym="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC=1e4,FC=`w:${Ym}`,GC="FIS_v2",wU="https://firebaseinstallations.googleapis.com/v1",IU=60*60*1e3,bU="installations",xU="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NU={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},_s=new Sf(bU,xU,NU);function zC(t){return t instanceof Go&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HC({projectId:t}){return`${wU}/projects/${t}/installations`}function YC(t){return{token:t.token,requestStatus:2,expiresIn:DU(t.expiresIn),creationTime:Date.now()}}async function JC(t,e){const i=(await e.json()).error;return _s.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function KC({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function MU(t,{refreshToken:e}){const n=KC(t);return n.append("Authorization",PU(e)),n}async function $C(t){const e=await t();return e.status>=500&&e.status<600?t():e}function DU(t){return Number(t.replace("s","000"))}function PU(t){return`${GC} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VU({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=HC(t),o=KC(t),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&o.append("x-firebase-client",c)}const r={fid:n,authVersion:GC,appId:t.appId,sdkVersion:FC},a={method:"POST",headers:o,body:JSON.stringify(r)},l=await $C(()=>fetch(i,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:YC(c.authToken)}}else throw await JC("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QC(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UU(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LU=/^[cdef][\w-]{21}$/,cp="";function kU(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=OU(t);return LU.test(n)?n:cp}catch{return cp}}function OU(t){return UU(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Af(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC=new Map;function WC(t,e){const n=Af(t);ZC(n,e),qU(n,e)}function ZC(t,e){const n=XC.get(t);if(n)for(const i of n)i(e)}function qU(t,e){const n=BU();n&&n.postMessage({key:t,fid:e}),FU()}let ss=null;function BU(){return!ss&&"BroadcastChannel"in self&&(ss=new BroadcastChannel("[Firebase] FID Change"),ss.onmessage=t=>{ZC(t.data.key,t.data.fid)}),ss}function FU(){XC.size===0&&ss&&(ss.close(),ss=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GU="firebase-installations-database",zU=1,Es="firebase-installations-store";let Gd=null;function Jm(){return Gd||(Gd=VC(GU,zU,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Es)}}})),Gd}async function Dc(t,e){const n=Af(t),o=(await Jm()).transaction(Es,"readwrite"),s=o.objectStore(Es),r=await s.get(n);return await s.put(e,n),await o.done,(!r||r.fid!==e.fid)&&WC(t,e.fid),e}async function jC(t){const e=Af(t),i=(await Jm()).transaction(Es,"readwrite");await i.objectStore(Es).delete(e),await i.done}async function Cf(t,e){const n=Af(t),o=(await Jm()).transaction(Es,"readwrite"),s=o.objectStore(Es),r=await s.get(n),a=e(r);return a===void 0?await s.delete(n):await s.put(a,n),await o.done,a&&(!r||r.fid!==a.fid)&&WC(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Km(t){let e;const n=await Cf(t.appConfig,i=>{const o=HU(i),s=YU(t,o);return e=s.registrationPromise,s.installationEntry});return n.fid===cp?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function HU(t){const e=t||{fid:kU(),registrationStatus:0};return eR(e)}function YU(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(_s.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=JU(t,n);return{installationEntry:n,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:KU(t)}:{installationEntry:e}}async function JU(t,e){try{const n=await VU(t,e);return Dc(t.appConfig,n)}catch(n){throw zC(n)&&n.customData.serverCode===409?await jC(t.appConfig):await Dc(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function KU(t){let e=await PE(t.appConfig);for(;e.registrationStatus===1;)await QC(100),e=await PE(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await Km(t);return i||n}return e}function PE(t){return Cf(t,e=>{if(!e)throw _s.create("installation-not-found");return eR(e)})}function eR(t){return $U(t)?{fid:t.fid,registrationStatus:0}:t}function $U(t){return t.registrationStatus===1&&t.registrationTime+BC<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QU({appConfig:t,heartbeatServiceProvider:e},n){const i=XU(t,n),o=MU(t,n),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&o.append("x-firebase-client",c)}const r={installation:{sdkVersion:FC,appId:t.appId}},a={method:"POST",headers:o,body:JSON.stringify(r)},l=await $C(()=>fetch(i,a));if(l.ok){const c=await l.json();return YC(c)}else throw await JC("Generate Auth Token",l)}function XU(t,{fid:e}){return`${HC(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $m(t,e=!1){let n;const i=await Cf(t.appConfig,s=>{if(!tR(s))throw _s.create("not-registered");const r=s.authToken;if(!e&&jU(r))return s;if(r.requestStatus===1)return n=WU(t,e),s;{if(!navigator.onLine)throw _s.create("app-offline");const a=tL(s);return n=ZU(t,a),a}});return n?await n:i.authToken}async function WU(t,e){let n=await VE(t.appConfig);for(;n.authToken.requestStatus===1;)await QC(100),n=await VE(t.appConfig);const i=n.authToken;return i.requestStatus===0?$m(t,e):i}function VE(t){return Cf(t,e=>{if(!tR(e))throw _s.create("not-registered");const n=e.authToken;return nL(n)?{...e,authToken:{requestStatus:0}}:e})}async function ZU(t,e){try{const n=await QU(t,e),i={...e,authToken:n};return await Dc(t.appConfig,i),n}catch(n){if(zC(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await jC(t.appConfig);else{const i={...e,authToken:{requestStatus:0}};await Dc(t.appConfig,i)}throw n}}function tR(t){return t!==void 0&&t.registrationStatus===2}function jU(t){return t.requestStatus===2&&!eL(t)}function eL(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+IU}function tL(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function nL(t){return t.requestStatus===1&&t.requestTime+BC<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iL(t){const e=t,{installationEntry:n,registrationPromise:i}=await Km(e);return i?i.catch(console.error):$m(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oL(t,e=!1){const n=t;return await sL(n),(await $m(n,e)).token}async function sL(t){const{registrationPromise:e}=await Km(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rL(t){if(!t||!t.options)throw zd("App Configuration");if(!t.name)throw zd("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw zd(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function zd(t){return _s.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR="installations",aL="installations-internal",lL=t=>{const e=t.getProvider("app").getImmediate(),n=rL(e),i=Ul(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},uL=t=>{const e=t.getProvider("app").getImmediate(),n=Ul(e,nR).getImmediate();return{getId:()=>iL(n),getToken:o=>oL(n,o)}};function cL(){Mo(new Li(nR,lL,"PUBLIC")),Mo(new Li(aL,uL,"PRIVATE"))}cL();si(qC,Ym);si(qC,Ym,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pc="analytics",fL="firebase_id",dL="origin",hL=60*1e3,pL="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Qm="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gt=new zm("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mL={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},gn=new Sf("analytics","Analytics",mL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gL(t){if(!t.startsWith(Qm)){const e=gn.create("invalid-gtag-resource",{gtagURL:t});return Gt.warn(e.message),""}return t}function iR(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function yL(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function vL(t,e){const n=yL("firebase-js-sdk-policy",{createScriptURL:gL}),i=document.createElement("script"),o=`${Qm}?l=${t}&id=${e}`;i.src=n?n==null?void 0:n.createScriptURL(o):o,i.async=!0,document.head.appendChild(i)}function _L(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function EL(t,e,n,i,o,s){const r=i[o];try{if(r)await e[r];else{const l=(await iR(n)).find(c=>c.measurementId===o);l&&await e[l.appId]}}catch(a){Gt.error(a)}t("config",o,s)}async function TL(t,e,n,i,o){try{let s=[];if(o&&o.send_to){let r=o.send_to;Array.isArray(r)||(r=[r]);const a=await iR(n);for(const l of r){const c=a.find(p=>p.measurementId===l),h=c&&e[c.appId];if(h)s.push(h);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",i,o||{})}catch(s){Gt.error(s)}}function SL(t,e,n,i){async function o(s,...r){try{if(s==="event"){const[a,l]=r;await TL(t,e,n,a,l)}else if(s==="config"){const[a,l]=r;await EL(t,e,n,i,a,l)}else if(s==="consent"){const[a,l]=r;t("consent",a,l)}else if(s==="get"){const[a,l,c]=r;t("get",a,l,c)}else if(s==="set"){const[a]=r;t("set",a)}else t(s,...r)}catch(a){Gt.error(a)}}return o}function AL(t,e,n,i,o){let s=function(...r){window[i].push(arguments)};return window[o]&&typeof window[o]=="function"&&(s=window[o]),window[o]=SL(s,t,e,n),{gtagCore:s,wrappedGtag:window[o]}}function CL(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Qm)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RL=30,wL=1e3;class IL{constructor(e={},n=wL){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const oR=new IL;function bL(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function xL(t){var r;const{appId:e,apiKey:n}=t,i={method:"GET",headers:bL(n)},o=pL.replace("{app-id}",e),s=await fetch(o,i);if(s.status!==200&&s.status!==304){let a="";try{const l=await s.json();(r=l.error)!=null&&r.message&&(a=l.error.message)}catch{}throw gn.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a})}return s.json()}async function NL(t,e=oR,n){const{appId:i,apiKey:o,measurementId:s}=t.options;if(!i)throw gn.create("no-app-id");if(!o){if(s)return{measurementId:s,appId:i};throw gn.create("no-api-key")}const r=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new PL;return setTimeout(async()=>{a.abort()},hL),sR({appId:i,apiKey:o,measurementId:s},r,a,e)}async function sR(t,{throttleEndTimeMillis:e,backoffCount:n},i,o=oR){var a;const{appId:s,measurementId:r}=t;try{await ML(i,e)}catch(l){if(r)return Gt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${r} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:s,measurementId:r};throw l}try{const l=await xL(t);return o.deleteThrottleMetadata(s),l}catch(l){const c=l;if(!DL(c)){if(o.deleteThrottleMetadata(s),r)return Gt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${r} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:s,measurementId:r};throw l}const h=Number((a=c==null?void 0:c.customData)==null?void 0:a.httpStatus)===503?CE(n,o.intervalMillis,RL):CE(n,o.intervalMillis),p={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return o.setThrottleMetadata(s,p),Gt.debug(`Calling attemptFetch again in ${h} millis`),sR(t,p,i,o)}}function ML(t,e){return new Promise((n,i)=>{const o=Math.max(e-Date.now(),0),s=setTimeout(n,o);t.addEventListener(()=>{clearTimeout(s),i(gn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function DL(t){if(!(t instanceof Go)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class PL{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function VL(t,e,n,i,o){if(o&&o.global){t("event",n,i);return}else{const s=await e,r={...i,send_to:s};t("event",n,r)}}async function UL(t,e,n,i){if(i&&i.global){const o={};for(const s of Object.keys(n))o[`user_properties.${s}`]=n[s];return t("set",o),Promise.resolve()}else{const o=await e;t("config",o,{update:!0,user_properties:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LL(){if(NC())try{await MC()}catch(t){return Gt.warn(gn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Gt.warn(gn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function kL(t,e,n,i,o,s,r){const a=NL(t);a.then(m=>{n[m.measurementId]=m.appId,t.options.measurementId&&m.measurementId!==t.options.measurementId&&Gt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>Gt.error(m)),e.push(a);const l=LL().then(m=>{if(m)return i.getId()}),[c,h]=await Promise.all([a,l]);CL(s)||vL(s,c.measurementId),o("js",new Date);const p=(r==null?void 0:r.config)??{};return p[dL]="firebase",p.update=!0,h!=null&&(p[fL]=h),o("config",c.measurementId,p),c.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OL{constructor(e){this.app=e}_delete(){return delete mr[this.app.options.appId],Promise.resolve()}}let mr={},UE=[];const LE={};let Hd="dataLayer",qL="gtag",kE,Xm,OE=!1;function BL(){const t=[];if(s4()&&t.push("This is a browser extension environment."),a4()||t.push("Cookies are not available."),t.length>0){const e=t.map((i,o)=>`(${o+1}) ${i}`).join(" "),n=gn.create("invalid-analytics-context",{errorInfo:e});Gt.warn(n.message)}}function FL(t,e,n){BL();const i=t.options.appId;if(!i)throw gn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Gt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw gn.create("no-api-key");if(mr[i]!=null)throw gn.create("already-exists",{id:i});if(!OE){_L(Hd);const{wrappedGtag:s,gtagCore:r}=AL(mr,UE,LE,Hd,qL);Xm=s,kE=r,OE=!0}return mr[i]=kL(t,UE,LE,e,kE,Hd,n),new OL(t)}function GL(t=LC()){t=vs(t);const e=Ul(t,Pc);return e.isInitialized()?e.getImmediate():zL(t)}function zL(t,e={}){const n=Ul(t,Pc);if(n.isInitialized()){const o=n.getImmediate();if(fl(e,n.getOptions()))return o;throw gn.create("already-initialized")}return n.initialize({options:e})}function HL(t,e,n){t=vs(t),UL(Xm,mr[t.app.options.appId],e,n).catch(i=>Gt.error(i))}function YL(t,e,n,i){t=vs(t),VL(Xm,mr[t.app.options.appId],e,n,i).catch(o=>Gt.error(o))}const qE="@firebase/analytics",BE="0.10.19";function JL(){Mo(new Li(Pc,(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return FL(i,o,n)},"PUBLIC")),Mo(new Li("analytics-internal",t,"PRIVATE")),si(qE,BE),si(qE,BE,"esm2020");function t(e){try{const n=e.getProvider(Pc).getImmediate();return{logEvent:(i,o,s)=>YL(n,i,o,s),setUserProperties:(i,o)=>HL(n,i,o)}}catch(n){throw gn.create("interop-component-reg-failed",{reason:n})}}}JL();var FE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ro,rR;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,_){function A(){}A.prototype=_.prototype,T.F=_.prototype,T.prototype=new A,T.prototype.constructor=T,T.D=function(I,M,V){for(var N=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)N[ye-2]=arguments[ye];return _.prototype[M].apply(I,N)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(T,_,A){A||(A=0);const I=Array(16);if(typeof _=="string")for(var M=0;M<16;++M)I[M]=_.charCodeAt(A++)|_.charCodeAt(A++)<<8|_.charCodeAt(A++)<<16|_.charCodeAt(A++)<<24;else for(M=0;M<16;++M)I[M]=_[A++]|_[A++]<<8|_[A++]<<16|_[A++]<<24;_=T.g[0],A=T.g[1],M=T.g[2];let V=T.g[3],N;N=_+(V^A&(M^V))+I[0]+3614090360&4294967295,_=A+(N<<7&4294967295|N>>>25),N=V+(M^_&(A^M))+I[1]+3905402710&4294967295,V=_+(N<<12&4294967295|N>>>20),N=M+(A^V&(_^A))+I[2]+606105819&4294967295,M=V+(N<<17&4294967295|N>>>15),N=A+(_^M&(V^_))+I[3]+3250441966&4294967295,A=M+(N<<22&4294967295|N>>>10),N=_+(V^A&(M^V))+I[4]+4118548399&4294967295,_=A+(N<<7&4294967295|N>>>25),N=V+(M^_&(A^M))+I[5]+1200080426&4294967295,V=_+(N<<12&4294967295|N>>>20),N=M+(A^V&(_^A))+I[6]+2821735955&4294967295,M=V+(N<<17&4294967295|N>>>15),N=A+(_^M&(V^_))+I[7]+4249261313&4294967295,A=M+(N<<22&4294967295|N>>>10),N=_+(V^A&(M^V))+I[8]+1770035416&4294967295,_=A+(N<<7&4294967295|N>>>25),N=V+(M^_&(A^M))+I[9]+2336552879&4294967295,V=_+(N<<12&4294967295|N>>>20),N=M+(A^V&(_^A))+I[10]+4294925233&4294967295,M=V+(N<<17&4294967295|N>>>15),N=A+(_^M&(V^_))+I[11]+2304563134&4294967295,A=M+(N<<22&4294967295|N>>>10),N=_+(V^A&(M^V))+I[12]+1804603682&4294967295,_=A+(N<<7&4294967295|N>>>25),N=V+(M^_&(A^M))+I[13]+4254626195&4294967295,V=_+(N<<12&4294967295|N>>>20),N=M+(A^V&(_^A))+I[14]+2792965006&4294967295,M=V+(N<<17&4294967295|N>>>15),N=A+(_^M&(V^_))+I[15]+1236535329&4294967295,A=M+(N<<22&4294967295|N>>>10),N=_+(M^V&(A^M))+I[1]+4129170786&4294967295,_=A+(N<<5&4294967295|N>>>27),N=V+(A^M&(_^A))+I[6]+3225465664&4294967295,V=_+(N<<9&4294967295|N>>>23),N=M+(_^A&(V^_))+I[11]+643717713&4294967295,M=V+(N<<14&4294967295|N>>>18),N=A+(V^_&(M^V))+I[0]+3921069994&4294967295,A=M+(N<<20&4294967295|N>>>12),N=_+(M^V&(A^M))+I[5]+3593408605&4294967295,_=A+(N<<5&4294967295|N>>>27),N=V+(A^M&(_^A))+I[10]+38016083&4294967295,V=_+(N<<9&4294967295|N>>>23),N=M+(_^A&(V^_))+I[15]+3634488961&4294967295,M=V+(N<<14&4294967295|N>>>18),N=A+(V^_&(M^V))+I[4]+3889429448&4294967295,A=M+(N<<20&4294967295|N>>>12),N=_+(M^V&(A^M))+I[9]+568446438&4294967295,_=A+(N<<5&4294967295|N>>>27),N=V+(A^M&(_^A))+I[14]+3275163606&4294967295,V=_+(N<<9&4294967295|N>>>23),N=M+(_^A&(V^_))+I[3]+4107603335&4294967295,M=V+(N<<14&4294967295|N>>>18),N=A+(V^_&(M^V))+I[8]+1163531501&4294967295,A=M+(N<<20&4294967295|N>>>12),N=_+(M^V&(A^M))+I[13]+2850285829&4294967295,_=A+(N<<5&4294967295|N>>>27),N=V+(A^M&(_^A))+I[2]+4243563512&4294967295,V=_+(N<<9&4294967295|N>>>23),N=M+(_^A&(V^_))+I[7]+1735328473&4294967295,M=V+(N<<14&4294967295|N>>>18),N=A+(V^_&(M^V))+I[12]+2368359562&4294967295,A=M+(N<<20&4294967295|N>>>12),N=_+(A^M^V)+I[5]+4294588738&4294967295,_=A+(N<<4&4294967295|N>>>28),N=V+(_^A^M)+I[8]+2272392833&4294967295,V=_+(N<<11&4294967295|N>>>21),N=M+(V^_^A)+I[11]+1839030562&4294967295,M=V+(N<<16&4294967295|N>>>16),N=A+(M^V^_)+I[14]+4259657740&4294967295,A=M+(N<<23&4294967295|N>>>9),N=_+(A^M^V)+I[1]+2763975236&4294967295,_=A+(N<<4&4294967295|N>>>28),N=V+(_^A^M)+I[4]+1272893353&4294967295,V=_+(N<<11&4294967295|N>>>21),N=M+(V^_^A)+I[7]+4139469664&4294967295,M=V+(N<<16&4294967295|N>>>16),N=A+(M^V^_)+I[10]+3200236656&4294967295,A=M+(N<<23&4294967295|N>>>9),N=_+(A^M^V)+I[13]+681279174&4294967295,_=A+(N<<4&4294967295|N>>>28),N=V+(_^A^M)+I[0]+3936430074&4294967295,V=_+(N<<11&4294967295|N>>>21),N=M+(V^_^A)+I[3]+3572445317&4294967295,M=V+(N<<16&4294967295|N>>>16),N=A+(M^V^_)+I[6]+76029189&4294967295,A=M+(N<<23&4294967295|N>>>9),N=_+(A^M^V)+I[9]+3654602809&4294967295,_=A+(N<<4&4294967295|N>>>28),N=V+(_^A^M)+I[12]+3873151461&4294967295,V=_+(N<<11&4294967295|N>>>21),N=M+(V^_^A)+I[15]+530742520&4294967295,M=V+(N<<16&4294967295|N>>>16),N=A+(M^V^_)+I[2]+3299628645&4294967295,A=M+(N<<23&4294967295|N>>>9),N=_+(M^(A|~V))+I[0]+4096336452&4294967295,_=A+(N<<6&4294967295|N>>>26),N=V+(A^(_|~M))+I[7]+1126891415&4294967295,V=_+(N<<10&4294967295|N>>>22),N=M+(_^(V|~A))+I[14]+2878612391&4294967295,M=V+(N<<15&4294967295|N>>>17),N=A+(V^(M|~_))+I[5]+4237533241&4294967295,A=M+(N<<21&4294967295|N>>>11),N=_+(M^(A|~V))+I[12]+1700485571&4294967295,_=A+(N<<6&4294967295|N>>>26),N=V+(A^(_|~M))+I[3]+2399980690&4294967295,V=_+(N<<10&4294967295|N>>>22),N=M+(_^(V|~A))+I[10]+4293915773&4294967295,M=V+(N<<15&4294967295|N>>>17),N=A+(V^(M|~_))+I[1]+2240044497&4294967295,A=M+(N<<21&4294967295|N>>>11),N=_+(M^(A|~V))+I[8]+1873313359&4294967295,_=A+(N<<6&4294967295|N>>>26),N=V+(A^(_|~M))+I[15]+4264355552&4294967295,V=_+(N<<10&4294967295|N>>>22),N=M+(_^(V|~A))+I[6]+2734768916&4294967295,M=V+(N<<15&4294967295|N>>>17),N=A+(V^(M|~_))+I[13]+1309151649&4294967295,A=M+(N<<21&4294967295|N>>>11),N=_+(M^(A|~V))+I[4]+4149444226&4294967295,_=A+(N<<6&4294967295|N>>>26),N=V+(A^(_|~M))+I[11]+3174756917&4294967295,V=_+(N<<10&4294967295|N>>>22),N=M+(_^(V|~A))+I[2]+718787259&4294967295,M=V+(N<<15&4294967295|N>>>17),N=A+(V^(M|~_))+I[9]+3951481745&4294967295,T.g[0]=T.g[0]+_&4294967295,T.g[1]=T.g[1]+(M+(N<<21&4294967295|N>>>11))&4294967295,T.g[2]=T.g[2]+M&4294967295,T.g[3]=T.g[3]+V&4294967295}i.prototype.v=function(T,_){_===void 0&&(_=T.length);const A=_-this.blockSize,I=this.C;let M=this.h,V=0;for(;V<_;){if(M==0)for(;V<=A;)o(this,T,V),V+=this.blockSize;if(typeof T=="string"){for(;V<_;)if(I[M++]=T.charCodeAt(V++),M==this.blockSize){o(this,I),M=0;break}}else for(;V<_;)if(I[M++]=T[V++],M==this.blockSize){o(this,I),M=0;break}}this.h=M,this.o+=_},i.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var _=1;_<T.length-8;++_)T[_]=0;_=this.o*8;for(var A=T.length-8;A<T.length;++A)T[A]=_&255,_/=256;for(this.v(T),T=Array(16),_=0,A=0;A<4;++A)for(let I=0;I<32;I+=8)T[_++]=this.g[A]>>>I&255;return T};function s(T,_){var A=a;return Object.prototype.hasOwnProperty.call(A,T)?A[T]:A[T]=_(T)}function r(T,_){this.h=_;const A=[];let I=!0;for(let M=T.length-1;M>=0;M--){const V=T[M]|0;I&&V==_||(A[M]=V,I=!1)}this.g=A}var a={};function l(T){return-128<=T&&T<128?s(T,function(_){return new r([_|0],_<0?-1:0)}):new r([T|0],T<0?-1:0)}function c(T){if(isNaN(T)||!isFinite(T))return p;if(T<0)return P(c(-T));const _=[];let A=1;for(let I=0;T>=A;I++)_[I]=T/A|0,A*=4294967296;return new r(_,0)}function h(T,_){if(T.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(T.charAt(0)=="-")return P(h(T.substring(1),_));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=c(Math.pow(_,8));let I=p;for(let V=0;V<T.length;V+=8){var M=Math.min(8,T.length-V);const N=parseInt(T.substring(V,V+M),_);M<8?(M=c(Math.pow(_,M)),I=I.j(M).add(c(N))):(I=I.j(A),I=I.add(c(N)))}return I}var p=l(0),m=l(1),y=l(16777216);t=r.prototype,t.m=function(){if(x(this))return-P(this).m();let T=0,_=1;for(let A=0;A<this.g.length;A++){const I=this.i(A);T+=(I>=0?I:4294967296+I)*_,_*=4294967296}return T},t.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(b(this))return"0";if(x(this))return"-"+P(this).toString(T);const _=c(Math.pow(T,6));var A=this;let I="";for(;;){const M=D(A,_).g;A=R(A,M.j(_));let V=((A.g.length>0?A.g[0]:A.h)>>>0).toString(T);if(A=M,b(A))return V+I;for(;V.length<6;)V="0"+V;I=V+I}},t.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function b(T){if(T.h!=0)return!1;for(let _=0;_<T.g.length;_++)if(T.g[_]!=0)return!1;return!0}function x(T){return T.h==-1}t.l=function(T){return T=R(this,T),x(T)?-1:b(T)?0:1};function P(T){const _=T.g.length,A=[];for(let I=0;I<_;I++)A[I]=~T.g[I];return new r(A,~T.h).add(m)}t.abs=function(){return x(this)?P(this):this},t.add=function(T){const _=Math.max(this.g.length,T.g.length),A=[];let I=0;for(let M=0;M<=_;M++){let V=I+(this.i(M)&65535)+(T.i(M)&65535),N=(V>>>16)+(this.i(M)>>>16)+(T.i(M)>>>16);I=N>>>16,V&=65535,N&=65535,A[M]=N<<16|V}return new r(A,A[A.length-1]&-2147483648?-1:0)};function R(T,_){return T.add(P(_))}t.j=function(T){if(b(this)||b(T))return p;if(x(this))return x(T)?P(this).j(P(T)):P(P(this).j(T));if(x(T))return P(this.j(P(T)));if(this.l(y)<0&&T.l(y)<0)return c(this.m()*T.m());const _=this.g.length+T.g.length,A=[];for(var I=0;I<2*_;I++)A[I]=0;for(I=0;I<this.g.length;I++)for(let M=0;M<T.g.length;M++){const V=this.i(I)>>>16,N=this.i(I)&65535,ye=T.i(M)>>>16,Qe=T.i(M)&65535;A[2*I+2*M]+=N*Qe,E(A,2*I+2*M),A[2*I+2*M+1]+=V*Qe,E(A,2*I+2*M+1),A[2*I+2*M+1]+=N*ye,E(A,2*I+2*M+1),A[2*I+2*M+2]+=V*ye,E(A,2*I+2*M+2)}for(T=0;T<_;T++)A[T]=A[2*T+1]<<16|A[2*T];for(T=_;T<2*_;T++)A[T]=0;return new r(A,0)};function E(T,_){for(;(T[_]&65535)!=T[_];)T[_+1]+=T[_]>>>16,T[_]&=65535,_++}function w(T,_){this.g=T,this.h=_}function D(T,_){if(b(_))throw Error("division by zero");if(b(T))return new w(p,p);if(x(T))return _=D(P(T),_),new w(P(_.g),P(_.h));if(x(_))return _=D(T,P(_)),new w(P(_.g),_.h);if(T.g.length>30){if(x(T)||x(_))throw Error("slowDivide_ only works with positive integers.");for(var A=m,I=_;I.l(T)<=0;)A=O(A),I=O(I);var M=q(A,1),V=q(I,1);for(I=q(I,2),A=q(A,2);!b(I);){var N=V.add(I);N.l(T)<=0&&(M=M.add(A),V=N),I=q(I,1),A=q(A,1)}return _=R(T,M.j(_)),new w(M,_)}for(M=p;T.l(_)>=0;){for(A=Math.max(1,Math.floor(T.m()/_.m())),I=Math.ceil(Math.log(A)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),V=c(A),N=V.j(_);x(N)||N.l(T)>0;)A-=I,V=c(A),N=V.j(_);b(V)&&(V=m),M=M.add(V),T=R(T,N)}return new w(M,T)}t.B=function(T){return D(this,T).h},t.and=function(T){const _=Math.max(this.g.length,T.g.length),A=[];for(let I=0;I<_;I++)A[I]=this.i(I)&T.i(I);return new r(A,this.h&T.h)},t.or=function(T){const _=Math.max(this.g.length,T.g.length),A=[];for(let I=0;I<_;I++)A[I]=this.i(I)|T.i(I);return new r(A,this.h|T.h)},t.xor=function(T){const _=Math.max(this.g.length,T.g.length),A=[];for(let I=0;I<_;I++)A[I]=this.i(I)^T.i(I);return new r(A,this.h^T.h)};function O(T){const _=T.g.length+1,A=[];for(let I=0;I<_;I++)A[I]=T.i(I)<<1|T.i(I-1)>>>31;return new r(A,T.h)}function q(T,_){const A=_>>5;_%=32;const I=T.g.length-A,M=[];for(let V=0;V<I;V++)M[V]=_>0?T.i(V+A)>>>_|T.i(V+A+1)<<32-_:T.i(V+A);return new r(M,T.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,rR=i,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.B,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=c,r.fromString=h,Ro=r}).apply(typeof FE<"u"?FE:typeof self<"u"?self:typeof window<"u"?window:{});var Eu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var aR,Aa,lR,zu,fp,uR,cR,fR;(function(){var t,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Eu=="object"&&Eu];for(var g=0;g<d.length;++g){var v=d[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=n(this);function o(d,g){if(g)e:{var v=i;d=d.split(".");for(var C=0;C<d.length-1;C++){var U=d[C];if(!(U in v))break e;v=v[U]}d=d[d.length-1],C=v[d],g=g(C),g!=C&&g!=null&&e(v,d,{configurable:!0,writable:!0,value:g})}}o("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(d){return d||function(g){var v=[],C;for(C in g)Object.prototype.hasOwnProperty.call(g,C)&&v.push([C,g[C]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},r=this||self;function a(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function l(d,g,v){return d.call.apply(d.bind,arguments)}function c(d,g,v){return c=l,c.apply(null,arguments)}function h(d,g){var v=Array.prototype.slice.call(arguments,1);return function(){var C=v.slice();return C.push.apply(C,arguments),d.apply(this,C)}}function p(d,g){function v(){}v.prototype=g.prototype,d.Z=g.prototype,d.prototype=new v,d.prototype.constructor=d,d.Ob=function(C,U,k){for(var H=Array(arguments.length-2),oe=2;oe<arguments.length;oe++)H[oe-2]=arguments[oe];return g.prototype[U].apply(C,H)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function y(d){const g=d.length;if(g>0){const v=Array(g);for(let C=0;C<g;C++)v[C]=d[C];return v}return[]}function b(d,g){for(let C=1;C<arguments.length;C++){const U=arguments[C];var v=typeof U;if(v=v!="object"?v:U?Array.isArray(U)?"array":v:"null",v=="array"||v=="object"&&typeof U.length=="number"){v=d.length||0;const k=U.length||0;d.length=v+k;for(let H=0;H<k;H++)d[v+H]=U[H]}else d.push(U)}}class x{constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function P(d){r.setTimeout(()=>{throw d},0)}function R(){var d=T;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class E{constructor(){this.h=this.g=null}add(g,v){const C=w.get();C.set(g,v),this.h?this.h.next=C:this.g=C,this.h=C}}var w=new x(()=>new D,d=>d.reset());class D{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let O,q=!1,T=new E,_=()=>{const d=Promise.resolve(void 0);O=()=>{d.then(A)}};function A(){for(var d;d=R();){try{d.h.call(d.g)}catch(v){P(v)}var g=w;g.j(d),g.h<100&&(g.h++,d.next=g.g,g.g=d)}q=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var V=function(){if(!r.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const v=()=>{};r.addEventListener("test",v,g),r.removeEventListener("test",v,g)}catch{}return d}();function N(d){return/^[\s\xa0]*$/.test(d)}function ye(d,g){M.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,g)}p(ye,M),ye.prototype.init=function(d,g){const v=this.type=d.type,C=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget,g||(v=="mouseover"?g=d.fromElement:v=="mouseout"&&(g=d.toElement)),this.relatedTarget=g,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&ye.Z.h.call(this)},ye.prototype.h=function(){ye.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Qe="closure_listenable_"+(Math.random()*1e6|0),z=0;function Q(d,g,v,C,U){this.listener=d,this.proxy=null,this.src=g,this.type=v,this.capture=!!C,this.ha=U,this.key=++z,this.da=this.fa=!1}function Z(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function re(d,g,v){for(const C in d)g.call(v,d[C],C,d)}function be(d,g){for(const v in d)g.call(void 0,d[v],v,d)}function nn(d){const g={};for(const v in d)g[v]=d[v];return g}const Et="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Mt(d,g){let v,C;for(let U=1;U<arguments.length;U++){C=arguments[U];for(v in C)d[v]=C[v];for(let k=0;k<Et.length;k++)v=Et[k],Object.prototype.hasOwnProperty.call(C,v)&&(d[v]=C[v])}}function it(d){this.src=d,this.g={},this.h=0}it.prototype.add=function(d,g,v,C,U){const k=d.toString();d=this.g[k],d||(d=this.g[k]=[],this.h++);const H=Tt(d,g,C,U);return H>-1?(g=d[H],v||(g.fa=!1)):(g=new Q(g,this.src,k,!!C,U),g.fa=v,d.push(g)),g};function Ot(d,g){const v=g.type;if(v in d.g){var C=d.g[v],U=Array.prototype.indexOf.call(C,g,void 0),k;(k=U>=0)&&Array.prototype.splice.call(C,U,1),k&&(Z(g),d.g[v].length==0&&(delete d.g[v],d.h--))}}function Tt(d,g,v,C){for(let U=0;U<d.length;++U){const k=d[U];if(!k.da&&k.listener==g&&k.capture==!!v&&k.ha==C)return U}return-1}var Yn="closure_lm_"+(Math.random()*1e6|0),zi={};function Jn(d,g,v,C,U){if(Array.isArray(g)){for(let k=0;k<g.length;k++)Jn(d,g[k],v,C,U);return null}return v=Kn(v),d&&d[Qe]?d.J(g,v,a(C)?!!C.capture:!1,U):Dt(d,g,v,!1,C,U)}function Dt(d,g,v,C,U,k){if(!g)throw Error("Invalid event type");const H=a(U)?!!U.capture:!!U;let oe=Tn(d);if(oe||(d[Yn]=oe=new it(d)),v=oe.add(g,v,C,H,k),v.proxy)return v;if(C=zo(),v.proxy=C,C.src=d,C.listener=v,d.addEventListener)V||(U=H),U===void 0&&(U=!1),d.addEventListener(g.toString(),C,U);else if(d.attachEvent)d.attachEvent(En(g.toString()),C);else if(d.addListener&&d.removeListener)d.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return v}function zo(){function d(v){return g.call(d.src,d.listener,v)}const g=Yi;return d}function _n(d,g,v,C,U){if(Array.isArray(g))for(var k=0;k<g.length;k++)_n(d,g[k],v,C,U);else C=a(C)?!!C.capture:!!C,v=Kn(v),d&&d[Qe]?(d=d.i,k=String(g).toString(),k in d.g&&(g=d.g[k],v=Tt(g,v,C,U),v>-1&&(Z(g[v]),Array.prototype.splice.call(g,v,1),g.length==0&&(delete d.g[k],d.h--)))):d&&(d=Tn(d))&&(g=d.g[g.toString()],d=-1,g&&(d=Tt(g,v,C,U)),(v=d>-1?g[d]:null)&&Hi(v))}function Hi(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[Qe])Ot(g.i,d);else{var v=d.type,C=d.proxy;g.removeEventListener?g.removeEventListener(v,C,d.capture):g.detachEvent?g.detachEvent(En(v),C):g.addListener&&g.removeListener&&g.removeListener(C),(v=Tn(g))?(Ot(v,d),v.h==0&&(v.src=null,g[Yn]=null)):Z(d)}}}function En(d){return d in zi?zi[d]:zi[d]="on"+d}function Yi(d,g){if(d.da)d=!0;else{g=new ye(g,this);const v=d.listener,C=d.ha||d.src;d.fa&&Hi(d),d=v.call(C,g)}return d}function Tn(d){return d=d[Yn],d instanceof it?d:null}var Ji="__closure_events_fn_"+(Math.random()*1e9>>>0);function Kn(d){return typeof d=="function"?d:(d[Ji]||(d[Ji]=function(g){return d.handleEvent(g)}),d[Ji])}function Ge(){I.call(this),this.i=new it(this),this.M=this,this.G=null}p(Ge,I),Ge.prototype[Qe]=!0,Ge.prototype.removeEventListener=function(d,g,v,C){_n(this,d,g,v,C)};function xe(d,g){var v,C=d.G;if(C)for(v=[];C;C=C.G)v.push(C);if(d=d.M,C=g.type||g,typeof g=="string")g=new M(g,d);else if(g instanceof M)g.target=g.target||d;else{var U=g;g=new M(C,d),Mt(g,U)}U=!0;let k,H;if(v)for(H=v.length-1;H>=0;H--)k=g.g=v[H],U=K(k,C,!0,g)&&U;if(k=g.g=d,U=K(k,C,!0,g)&&U,U=K(k,C,!1,g)&&U,v)for(H=0;H<v.length;H++)k=g.g=v[H],U=K(k,C,!1,g)&&U}Ge.prototype.N=function(){if(Ge.Z.N.call(this),this.i){var d=this.i;for(const g in d.g){const v=d.g[g];for(let C=0;C<v.length;C++)Z(v[C]);delete d.g[g],d.h--}}this.G=null},Ge.prototype.J=function(d,g,v,C){return this.i.add(String(d),g,!1,v,C)},Ge.prototype.K=function(d,g,v,C){return this.i.add(String(d),g,!0,v,C)};function K(d,g,v,C){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();let U=!0;for(let k=0;k<g.length;++k){const H=g[k];if(H&&!H.da&&H.capture==v){const oe=H.listener,at=H.ha||H.src;H.fa&&Ot(d.i,H),U=oe.call(at,C)!==!1&&U}}return U&&!C.defaultPrevented}function Oe(d,g){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=c(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:r.setTimeout(d,g||0)}function ot(d){d.g=Oe(()=>{d.g=null,d.i&&(d.i=!1,ot(d))},d.l);const g=d.h;d.h=null,d.m.apply(null,g)}class Xe extends I{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:ot(this)}N(){super.N(),this.g&&(r.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $n(d){I.call(this),this.h=d,this.g={}}p($n,I);var Hl=[];function pi(d){re(d.g,function(g,v){this.g.hasOwnProperty(v)&&Hi(g)},d),d.g={}}$n.prototype.N=function(){$n.Z.N.call(this),pi(this)},$n.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qn=r.JSON.stringify,Ho=r.JSON.parse,Yl=class{stringify(d){return r.JSON.stringify(d,void 0)}parse(d){return r.JSON.parse(d,void 0)}};function kn(){}function Zr(){}var Yo={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function jr(){M.call(this,"d")}p(jr,M);function Jo(){M.call(this,"c")}p(Jo,M);var Xn={},Jl=null;function Ko(){return Jl=Jl||new Ge}Xn.Ia="serverreachability";function Kl(d){M.call(this,Xn.Ia,d)}p(Kl,M);function $o(d){const g=Ko();xe(g,new Kl(g))}Xn.STAT_EVENT="statevent";function $l(d,g){M.call(this,Xn.STAT_EVENT,d),this.stat=g}p($l,M);function me(d){const g=Ko();xe(g,new $l(g,d))}Xn.Ja="timingevent";function Pt(d,g){M.call(this,Xn.Ja,d),this.size=g}p(Pt,M);function st(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return r.setTimeout(function(){d()},g)}function Ht(){this.g=!0}Ht.prototype.ua=function(){this.g=!1};function Yt(d,g,v,C,U,k){d.info(function(){if(d.g)if(k){var H="",oe=k.split("&");for(let Re=0;Re<oe.length;Re++){var at=oe[Re].split("=");if(at.length>1){const ht=at[0];at=at[1];const jn=ht.split("_");H=jn.length>=2&&jn[1]=="type"?H+(ht+"="+at+"&"):H+(ht+"=redacted&")}}}else H=null;else H=k;return"XMLHTTP REQ ("+C+") [attempt "+U+"]: "+g+`
`+v+`
`+H})}function qt(d,g,v,C,U,k,H){d.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+U+"]: "+g+`
`+v+`
`+k+" "+H})}function St(d,g,v,C){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+rt(d,v)+(C?" "+C:"")})}function Ki(d,g){d.info(function(){return"TIMEOUT: "+g})}Ht.prototype.info=function(){};function rt(d,g){if(!d.g)return g;if(!g)return null;try{const k=JSON.parse(g);if(k){for(d=0;d<k.length;d++)if(Array.isArray(k[d])){var v=k[d];if(!(v.length<2)){var C=v[1];if(Array.isArray(C)&&!(C.length<1)){var U=C[0];if(U!="noop"&&U!="stop"&&U!="close")for(let H=1;H<C.length;H++)C[H]=""}}}}return Qn(k)}catch{return g}}var on={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},sn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Sn;function mi(){}p(mi,kn),mi.prototype.g=function(){return new XMLHttpRequest},Sn=new mi;function On(d){return encodeURIComponent(String(d))}function Wn(d){var g=1;d=d.split(":");const v=[];for(;g>0&&d.length;)v.push(d.shift()),g--;return d.length&&v.push(d.join(":")),v}function Jt(d,g,v,C){this.j=d,this.i=g,this.l=v,this.S=C||1,this.V=new $n(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ps}function Ps(){this.i=null,this.g="",this.h=!1}var Bg={},Gf={};function zf(d,g,v){d.M=1,d.A=Xl(Zn(g)),d.u=v,d.R=!0,Fg(d,null)}function Fg(d,g){d.F=Date.now(),Ql(d),d.B=Zn(d.A);var v=d.B,C=d.S;Array.isArray(C)||(C=[String(C)]),ey(v.i,"t",C),d.C=0,v=d.j.L,d.h=new Ps,d.g=vy(d.j,v?g:null,!d.u),d.P>0&&(d.O=new Xe(c(d.Y,d,d.g),d.P)),g=d.V,v=d.g,C=d.ba;var U="readystatechange";Array.isArray(U)||(U&&(Hl[0]=U.toString()),U=Hl);for(let k=0;k<U.length;k++){const H=Jn(v,U[k],C||g.handleEvent,!1,g.h||g);if(!H)break;g.g[H.key]=H}g=d.J?nn(d.J):{},d.u?(d.v||(d.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,g)):(d.v="GET",d.g.ea(d.B,d.v,null,g)),$o(),Yt(d.i,d.v,d.B,d.l,d.S,d.u)}Jt.prototype.ba=function(d){d=d.target;const g=this.O;g&&Xi(d)==3?g.j():this.Y(d)},Jt.prototype.Y=function(d){try{if(d==this.g)e:{const oe=Xi(this.g),at=this.g.ya(),Re=this.g.ca();if(!(oe<3)&&(oe!=3||this.g&&(this.h.h||this.g.la()||ay(this.g)))){this.K||oe!=4||at==7||(at==8||Re<=0?$o(3):$o(2)),Hf(this);var g=this.g.ca();this.X=g;var v=jw(this);if(this.o=g==200,qt(this.i,this.v,this.B,this.l,this.S,oe,g),this.o){if(this.U&&!this.L){t:{if(this.g){var C,U=this.g;if((C=U.g?U.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(C)){var k=C;break t}}k=null}if(d=k)St(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Yf(this,d);else{this.o=!1,this.m=3,me(12),Qo(this),ea(this);break e}}if(this.R){d=!0;let ht;for(;!this.K&&this.C<v.length;)if(ht=eI(this,v),ht==Gf){oe==4&&(this.m=4,me(14),d=!1),St(this.i,this.l,null,"[Incomplete Response]");break}else if(ht==Bg){this.m=4,me(15),St(this.i,this.l,v,"[Invalid Chunk]"),d=!1;break}else St(this.i,this.l,ht,null),Yf(this,ht);if(Gg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),oe!=4||v.length!=0||this.h.h||(this.m=1,me(16),d=!1),this.o=this.o&&d,!d)St(this.i,this.l,v,"[Invalid Chunked Response]"),Qo(this),ea(this);else if(v.length>0&&!this.W){this.W=!0;var H=this.j;H.g==this&&H.aa&&!H.P&&(H.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),jf(H),H.P=!0,me(11))}}else St(this.i,this.l,v,null),Yf(this,v);oe==4&&Qo(this),this.o&&!this.K&&(oe==4?py(this.j,this):(this.o=!1,Ql(this)))}else pI(this.g),g==400&&v.indexOf("Unknown SID")>0?(this.m=3,me(12)):(this.m=0,me(13)),Qo(this),ea(this)}}}catch{}finally{}};function jw(d){if(!Gg(d))return d.g.la();const g=ay(d.g);if(g==="")return"";let v="";const C=g.length,U=Xi(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Qo(d),ea(d),"";d.h.i=new r.TextDecoder}for(let k=0;k<C;k++)d.h.h=!0,v+=d.h.i.decode(g[k],{stream:!(U&&k==C-1)});return g.length=0,d.h.g+=v,d.C=0,d.h.g}function Gg(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function eI(d,g){var v=d.C,C=g.indexOf(`
`,v);return C==-1?Gf:(v=Number(g.substring(v,C)),isNaN(v)?Bg:(C+=1,C+v>g.length?Gf:(g=g.slice(C,C+v),d.C=C+v,g)))}Jt.prototype.cancel=function(){this.K=!0,Qo(this)};function Ql(d){d.T=Date.now()+d.H,zg(d,d.H)}function zg(d,g){if(d.D!=null)throw Error("WatchDog timer not null");d.D=st(c(d.aa,d),g)}function Hf(d){d.D&&(r.clearTimeout(d.D),d.D=null)}Jt.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(Ki(this.i,this.B),this.M!=2&&($o(),me(17)),Qo(this),this.m=2,ea(this)):zg(this,this.T-d)};function ea(d){d.j.I==0||d.K||py(d.j,d)}function Qo(d){Hf(d);var g=d.O;g&&typeof g.dispose=="function"&&g.dispose(),d.O=null,pi(d.V),d.g&&(g=d.g,d.g=null,g.abort(),g.dispose())}function Yf(d,g){try{var v=d.j;if(v.I!=0&&(v.g==d||Jf(v.h,d))){if(!d.L&&Jf(v.h,d)&&v.I==3){try{var C=v.Ba.g.parse(g)}catch{C=null}if(Array.isArray(C)&&C.length==3){var U=C;if(U[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<d.F)tu(v),jl(v);else break e;Zf(v),me(18)}}else v.xa=U[1],0<v.xa-v.K&&U[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=st(c(v.Va,v),6e3));Jg(v.h)<=1&&v.ta&&(v.ta=void 0)}else Wo(v,11)}else if((d.L||v.g==d)&&tu(v),!N(g))for(U=v.Ba.g.parse(g),g=0;g<U.length;g++){let Re=U[g];const ht=Re[0];if(!(ht<=v.K))if(v.K=ht,Re=Re[1],v.I==2)if(Re[0]=="c"){v.M=Re[1],v.ba=Re[2];const jn=Re[3];jn!=null&&(v.ka=jn,v.j.info("VER="+v.ka));const Zo=Re[4];Zo!=null&&(v.za=Zo,v.j.info("SVER="+v.za));const Wi=Re[5];Wi!=null&&typeof Wi=="number"&&Wi>0&&(C=1.5*Wi,v.O=C,v.j.info("backChannelRequestTimeoutMs_="+C)),C=v;const Zi=d.g;if(Zi){const iu=Zi.g?Zi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(iu){var k=C.h;k.g||iu.indexOf("spdy")==-1&&iu.indexOf("quic")==-1&&iu.indexOf("h2")==-1||(k.j=k.l,k.g=new Set,k.h&&(Kf(k,k.h),k.h=null))}if(C.G){const ed=Zi.g?Zi.g.getResponseHeader("X-HTTP-Session-Id"):null;ed&&(C.wa=ed,Me(C.J,C.G,ed))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-d.F,v.j.info("Handshake RTT: "+v.T+"ms")),C=v;var H=d;if(C.na=yy(C,C.L?C.ba:null,C.W),H.L){Kg(C.h,H);var oe=H,at=C.O;at&&(oe.H=at),oe.D&&(Hf(oe),Ql(oe)),C.g=H}else dy(C);v.i.length>0&&eu(v)}else Re[0]!="stop"&&Re[0]!="close"||Wo(v,7);else v.I==3&&(Re[0]=="stop"||Re[0]=="close"?Re[0]=="stop"?Wo(v,7):Wf(v):Re[0]!="noop"&&v.l&&v.l.qa(Re),v.A=0)}}$o(4)}catch{}}var tI=class{constructor(d,g){this.g=d,this.map=g}};function Hg(d){this.l=d||10,r.PerformanceNavigationTiming?(d=r.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(r.chrome&&r.chrome.loadTimes&&r.chrome.loadTimes()&&r.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Yg(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Jg(d){return d.h?1:d.g?d.g.size:0}function Jf(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function Kf(d,g){d.g?d.g.add(g):d.h=g}function Kg(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}Hg.prototype.cancel=function(){if(this.i=$g(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function $g(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let g=d.i;for(const v of d.g.values())g=g.concat(v.G);return g}return y(d.i)}var Qg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nI(d,g){if(d){d=d.split("&");for(let v=0;v<d.length;v++){const C=d[v].indexOf("=");let U,k=null;C>=0?(U=d[v].substring(0,C),k=d[v].substring(C+1)):U=d[v],g(U,k?decodeURIComponent(k.replace(/\+/g," ")):"")}}}function $i(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;d instanceof $i?(this.l=d.l,ta(this,d.j),this.o=d.o,this.g=d.g,na(this,d.u),this.h=d.h,$f(this,ty(d.i)),this.m=d.m):d&&(g=String(d).match(Qg))?(this.l=!1,ta(this,g[1]||"",!0),this.o=ia(g[2]||""),this.g=ia(g[3]||"",!0),na(this,g[4]),this.h=ia(g[5]||"",!0),$f(this,g[6]||"",!0),this.m=ia(g[7]||"")):(this.l=!1,this.i=new sa(null,this.l))}$i.prototype.toString=function(){const d=[];var g=this.j;g&&d.push(oa(g,Xg,!0),":");var v=this.g;return(v||g=="file")&&(d.push("//"),(g=this.o)&&d.push(oa(g,Xg,!0),"@"),d.push(On(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&d.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&d.push("/"),d.push(oa(v,v.charAt(0)=="/"?sI:oI,!0))),(v=this.i.toString())&&d.push("?",v),(v=this.m)&&d.push("#",oa(v,aI)),d.join("")},$i.prototype.resolve=function(d){const g=Zn(this);let v=!!d.j;v?ta(g,d.j):v=!!d.o,v?g.o=d.o:v=!!d.g,v?g.g=d.g:v=d.u!=null;var C=d.h;if(v)na(g,d.u);else if(v=!!d.h){if(C.charAt(0)!="/")if(this.g&&!this.h)C="/"+C;else{var U=g.h.lastIndexOf("/");U!=-1&&(C=g.h.slice(0,U+1)+C)}if(U=C,U==".."||U==".")C="";else if(U.indexOf("./")!=-1||U.indexOf("/.")!=-1){C=U.lastIndexOf("/",0)==0,U=U.split("/");const k=[];for(let H=0;H<U.length;){const oe=U[H++];oe=="."?C&&H==U.length&&k.push(""):oe==".."?((k.length>1||k.length==1&&k[0]!="")&&k.pop(),C&&H==U.length&&k.push("")):(k.push(oe),C=!0)}C=k.join("/")}else C=U}return v?g.h=C:v=d.i.toString()!=="",v?$f(g,ty(d.i)):v=!!d.m,v&&(g.m=d.m),g};function Zn(d){return new $i(d)}function ta(d,g,v){d.j=v?ia(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function na(d,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);d.u=g}else d.u=null}function $f(d,g,v){g instanceof sa?(d.i=g,lI(d.i,d.l)):(v||(g=oa(g,rI)),d.i=new sa(g,d.l))}function Me(d,g,v){d.i.set(g,v)}function Xl(d){return Me(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function ia(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function oa(d,g,v){return typeof d=="string"?(d=encodeURI(d).replace(g,iI),v&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function iI(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Xg=/[#\/\?@]/g,oI=/[#\?:]/g,sI=/[#\?]/g,rI=/[#\?@]/g,aI=/#/g;function sa(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function Xo(d){d.g||(d.g=new Map,d.h=0,d.i&&nI(d.i,function(g,v){d.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}t=sa.prototype,t.add=function(d,g){Xo(this),this.i=null,d=Vs(this,d);let v=this.g.get(d);return v||this.g.set(d,v=[]),v.push(g),this.h+=1,this};function Wg(d,g){Xo(d),g=Vs(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function Zg(d,g){return Xo(d),g=Vs(d,g),d.g.has(g)}t.forEach=function(d,g){Xo(this),this.g.forEach(function(v,C){v.forEach(function(U){d.call(g,U,C,this)},this)},this)};function jg(d,g){Xo(d);let v=[];if(typeof g=="string")Zg(d,g)&&(v=v.concat(d.g.get(Vs(d,g))));else for(d=Array.from(d.g.values()),g=0;g<d.length;g++)v=v.concat(d[g]);return v}t.set=function(d,g){return Xo(this),this.i=null,d=Vs(this,d),Zg(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},t.get=function(d,g){return d?(d=jg(this,d),d.length>0?String(d[0]):g):g};function ey(d,g,v){Wg(d,g),v.length>0&&(d.i=null,d.g.set(Vs(d,g),y(v)),d.h+=v.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],g=Array.from(this.g.keys());for(let C=0;C<g.length;C++){var v=g[C];const U=On(v);v=jg(this,v);for(let k=0;k<v.length;k++){let H=U;v[k]!==""&&(H+="="+On(v[k])),d.push(H)}}return this.i=d.join("&")};function ty(d){const g=new sa;return g.i=d.i,d.g&&(g.g=new Map(d.g),g.h=d.h),g}function Vs(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function lI(d,g){g&&!d.j&&(Xo(d),d.i=null,d.g.forEach(function(v,C){const U=C.toLowerCase();C!=U&&(Wg(this,C),ey(this,U,v))},d)),d.j=g}function uI(d,g){const v=new Ht;if(r.Image){const C=new Image;C.onload=h(Qi,v,"TestLoadImage: loaded",!0,g,C),C.onerror=h(Qi,v,"TestLoadImage: error",!1,g,C),C.onabort=h(Qi,v,"TestLoadImage: abort",!1,g,C),C.ontimeout=h(Qi,v,"TestLoadImage: timeout",!1,g,C),r.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=d}else g(!1)}function cI(d,g){const v=new Ht,C=new AbortController,U=setTimeout(()=>{C.abort(),Qi(v,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:C.signal}).then(k=>{clearTimeout(U),k.ok?Qi(v,"TestPingServer: ok",!0,g):Qi(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(U),Qi(v,"TestPingServer: error",!1,g)})}function Qi(d,g,v,C,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),C(v)}catch{}}function fI(){this.g=new Yl}function Qf(d){this.i=d.Sb||null,this.h=d.ab||!1}p(Qf,kn),Qf.prototype.g=function(){return new Wl(this.i,this.h)};function Wl(d,g){Ge.call(this),this.H=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Wl,Ge),t=Wl.prototype,t.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=g,this.readyState=1,aa(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(g.body=d),(this.H||r).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ra(this)),this.readyState=0},t.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,aa(this)),this.g&&(this.readyState=3,aa(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof r.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ny(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function ny(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}t.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?ra(this):aa(this),this.readyState==3&&ny(this)}},t.Oa=function(d){this.g&&(this.response=this.responseText=d,ra(this))},t.Na=function(d){this.g&&(this.response=d,ra(this))},t.ga=function(){this.g&&ra(this)};function ra(d){d.readyState=4,d.l=null,d.j=null,d.B=null,aa(d)}t.setRequestHeader=function(d,g){this.A.append(d,g)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,d.push(v[0]+": "+v[1]),v=g.next();return d.join(`\r
`)};function aa(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Wl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function iy(d){let g="";return re(d,function(v,C){g+=C,g+=":",g+=v,g+=`\r
`}),g}function Xf(d,g,v){e:{for(C in v){var C=!1;break e}C=!0}C||(v=iy(v),typeof d=="string"?v!=null&&On(v):Me(d,g,v))}function ze(d){Ge.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(ze,Ge);var dI=/^https?$/i,hI=["POST","PUT"];t=ze.prototype,t.Fa=function(d){this.H=d},t.ea=function(d,g,v,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Sn.g(),this.g.onreadystatechange=m(c(this.Ca,this));try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch(k){oy(this,k);return}if(d=v||"",v=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var U in C)v.set(U,C[U]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const k of C.keys())v.set(k,C.get(k));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(v.keys()).find(k=>k.toLowerCase()=="content-type"),U=r.FormData&&d instanceof r.FormData,!(Array.prototype.indexOf.call(hI,g,void 0)>=0)||C||U||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[k,H]of v)this.g.setRequestHeader(k,H);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(k){oy(this,k)}};function oy(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.o=5,sy(d),Zl(d)}function sy(d){d.A||(d.A=!0,xe(d,"complete"),xe(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,xe(this,"complete"),xe(this,"abort"),Zl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zl(this,!0)),ze.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?ry(this):this.Xa())},t.Xa=function(){ry(this)};function ry(d){if(d.h&&typeof s<"u"){if(d.v&&Xi(d)==4)setTimeout(d.Ca.bind(d),0);else if(xe(d,"readystatechange"),Xi(d)==4){d.h=!1;try{const k=d.ca();e:switch(k){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var v;if(!(v=g)){var C;if(C=k===0){let H=String(d.D).match(Qg)[1]||null;!H&&r.self&&r.self.location&&(H=r.self.location.protocol.slice(0,-1)),C=!dI.test(H?H.toLowerCase():"")}v=C}if(v)xe(d,"complete"),xe(d,"success");else{d.o=6;try{var U=Xi(d)>2?d.g.statusText:""}catch{U=""}d.l=U+" ["+d.ca()+"]",sy(d)}}finally{Zl(d)}}}}function Zl(d,g){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const v=d.g;d.g=null,g||xe(d,"ready");try{v.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Xi(d){return d.g?d.g.readyState:0}t.ca=function(){try{return Xi(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),Ho(g)}};function ay(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function pI(d){const g={};d=(d.g&&Xi(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<d.length;C++){if(N(d[C]))continue;var v=Wn(d[C]);const U=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const k=g[U]||[];g[U]=k,k.push(v)}be(g,function(C){return C.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function la(d,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[d]||g}function ly(d){this.za=0,this.i=[],this.j=new Ht,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=la("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=la("baseRetryDelayMs",5e3,d),this.Za=la("retryDelaySeedMs",1e4,d),this.Ta=la("forwardChannelMaxRetries",2,d),this.va=la("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new Hg(d&&d.concurrentRequestLimit),this.Ba=new fI,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=ly.prototype,t.ka=8,t.I=1,t.connect=function(d,g,v,C){me(0),this.W=d,this.H=g||{},v&&C!==void 0&&(this.H.OSID=v,this.H.OAID=C),this.F=this.X,this.J=yy(this,null,this.W),eu(this)};function Wf(d){if(uy(d),d.I==3){var g=d.V++,v=Zn(d.J);if(Me(v,"SID",d.M),Me(v,"RID",g),Me(v,"TYPE","terminate"),ua(d,v),g=new Jt(d,d.j,g),g.M=2,g.A=Xl(Zn(v)),v=!1,r.navigator&&r.navigator.sendBeacon)try{v=r.navigator.sendBeacon(g.A.toString(),"")}catch{}!v&&r.Image&&(new Image().src=g.A,v=!0),v||(g.g=vy(g.j,null),g.g.ea(g.A)),g.F=Date.now(),Ql(g)}gy(d)}function jl(d){d.g&&(jf(d),d.g.cancel(),d.g=null)}function uy(d){jl(d),d.v&&(r.clearTimeout(d.v),d.v=null),tu(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&r.clearTimeout(d.m),d.m=null)}function eu(d){if(!Yg(d.h)&&!d.m){d.m=!0;var g=d.Ea;O||_(),q||(O(),q=!0),T.add(g,d),d.D=0}}function mI(d,g){return Jg(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=g.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=st(c(d.Ea,d,g),my(d,d.D)),d.D++,!0)}t.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const U=new Jt(this,this.j,d);let k=this.o;if(this.U&&(k?(k=nn(k),Mt(k,this.U)):k=this.U),this.u!==null||this.R||(U.J=k,k=null),this.S)e:{for(var g=0,v=0;v<this.i.length;v++){t:{var C=this.i[v];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(g+=C,g>4096){g=v;break e}if(g===4096||v===this.i.length-1){g=v+1;break e}}g=1e3}else g=1e3;g=fy(this,U,g),v=Zn(this.J),Me(v,"RID",d),Me(v,"CVER",22),this.G&&Me(v,"X-HTTP-Session-Id",this.G),ua(this,v),k&&(this.R?g="headers="+On(iy(k))+"&"+g:this.u&&Xf(v,this.u,k)),Kf(this.h,U),this.Ra&&Me(v,"TYPE","init"),this.S?(Me(v,"$req",g),Me(v,"SID","null"),U.U=!0,zf(U,v,null)):zf(U,v,g),this.I=2}}else this.I==3&&(d?cy(this,d):this.i.length==0||Yg(this.h)||cy(this))};function cy(d,g){var v;g?v=g.l:v=d.V++;const C=Zn(d.J);Me(C,"SID",d.M),Me(C,"RID",v),Me(C,"AID",d.K),ua(d,C),d.u&&d.o&&Xf(C,d.u,d.o),v=new Jt(d,d.j,v,d.D+1),d.u===null&&(v.J=d.o),g&&(d.i=g.G.concat(d.i)),g=fy(d,v,1e3),v.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),Kf(d.h,v),zf(v,C,g)}function ua(d,g){d.H&&re(d.H,function(v,C){Me(g,C,v)}),d.l&&re({},function(v,C){Me(g,C,v)})}function fy(d,g,v){v=Math.min(d.i.length,v);const C=d.l?c(d.l.Ka,d.l,d):null;e:{var U=d.i;let oe=-1;for(;;){const at=["count="+v];oe==-1?v>0?(oe=U[0].g,at.push("ofs="+oe)):oe=0:at.push("ofs="+oe);let Re=!0;for(let ht=0;ht<v;ht++){var k=U[ht].g;const jn=U[ht].map;if(k-=oe,k<0)oe=Math.max(0,U[ht].g-100),Re=!1;else try{k="req"+k+"_"||"";try{var H=jn instanceof Map?jn:Object.entries(jn);for(const[Zo,Wi]of H){let Zi=Wi;a(Wi)&&(Zi=Qn(Wi)),at.push(k+Zo+"="+encodeURIComponent(Zi))}}catch(Zo){throw at.push(k+"type="+encodeURIComponent("_badmap")),Zo}}catch{C&&C(jn)}}if(Re){H=at.join("&");break e}}H=void 0}return d=d.i.splice(0,v),g.G=d,H}function dy(d){if(!d.g&&!d.v){d.Y=1;var g=d.Da;O||_(),q||(O(),q=!0),T.add(g,d),d.A=0}}function Zf(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=st(c(d.Da,d),my(d,d.A)),d.A++,!0)}t.Da=function(){if(this.v=null,hy(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=st(c(this.Wa,this),d)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,me(10),jl(this),hy(this))};function jf(d){d.B!=null&&(r.clearTimeout(d.B),d.B=null)}function hy(d){d.g=new Jt(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var g=Zn(d.na);Me(g,"RID","rpc"),Me(g,"SID",d.M),Me(g,"AID",d.K),Me(g,"CI",d.F?"0":"1"),!d.F&&d.ia&&Me(g,"TO",d.ia),Me(g,"TYPE","xmlhttp"),ua(d,g),d.u&&d.o&&Xf(g,d.u,d.o),d.O&&(d.g.H=d.O);var v=d.g;d=d.ba,v.M=1,v.A=Xl(Zn(g)),v.u=null,v.R=!0,Fg(v,d)}t.Va=function(){this.C!=null&&(this.C=null,jl(this),Zf(this),me(19))};function tu(d){d.C!=null&&(r.clearTimeout(d.C),d.C=null)}function py(d,g){var v=null;if(d.g==g){tu(d),jf(d),d.g=null;var C=2}else if(Jf(d.h,g))v=g.G,Kg(d.h,g),C=1;else return;if(d.I!=0){if(g.o)if(C==1){v=g.u?g.u.length:0,g=Date.now()-g.F;var U=d.D;C=Ko(),xe(C,new Pt(C,v)),eu(d)}else dy(d);else if(U=g.m,U==3||U==0&&g.X>0||!(C==1&&mI(d,g)||C==2&&Zf(d)))switch(v&&v.length>0&&(g=d.h,g.i=g.i.concat(v)),U){case 1:Wo(d,5);break;case 4:Wo(d,10);break;case 3:Wo(d,6);break;default:Wo(d,2)}}}function my(d,g){let v=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(v*=2),v*g}function Wo(d,g){if(d.j.info("Error code "+g),g==2){var v=c(d.bb,d),C=d.Ua;const U=!C;C=new $i(C||"//www.google.com/images/cleardot.gif"),r.location&&r.location.protocol=="http"||ta(C,"https"),Xl(C),U?uI(C.toString(),v):cI(C.toString(),v)}else me(2);d.I=0,d.l&&d.l.pa(g),gy(d),uy(d)}t.bb=function(d){d?(this.j.info("Successfully pinged google.com"),me(2)):(this.j.info("Failed to ping google.com"),me(1))};function gy(d){if(d.I=0,d.ja=[],d.l){const g=$g(d.h);(g.length!=0||d.i.length!=0)&&(b(d.ja,g),b(d.ja,d.i),d.h.i.length=0,y(d.i),d.i.length=0),d.l.oa()}}function yy(d,g,v){var C=v instanceof $i?Zn(v):new $i(v);if(C.g!="")g&&(C.g=g+"."+C.g),na(C,C.u);else{var U=r.location;C=U.protocol,g=g?g+"."+U.hostname:U.hostname,U=+U.port;const k=new $i(null);C&&ta(k,C),g&&(k.g=g),U&&na(k,U),v&&(k.h=v),C=k}return v=d.G,g=d.wa,v&&g&&Me(C,v,g),Me(C,"VER",d.ka),ua(d,C),C}function vy(d,g,v){if(g&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Aa&&!d.ma?new ze(new Qf({ab:v})):new ze(d.ma),g.Fa(d.L),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function _y(){}t=_y.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function nu(){}nu.prototype.g=function(d,g){return new rn(d,g)};function rn(d,g){Ge.call(this),this.g=new ly(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(d?d["X-WebChannel-Client-Profile"]=g.sa:d={"X-WebChannel-Client-Profile":g.sa}),this.g.U=d,(d=g&&g.Qb)&&!N(d)&&(this.g.u=d),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!N(g)&&(this.g.G=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new Us(this)}p(rn,Ge),rn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},rn.prototype.close=function(){Wf(this.g)},rn.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var v={};v.__data__=d,d=v}else this.v&&(v={},v.__data__=Qn(d),d=v);g.i.push(new tI(g.Ya++,d)),g.I==3&&eu(g)},rn.prototype.N=function(){this.g.l=null,delete this.j,Wf(this.g),delete this.g,rn.Z.N.call(this)};function Ey(d){jr.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(const v in g){d=v;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}p(Ey,jr);function Ty(){Jo.call(this),this.status=1}p(Ty,Jo);function Us(d){this.g=d}p(Us,_y),Us.prototype.ra=function(){xe(this.g,"a")},Us.prototype.qa=function(d){xe(this.g,new Ey(d))},Us.prototype.pa=function(d){xe(this.g,new Ty)},Us.prototype.oa=function(){xe(this.g,"b")},nu.prototype.createWebChannel=nu.prototype.g,rn.prototype.send=rn.prototype.o,rn.prototype.open=rn.prototype.m,rn.prototype.close=rn.prototype.close,fR=function(){return new nu},cR=function(){return Ko()},uR=Xn,fp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},on.NO_ERROR=0,on.TIMEOUT=8,on.HTTP_ERROR=6,zu=on,sn.COMPLETE="complete",lR=sn,Zr.EventType=Yo,Yo.OPEN="a",Yo.CLOSE="b",Yo.ERROR="c",Yo.MESSAGE="d",Ge.prototype.listen=Ge.prototype.J,Aa=Zr,ze.prototype.listenOnce=ze.prototype.K,ze.prototype.getLastError=ze.prototype.Ha,ze.prototype.getLastErrorCode=ze.prototype.ya,ze.prototype.getStatus=ze.prototype.ca,ze.prototype.getResponseJson=ze.prototype.La,ze.prototype.getResponseText=ze.prototype.la,ze.prototype.send=ze.prototype.ea,ze.prototype.setWithCredentials=ze.prototype.Fa,aR=ze}).apply(typeof Eu<"u"?Eu:typeof self<"u"?self:typeof window<"u"?window:{});const GE="@firebase/firestore",zE="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ut.UNAUTHENTICATED=new Ut(null),Ut.GOOGLE_CREDENTIALS=new Ut("google-credentials-uid"),Ut.FIRST_PARTY=new Ut("first-party-uid"),Ut.MOCK_USER=new Ut("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jr="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts=new zm("@firebase/firestore");function Fs(){return Ts.logLevel}function J(t,...e){if(Ts.logLevel<=pe.DEBUG){const n=e.map(Wm);Ts.debug(`Firestore (${Jr}): ${t}`,...n)}}function Oi(t,...e){if(Ts.logLevel<=pe.ERROR){const n=e.map(Wm);Ts.error(`Firestore (${Jr}): ${t}`,...n)}}function xr(t,...e){if(Ts.logLevel<=pe.WARN){const n=e.map(Wm);Ts.warn(`Firestore (${Jr}): ${t}`,...n)}}function Wm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,dR(t,i,n)}function dR(t,e,n){let i=`FIRESTORE (${Jr}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Oi(i),new Error(i)}function Ee(t,e,n,i){let o="Unexpected state";typeof n=="string"?o=n:i=n,t||dR(e,o,i)}function te(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $ extends Go{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class KL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ut.UNAUTHENTICATED))}shutdown(){}}class $L{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class QL{constructor(e){this.t=e,this.currentUser=Ut.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ee(this.o===void 0,42304);let i=this.i;const o=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let s=new wo;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new wo,e.enqueueRetryable(()=>o(this.currentUser))};const r=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await o(this.currentUser)})},a=l=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),r())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new wo)}},0),r()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ee(typeof i.accessToken=="string",31837,{l:i}),new hR(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ee(e===null||typeof e=="string",2055,{h:e}),new Ut(e)}}class XL{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Ut.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class WL{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new XL(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ut.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class HE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ZL{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,cU(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ee(this.o===void 0,3512);const i=s=>{s.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const r=s.token!==this.m;return this.m=s.token,J("FirebaseAppCheckTokenProvider",`Received ${r?"new":"existing"} token.`),r?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const o=s=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>o(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?o(s):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new HE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ee(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new HE(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jL(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=jL(40);for(let s=0;s<o.length;++s)i.length<20&&o[s]<n&&(i+=e.charAt(o[s]%62))}return i}}function ue(t,e){return t<e?-1:t>e?1:0}function dp(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const o=t.charAt(i),s=e.charAt(i);if(o!==s)return Yd(o)===Yd(s)?ue(o,s):Yd(o)?1:-1}return ue(t.length,e.length)}const ek=55296,tk=57343;function Yd(t){const e=t.charCodeAt(0);return e>=ek&&e<=tk}function Nr(t,e,n){return t.length===e.length&&t.every((i,o)=>n(i,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE="__name__";class ei{constructor(e,n,i){n===void 0?n=0:n>e.length&&W(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&W(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return ei.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ei?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let o=0;o<i;o++){const s=ei.compareSegments(e.get(o),n.get(o));if(s!==0)return s}return ue(e.length,n.length)}static compareSegments(e,n){const i=ei.isNumericId(e),o=ei.isNumericId(n);return i&&!o?-1:!i&&o?1:i&&o?ei.extractNumericId(e).compare(ei.extractNumericId(n)):dp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ro.fromString(e.substring(4,e.length-2))}}class Be extends ei{construct(e,n,i){return new Be(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new $(G.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(o=>o.length>0))}return new Be(n)}static emptyPath(){return new Be([])}}const nk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class It extends ei{construct(e,n,i){return new It(e,n,i)}static isValidIdentifier(e){return nk.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),It.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===YE}static keyField(){return new It([YE])}static fromServerFormat(e){const n=[];let i="",o=0;const s=()=>{if(i.length===0)throw new $(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let r=!1;for(;o<e.length;){const a=e[o];if(a==="\\"){if(o+1===e.length)throw new $(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[o+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new $(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,o+=2}else a==="`"?(r=!r,o++):a!=="."||r?(i+=a,o++):(s(),o++)}if(s(),r)throw new $(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new It(n)}static emptyPath(){return new It([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.path=e}static fromPath(e){return new X(Be.fromString(e))}static fromName(e){return new X(Be.fromString(e).popFirst(5))}static empty(){return new X(Be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Be.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new X(new Be(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ik(t,e,n){if(!n)throw new $(G.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function ok(t,e,n,i){if(e===!0&&i===!0)throw new $(G.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function JE(t){if(!X.isDocumentKey(t))throw new $(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function pR(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function jm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":W(12329,{type:typeof t})}function hl(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new $(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=jm(t);throw new $(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ll(t,e){if(!pR(t))throw new $(G.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const o=e[i].typeString,s="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const r=t[i];if(o&&typeof r!==o){n=`JSON field '${i}' must be a ${o}.`;break}if(s!==void 0&&r!==s.value){n=`Expected '${i}' field to equal '${s.value}'`;break}}if(n)throw new $(G.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE=-62135596800,$E=1e6;class Ue{static now(){return Ue.fromMillis(Date.now())}static fromDate(e){return Ue.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*$E);return new Ue(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new $(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new $(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<KE)throw new $(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/$E}_compareTo(e){return this.seconds===e.seconds?ue(this.nanoseconds,e.nanoseconds):ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ue._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ll(e,Ue._jsonSchema))return new Ue(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-KE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ue._jsonSchemaVersion="firestore/timestamp/1.0",Ue._jsonSchema={type:nt("string",Ue._jsonSchemaVersion),seconds:nt("number"),nanoseconds:nt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{static fromTimestamp(e){return new ee(e)}static min(){return new ee(new Ue(0,0))}static max(){return new ee(new Ue(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pl=-1;function sk(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,o=ee.fromTimestamp(i===1e9?new Ue(n+1,0):new Ue(n,i));return new Do(o,X.empty(),e)}function rk(t){return new Do(t.readTime,t.key,pl)}class Do{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Do(ee.min(),X.empty(),pl)}static max(){return new Do(ee.max(),X.empty(),pl)}}function ak(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=X.comparator(t.documentKey,e.documentKey),n!==0?n:ue(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class uk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kr(t){if(t.code!==G.FAILED_PRECONDITION||t.message!==lk)throw t;J("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&W(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((i,o)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,o)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,i)=>{n(e)})}static reject(e){return new F((n,i)=>{i(e)})}static waitFor(e){return new F((n,i)=>{let o=0,s=0,r=!1;e.forEach(a=>{++o,a.next(()=>{++s,r&&s===o&&n()},l=>i(l))}),r=!0,s===o&&n()})}static or(e){let n=F.resolve(!1);for(const i of e)n=n.next(o=>o?F.resolve(o):i());return n}static forEach(e,n){const i=[];return e.forEach((o,s)=>{i.push(n.call(this,o,s))}),this.waitFor(i)}static mapArray(e,n){return new F((i,o)=>{const s=e.length,r=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(h=>{r[c]=h,++a,a===s&&i(r)},h=>o(h))}})}static doWhile(e,n){return new F((i,o)=>{const s=()=>{e()===!0?n().next(()=>{s()},o):i()};s()})}}function ck(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function $r(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Rf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eg=-1;function wf(t){return t==null}function Vc(t){return t===0&&1/t==-1/0}function fk(t){return typeof t=="number"&&Number.isInteger(t)&&!Vc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR="";function dk(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=QE(e)),e=hk(t.get(n),e);return QE(e)}function hk(t,e){let n=e;const i=t.length;for(let o=0;o<i;o++){const s=t.charAt(o);switch(s){case"\0":n+="";break;case mR:n+="";break;default:n+=s}}return n}function QE(t){return t+mR+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XE(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function xs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function gR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e,n){this.comparator=e,this.root=n||Ct.EMPTY}insert(e,n){return new Fe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ct.BLACK,null,null))}remove(e){return new Fe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ct.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return n+i.left.size;o<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Tu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Tu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Tu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Tu(this.root,e,this.comparator,!0)}}class Tu{constructor(e,n,i,o){this.isReverse=o,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&o&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ct{constructor(e,n,i,o,s){this.key=e,this.value=n,this.color=i??Ct.RED,this.left=o??Ct.EMPTY,this.right=s??Ct.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,o,s){return new Ct(e??this.key,n??this.value,i??this.color,o??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let o=this;const s=i(e,o.key);return o=s<0?o.copy(null,null,null,o.left.insert(e,n,i),null):s===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ct.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Ct.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ct.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ct.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw W(43730,{key:this.key,value:this.value});if(this.right.isRed())throw W(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw W(27949);return e+(this.isRed()?0:1)}}Ct.EMPTY=null,Ct.RED=!0,Ct.BLACK=!1;Ct.EMPTY=new class{constructor(){this.size=0}get key(){throw W(57766)}get value(){throw W(16141)}get color(){throw W(16727)}get left(){throw W(29726)}get right(){throw W(36894)}copy(e,n,i,o,s){return this}insert(e,n,i){return new Ct(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.comparator=e,this.data=new Fe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new WE(this.data.getIterator())}getIteratorFrom(e){return new WE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof ft)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,s=i.getNext().key;if(this.comparator(o,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ft(this.comparator);return n.data=e,n}}class WE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.fields=e,e.sort(It.comparator)}static empty(){return new Fn([])}unionWith(e){let n=new ft(It.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Fn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Nr(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new yR("Invalid base64 string: "+s):s}}(e);return new Nt(n)}static fromUint8Array(e){const n=function(o){let s="";for(let r=0;r<o.length;++r)s+=String.fromCharCode(o[r]);return s}(e);return new Nt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Nt.EMPTY_BYTE_STRING=new Nt("");const pk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Po(t){if(Ee(!!t,39018),typeof t=="string"){let e=0;const n=pk.exec(t);if(Ee(!!n,46558,{timestamp:t}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Je(t.seconds),nanos:Je(t.nanos)}}function Je(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Vo(t){return typeof t=="string"?Nt.fromBase64String(t):Nt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR="server_timestamp",_R="__type__",ER="__previous_value__",TR="__local_write_time__";function tg(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[_R])==null?void 0:i.stringValue)===vR}function If(t){const e=t.mapValue.fields[ER];return tg(e)?If(e):e}function ml(t){const e=Po(t.mapValue.fields[TR].timestampValue);return new Ue(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(e,n,i,o,s,r,a,l,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=o,this.ssl=s,this.forceLongPolling=r,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=h}}const Uc="(default)";class gl{constructor(e,n){this.projectId=e,this.database=n||Uc}static empty(){return new gl("","")}get isDefaultDatabase(){return this.database===Uc}isEqual(e){return e instanceof gl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR="__type__",gk="__max__",Su={mapValue:{}},AR="__vector__",Lc="value";function Uo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?tg(t)?4:vk(t)?9007199254740991:yk(t)?10:11:W(28295,{value:t})}function ci(t,e){if(t===e)return!0;const n=Uo(t);if(n!==Uo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ml(t).isEqual(ml(e));case 3:return function(o,s){if(typeof o.timestampValue=="string"&&typeof s.timestampValue=="string"&&o.timestampValue.length===s.timestampValue.length)return o.timestampValue===s.timestampValue;const r=Po(o.timestampValue),a=Po(s.timestampValue);return r.seconds===a.seconds&&r.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(o,s){return Vo(o.bytesValue).isEqual(Vo(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(o,s){return Je(o.geoPointValue.latitude)===Je(s.geoPointValue.latitude)&&Je(o.geoPointValue.longitude)===Je(s.geoPointValue.longitude)}(t,e);case 2:return function(o,s){if("integerValue"in o&&"integerValue"in s)return Je(o.integerValue)===Je(s.integerValue);if("doubleValue"in o&&"doubleValue"in s){const r=Je(o.doubleValue),a=Je(s.doubleValue);return r===a?Vc(r)===Vc(a):isNaN(r)&&isNaN(a)}return!1}(t,e);case 9:return Nr(t.arrayValue.values||[],e.arrayValue.values||[],ci);case 10:case 11:return function(o,s){const r=o.mapValue.fields||{},a=s.mapValue.fields||{};if(XE(r)!==XE(a))return!1;for(const l in r)if(r.hasOwnProperty(l)&&(a[l]===void 0||!ci(r[l],a[l])))return!1;return!0}(t,e);default:return W(52216,{left:t})}}function yl(t,e){return(t.values||[]).find(n=>ci(n,e))!==void 0}function Mr(t,e){if(t===e)return 0;const n=Uo(t),i=Uo(e);if(n!==i)return ue(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ue(t.booleanValue,e.booleanValue);case 2:return function(s,r){const a=Je(s.integerValue||s.doubleValue),l=Je(r.integerValue||r.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return ZE(t.timestampValue,e.timestampValue);case 4:return ZE(ml(t),ml(e));case 5:return dp(t.stringValue,e.stringValue);case 6:return function(s,r){const a=Vo(s),l=Vo(r);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,r){const a=s.split("/"),l=r.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=ue(a[c],l[c]);if(h!==0)return h}return ue(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,r){const a=ue(Je(s.latitude),Je(r.latitude));return a!==0?a:ue(Je(s.longitude),Je(r.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return jE(t.arrayValue,e.arrayValue);case 10:return function(s,r){var m,y,b,x;const a=s.fields||{},l=r.fields||{},c=(m=a[Lc])==null?void 0:m.arrayValue,h=(y=l[Lc])==null?void 0:y.arrayValue,p=ue(((b=c==null?void 0:c.values)==null?void 0:b.length)||0,((x=h==null?void 0:h.values)==null?void 0:x.length)||0);return p!==0?p:jE(c,h)}(t.mapValue,e.mapValue);case 11:return function(s,r){if(s===Su.mapValue&&r===Su.mapValue)return 0;if(s===Su.mapValue)return 1;if(r===Su.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=r.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let p=0;p<l.length&&p<h.length;++p){const m=dp(l[p],h[p]);if(m!==0)return m;const y=Mr(a[l[p]],c[h[p]]);if(y!==0)return y}return ue(l.length,h.length)}(t.mapValue,e.mapValue);default:throw W(23264,{he:n})}}function ZE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ue(t,e);const n=Po(t),i=Po(e),o=ue(n.seconds,i.seconds);return o!==0?o:ue(n.nanos,i.nanos)}function jE(t,e){const n=t.values||[],i=e.values||[];for(let o=0;o<n.length&&o<i.length;++o){const s=Mr(n[o],i[o]);if(s)return s}return ue(n.length,i.length)}function Dr(t){return hp(t)}function hp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Po(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Vo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return X.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",o=!0;for(const s of n.values||[])o?o=!1:i+=",",i+=hp(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let o="{",s=!0;for(const r of i)s?s=!1:o+=",",o+=`${r}:${hp(n.fields[r])}`;return o+"}"}(t.mapValue):W(61005,{value:t})}function Hu(t){switch(Uo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=If(t);return e?16+Hu(e):16;case 5:return 2*t.stringValue.length;case 6:return Vo(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((o,s)=>o+Hu(s),0)}(t.arrayValue);case 10:case 11:return function(i){let o=0;return xs(i.fields,(s,r)=>{o+=s.length+Hu(r)}),o}(t.mapValue);default:throw W(13486,{value:t})}}function pp(t){return!!t&&"integerValue"in t}function ng(t){return!!t&&"arrayValue"in t}function eT(t){return!!t&&"nullValue"in t}function tT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Yu(t){return!!t&&"mapValue"in t}function yk(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[SR])==null?void 0:i.stringValue)===AR}function za(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return xs(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=za(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=za(t.arrayValue.values[n]);return e}return{...t}}function vk(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===gk}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.value=e}static empty(){return new Mn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Yu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=za(n)}setAll(e){let n=It.emptyPath(),i={},o=[];e.forEach((r,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,i,o),i={},o=[],n=a.popLast()}r?i[a.lastSegment()]=za(r):o.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,o)}delete(e){const n=this.field(e.popLast());Yu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ci(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=n.mapValue.fields[e.get(i)];Yu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,i){xs(n,(o,s)=>e[o]=s);for(const o of i)delete e[o]}clone(){return new Mn(za(this.value))}}function CR(t){const e=[];return xs(t.fields,(n,i)=>{const o=new It([n]);if(Yu(i)){const s=CR(i.mapValue).fields;if(s.length===0)e.push(o);else for(const r of s)e.push(o.child(r))}else e.push(o)}),new Fn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e,n,i,o,s,r,a){this.key=e,this.documentType=n,this.version=i,this.readTime=o,this.createTime=s,this.data=r,this.documentState=a}static newInvalidDocument(e){return new Lt(e,0,ee.min(),ee.min(),ee.min(),Mn.empty(),0)}static newFoundDocument(e,n,i,o){return new Lt(e,1,n,ee.min(),i,o,0)}static newNoDocument(e,n){return new Lt(e,2,n,ee.min(),ee.min(),Mn.empty(),0)}static newUnknownDocument(e,n){return new Lt(e,3,n,ee.min(),ee.min(),Mn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Lt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Lt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,n){this.position=e,this.inclusive=n}}function nT(t,e,n){let i=0;for(let o=0;o<t.position.length;o++){const s=e[o],r=t.position[o];if(s.field.isKeyField()?i=X.comparator(X.fromName(r.referenceValue),n.key):i=Mr(r,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function iT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ci(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e,n="asc"){this.field=e,this.dir=n}}function _k(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{}class ct extends RR{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new Tk(e,n,i):n==="array-contains"?new Ck(e,i):n==="in"?new Rk(e,i):n==="not-in"?new wk(e,i):n==="array-contains-any"?new Ik(e,i):new ct(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new Sk(e,i):new Ak(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Mr(n,this.value)):n!==null&&Uo(this.value)===Uo(n)&&this.matchesComparison(Mr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return W(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fi extends RR{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new fi(e,n)}matches(e){return wR(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function wR(t){return t.op==="and"}function IR(t){return Ek(t)&&wR(t)}function Ek(t){for(const e of t.filters)if(e instanceof fi)return!1;return!0}function mp(t){if(t instanceof ct)return t.field.canonicalString()+t.op.toString()+Dr(t.value);if(IR(t))return t.filters.map(e=>mp(e)).join(",");{const e=t.filters.map(n=>mp(n)).join(",");return`${t.op}(${e})`}}function bR(t,e){return t instanceof ct?function(i,o){return o instanceof ct&&i.op===o.op&&i.field.isEqual(o.field)&&ci(i.value,o.value)}(t,e):t instanceof fi?function(i,o){return o instanceof fi&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce((s,r,a)=>s&&bR(r,o.filters[a]),!0):!1}(t,e):void W(19439)}function xR(t){return t instanceof ct?function(n){return`${n.field.canonicalString()} ${n.op} ${Dr(n.value)}`}(t):t instanceof fi?function(n){return n.op.toString()+" {"+n.getFilters().map(xR).join(" ,")+"}"}(t):"Filter"}class Tk extends ct{constructor(e,n,i){super(e,n,i),this.key=X.fromName(i.referenceValue)}matches(e){const n=X.comparator(e.key,this.key);return this.matchesComparison(n)}}class Sk extends ct{constructor(e,n){super(e,"in",n),this.keys=NR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Ak extends ct{constructor(e,n){super(e,"not-in",n),this.keys=NR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function NR(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(i=>X.fromName(i.referenceValue))}class Ck extends ct{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ng(n)&&yl(n.arrayValue,this.value)}}class Rk extends ct{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&yl(this.value.arrayValue,n)}}class wk extends ct{constructor(e,n){super(e,"not-in",n)}matches(e){if(yl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!yl(this.value.arrayValue,n)}}class Ik extends ct{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ng(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>yl(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(e,n=null,i=[],o=[],s=null,r=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=o,this.limit=s,this.startAt=r,this.endAt=a,this.Te=null}}function oT(t,e=null,n=[],i=[],o=null,s=null,r=null){return new bk(t,e,n,i,o,s,r)}function ig(t){const e=te(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>mp(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),wf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Dr(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Dr(i)).join(",")),e.Te=n}return e.Te}function og(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!_k(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!bR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!iT(t.startAt,e.startAt)&&iT(t.endAt,e.endAt)}function gp(t){return X.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e,n=null,i=[],o=[],s=null,r="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=o,this.limit=s,this.limitType=r,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function xk(t,e,n,i,o,s,r,a){return new bf(t,e,n,i,o,s,r,a)}function sg(t){return new bf(t)}function sT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Nk(t){return t.collectionGroup!==null}function Ha(t){const e=te(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(r){let a=new ft(It.comparator);return r.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Oc(s,i))}),n.has(It.keyField().canonicalString())||e.Ie.push(new Oc(It.keyField(),i))}return e.Ie}function ri(t){const e=te(t);return e.Ee||(e.Ee=Mk(e,Ha(t))),e.Ee}function Mk(t,e){if(t.limitType==="F")return oT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(o=>{const s=o.dir==="desc"?"asc":"desc";return new Oc(o.field,s)});const n=t.endAt?new kc(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new kc(t.startAt.position,t.startAt.inclusive):null;return oT(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function yp(t,e,n){return new bf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function xf(t,e){return og(ri(t),ri(e))&&t.limitType===e.limitType}function MR(t){return`${ig(ri(t))}|lt:${t.limitType}`}function Gs(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(o=>xR(o)).join(", ")}]`),wf(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(o=>function(r){return`${r.field.canonicalString()} (${r.dir})`}(o)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(o=>Dr(o)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(o=>Dr(o)).join(",")),`Target(${i})`}(ri(t))}; limitType=${t.limitType})`}function Nf(t,e){return e.isFoundDocument()&&function(i,o){const s=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):X.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,o){for(const s of Ha(i))if(!s.field.isKeyField()&&o.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,o){for(const s of i.filters)if(!s.matches(o))return!1;return!0}(t,e)&&function(i,o){return!(i.startAt&&!function(r,a,l){const c=nT(r,a,l);return r.inclusive?c<=0:c<0}(i.startAt,Ha(i),o)||i.endAt&&!function(r,a,l){const c=nT(r,a,l);return r.inclusive?c>=0:c>0}(i.endAt,Ha(i),o))}(t,e)}function Dk(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function DR(t){return(e,n)=>{let i=!1;for(const o of Ha(t)){const s=Pk(o,e,n);if(s!==0)return s;i=i||o.field.isKeyField()}return 0}}function Pk(t,e,n){const i=t.field.isKeyField()?X.comparator(e.key,n.key):function(s,r,a){const l=r.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Mr(l,c):W(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return W(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[o,s]of i)if(this.equalsFn(o,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<o.length;s++)if(this.equalsFn(o[s][0],e))return void(o[s]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[n]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){xs(this.inner,(n,i)=>{for(const[o,s]of i)e(o,s)})}isEmpty(){return gR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk=new Fe(X.comparator);function qi(){return Vk}const PR=new Fe(X.comparator);function Ca(...t){let e=PR;for(const n of t)e=e.insert(n.key,n);return e}function VR(t){let e=PR;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function rs(){return Ya()}function UR(){return Ya()}function Ya(){return new Ns(t=>t.toString(),(t,e)=>t.isEqual(e))}const Uk=new Fe(X.comparator),Lk=new ft(X.comparator);function ce(...t){let e=Lk;for(const n of t)e=e.add(n);return e}const kk=new ft(ue);function Ok(){return kk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vc(e)?"-0":e}}function LR(t){return{integerValue:""+t}}function qk(t,e){return fk(e)?LR(e):rg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(){this._=void 0}}function Bk(t,e,n){return t instanceof qc?function(o,s){const r={fields:{[_R]:{stringValue:vR},[TR]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return s&&tg(s)&&(s=If(s)),s&&(r.fields[ER]=s),{mapValue:r}}(n,e):t instanceof vl?OR(t,e):t instanceof _l?qR(t,e):function(o,s){const r=kR(o,s),a=rT(r)+rT(o.Ae);return pp(r)&&pp(o.Ae)?LR(a):rg(o.serializer,a)}(t,e)}function Fk(t,e,n){return t instanceof vl?OR(t,e):t instanceof _l?qR(t,e):n}function kR(t,e){return t instanceof Bc?function(i){return pp(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}class qc extends Mf{}class vl extends Mf{constructor(e){super(),this.elements=e}}function OR(t,e){const n=BR(e);for(const i of t.elements)n.some(o=>ci(o,i))||n.push(i);return{arrayValue:{values:n}}}class _l extends Mf{constructor(e){super(),this.elements=e}}function qR(t,e){let n=BR(e);for(const i of t.elements)n=n.filter(o=>!ci(o,i));return{arrayValue:{values:n}}}class Bc extends Mf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function rT(t){return Je(t.integerValue||t.doubleValue)}function BR(t){return ng(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Gk(t,e){return t.field.isEqual(e.field)&&function(i,o){return i instanceof vl&&o instanceof vl||i instanceof _l&&o instanceof _l?Nr(i.elements,o.elements,ci):i instanceof Bc&&o instanceof Bc?ci(i.Ae,o.Ae):i instanceof qc&&o instanceof qc}(t.transform,e.transform)}class zk{constructor(e,n){this.version=e,this.transformResults=n}}class xi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new xi}static exists(e){return new xi(void 0,e)}static updateTime(e){return new xi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ju(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Df{}function FR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new zR(t.key,xi.none()):new kl(t.key,t.data,xi.none());{const n=t.data,i=Mn.empty();let o=new ft(It.comparator);for(let s of e.fields)if(!o.has(s)){let r=n.field(s);r===null&&s.length>1&&(s=s.popLast(),r=n.field(s)),r===null?i.delete(s):i.set(s,r),o=o.add(s)}return new Ms(t.key,i,new Fn(o.toArray()),xi.none())}}function Hk(t,e,n){t instanceof kl?function(o,s,r){const a=o.value.clone(),l=lT(o.fieldTransforms,s,r.transformResults);a.setAll(l),s.convertToFoundDocument(r.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ms?function(o,s,r){if(!Ju(o.precondition,s))return void s.convertToUnknownDocument(r.version);const a=lT(o.fieldTransforms,s,r.transformResults),l=s.data;l.setAll(GR(o)),l.setAll(a),s.convertToFoundDocument(r.version,l).setHasCommittedMutations()}(t,e,n):function(o,s,r){s.convertToNoDocument(r.version).setHasCommittedMutations()}(0,e,n)}function Ja(t,e,n,i){return t instanceof kl?function(s,r,a,l){if(!Ju(s.precondition,r))return a;const c=s.value.clone(),h=uT(s.fieldTransforms,l,r);return c.setAll(h),r.convertToFoundDocument(r.version,c).setHasLocalMutations(),null}(t,e,n,i):t instanceof Ms?function(s,r,a,l){if(!Ju(s.precondition,r))return a;const c=uT(s.fieldTransforms,l,r),h=r.data;return h.setAll(GR(s)),h.setAll(c),r.convertToFoundDocument(r.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,i):function(s,r,a){return Ju(s.precondition,r)?(r.convertToNoDocument(r.version).setHasLocalMutations(),null):a}(t,e,n)}function Yk(t,e){let n=null;for(const i of t.fieldTransforms){const o=e.data.field(i.field),s=kR(i.transform,o||null);s!=null&&(n===null&&(n=Mn.empty()),n.set(i.field,s))}return n||null}function aT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Nr(i,o,(s,r)=>Gk(s,r))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class kl extends Df{constructor(e,n,i,o=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ms extends Df{constructor(e,n,i,o,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=o,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function GR(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function lT(t,e,n){const i=new Map;Ee(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let o=0;o<n.length;o++){const s=t[o],r=s.transform,a=e.data.field(s.field);i.set(s.field,Fk(r,a,n[o]))}return i}function uT(t,e,n){const i=new Map;for(const o of t){const s=o.transform,r=n.data.field(o.field);i.set(o.field,Bk(s,r,e))}return i}class zR extends Df{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Jk extends Df{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(e,n,i,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const s=this.mutations[o];s.key.isEqual(e.key)&&Hk(s,e,i[o])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Ja(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Ja(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=UR();return this.mutations.forEach(o=>{const s=e.get(o.key),r=s.overlayedDocument;let a=this.applyToLocalView(r,s.mutatedFields);a=n.has(o.key)?null:a;const l=FR(r,a);l!==null&&i.set(o.key,l),r.isValidDocument()||r.convertToNoDocument(ee.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ce())}isEqual(e){return this.batchId===e.batchId&&Nr(this.mutations,e.mutations,(n,i)=>aT(n,i))&&Nr(this.baseMutations,e.baseMutations,(n,i)=>aT(n,i))}}class ag{constructor(e,n,i,o){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=o}static from(e,n,i){Ee(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=function(){return Uk}();const s=e.mutations;for(let r=0;r<s.length;r++)o=o.insert(s[r].key,i[r].version);return new ag(e,n,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var We,he;function Xk(t){switch(t){case G.OK:return W(64938);case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0;default:return W(15467,{code:t})}}function HR(t){if(t===void 0)return Oi("GRPC error has no .code"),G.UNKNOWN;switch(t){case We.OK:return G.OK;case We.CANCELLED:return G.CANCELLED;case We.UNKNOWN:return G.UNKNOWN;case We.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case We.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case We.INTERNAL:return G.INTERNAL;case We.UNAVAILABLE:return G.UNAVAILABLE;case We.UNAUTHENTICATED:return G.UNAUTHENTICATED;case We.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case We.NOT_FOUND:return G.NOT_FOUND;case We.ALREADY_EXISTS:return G.ALREADY_EXISTS;case We.PERMISSION_DENIED:return G.PERMISSION_DENIED;case We.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case We.ABORTED:return G.ABORTED;case We.OUT_OF_RANGE:return G.OUT_OF_RANGE;case We.UNIMPLEMENTED:return G.UNIMPLEMENTED;case We.DATA_LOSS:return G.DATA_LOSS;default:return W(39323,{code:t})}}(he=We||(We={}))[he.OK=0]="OK",he[he.CANCELLED=1]="CANCELLED",he[he.UNKNOWN=2]="UNKNOWN",he[he.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",he[he.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",he[he.NOT_FOUND=5]="NOT_FOUND",he[he.ALREADY_EXISTS=6]="ALREADY_EXISTS",he[he.PERMISSION_DENIED=7]="PERMISSION_DENIED",he[he.UNAUTHENTICATED=16]="UNAUTHENTICATED",he[he.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",he[he.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",he[he.ABORTED=10]="ABORTED",he[he.OUT_OF_RANGE=11]="OUT_OF_RANGE",he[he.UNIMPLEMENTED=12]="UNIMPLEMENTED",he[he.INTERNAL=13]="INTERNAL",he[he.UNAVAILABLE=14]="UNAVAILABLE",he[he.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk=new Ro([4294967295,4294967295],0);function cT(t){const e=Wk().encode(t),n=new rR;return n.update(e),new Uint8Array(n.digest())}function fT(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ro([n,i],0),new Ro([o,s],0)]}class lg{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Ra(`Invalid padding: ${n}`);if(i<0)throw new Ra(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ra(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Ra(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ro.fromNumber(this.ge)}ye(e,n,i){let o=e.add(n.multiply(Ro.fromNumber(i)));return o.compare(Zk)===1&&(o=new Ro([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=cT(e),[i,o]=fT(n);for(let s=0;s<this.hashCount;s++){const r=this.ye(i,o,s);if(!this.we(r))return!1}return!0}static create(e,n,i){const o=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),r=new lg(s,o,n);return i.forEach(a=>r.insert(a)),r}insert(e){if(this.ge===0)return;const n=cT(e),[i,o]=fT(n);for(let s=0;s<this.hashCount;s++){const r=this.ye(i,o,s);this.Se(r)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Ra extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e,n,i,o,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const o=new Map;return o.set(e,Ol.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Pf(ee.min(),o,new Fe(ue),qi(),ce())}}class Ol{constructor(e,n,i,o,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Ol(i,n,ce(),ce(),ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,n,i,o){this.be=e,this.removedTargetIds=n,this.key=i,this.De=o}}class YR{constructor(e,n){this.targetId=e,this.Ce=n}}class JR{constructor(e,n,i=Nt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=o}}class dT{constructor(){this.ve=0,this.Fe=hT(),this.Me=Nt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ce(),n=ce(),i=ce();return this.Fe.forEach((o,s)=>{switch(s){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:i=i.add(o);break;default:W(38017,{changeType:s})}}),new Ol(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=hT()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ee(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class jk{constructor(e){this.Ge=e,this.ze=new Map,this.je=qi(),this.Je=Au(),this.He=Au(),this.Ye=new Fe(ue)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:W(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((i,o)=>{this.rt(o)&&n(o)})}st(e){const n=e.targetId,i=e.Ce.count,o=this.ot(n);if(o){const s=o.target;if(gp(s))if(i===0){const r=new X(s.path);this.et(n,r,Lt.newNoDocument(r,ee.min()))}else Ee(i===1,20013,{expectedCount:i});else{const r=this._t(n);if(r!==i){const a=this.ut(e),l=a?this.ct(a,e,r):1;if(l!==0){this.it(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:s=0}=n;let r,a;try{r=Vo(i).toUint8Array()}catch(l){if(l instanceof yR)return xr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new lg(r,o,s)}catch(l){return xr(l instanceof Ra?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let o=0;return i.forEach(s=>{const r=this.Ge.ht(),a=`projects/${r.projectId}/databases/${r.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(n,s,null),o++)}),o}Tt(e){const n=new Map;this.ze.forEach((s,r)=>{const a=this.ot(r);if(a){if(s.current&&gp(a.target)){const l=new X(a.target.path);this.It(l).has(r)||this.Et(r,l)||this.et(r,l,Lt.newNoDocument(l,e))}s.Be&&(n.set(r,s.ke()),s.qe())}});let i=ce();this.He.forEach((s,r)=>{let a=!0;r.forEachWhile(l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.je.forEach((s,r)=>r.setReadTime(e));const o=new Pf(e,n,this.Ye,this.je,i);return this.je=qi(),this.Je=Au(),this.He=Au(),this.Ye=new Fe(ue),o}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new dT,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new ft(ue),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new ft(ue),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||J("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new dT),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Au(){return new Fe(X.comparator)}function hT(){return new Fe(X.comparator)}const e6={asc:"ASCENDING",desc:"DESCENDING"},t6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},n6={and:"AND",or:"OR"};class i6{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function vp(t,e){return t.useProto3Json||wf(e)?e:{value:e}}function Fc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function KR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function o6(t,e){return Fc(t,e.toTimestamp())}function ai(t){return Ee(!!t,49232),ee.fromTimestamp(function(n){const i=Po(n);return new Ue(i.seconds,i.nanos)}(t))}function ug(t,e){return _p(t,e).canonicalString()}function _p(t,e){const n=function(o){return new Be(["projects",o.projectId,"databases",o.database])}(t).child("documents");return e===void 0?n:n.child(e)}function $R(t){const e=Be.fromString(t);return Ee(jR(e),10190,{key:e.toString()}),e}function Ep(t,e){return ug(t.databaseId,e.path)}function Jd(t,e){const n=$R(e);if(n.get(1)!==t.databaseId.projectId)throw new $(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new $(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new X(XR(n))}function QR(t,e){return ug(t.databaseId,e)}function s6(t){const e=$R(t);return e.length===4?Be.emptyPath():XR(e)}function Tp(t){return new Be(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function XR(t){return Ee(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function pT(t,e,n){return{name:Ep(t,e),fields:n.value.mapValue.fields}}function r6(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:W(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(Ee(h===void 0||typeof h=="string",58123),Nt.fromBase64String(h||"")):(Ee(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Nt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),r=e.targetChange.cause,a=r&&function(c){const h=c.code===void 0?G.UNKNOWN:HR(c.code);return new $(h,c.message||"")}(r);n=new JR(i,o,s,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Jd(t,i.document.name),s=ai(i.document.updateTime),r=i.document.createTime?ai(i.document.createTime):ee.min(),a=new Mn({mapValue:{fields:i.document.fields}}),l=Lt.newFoundDocument(o,s,r,a),c=i.targetIds||[],h=i.removedTargetIds||[];n=new Ku(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Jd(t,i.document),s=i.readTime?ai(i.readTime):ee.min(),r=Lt.newNoDocument(o,s),a=i.removedTargetIds||[];n=new Ku([],a,r.key,r)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Jd(t,i.document),s=i.removedTargetIds||[];n=new Ku([],s,o,null)}else{if(!("filter"in e))return W(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:s}=i,r=new Qk(o,s),a=i.targetId;n=new YR(a,r)}}return n}function a6(t,e){let n;if(e instanceof kl)n={update:pT(t,e.key,e.value)};else if(e instanceof zR)n={delete:Ep(t,e.key)};else if(e instanceof Ms)n={update:pT(t,e.key,e.data),updateMask:g6(e.fieldMask)};else{if(!(e instanceof Jk))return W(16599,{Vt:e.type});n={verify:Ep(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,r){const a=r.transform;if(a instanceof qc)return{fieldPath:r.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof vl)return{fieldPath:r.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof _l)return{fieldPath:r.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Bc)return{fieldPath:r.field.canonicalString(),increment:a.Ae};throw W(20930,{transform:r.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(o,s){return s.updateTime!==void 0?{updateTime:o6(o,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:W(27497)}(t,e.precondition)),n}function l6(t,e){return t&&t.length>0?(Ee(e!==void 0,14353),t.map(n=>function(o,s){let r=o.updateTime?ai(o.updateTime):ai(s);return r.isEqual(ee.min())&&(r=ai(s)),new zk(r,o.transformResults||[])}(n,e))):[]}function u6(t,e){return{documents:[QR(t,e.path)]}}function c6(t,e){const n={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=QR(t,o);const s=function(c){if(c.length!==0)return ZR(fi.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const r=function(c){if(c.length!==0)return c.map(h=>function(m){return{field:zs(m.field),direction:h6(m.dir)}}(h))}(e.orderBy);r&&(n.structuredQuery.orderBy=r);const a=vp(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:o}}function f6(t){let e=s6(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let o=null;if(i>0){Ee(i===1,65062);const h=n.from[0];h.allDescendants?o=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(p){const m=WR(p);return m instanceof fi&&IR(m)?m.getFilters():[m]}(n.where));let r=[];n.orderBy&&(r=function(p){return p.map(m=>function(b){return new Oc(Hs(b.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,wf(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(p){const m=!!p.before,y=p.values||[];return new kc(y,m)}(n.startAt));let c=null;return n.endAt&&(c=function(p){const m=!p.before,y=p.values||[];return new kc(y,m)}(n.endAt)),xk(e,o,r,s,a,"F",l,c)}function d6(t,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return W(28987,{purpose:o})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function WR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Hs(n.unaryFilter.field);return ct.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Hs(n.unaryFilter.field);return ct.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Hs(n.unaryFilter.field);return ct.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Hs(n.unaryFilter.field);return ct.create(r,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return W(61313);default:return W(60726)}}(t):t.fieldFilter!==void 0?function(n){return ct.create(Hs(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return W(58110);default:return W(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return fi.create(n.compositeFilter.filters.map(i=>WR(i)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return W(1026)}}(n.compositeFilter.op))}(t):W(30097,{filter:t})}function h6(t){return e6[t]}function p6(t){return t6[t]}function m6(t){return n6[t]}function zs(t){return{fieldPath:t.canonicalString()}}function Hs(t){return It.fromServerFormat(t.fieldPath)}function ZR(t){return t instanceof ct?function(n){if(n.op==="=="){if(tT(n.value))return{unaryFilter:{field:zs(n.field),op:"IS_NAN"}};if(eT(n.value))return{unaryFilter:{field:zs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(tT(n.value))return{unaryFilter:{field:zs(n.field),op:"IS_NOT_NAN"}};if(eT(n.value))return{unaryFilter:{field:zs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zs(n.field),op:p6(n.op),value:n.value}}}(t):t instanceof fi?function(n){const i=n.getFilters().map(o=>ZR(o));return i.length===1?i[0]:{compositeFilter:{op:m6(n.op),filters:i}}}(t):W(54877,{filter:t})}function g6(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function jR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e,n,i,o,s=ee.min(),r=ee.min(),a=Nt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=r,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ho(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ho(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ho(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ho(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y6{constructor(e){this.yt=e}}function v6(t){const e=f6({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?yp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _6{constructor(){this.Cn=new E6}addToCollectionParentIndex(e,n){return this.Cn.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(Do.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(Do.min())}updateCollectionGroup(e,n,i){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class E6{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n]||new ft(Be.comparator),s=!o.has(i);return this.index[n]=o.add(i),s}has(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n];return o&&o.has(i)}getEntries(e){return(this.index[e]||new ft(Be.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ew=41943040;class Wt{static withCacheSize(e){return new Wt(e,Wt.DEFAULT_COLLECTION_PERCENTILE,Wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wt.DEFAULT_COLLECTION_PERCENTILE=10,Wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wt.DEFAULT=new Wt(ew,Wt.DEFAULT_COLLECTION_PERCENTILE,Wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wt.DISABLED=new Wt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Pr(0)}static cr(){return new Pr(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT="LruGarbageCollector",T6=1048576;function yT([t,e],[n,i]){const o=ue(t,n);return o===0?ue(e,i):o}class S6{constructor(e){this.Ir=e,this.buffer=new ft(yT),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();yT(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class A6{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){J(gT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){$r(n)?J(gT,"Ignoring IndexedDB error during garbage collection: ",n):await Kr(n)}await this.Vr(3e5)})}}class C6{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return F.resolve(Rf.ce);const i=new S6(n);return this.mr.forEachTarget(e,o=>i.Ar(o.sequenceNumber)).next(()=>this.mr.pr(e,o=>i.Ar(o))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(J("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(mT)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(J("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),mT):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,o,s,r,a,l,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(J("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),o=this.params.maximumSequenceNumbersToCollect):o=p,r=Date.now(),this.nthSequenceNumber(e,o))).next(p=>(i=p,a=Date.now(),this.removeTargets(e,i,n))).next(p=>(s=p,l=Date.now(),this.removeOrphanedDocuments(e,i))).next(p=>(c=Date.now(),Fs()<=pe.DEBUG&&J("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${r-h}ms
	Determined least recently used ${o} in `+(a-r)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${p} documents in `+(c-l)+`ms
Total Duration: ${c-h}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:s,documentsRemoved:p})))}}function R6(t,e){return new C6(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(){this.changes=new Ns(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Lt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?F.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I6{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6{constructor(e,n,i,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(i=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(i!==null&&Ja(i.mutation,o,Fn.empty(),Ue.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,ce()).next(()=>i))}getLocalViewOfDocuments(e,n,i=ce()){const o=rs();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,i).next(s=>{let r=Ca();return s.forEach((a,l)=>{r=r.insert(a,l.overlayedDocument)}),r}))}getOverlayedDocuments(e,n){const i=rs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,ce()))}populateOverlays(e,n,i){const o=[];return i.forEach(s=>{n.has(s)||o.push(s)}),this.documentOverlayCache.getOverlays(e,o).next(s=>{s.forEach((r,a)=>{n.set(r,a)})})}computeViews(e,n,i,o){let s=qi();const r=Ya(),a=function(){return Ya()}();return n.forEach((l,c)=>{const h=i.get(c.key);o.has(c.key)&&(h===void 0||h.mutation instanceof Ms)?s=s.insert(c.key,c):h!==void 0?(r.set(c.key,h.mutation.getFieldMask()),Ja(h.mutation,c,h.mutation.getFieldMask(),Ue.now())):r.set(c.key,Fn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>r.set(c,h)),n.forEach((c,h)=>a.set(c,new I6(h,r.get(c)??null))),a))}recalculateAndSaveOverlays(e,n){const i=Ya();let o=new Fe((r,a)=>r-a),s=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(r=>{for(const a of r)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=i.get(l)||Fn.empty();h=a.applyToLocalView(c,h),i.set(l,h);const p=(o.get(a.batchId)||ce()).add(l);o=o.insert(a.batchId,p)})}).next(()=>{const r=[],a=o.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,p=UR();h.forEach(m=>{if(!s.has(m)){const y=FR(n.get(m),i.get(m));y!==null&&p.set(m,y),s=s.add(m)}}),r.push(this.documentOverlayCache.saveOverlays(e,c,p))}return F.waitFor(r)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,o){return function(r){return X.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Nk(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,o):this.getDocumentsMatchingCollectionQuery(e,n,i,o)}getNextDocuments(e,n,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,o).next(s=>{const r=o-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,o-s.size):F.resolve(rs());let a=pl,l=s;return r.next(c=>F.forEach(c,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?F.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{l=l.insert(h,m)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,ce())).next(h=>({batchId:a,changes:VR(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new X(n)).next(i=>{let o=Ca();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,i,o){const s=n.collectionGroup;let r=Ca();return this.indexManager.getCollectionParents(e,s).next(a=>F.forEach(a,l=>{const c=function(p,m){return new bf(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,i,o).next(h=>{h.forEach((p,m)=>{r=r.insert(p,m)})})}).next(()=>r))}getDocumentsMatchingCollectionQuery(e,n,i,o){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(r=>(s=r,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,o))).next(r=>{s.forEach((l,c)=>{const h=c.getKey();r.get(h)===null&&(r=r.insert(h,Lt.newInvalidDocument(h)))});let a=Ca();return r.forEach((l,c)=>{const h=s.get(l);h!==void 0&&Ja(h.mutation,c,Fn.empty(),Ue.now()),Nf(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x6{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return F.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:ai(o.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(o){return{name:o.name,query:v6(o.bundledQuery),readTime:ai(o.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N6{constructor(){this.overlays=new Fe(X.comparator),this.qr=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const i=rs();return F.forEach(n,o=>this.getOverlay(e,o).next(s=>{s!==null&&i.set(o,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((o,s)=>{this.St(e,n,s)}),F.resolve()}removeOverlaysForBatchId(e,n,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(i)),F.resolve()}getOverlaysForCollection(e,n,i){const o=rs(),s=n.length+1,r=new X(n.child("")),a=this.overlays.getIteratorFrom(r);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>i&&o.set(l.getKey(),l)}return F.resolve(o)}getOverlaysForCollectionGroup(e,n,i,o){let s=new Fe((c,h)=>c-h);const r=this.overlays.getIterator();for(;r.hasNext();){const c=r.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>i){let h=s.get(c.largestBatchId);h===null&&(h=rs(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=rs(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=o)););return F.resolve(a)}St(e,n,i){const o=this.overlays.get(i.key);if(o!==null){const r=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,r)}this.overlays=this.overlays.insert(i.key,new $k(n,i));let s=this.qr.get(n);s===void 0&&(s=ce(),this.qr.set(n,s)),this.qr.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6{constructor(){this.sessionToken=Nt.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(){this.Qr=new ft(pt.$r),this.Ur=new ft(pt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new pt(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Gr(new pt(e,n))}zr(e,n){e.forEach(i=>this.removeReference(i,n))}jr(e){const n=new X(new Be([])),i=new pt(n,e),o=new pt(n,e+1),s=[];return this.Ur.forEachInRange([i,o],r=>{this.Gr(r),s.push(r.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new X(new Be([])),i=new pt(n,e),o=new pt(n,e+1);let s=ce();return this.Ur.forEachInRange([i,o],r=>{s=s.add(r.key)}),s}containsKey(e){const n=new pt(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class pt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return X.comparator(e.key,n.key)||ue(e.Yr,n.Yr)}static Kr(e,n){return ue(e.Yr,n.Yr)||X.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D6{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ft(pt.$r)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,o){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const r=new Kk(s,n,i,o);this.mutationQueue.push(r);for(const a of o)this.Zr=this.Zr.add(new pt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return F.resolve(r)}lookupMutationBatch(e,n){return F.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,o=this.ei(i),s=o<0?0:o;return F.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?eg:this.tr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new pt(n,0),o=new pt(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([i,o],r=>{const a=this.Xr(r.Yr);s.push(a)}),F.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new ft(ue);return n.forEach(o=>{const s=new pt(o,0),r=new pt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,r],a=>{i=i.add(a.Yr)})}),F.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,o=i.length+1;let s=i;X.isDocumentKey(s)||(s=s.child(""));const r=new pt(new X(s),0);let a=new ft(ue);return this.Zr.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===o&&(a=a.add(l.Yr)),!0)},r),F.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(i=>{const o=this.Xr(i);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){Ee(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return F.forEach(n.mutations,o=>{const s=new pt(o.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Zr=i})}ir(e){}containsKey(e,n){const i=new pt(n,0),o=this.Zr.firstAfterOrEqual(i);return F.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P6{constructor(e){this.ri=e,this.docs=function(){return new Fe(X.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,o=this.docs.get(i),s=o?o.size:0,r=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:r}),this.size+=r-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return F.resolve(i?i.document.mutableCopy():Lt.newInvalidDocument(n))}getEntries(e,n){let i=qi();return n.forEach(o=>{const s=this.docs.get(o);i=i.insert(o,s?s.document.mutableCopy():Lt.newInvalidDocument(o))}),F.resolve(i)}getDocumentsMatchingQuery(e,n,i,o){let s=qi();const r=n.path,a=new X(r.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!r.isPrefixOf(c.path))break;c.path.length>r.length+1||ak(rk(h),i)<=0||(o.has(h.key)||Nf(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return F.resolve(s)}getAllFromCollectionGroup(e,n,i,o){W(9500)}ii(e,n){return F.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new V6(this)}getSize(e){return F.resolve(this.size)}}class V6 extends w6{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((i,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)}),F.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U6{constructor(e){this.persistence=e,this.si=new Ns(n=>ig(n),og),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.oi=0,this._i=new cg,this.targetCount=0,this.ai=Pr.ur()}forEachTarget(e,n){return this.si.forEach((i,o)=>n(o)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),F.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Pr(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Pr(n),F.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,i){let o=0;const s=[];return this.si.forEach((r,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.si.delete(r),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),o++)}),F.waitFor(s).next(()=>o)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return F.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),F.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const o=this.persistence.referenceDelegate,s=[];return o&&n.forEach(r=>{s.push(o.markPotentiallyOrphaned(e,r))}),F.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return F.resolve(i)}containsKey(e,n){return F.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(e,n){this.ui={},this.overlays={},this.ci=new Rf(0),this.li=!1,this.li=!0,this.hi=new M6,this.referenceDelegate=e(this),this.Pi=new U6(this),this.indexManager=new _6,this.remoteDocumentCache=function(o){return new P6(o)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new y6(n),this.Ii=new x6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new N6,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new D6(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){J("MemoryPersistence","Starting transaction:",e);const o=new L6(this.ci.next());return this.referenceDelegate.Ei(),i(o).next(s=>this.referenceDelegate.di(o).next(()=>s)).toPromise().then(s=>(o.raiseOnCommittedEvent(),s))}Ai(e,n){return F.or(Object.values(this.ui).map(i=>()=>i.containsKey(e,n)))}}class L6 extends uk{constructor(e){super(),this.currentSequenceNumber=e}}class fg{constructor(e){this.persistence=e,this.Ri=new cg,this.Vi=null}static mi(e){return new fg(e)}get fi(){if(this.Vi)return this.Vi;throw W(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),F.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),F.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(o=>this.fi.add(o.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(s=>this.fi.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.fi,i=>{const o=X.fromPath(i);return this.gi(e,o).next(s=>{s||n.removeEntry(o,ee.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return F.or([()=>F.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Gc{constructor(e,n){this.persistence=e,this.pi=new Ns(i=>dk(i.path),(i,o)=>i.isEqual(o)),this.garbageCollector=R6(this,n)}static mi(e,n){return new Gc(e,n)}Ei(){}di(e){return F.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(o=>i+o))}wr(e){let n=0;return this.pr(e,i=>{n++}).next(()=>n)}pr(e,n){return F.forEach(this.pi,(i,o)=>this.br(e,i,o).next(s=>s?F.resolve():n(o)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const o=this.persistence.getRemoteDocumentCache(),s=o.newChangeBuffer();return o.ii(e,r=>this.br(e,r,n).next(a=>{a||(i++,s.removeEntry(r,ee.min()))})).next(()=>s.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),F.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),F.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),F.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Hu(e.data.value)),n}br(e,n,i){return F.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return F.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e,n,i,o){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=o}static As(e,n){let i=ce(),o=ce();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:o=o.add(s.doc.key)}return new dg(e,n.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return r4()?8:ck(i4())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,o){const s={result:null};return this.ys(e,n).next(r=>{s.result=r}).next(()=>{if(!s.result)return this.ws(e,n,o,i).next(r=>{s.result=r})}).next(()=>{if(s.result)return;const r=new k6;return this.Ss(e,n,r).next(a=>{if(s.result=a,this.Vs)return this.bs(e,n,r,a.size)})}).next(()=>s.result)}bs(e,n,i,o){return i.documentReadCount<this.fs?(Fs()<=pe.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",Gs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),F.resolve()):(Fs()<=pe.DEBUG&&J("QueryEngine","Query:",Gs(n),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(Fs()<=pe.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",Gs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ri(n))):F.resolve())}ys(e,n){if(sT(n))return F.resolve(null);let i=ri(n);return this.indexManager.getIndexType(e,i).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=yp(n,null,"F"),i=ri(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const r=ce(...s);return this.ps.getDocuments(e,r).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{const c=this.Ds(n,a);return this.Cs(n,c,r,l.readTime)?this.ys(e,yp(n,null,"F")):this.vs(e,c,n,l)}))})))}ws(e,n,i,o){return sT(n)||o.isEqual(ee.min())?F.resolve(null):this.ps.getDocuments(e,i).next(s=>{const r=this.Ds(n,s);return this.Cs(n,r,i,o)?F.resolve(null):(Fs()<=pe.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Gs(n)),this.vs(e,r,n,sk(o,pl)).next(a=>a))})}Ds(e,n){let i=new ft(DR(e));return n.forEach((o,s)=>{Nf(e,s)&&(i=i.add(s))}),i}Cs(e,n,i,o){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(o)>0)}Ss(e,n,i){return Fs()<=pe.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",Gs(n)),this.ps.getDocumentsMatchingQuery(e,n,Do.min(),i)}vs(e,n,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next(s=>(n.forEach(r=>{s=s.insert(r.key,r)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hg="LocalStore",q6=3e8;class B6{constructor(e,n,i,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new Fe(ue),this.xs=new Ns(s=>ig(s),og),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new b6(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function F6(t,e,n,i){return new B6(t,e,n,i)}async function nw(t,e){const n=te(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let o;return n.mutationQueue.getAllMutationBatches(i).next(s=>(o=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const r=[],a=[];let l=ce();for(const c of o){r.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(i,l).next(c=>({Ls:c,removedBatchIds:r,addedBatchIds:a}))})})}function G6(t,e){const n=te(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const o=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const p=c.batch,m=p.keys();let y=F.resolve();return m.forEach(b=>{y=y.next(()=>h.getEntry(l,b)).next(x=>{const P=c.docVersions.get(b);Ee(P!==null,48541),x.version.compareTo(P)<0&&(p.applyToRemoteDocument(x,c),x.isValidDocument()&&(x.setReadTime(c.commitVersion),h.addEntry(x)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,p))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=ce();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(i,o))})}function iw(t){const e=te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function z6(t,e){const n=te(t),i=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const r=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const a=[];e.targetChanges.forEach((h,p)=>{const m=o.get(p);if(!m)return;a.push(n.Pi.removeMatchingKeys(s,h.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(s,h.addedDocuments,p)));let y=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(Nt.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,i)),o=o.insert(p,y),function(x,P,R){return x.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=q6?!0:R.addedDocuments.size+R.modifiedDocuments.size+R.removedDocuments.size>0}(m,y,h)&&a.push(n.Pi.updateTargetData(s,y))});let l=qi(),c=ce();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(H6(s,r,e.documentUpdates).next(h=>{l=h.ks,c=h.qs})),!i.isEqual(ee.min())){const h=n.Pi.getLastRemoteSnapshotVersion(s).next(p=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(h)}return F.waitFor(a).next(()=>r.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.Ms=o,s))}function H6(t,e,n){let i=ce(),o=ce();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let r=qi();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(o=o.add(a)),l.isNoDocument()&&l.version.isEqual(ee.min())?(e.removeEntry(a,l.readTime),r=r.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),r=r.insert(a,l)):J(hg,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{ks:r,qs:o}})}function Y6(t,e){const n=te(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=eg),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function J6(t,e){const n=te(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let o;return n.Pi.getTargetData(i,e).next(s=>s?(o=s,F.resolve(o)):n.Pi.allocateTargetId(i).next(r=>(o=new ho(e,r,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,o).next(()=>o))))}).then(i=>{const o=n.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i})}async function Sp(t,e,n){const i=te(t),o=i.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,r=>i.persistence.referenceDelegate.removeTarget(r,o))}catch(r){if(!$r(r))throw r;J(hg,`Failed to update sequence numbers for target ${e}: ${r}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function vT(t,e,n){const i=te(t);let o=ee.min(),s=ce();return i.persistence.runTransaction("Execute query","readwrite",r=>function(l,c,h){const p=te(l),m=p.xs.get(h);return m!==void 0?F.resolve(p.Ms.get(m)):p.Pi.getTargetData(c,h)}(i,r,ri(e)).next(a=>{if(a)return o=a.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(r,a.targetId).next(l=>{s=l})}).next(()=>i.Fs.getDocumentsMatchingQuery(r,e,n?o:ee.min(),n?s:ce())).next(a=>(K6(i,Dk(e),a),{documents:a,Qs:s})))}function K6(t,e,n){let i=t.Os.get(e)||ee.min();n.forEach((o,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.Os.set(e,i)}class _T{constructor(){this.activeTargetIds=Ok()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $6{constructor(){this.Mo=new _T,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new _T,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET="ConnectivityMonitor";class TT{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){J(ET,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){J(ET,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cu=null;function Ap(){return Cu===null?Cu=function(){return 268435456+Math.round(2147483648*Math.random())}():Cu++,"0x"+Cu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kd="RestConnection",X6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class W6{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===Uc?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,n,i,o,s){const r=Ap(),a=this.zo(e,n.toUriEncodedString());J(Kd,`Sending RPC '${e}' ${r}:`,a,i);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,o,s);const{host:c}=new URL(a),h=Gm(c);return this.Jo(e,a,l,i,h).then(p=>(J(Kd,`Received RPC '${e}' ${r}: `,p),p),p=>{throw xr(Kd,`RPC '${e}' ${r} failed with error: `,p,"url: ",a,"request:",i),p})}Ho(e,n,i,o,s,r){return this.Go(e,n,i,o,s)}jo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Jr}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,s)=>e[s]=o),i&&i.headers.forEach((o,s)=>e[s]=o)}zo(e,n){const i=X6[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vt="WebChannelConnection";class j6 extends W6{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,o,s){const r=Ap();return new Promise((a,l)=>{const c=new aR;c.setWithCredentials(!0),c.listenOnce(lR.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case zu.NO_ERROR:const p=c.getResponseJson();J(Vt,`XHR for RPC '${e}' ${r} received:`,JSON.stringify(p)),a(p);break;case zu.TIMEOUT:J(Vt,`RPC '${e}' ${r} timed out`),l(new $(G.DEADLINE_EXCEEDED,"Request time out"));break;case zu.HTTP_ERROR:const m=c.getStatus();if(J(Vt,`RPC '${e}' ${r} failed with status:`,m,"response text:",c.getResponseText()),m>0){let y=c.getResponseJson();Array.isArray(y)&&(y=y[0]);const b=y==null?void 0:y.error;if(b&&b.status&&b.message){const x=function(R){const E=R.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(E)>=0?E:G.UNKNOWN}(b.status);l(new $(x,b.message))}else l(new $(G.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new $(G.UNAVAILABLE,"Connection failed."));break;default:W(9055,{l_:e,streamId:r,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{J(Vt,`RPC '${e}' ${r} completed.`)}});const h=JSON.stringify(o);J(Vt,`RPC '${e}' ${r} sending request:`,o),c.send(n,"POST",h,i,15)})}T_(e,n,i){const o=Ap(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=fR(),a=cR(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;const h=s.join("");J(Vt,`Creating RPC '${e}' stream ${o}: ${h}`,l);const p=r.createWebChannel(h,l);this.I_(p);let m=!1,y=!1;const b=new Z6({Yo:P=>{y?J(Vt,`Not sending because RPC '${e}' stream ${o} is closed:`,P):(m||(J(Vt,`Opening RPC '${e}' stream ${o} transport.`),p.open(),m=!0),J(Vt,`RPC '${e}' stream ${o} sending:`,P),p.send(P))},Zo:()=>p.close()}),x=(P,R,E)=>{P.listen(R,w=>{try{E(w)}catch(D){setTimeout(()=>{throw D},0)}})};return x(p,Aa.EventType.OPEN,()=>{y||(J(Vt,`RPC '${e}' stream ${o} transport opened.`),b.o_())}),x(p,Aa.EventType.CLOSE,()=>{y||(y=!0,J(Vt,`RPC '${e}' stream ${o} transport closed`),b.a_(),this.E_(p))}),x(p,Aa.EventType.ERROR,P=>{y||(y=!0,xr(Vt,`RPC '${e}' stream ${o} transport errored. Name:`,P.name,"Message:",P.message),b.a_(new $(G.UNAVAILABLE,"The operation could not be completed")))}),x(p,Aa.EventType.MESSAGE,P=>{var R;if(!y){const E=P.data[0];Ee(!!E,16349);const w=E,D=(w==null?void 0:w.error)||((R=w[0])==null?void 0:R.error);if(D){J(Vt,`RPC '${e}' stream ${o} received error:`,D);const O=D.status;let q=function(A){const I=We[A];if(I!==void 0)return HR(I)}(O),T=D.message;q===void 0&&(q=G.INTERNAL,T="Unknown error status: "+O+" with message "+D.message),y=!0,b.a_(new $(q,T)),p.close()}else J(Vt,`RPC '${e}' stream ${o} received:`,E),b.u_(E)}}),x(a,uR.STAT_EVENT,P=>{P.stat===fp.PROXY?J(Vt,`RPC '${e}' stream ${o} detected buffering proxy`):P.stat===fp.NOPROXY&&J(Vt,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{b.__()},0),b}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function $d(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vf(t){return new i6(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(e,n,i=1e3,o=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=o,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-i);o>0&&J("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST="PersistentStream";class sw{constructor(e,n,i,o,s,r,a,l){this.Mi=e,this.S_=i,this.b_=o,this.connection=s,this.authCredentialsProvider=r,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ow(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===G.RESOURCE_EXHAUSTED?(Oi(n.toString()),Oi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,o])=>{this.D_===n&&this.G_(i,o)},i=>{e(()=>{const o=new $(G.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)})})}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(o=>{i(()=>this.z_(o))}),this.stream.onMessage(o=>{i(()=>++this.F_==1?this.J_(o):this.onNext(o))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return J(ST,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(J(ST,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class e3 extends sw{constructor(e,n,i,o,s,r){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,o,r),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=r6(this.serializer,e),i=function(s){if(!("targetChange"in s))return ee.min();const r=s.targetChange;return r.targetIds&&r.targetIds.length?ee.min():r.readTime?ai(r.readTime):ee.min()}(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=Tp(this.serializer),n.addTarget=function(s,r){let a;const l=r.target;if(a=gp(l)?{documents:u6(s,l)}:{query:c6(s,l).ft},a.targetId=r.targetId,r.resumeToken.approximateByteSize()>0){a.resumeToken=KR(s,r.resumeToken);const c=vp(s,r.expectedCount);c!==null&&(a.expectedCount=c)}else if(r.snapshotVersion.compareTo(ee.min())>0){a.readTime=Fc(s,r.snapshotVersion.toTimestamp());const c=vp(s,r.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const i=d6(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=Tp(this.serializer),n.removeTarget=e,this.q_(n)}}class t3 extends sw{constructor(e,n,i,o,s,r){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,o,r),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ee(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ee(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ee(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=l6(e.writeResults,e.commitTime),i=ai(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=Tp(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>a6(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3{}class i3 extends n3{constructor(e,n,i,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new $(G.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,r])=>this.connection.Go(e,_p(n,i),o,s,r)).catch(s=>{throw s.name==="FirebaseError"?(s.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new $(G.UNKNOWN,s.toString())})}Ho(e,n,i,o,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,a])=>this.connection.Ho(e,_p(n,i),o,r,a,s)).catch(r=>{throw r.name==="FirebaseError"?(r.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new $(G.UNKNOWN,r.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class o3{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Oi(n),this.aa=!1):J("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss="RemoteStore";class s3{constructor(e,n,i,o,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(r=>{i.enqueueAndForget(async()=>{Ds(this)&&(J(Ss,"Restarting streams for network reachability change."),await async function(l){const c=te(l);c.Ea.add(4),await ql(c),c.Ra.set("Unknown"),c.Ea.delete(4),await Uf(c)}(this))})}),this.Ra=new o3(i,o)}}async function Uf(t){if(Ds(t))for(const e of t.da)await e(!0)}async function ql(t){for(const e of t.da)await e(!1)}function rw(t,e){const n=te(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),yg(n)?gg(n):Qr(n).O_()&&mg(n,e))}function pg(t,e){const n=te(t),i=Qr(n);n.Ia.delete(e),i.O_()&&aw(n,e),n.Ia.size===0&&(i.O_()?i.L_():Ds(n)&&n.Ra.set("Unknown"))}function mg(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Qr(t).Y_(e)}function aw(t,e){t.Va.Ue(e),Qr(t).Z_(e)}function gg(t){t.Va=new jk({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Qr(t).start(),t.Ra.ua()}function yg(t){return Ds(t)&&!Qr(t).x_()&&t.Ia.size>0}function Ds(t){return te(t).Ea.size===0}function lw(t){t.Va=void 0}async function r3(t){t.Ra.set("Online")}async function a3(t){t.Ia.forEach((e,n)=>{mg(t,e)})}async function l3(t,e){lw(t),yg(t)?(t.Ra.ha(e),gg(t)):t.Ra.set("Unknown")}async function u3(t,e,n){if(t.Ra.set("Online"),e instanceof JR&&e.state===2&&e.cause)try{await async function(o,s){const r=s.cause;for(const a of s.targetIds)o.Ia.has(a)&&(await o.remoteSyncer.rejectListen(a,r),o.Ia.delete(a),o.Va.removeTarget(a))}(t,e)}catch(i){J(Ss,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await zc(t,i)}else if(e instanceof Ku?t.Va.Ze(e):e instanceof YR?t.Va.st(e):t.Va.tt(e),!n.isEqual(ee.min()))try{const i=await iw(t.localStore);n.compareTo(i)>=0&&await function(s,r){const a=s.Va.Tt(r);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.Ia.get(c);h&&s.Ia.set(c,h.withResumeToken(l.resumeToken,r))}}),a.targetMismatches.forEach((l,c)=>{const h=s.Ia.get(l);if(!h)return;s.Ia.set(l,h.withResumeToken(Nt.EMPTY_BYTE_STRING,h.snapshotVersion)),aw(s,l);const p=new ho(h.target,l,c,h.sequenceNumber);mg(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(i){J(Ss,"Failed to raise snapshot:",i),await zc(t,i)}}async function zc(t,e,n){if(!$r(e))throw e;t.Ea.add(1),await ql(t),t.Ra.set("Offline"),n||(n=()=>iw(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{J(Ss,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Uf(t)})}function uw(t,e){return e().catch(n=>zc(t,n,e))}async function Lf(t){const e=te(t),n=Lo(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:eg;for(;c3(e);)try{const o=await Y6(e.localStore,i);if(o===null){e.Ta.length===0&&n.L_();break}i=o.batchId,f3(e,o)}catch(o){await zc(e,o)}cw(e)&&fw(e)}function c3(t){return Ds(t)&&t.Ta.length<10}function f3(t,e){t.Ta.push(e);const n=Lo(t);n.O_()&&n.X_&&n.ea(e.mutations)}function cw(t){return Ds(t)&&!Lo(t).x_()&&t.Ta.length>0}function fw(t){Lo(t).start()}async function d3(t){Lo(t).ra()}async function h3(t){const e=Lo(t);for(const n of t.Ta)e.ea(n.mutations)}async function p3(t,e,n){const i=t.Ta.shift(),o=ag.from(i,e,n);await uw(t,()=>t.remoteSyncer.applySuccessfulWrite(o)),await Lf(t)}async function m3(t,e){e&&Lo(t).X_&&await async function(i,o){if(function(r){return Xk(r)&&r!==G.ABORTED}(o.code)){const s=i.Ta.shift();Lo(i).B_(),await uw(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,o)),await Lf(i)}}(t,e),cw(t)&&fw(t)}async function AT(t,e){const n=te(t);n.asyncQueue.verifyOperationInProgress(),J(Ss,"RemoteStore received new credentials");const i=Ds(n);n.Ea.add(3),await ql(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Uf(n)}async function g3(t,e){const n=te(t);e?(n.Ea.delete(2),await Uf(n)):e||(n.Ea.add(2),await ql(n),n.Ra.set("Unknown"))}function Qr(t){return t.ma||(t.ma=function(n,i,o){const s=te(n);return s.sa(),new e3(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,o)}(t.datastore,t.asyncQueue,{Xo:r3.bind(null,t),t_:a3.bind(null,t),r_:l3.bind(null,t),H_:u3.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),yg(t)?gg(t):t.Ra.set("Unknown")):(await t.ma.stop(),lw(t))})),t.ma}function Lo(t){return t.fa||(t.fa=function(n,i,o){const s=te(n);return s.sa(),new t3(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,o)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:d3.bind(null,t),r_:m3.bind(null,t),ta:h3.bind(null,t),na:p3.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Lf(t)):(await t.fa.stop(),t.Ta.length>0&&(J(Ss,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e,n,i,o,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=o,this.removalCallback=s,this.deferred=new wo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(r=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,o,s){const r=Date.now()+i,a=new vg(e,n,r,o,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _g(t,e){if(Oi("AsyncQueue",`${e}: ${t}`),$r(t))return new $(G.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{static emptySet(e){return new gr(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||X.comparator(n.key,i.key):(n,i)=>X.comparator(n.key,i.key),this.keyedMap=Ca(),this.sortedSet=new Fe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof gr)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,s=i.getNext().key;if(!o.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new gr;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(){this.ga=new Fe(X.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):W(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,i)=>{e.push(i)}),e}}class Vr{constructor(e,n,i,o,s,r,a,l,c){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=s,this.fromCache=r,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,i,o,s){const r=[];return n.forEach(a=>{r.push({type:0,doc:a})}),new Vr(e,n,gr.emptySet(n),r,i,o,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==i[o].type||!n[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y3{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class v3{constructor(){this.queries=RT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const o=te(n),s=o.queries;o.queries=RT(),s.forEach((r,a)=>{for(const l of a.Sa)l.onError(i)})})(this,new $(G.ABORTED,"Firestore shutting down"))}}function RT(){return new Ns(t=>MR(t),xf)}async function _3(t,e){const n=te(t);let i=3;const o=e.query;let s=n.queries.get(o);s?!s.ba()&&e.Da()&&(i=2):(s=new y3,i=e.Da()?0:1);try{switch(i){case 0:s.wa=await n.onListen(o,!0);break;case 1:s.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(r){const a=_g(r,`Initialization of query '${Gs(e.query)}' failed`);return void e.onError(a)}n.queries.set(o,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&Eg(n)}async function E3(t,e){const n=te(t),i=e.query;let o=3;const s=n.queries.get(i);if(s){const r=s.Sa.indexOf(e);r>=0&&(s.Sa.splice(r,1),s.Sa.length===0?o=e.Da()?0:1:!s.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function T3(t,e){const n=te(t);let i=!1;for(const o of e){const s=o.query,r=n.queries.get(s);if(r){for(const a of r.Sa)a.Fa(o)&&(i=!0);r.wa=o}}i&&Eg(n)}function S3(t,e,n){const i=te(t),o=i.queries.get(e);if(o)for(const s of o.Sa)s.onError(n);i.queries.delete(e)}function Eg(t){t.Ca.forEach(e=>{e.next()})}var Cp,wT;(wT=Cp||(Cp={})).Ma="default",wT.Cache="cache";class A3{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Vr(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Vr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Cp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e){this.key=e}}class hw{constructor(e){this.key=e}}class C3{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ce(),this.mutatedKeys=ce(),this.eu=DR(e),this.tu=new gr(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new CT,o=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,r=o,a=!1;const l=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,c=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((h,p)=>{const m=o.get(h),y=Nf(this.query,p)?p:null,b=!!m&&this.mutatedKeys.has(m.key),x=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let P=!1;m&&y?m.data.isEqual(y.data)?b!==x&&(i.track({type:3,doc:y}),P=!0):this.su(m,y)||(i.track({type:2,doc:y}),P=!0,(l&&this.eu(y,l)>0||c&&this.eu(y,c)<0)&&(a=!0)):!m&&y?(i.track({type:0,doc:y}),P=!0):m&&!y&&(i.track({type:1,doc:m}),P=!0,(l||c)&&(a=!0)),P&&(y?(r=r.add(y),s=x?s.add(h):s.delete(h)):(r=r.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;r.size>this.query.limit;){const h=this.query.limitType==="F"?r.last():r.first();r=r.delete(h.key),s=s.delete(h.key),i.track({type:1,doc:h})}return{tu:r,iu:i,Cs:a,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,o){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const r=e.iu.ya();r.sort((h,p)=>function(y,b){const x=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return W(20277,{Rt:P})}};return x(y)-x(b)}(h.type,p.type)||this.eu(h.doc,p.doc)),this.ou(i),o=o??!1;const a=n&&!o?this._u():[],l=this.Xa.size===0&&this.current&&!o?1:0,c=l!==this.Za;return this.Za=l,r.length!==0||c?{snapshot:new Vr(this.query,e.tu,s,r,e.mutatedKeys,l===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new CT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ce(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return e.forEach(i=>{this.Xa.has(i)||n.push(new hw(i))}),this.Xa.forEach(i=>{e.has(i)||n.push(new dw(i))}),n}cu(e){this.Ya=e.Qs,this.Xa=ce();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Vr.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Tg="SyncEngine";class R3{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class w3{constructor(e){this.key=e,this.hu=!1}}class I3{constructor(e,n,i,o,s,r){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=o,this.currentUser=s,this.maxConcurrentLimboResolutions=r,this.Pu={},this.Tu=new Ns(a=>MR(a),xf),this.Iu=new Map,this.Eu=new Set,this.du=new Fe(X.comparator),this.Au=new Map,this.Ru=new cg,this.Vu={},this.mu=new Map,this.fu=Pr.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function b3(t,e,n=!0){const i=_w(t);let o;const s=i.Tu.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),o=s.view.lu()):o=await pw(i,e,n,!0),o}async function x3(t,e){const n=_w(t);await pw(n,e,!0,!1)}async function pw(t,e,n,i){const o=await J6(t.localStore,ri(e)),s=o.targetId,r=t.sharedClientState.addLocalQueryTarget(s,n);let a;return i&&(a=await N3(t,e,s,r==="current",o.resumeToken)),t.isPrimaryClient&&n&&rw(t.remoteStore,o),a}async function N3(t,e,n,i,o){t.pu=(p,m,y)=>async function(x,P,R,E){let w=P.view.ru(R);w.Cs&&(w=await vT(x.localStore,P.query,!1).then(({documents:T})=>P.view.ru(T,w)));const D=E&&E.targetChanges.get(P.targetId),O=E&&E.targetMismatches.get(P.targetId)!=null,q=P.view.applyChanges(w,x.isPrimaryClient,D,O);return bT(x,P.targetId,q.au),q.snapshot}(t,p,m,y);const s=await vT(t.localStore,e,!0),r=new C3(e,s.Qs),a=r.ru(s.documents),l=Ol.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",o),c=r.applyChanges(a,t.isPrimaryClient,l);bT(t,n,c.au);const h=new R3(e,n,r);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function M3(t,e,n){const i=te(t),o=i.Tu.get(e),s=i.Iu.get(o.targetId);if(s.length>1)return i.Iu.set(o.targetId,s.filter(r=>!xf(r,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Sp(i.localStore,o.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(o.targetId),n&&pg(i.remoteStore,o.targetId),Rp(i,o.targetId)}).catch(Kr)):(Rp(i,o.targetId),await Sp(i.localStore,o.targetId,!0))}async function D3(t,e){const n=te(t),i=n.Tu.get(e),o=n.Iu.get(i.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),pg(n.remoteStore,i.targetId))}async function P3(t,e,n){const i=B3(t);try{const o=await function(r,a){const l=te(r),c=Ue.now(),h=a.reduce((y,b)=>y.add(b.key),ce());let p,m;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let b=qi(),x=ce();return l.Ns.getEntries(y,h).next(P=>{b=P,b.forEach((R,E)=>{E.isValidDocument()||(x=x.add(R))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,b)).next(P=>{p=P;const R=[];for(const E of a){const w=Yk(E,p.get(E.key).overlayedDocument);w!=null&&R.push(new Ms(E.key,w,CR(w.value.mapValue),xi.exists(!0)))}return l.mutationQueue.addMutationBatch(y,c,R,a)}).next(P=>{m=P;const R=P.applyToLocalDocumentSet(p,x);return l.documentOverlayCache.saveOverlays(y,P.batchId,R)})}).then(()=>({batchId:m.batchId,changes:VR(p)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),function(r,a,l){let c=r.Vu[r.currentUser.toKey()];c||(c=new Fe(ue)),c=c.insert(a,l),r.Vu[r.currentUser.toKey()]=c}(i,o.batchId,n),await Bl(i,o.changes),await Lf(i.remoteStore)}catch(o){const s=_g(o,"Failed to persist write");n.reject(s)}}async function mw(t,e){const n=te(t);try{const i=await z6(n.localStore,e);e.targetChanges.forEach((o,s)=>{const r=n.Au.get(s);r&&(Ee(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?r.hu=!0:o.modifiedDocuments.size>0?Ee(r.hu,14607):o.removedDocuments.size>0&&(Ee(r.hu,42227),r.hu=!1))}),await Bl(n,i,e)}catch(i){await Kr(i)}}function IT(t,e,n){const i=te(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const o=[];i.Tu.forEach((s,r)=>{const a=r.view.va(e);a.snapshot&&o.push(a.snapshot)}),function(r,a){const l=te(r);l.onlineState=a;let c=!1;l.queries.forEach((h,p)=>{for(const m of p.Sa)m.va(a)&&(c=!0)}),c&&Eg(l)}(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function V3(t,e,n){const i=te(t);i.sharedClientState.updateQueryState(e,"rejected",n);const o=i.Au.get(e),s=o&&o.key;if(s){let r=new Fe(X.comparator);r=r.insert(s,Lt.newNoDocument(s,ee.min()));const a=ce().add(s),l=new Pf(ee.min(),new Map,new Fe(ue),r,a);await mw(i,l),i.du=i.du.remove(s),i.Au.delete(e),Sg(i)}else await Sp(i.localStore,e,!1).then(()=>Rp(i,e,n)).catch(Kr)}async function U3(t,e){const n=te(t),i=e.batch.batchId;try{const o=await G6(n.localStore,e);yw(n,i,null),gw(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Bl(n,o)}catch(o){await Kr(o)}}async function L3(t,e,n){const i=te(t);try{const o=await function(r,a){const l=te(r);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(p=>(Ee(p!==null,37113),h=p.keys(),l.mutationQueue.removeMutationBatch(c,p))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(i.localStore,e);yw(i,e,n),gw(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Bl(i,o)}catch(o){await Kr(o)}}function gw(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function yw(t,e,n){const i=te(t);let o=i.Vu[i.currentUser.toKey()];if(o){const s=o.get(e);s&&(n?s.reject(n):s.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function Rp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(i=>{t.Ru.containsKey(i)||vw(t,i)})}function vw(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(pg(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Sg(t))}function bT(t,e,n){for(const i of n)i instanceof dw?(t.Ru.addReference(i.key,e),k3(t,i)):i instanceof hw?(J(Tg,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||vw(t,i.key)):W(19791,{wu:i})}function k3(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(J(Tg,"New document in limbo: "+n),t.Eu.add(i),Sg(t))}function Sg(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new X(Be.fromString(e)),i=t.fu.next();t.Au.set(i,new w3(n)),t.du=t.du.insert(n,i),rw(t.remoteStore,new ho(ri(sg(n.path)),i,"TargetPurposeLimboResolution",Rf.ce))}}async function Bl(t,e,n){const i=te(t),o=[],s=[],r=[];i.Tu.isEmpty()||(i.Tu.forEach((a,l)=>{r.push(i.pu(l,e,n).then(c=>{var h;if((c||n)&&i.isPrimaryClient){const p=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:h.current;i.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(c){o.push(c);const p=dg.As(l.targetId,c);s.push(p)}}))}),await Promise.all(r),i.Pu.H_(o),await async function(l,c){const h=te(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>F.forEach(c,m=>F.forEach(m.Es,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>F.forEach(m.ds,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!$r(p))throw p;J(hg,"Failed to update sequence numbers: "+p)}for(const p of c){const m=p.targetId;if(!p.fromCache){const y=h.Ms.get(m),b=y.snapshotVersion,x=y.withLastLimboFreeSnapshotVersion(b);h.Ms=h.Ms.insert(m,x)}}}(i.localStore,s))}async function O3(t,e){const n=te(t);if(!n.currentUser.isEqual(e)){J(Tg,"User change. New user:",e.toKey());const i=await nw(n.localStore,e);n.currentUser=e,function(s,r){s.mu.forEach(a=>{a.forEach(l=>{l.reject(new $(G.CANCELLED,r))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Bl(n,i.Ls)}}function q3(t,e){const n=te(t),i=n.Au.get(e);if(i&&i.hu)return ce().add(i.key);{let o=ce();const s=n.Iu.get(e);if(!s)return o;for(const r of s){const a=n.Tu.get(r);o=o.unionWith(a.view.nu)}return o}}function _w(t){const e=te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=mw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=q3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=V3.bind(null,e),e.Pu.H_=T3.bind(null,e.eventManager),e.Pu.yu=S3.bind(null,e.eventManager),e}function B3(t){const e=te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=U3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=L3.bind(null,e),e}class Hc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Vf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return F6(this.persistence,new O6,e.initialUser,this.serializer)}Cu(e){return new tw(fg.mi,this.serializer)}Du(e){return new $6}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Hc.provider={build:()=>new Hc};class F3 extends Hc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ee(this.persistence.referenceDelegate instanceof Gc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new A6(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Wt.withCacheSize(this.cacheSizeBytes):Wt.DEFAULT;return new tw(i=>Gc.mi(i,n),this.serializer)}}class wp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>IT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=O3.bind(null,this.syncEngine),await g3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new v3}()}createDatastore(e){const n=Vf(e.databaseInfo.databaseId),i=function(s){return new j6(s)}(e.databaseInfo);return function(s,r,a,l){return new i3(s,r,a,l)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,o,s,r,a){return new s3(i,o,s,r,a)}(this.localStore,this.datastore,e.asyncQueue,n=>IT(this.syncEngine,n,0),function(){return TT.v()?new TT:new Q6}())}createSyncEngine(e,n){return function(o,s,r,a,l,c,h){const p=new I3(o,s,r,a,l,c);return h&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(o){const s=te(o);J(Ss,"RemoteStore shutting down."),s.Ea.add(5),await ql(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}wp.provider={build:()=>new wp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G3{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Oi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ko="FirestoreClient";class z3{constructor(e,n,i,o,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=o,this.user=Ut.UNAUTHENTICATED,this.clientId=Zm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async r=>{J(ko,"Received user=",r.uid),await this.authCredentialListener(r),this.user=r}),this.appCheckCredentials.start(i,r=>(J(ko,"Received new app check token=",r),this.appCheckCredentialListener(r,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new wo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=_g(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Qd(t,e){t.asyncQueue.verifyOperationInProgress(),J(ko,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async o=>{i.isEqual(o)||(await nw(e.localStore,o),i=o)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function xT(t,e){t.asyncQueue.verifyOperationInProgress();const n=await H3(t);J(ko,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>AT(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,o)=>AT(e.remoteStore,o)),t._onlineComponents=e}async function H3(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){J(ko,"Using user provided OfflineComponentProvider");try{await Qd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(o){return o.name==="FirebaseError"?o.code===G.FAILED_PRECONDITION||o.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;xr("Error using user provided cache. Falling back to memory cache: "+n),await Qd(t,new Hc)}}else J(ko,"Using default OfflineComponentProvider"),await Qd(t,new F3(void 0));return t._offlineComponents}async function Ew(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(J(ko,"Using user provided OnlineComponentProvider"),await xT(t,t._uninitializedComponentsProvider._online)):(J(ko,"Using default OnlineComponentProvider"),await xT(t,new wp))),t._onlineComponents}function Y3(t){return Ew(t).then(e=>e.syncEngine)}async function J3(t){const e=await Ew(t),n=e.eventManager;return n.onListen=b3.bind(null,e.syncEngine),n.onUnlisten=M3.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=x3.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=D3.bind(null,e.syncEngine),n}function K3(t,e,n={}){const i=new wo;return t.asyncQueue.enqueueAndForget(async()=>function(s,r,a,l,c){const h=new G3({next:m=>{h.Nu(),r.enqueueAndForget(()=>E3(s,p));const y=m.docs.has(a);!y&&m.fromCache?c.reject(new $(G.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&l&&l.source==="server"?c.reject(new $(G.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),p=new A3(sg(a.path),h,{includeMetadataChanges:!0,qa:!0});return _3(s,p)}(await J3(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tw(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw="firestore.googleapis.com",MT=!0;class DT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new $(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Sw,this.ssl=MT}else this.host=e.host,this.ssl=e.ssl??MT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ew;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<T6)throw new $(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ok("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Tw(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new $(G.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new $(G.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new $(G.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,o){return i.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ag{constructor(e,n,i,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new DT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new DT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new KL;switch(i.type){case"firstParty":return new WL(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new $(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=NT.get(n);i&&(J("ComponentProvider","Removing Datastore"),NT.delete(n),i.terminate())}(this),Promise.resolve()}}function $3(t,e,n,i={}){var c;t=hl(t,Ag);const o=Gm(e),s=t._getSettings(),r={...s,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;o&&(ZV(`https://${a}`),n4("Firestore",!0)),s.host!==Sw&&s.host!==a&&xr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:a,ssl:o,emulatorOptions:i};if(!fl(l,r)&&(t._setSettings(l),i.mockUserToken)){let h,p;if(typeof i.mockUserToken=="string")h=i.mockUserToken,p=Ut.MOCK_USER;else{h=jV(i.mockUserToken,(c=t._app)==null?void 0:c.options.projectId);const m=i.mockUserToken.sub||i.mockUserToken.user_id;if(!m)throw new $(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Ut(m)}t._authCredentials=new $L(new hR(h,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Cg(this.firestore,e,this._query)}}class vt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new El(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vt(this.firestore,e,this._key)}toJSON(){return{type:vt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Ll(n,vt._jsonSchema))return new vt(e,i||null,new X(Be.fromString(n.referencePath)))}}vt._jsonSchemaVersion="firestore/documentReference/1.0",vt._jsonSchema={type:nt("string",vt._jsonSchemaVersion),referencePath:nt("string")};class El extends Cg{constructor(e,n,i){super(e,n,sg(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vt(this.firestore,null,new X(e))}withConverter(e){return new El(this.firestore,e,this._path)}}function Rg(t,e,...n){if(t=vs(t),arguments.length===1&&(e=Zm.newId()),ik("doc","path",e),t instanceof Ag){const i=Be.fromString(e,...n);return JE(i),new vt(t,null,new X(i))}{if(!(t instanceof vt||t instanceof El))throw new $(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Be.fromString(e,...n));return JE(i),new vt(t.firestore,t instanceof El?t.converter:null,new X(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT="AsyncQueue";class VT{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ow(this,"async_queue_retry"),this._c=()=>{const i=$d();i&&J(PT,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=$d();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=$d();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new wo;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!$r(e))throw e;J(PT,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,Oi("INTERNAL UNHANDLED ERROR: ",UT(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=vg.createAndSchedule(this,e,n,i,s=>this.hc(s));return this.tc.push(o),o}uc(){this.nc&&W(47125,{Pc:UT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function UT(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class wg extends Ag{constructor(e,n,i,o){super(e,n,i,o),this.type="firestore",this._queue=new VT,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new VT(e),this._firestoreClient=void 0,await e}}}function Q3(t,e){const n=typeof t=="object"?t:LC(),i=typeof t=="string"?t:Uc,o=Ul(n,"firestore").getImmediate({identifier:i});if(!o._initialized){const s=XV("firestore");s&&$3(o,...s)}return o}function Aw(t){if(t._terminated)throw new $(G.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||X3(t),t._firestoreClient}function X3(t){var i,o,s;const e=t._freezeSettings(),n=function(a,l,c,h){return new mk(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Tw(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new z3(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Dn(Nt.fromBase64String(e))}catch(n){throw new $(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Dn(Nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Dn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ll(e,Dn._jsonSchema))return Dn.fromBase64String(e.bytes)}}Dn._jsonSchemaVersion="firestore/bytes/1.0",Dn._jsonSchema={type:nt("string",Dn._jsonSchemaVersion),bytes:nt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new $(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new It(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new $(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new $(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ue(this._lat,e._lat)||ue(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:li._jsonSchemaVersion}}static fromJSON(e){if(Ll(e,li._jsonSchema))return new li(e.latitude,e.longitude)}}li._jsonSchemaVersion="firestore/geoPoint/1.0",li._jsonSchema={type:nt("string",li._jsonSchemaVersion),latitude:nt("number"),longitude:nt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,o){if(i.length!==o.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==o[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:ui._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ll(e,ui._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new ui(e.vectorValues);throw new $(G.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ui._jsonSchemaVersion="firestore/vectorValue/1.0",ui._jsonSchema={type:nt("string",ui._jsonSchemaVersion),vectorValues:nt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W3=/^__.*__$/;class Z3{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Ms(e,this.data,this.fieldMask,n,this.fieldTransforms):new kl(e,this.data,n,this.fieldTransforms)}}function Rw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw W(40011,{Ac:t})}}class bg{constructor(e,n,i,o,s,r){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=o,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=r||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new bg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Yc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Rw(this.Ac)&&W3.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class j3{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Vf(e)}Cc(e,n,i,o=!1){return new bg({Ac:e,methodName:n,Dc:i,path:It.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function eO(t){const e=t._freezeSettings(),n=Vf(t._databaseId);return new j3(t._databaseId,!!e.ignoreUndefinedProperties,n)}function tO(t,e,n,i,o,s={}){const r=t.Cc(s.merge||s.mergeFields?2:0,e,n,o);xw("Data must be an object, but it was:",r,i);const a=Iw(i,r);let l,c;if(s.merge)l=new Fn(r.fieldMask),c=r.fieldTransforms;else if(s.mergeFields){const h=[];for(const p of s.mergeFields){const m=nO(e,p,n);if(!r.contains(m))throw new $(G.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);oO(h,m)||h.push(m)}l=new Fn(h),c=r.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,c=r.fieldTransforms;return new Z3(new Mn(a),l,c)}function ww(t,e){if(bw(t=vs(t)))return xw("Unsupported field value:",e,t),Iw(t,e);if(t instanceof Cw)return function(i,o){if(!Rw(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(o);s&&o.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(i,o){const s=[];let r=0;for(const a of i){let l=ww(a,o.wc(r));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),r++}return{arrayValue:{values:s}}}(t,e)}return function(i,o){if((i=vs(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return qk(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=Ue.fromDate(i);return{timestampValue:Fc(o.serializer,s)}}if(i instanceof Ue){const s=new Ue(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Fc(o.serializer,s)}}if(i instanceof li)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Dn)return{bytesValue:KR(o.serializer,i._byteString)};if(i instanceof vt){const s=o.databaseId,r=i.firestore._databaseId;if(!r.isEqual(s))throw o.Sc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:ug(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof ui)return function(r,a){return{mapValue:{fields:{[SR]:{stringValue:AR},[Lc]:{arrayValue:{values:r.toArray().map(c=>{if(typeof c!="number")throw a.Sc("VectorValues must only contain numeric values.");return rg(a.serializer,c)})}}}}}}(i,o);throw o.Sc(`Unsupported field value: ${jm(i)}`)}(t,e)}function Iw(t,e){const n={};return gR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xs(t,(i,o)=>{const s=ww(o,e.mc(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function bw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ue||t instanceof li||t instanceof Dn||t instanceof vt||t instanceof Cw||t instanceof ui)}function xw(t,e,n){if(!bw(n)||!pR(n)){const i=jm(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function nO(t,e,n){if((e=vs(e))instanceof Ig)return e._internalPath;if(typeof e=="string")return Nw(t,e);throw Yc("Field path arguments must be of type string or ",t,!1,void 0,n)}const iO=new RegExp("[~\\*/\\[\\]]");function Nw(t,e,n){if(e.search(iO)>=0)throw Yc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ig(...e.split("."))._internalPath}catch{throw Yc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Yc(t,e,n,i,o){const s=i&&!i.isEmpty(),r=o!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||r)&&(l+=" (found",s&&(l+=` in field ${i}`),r&&(l+=` in document ${o}`),l+=")"),new $(G.INVALID_ARGUMENT,a+t+l)}function oO(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e,n,i,o,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=o,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new sO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Dw("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class sO extends Mw{data(){return super.data()}}function Dw(t,e){return typeof e=="string"?Nw(t,e):e instanceof Ig?e._internalPath:e._delegate._internalPath}class rO{convertValue(e,n="none"){switch(Uo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Je(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Vo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw W(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return xs(e,(o,s)=>{i[o]=this.convertValue(s,n)}),i}convertVectorValue(e){var i,o,s;const n=(s=(o=(i=e.fields)==null?void 0:i[Lc].arrayValue)==null?void 0:o.values)==null?void 0:s.map(r=>Je(r.doubleValue));return new ui(n)}convertGeoPoint(e){return new li(Je(e.latitude),Je(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=If(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(ml(e));default:return null}}convertTimestamp(e){const n=Po(e);return new Ue(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Be.fromString(e);Ee(jR(i),9688,{name:e});const o=new gl(i.get(1),i.get(3)),s=new X(i.popFirst(5));return o.isEqual(n)||Oi(`Document ${s} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aO(t,e,n){let i;return i=t?t.toFirestore(e):e,i}class wa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ds extends Mw{constructor(e,n,i,o,s,r){super(e,n,i,o,r),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new $u(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Dw("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new $(G.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ds._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ds._jsonSchemaVersion="firestore/documentSnapshot/1.0",ds._jsonSchema={type:nt("string",ds._jsonSchemaVersion),bundleSource:nt("string","DocumentSnapshot"),bundleName:nt("string"),bundle:nt("string")};class $u extends ds{data(e={}){return super.data(e)}}class Ka{constructor(e,n,i,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new wa(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new $u(this._firestore,this._userDataWriter,i.key,i,new wa(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new $(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,s){if(o._snapshot.oldDocs.isEmpty()){let r=0;return o._snapshot.docChanges.map(a=>{const l=new $u(o._firestore,o._userDataWriter,a.doc.key,a.doc,new wa(o._snapshot.mutatedKeys.has(a.doc.key),o._snapshot.fromCache),o.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:r++}})}{let r=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new $u(o._firestore,o._userDataWriter,a.doc.key,a.doc,new wa(o._snapshot.mutatedKeys.has(a.doc.key),o._snapshot.fromCache),o.query.converter);let c=-1,h=-1;return a.type!==0&&(c=r.indexOf(a.doc.key),r=r.delete(a.doc.key)),a.type!==1&&(r=r.add(a.doc),h=r.indexOf(a.doc.key)),{type:lO(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new $(G.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ka._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Zm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],o=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),i.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),o.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function lO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return W(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xg(t){t=hl(t,vt);const e=hl(t.firestore,wg);return K3(Aw(e),t._key).then(n=>fO(e,t,n))}Ka._jsonSchemaVersion="firestore/querySnapshot/1.0",Ka._jsonSchema={type:nt("string",Ka._jsonSchemaVersion),bundleSource:nt("string","QuerySnapshot"),bundleName:nt("string"),bundle:nt("string")};class uO extends rO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new vt(this.firestore,null,n)}}function Ng(t,e,n){t=hl(t,vt);const i=hl(t.firestore,wg),o=aO(t.converter,e);return cO(i,[tO(eO(i),"setDoc",t._key,o,t.converter!==null,n).toMutation(t._key,xi.none())])}function cO(t,e){return function(i,o){const s=new wo;return i.asyncQueue.enqueueAndForget(async()=>P3(await Y3(i),o,s)),s.promise}(Aw(t),e)}function fO(t,e,n){const i=n.docs.get(e._key),o=new uO(t);return new ds(t,o,e._key,i,new wa(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(o){Jr=o})(hU),Mo(new Li("firestore",(i,{instanceIdentifier:o,options:s})=>{const r=i.getProvider("app").getImmediate(),a=new wg(new QL(i.getProvider("auth-internal")),new ZL(r,i.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new $(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gl(c.options.projectId,h)}(r,o),r);return s={useFetchStreams:n,...s},a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),si(GE,zE,e),si(GE,zE,"esm2020")})();const dO={apiKey:"AIzaSyDZFqt1-PXjcs9aGF8jeUL6PWzPwsuzhB8",authDomain:"teste-cnpj-cead3.firebaseapp.com",projectId:"teste-cnpj-cead3",storageBucket:"teste-cnpj-cead3.firebasestorage.app",messagingSenderId:"819206470986",appId:"1:819206470986:web:c3c61a284b3ebe7d0095b3",measurementId:"G-C3CMHXHYFZ"},Pw=UC(dO);GL(Pw);const Mg=Q3(Pw),Vw={AC:"Acre",AL:"Alagoas",AP:"Amap",AM:"Amazonas",BA:"Bahia",CE:"Cear",DF:"Distrito Federal",ES:"Esprito Santo",GO:"Gois",MA:"Maranho",MT:"Mato Grosso",MS:"Mato Grosso do Sul",MG:"Minas Gerais",PA:"Par",PB:"Paraba",PR:"Paran",PE:"Pernambuco",PI:"Piau",RJ:"Rio de Janeiro",RN:"Rio Grande do Norte",RS:"Rio Grande do Sul",RO:"Rondnia",RR:"Roraima",SC:"Santa Catarina",SP:"So Paulo",SE:"Sergipe",TO:"Tocantins"},Dg=(...t)=>t.join("-").toLowerCase().replace(/[^a-z0-9-]/g,"");async function kf(t,e,n){var o,s,r,a,l;const i=["gemini-1.5-flash","gemini-1.5-pro","gemini-2.5-flash","gemini-2.0-flash-exp"];for(const c of i)for(let h=1;h<=3;h++)try{const p={};return n&&(p.responseMimeType="application/json",p.responseSchema=n),console.log(`Tentando modelo ${c} (Tentativa ${h})...`),await t.models.generateContent({model:c,contents:e,config:p})}catch(p){const m=((o=p.message)==null?void 0:o.includes("503"))||((s=p.message)==null?void 0:s.includes("overloaded")),y=(r=p.message)==null?void 0:r.includes("429"),b=((a=p.message)==null?void 0:a.includes("404"))||((l=p.message)==null?void 0:l.includes("not found"));if(y){console.warn(`Cota excedida para o modelo ${c} (429). Tentando prximo modelo...`);break}else if(b){console.warn(`Modelo ${c} no encontrado (404). Tentando prximo modelo...`);break}else if(m)if(h<3){const x=3e3*h;console.warn(`Modelo ${c} sobrecarregado (503). Aguardando ${x}ms...`),await new Promise(P=>setTimeout(P,x));continue}else{console.warn(`Modelo ${c} falhou aps 3 tentativas. Tentando prximo modelo...`);break}throw p}throw new Error("Falha na API Gemini. Possveis causas: Cota excedida (429) ou instabilidade nos servidores (503). Verifique o console para detalhes.")}const Jc="v2";async function hO(t,e,n){const i=Dg("cnpj",Jc,e,n),o=Rg(Mg,"cnpj_searches",i);try{const l=await xg(o);if(l.exists()){const c=l.data();if(c.result&&c.result[0]&&"potencialCompra"in c.result[0])return console.log(" Dados enriquecidos recuperados do Cache (Firebase)!"),c.result;console.log(" Cache antigo detectado. Buscando novos dados...")}}catch(l){console.warn("Erro ao ler cache do Firebase:",l)}const s=new Tf({apiKey:t}),a=`
    Voc  um analista de inteligncia de mercado especializado no setor educacional pblico brasileiro.
    
    Gere um dossi completo de prospeco de rgos pblicos no estado de ${Vw[e]||e} relacionados ao ramo "${n}".
    
    Para cada rgo, fornea:
    1. 'orgao': Nome completo do rgo (ex: 'Secretaria de Educao do Estado da Bahia', 'Prefeitura Municipal de Salvador')
    2. 'cnpj': CNPJ formatado como 'XX.XXX.XXX/XXXX-XX'
    3. 'localidade': Cidade e UF (ex: 'Salvador, BA')
    4. 'potencialCompra': Classifique como 'Alto', 'Mdio' ou 'Baixo' baseado em:
       - Oramento do rgo
       - Tamanho da populao atendida
       - Histrico de compras pblicas
       - Projetos recentes
    5. 'contatosChave': Array com at 3 decisores principais. Para cada contato:
       - 'nome': Nome completo
       - 'cargo': Cargo (ex: 'Secretrio de Educao', 'Diretor de Compras')
    6. 'iniciativasRecentes': Resumo de projetos, licitaes ou notcias recentes na rea de educao (mx 200 caracteres)
    7. 'fonteInformacao': URL da principal fonte de dados (site oficial, portal da transparncia, etc)
    
    Priorize:
    - Secretaria Estadual de Educao e fundos estaduais
    - Capitais e 20 maiores cidades do estado
    - rgos com histrico ativo de compras
    
    Retorne at 30 rgos.
  `;try{const l=await kf(s,a,{type:se.ARRAY,items:{type:se.OBJECT,properties:{orgao:{type:se.STRING,description:"O nome completo do rgo pblico"},cnpj:{type:se.STRING,description:"O nmero do CNPJ formatado como 'XX.XXX.XXX/XXXX-XX'"},localidade:{type:se.STRING,description:"Cidade e estado (ex: 'Salvador, BA')"},potencialCompra:{type:se.STRING,description:"Classificao: 'Alto', 'Mdio' ou 'Baixo'",enum:["Alto","Mdio","Baixo"]},contatosChave:{type:se.ARRAY,description:"Lista de decisores principais",items:{type:se.OBJECT,properties:{nome:{type:se.STRING,description:"Nome completo do contato"},cargo:{type:se.STRING,description:"Cargo do contato"}},required:["nome","cargo"]}},iniciativasRecentes:{type:se.STRING,description:"Resumo de projetos ou licitaes recentes (mx 200 chars)"},fonteInformacao:{type:se.STRING,description:"URL da fonte principal dos dados"}},required:["orgao","cnpj","localidade","potencialCompra","contatosChave","iniciativasRecentes"]}});if(!l.text)throw new Error("A resposta da API estava vazia.");const c=l.text.trim(),h=JSON.parse(c);if(!Array.isArray(h))throw new Error("O formato da resposta da API no  um array JSON vlido.");if(!h.every(m=>typeof m=="object"&&m!==null&&"orgao"in m&&"cnpj"in m))throw new Error("Alguns itens na resposta da API no correspondem ao formato esperado.");try{await Ng(o,{result:h,createdAt:new Date().toISOString(),cacheVersion:Jc,estado:e,tipoOrgao:n}),console.log(" Cache atualizado com novos dados enriquecidos!")}catch(m){console.warn("Erro ao salvar no cache do Firebase:",m)}return h}catch(l){throw console.error("Erro ao chamar a API Gemini:",l),l instanceof Error&&l.message.includes("API key not valid")?new Error("A chave de API fornecida no  vlida."):new Error("No foi possvel gerar a lista de CNPJs.")}}async function pO(t,e,n,i){const o=Dg("leads",Jc,e,n,i),s=Rg(Mg,"leads_searches",o);try{const c=await xg(s);if(c.exists())return console.log(" Dados recuperados do Cache (Firebase)!"),c.data().result}catch(c){console.warn("Erro ao ler cache do Firebase:",c)}const r=new Tf({apiKey:t}),a=Vw[e]||e,l=`
    Gere uma lista detalhada de contatos (leads) para prospeco de servios educacionais, com foco em "${i}" na cidade de "${n}", estado de ${a}.
    
    IMPORTANTE: Inclua informaes sobre CORPO DOCENTE e GESTO ESCOLAR sempre que possvel.
    
    Para cada lead encontrado, fornea as seguintes informaes em formato JSON:
    1.  'entidade': O nome completo da instituio (ex: 'Colgio Anchieta', 'Secretaria Municipal de Educao de ${n}').
    2.  'cnpj': O CNPJ da instituio, se for publicamente disponvel. Formate como 'XX.XXX.XXX/XXXX-XX'. Se no encontrar, retorne null.
    3.  'tipo': O tipo de entidade (ex: 'Escola Privada', 'Prefeitura').
    4.  'localidade': A cidade e o estado (ex: '${n}, ${e}').
    5.  'contatoNome': O nome de um contato decisor relevante (ex: Diretor(a), Secretrio(a) de Educao, Coordenador(a) Pedaggico). Se no encontrar, retorne null.
    6.  'contatoCargo': O cargo do contato mencionado. Se no encontrar, retorne null.
    7.  'contatoPublico': O telefone de contato PBLICO e GERAL da instituio. Importante: NO fornea telefones pessoais/diretos de indivduos. Se no encontrar, retorne null.
    8.  'endereco': O endereo completo da instituio (Rua, Nmero, Bairro, CEP). Se no encontrar, retorne null.
    9.  'website': O website oficial da instituio. Se no encontrar, retorne null.
    10. 'email': O e-mail de contato PBLICO e GERAL da instituio (ex: contato@escola.com.br). NO fornea e-mails pessoais. Se no encontrar, retorne null.
    11. 'corpoDocente': Informaes sobre o corpo docente da escola (ex: "150 professores", "Coordenao pedaggica: Maria Silva", "Foco em metodologias ativas"). Inclua nomes de coordenadores pedaggicos quando disponvel. Se no encontrar, retorne null.
    12. 'observacoes': Uma breve observao sobre a instituio (ex: "Escola tradicional com foco em esportes", "Rede com 3 unidades", "Reconhecida pelo MEC").
    
    Priorize escolas com informaes mais completas sobre gesto e corpo docente. Gere uma lista com at 60 resultados.
  `;try{const c=await kf(r,l,{type:se.ARRAY,items:{type:se.OBJECT,properties:{entidade:{type:se.STRING},cnpj:{type:se.STRING,nullable:!0},tipo:{type:se.STRING},localidade:{type:se.STRING},contatoNome:{type:se.STRING,nullable:!0},contatoCargo:{type:se.STRING,nullable:!0},contatoPublico:{type:se.STRING,nullable:!0},endereco:{type:se.STRING,nullable:!0},website:{type:se.STRING,nullable:!0},email:{type:se.STRING,nullable:!0},corpoDocente:{type:se.STRING,nullable:!0},observacoes:{type:se.STRING,nullable:!0}},required:["entidade","tipo","localidade"]}});if(!c.text)throw new Error("A resposta da API estava vazia.");const h=JSON.parse(c.text.trim());if(!Array.isArray(h))throw new Error("O formato da resposta da API no  um array JSON vlido.");try{await Ng(s,{result:h,createdAt:new Date().toISOString(),cacheVersion:Jc,estado:e,cidade:n,tipoEntidade:i})}catch(p){console.warn("Erro ao salvar no cache do Firebase:",p)}return h}catch(c){throw console.error("Erro ao chamar a API Gemini para buscar leads:",c),c instanceof Error&&c.message.includes("API key not valid")?new Error("A chave de API fornecida no  vlida."):new Error("No foi possvel gerar a lista de contatos.")}}async function mO(t,e,n){const i=Dg("details",e,n),o=Rg(Mg,"details_searches",i);try{const a=await xg(o);if(a.exists())return console.log(" Dados recuperados do Cache (Firebase)!"),a.data().result}catch(a){console.warn("Erro ao ler cache do Firebase:",a)}const s=new Tf({apiKey:t}),r=`
      Fornea um resumo detalhado e informativo sobre a entidade "${e}", localizada em "${n}".
      O resumo deve ser til para uma prospeco de negcios e incluir, se possvel:
      - **Misso e Foco:** Qual o principal objetivo ou rea de atuao da entidade?
      - **Principais Gestores:** Liste os nomes e cargos dos principais gestores ou decisores (ex: Prefeito, Secretrio de Educao, Diretor Geral).
      - **Projetos ou Iniciativas Recentes:** Mencione quaisquer projetos, programas ou notcias relevantes recentes associados  entidade.
      - **Tamanho e Relevncia:** Fornea uma noo do porte da entidade (ex: nmero de alunos, populao da cidade, oramento, etc.).

      Formate a resposta de forma clara e organizada, usando ttulos para cada seo. No use formatao JSON.
    `;try{const a=await kf(s,r);if(!a.text)throw new Error("A resposta da API estava vazia.");try{await Ng(o,{result:a.text,createdAt:new Date().toISOString(),entityName:e,location:n})}catch(l){console.warn("Erro ao salvar no cache do Firebase:",l)}return a.text}catch(a){throw console.error("Erro ao buscar detalhes com a API Gemini:",a),a instanceof Error&&a.message.includes("API key not valid")?new Error("A chave de API fornecida no  vlida."):new Error(`No foi possvel obter detalhes para "${e}".`)}}async function gO(t,e,n){const i=new Tf({apiKey:n}),o=`Voc  um consultor de vendas snior especializado em educao e tecnologia educacional.

CONTEXTO:
- rgo Pblico: ${t}
- Iniciativas Recentes: ${e}

MISSO:
Sua empresa oferece solues de tecnologia educacional, plataformas digitais de aprendizagem, capacitao de professores e transformao digital para instituies de ensino.

Analise as iniciativas recentes deste rgo e crie de 2 a 3 frases de "gancho de vendas" altamente personalizadas e eficazes que um vendedor pode usar como abertura em um e-mail ou ligao.

REGRAS CRTICAS:
1. Cada frase deve conectar uma iniciativa especfica do rgo com uma soluo que sua empresa oferece
2. Use tom consultivo, no agressivo - mostre que voc entende os desafios deles
3. Seja especfico - mencione programas, projetos ou desafios que voc identificou
4. Frases devem ter entre 20-40 palavras
5. Foque em VALOR e RESULTADOS, no em caractersticas do produto
6. Use dados ou tendncias do mercado educacional quando relevante

FORMATO DE RESPOSTA:
Retorne um JSON com:
- "frases": array com 2-3 sugestes de abordagem
- "contexto": breve anlise (1-2 linhas) do cenrio do rgo que justifica essas abordagens

Exemplo do formato esperado:
{
  "frases": [
    "Vi que vocs lanaram o programa 'Escola Digital'. Temos ajudado secretarias como a de vocs a aumentar em 40% o engajamento dos alunos com plataformas adaptativas. Podemos agendar 15 minutos?",
    "Notei a iniciativa de capacitao de professores para metodologias ativas. Nossa soluo j treinou mais de 5.000 educadores no Nordeste com resultados comprovados. Vale uma conversa?"
  ],
  "contexto": "rgo em fase de transformao digital com foco em capacitao docente e engajamento estudantil."
}`,s={type:se.OBJECT,properties:{frases:{type:se.ARRAY,items:{type:se.STRING},description:"Array com 2-3 frases de abordagem de vendas personalizadas"},contexto:{type:se.STRING,description:"Breve anlise do cenrio do rgo (1-2 linhas)"}},required:["frases","contexto"]};try{console.log(` Gerando sugestes de abordagem para: ${t}`);const r=await kf(i,o,s);if(!r.text)throw new Error("A resposta do modelo estava vazia");const a=JSON.parse(r.text);return console.log(` ${a.frases.length} sugestes geradas com sucesso`),a}catch(r){throw console.error("Erro ao gerar sugestes de abordagem:",r),r instanceof Error&&r.message.includes("API key not valid")?new Error("A chave de API fornecida no  vlida."):new Error(`No foi possvel gerar sugestes de abordagem para "${t}".`)}}const Qu=({textToCopy:t})=>{const[e,n]=L.useState(!1),i=()=>{navigator.clipboard.writeText(t).then(()=>{n(!0),setTimeout(()=>n(!1),2e3)}).catch(o=>{console.error("Failed to copy text: ",o)})};return S.jsx("button",{onClick:i,className:`p-1 rounded-md transition-colors duration-200 ${e?"bg-green-100 text-green-600":"bg-slate-100 text-slate-500 hover:bg-slate-200"}`,"aria-label":e?"Copiado!":"Copiar para a rea de transferncia",title:e?"Copiado!":"Copiar",children:e?S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}):S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})},yO=({data:t,onDetails:e,onSuggestApproach:n})=>{if(t.length===0)return S.jsx("div",{className:"text-center py-10 text-slate-500",children:S.jsx("p",{children:"Nenhum resultado encontrado. Tente ajustar os filtros de busca."})});const i=o=>{const s={Alto:"bg-red-100 text-red-800 border-red-300",Mdio:"bg-yellow-100 text-yellow-800 border-yellow-300",Baixo:"bg-green-100 text-green-800 border-green-300"};return S.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-bold border-2 ${s[o]||"bg-gray-100 text-gray-800"}`,children:[o," Potencial"]})};return S.jsx("div",{className:"overflow-x-auto rounded-lg border border-slate-200 shadow-sm",children:S.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[S.jsx("thead",{className:"bg-slate-50",children:S.jsxs("tr",{children:[S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"rgo / Dossi"}),S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Potencial de Compra"}),S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Contatos Chave"}),S.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Iniciativas e Notcias Recentes"}),S.jsx("th",{scope:"col",className:"px-6 py-3 text-center text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Aes"})]})}),S.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:t.map((o,s)=>S.jsxs("tr",{className:"hover:bg-slate-50 transition-colors duration-150",children:[S.jsx("td",{className:"px-6 py-4",children:S.jsxs("div",{className:"flex flex-col gap-2",children:[S.jsxs("div",{children:[S.jsx("p",{className:"text-sm font-semibold text-slate-900",children:o.orgao}),S.jsx("p",{className:"text-xs text-slate-500",children:o.localidade})]}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("code",{className:"text-xs bg-slate-100 px-2 py-1 rounded text-indigo-600 font-mono",children:o.cnpj}),S.jsx(Qu,{text:o.cnpj})]})]})}),S.jsx("td",{className:"px-6 py-4",children:i(o.potencialCompra)}),S.jsx("td",{className:"px-6 py-4",children:S.jsx("div",{className:"space-y-2",children:o.contatosChave&&o.contatosChave.length>0?o.contatosChave.map((r,a)=>S.jsxs("div",{className:"text-sm",children:[S.jsx("p",{className:"font-medium text-slate-900",children:r.nome}),S.jsx("p",{className:"text-xs text-slate-500",children:r.cargo})]},a)):S.jsx("p",{className:"text-xs text-slate-400 italic",children:"Sem contatos disponveis"})})}),S.jsx("td",{className:"px-6 py-4",children:S.jsxs("div",{className:"space-y-2",children:[S.jsx("p",{className:"text-sm text-slate-700 line-clamp-3",children:o.iniciativasRecentes}),o.fonteInformacao&&S.jsxs("a",{href:o.fonteInformacao,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-xs text-indigo-600 hover:text-indigo-800 hover:underline",children:[S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),"Ver fonte"]})]})}),S.jsx("td",{className:"px-6 py-4 text-center",children:S.jsxs("button",{onClick:()=>n(o.orgao,o.iniciativasRecentes),className:"inline-flex items-center gap-2 px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 transition-colors shadow-sm hover:shadow-md",title:"Gerar sugestes de abordagem com IA",children:[S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Sugerir Abordagem"]})})]},s))})]})})},vO=({data:t,onDetails:e})=>{const n=async i=>{let o="",s="";if(i.localidade){const l=i.localidade.split(",");l.length>=2?(o=l[0].trim(),s=l[1].trim()):o=i.localidade}let r=i.observacoes||"";i.contatoNome&&(r+=`
Contato Relevante: ${i.contatoNome} - ${i.contatoCargo||""}`),i.corpoDocente&&(r+=`
Corpo Docente: ${i.corpoDocente}`),i.email&&(r+=`
Email: ${i.email}`),i.website&&(r+=`
Website: ${i.website}`),i.endereco&&(r+=`
Endereo: ${i.endereco}`);const a={nome:i.entidade,tipo:i.tipo,cnpj:i.cnpj||"",cidade:o,uf:s,telefone:i.contatoPublico||"",observacoes:r.trim()};if(!((!a.nome||!a.cnpj)&&(alert("Ateno: Nome e CNPJ so obrigatrios para cadastrar o cliente."),!confirm("Deseja tentar cadastrar mesmo assim?")))){if(a.cnpj)try{const l=await fetch(`/api/clientes/cnpj/${encodeURIComponent(a.cnpj)}`);if(l.ok){const c=await l.json();if(confirm(` Este CNPJ j est cadastrado!

Cliente existente: ${c.nome}
Status: ${c.status}

Clique OK para ATUALIZAR as observaes do cliente existente.
Clique Cancelar para no fazer nada.`)){const p=c.observacoes||"",m=p?`${p}

--- Atualizado via Lead Search ---
${a.observacoes}`:a.observacoes;(await fetch(`/api/clientes/${c.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...c,observacoes:m,telefone:a.telefone||c.telefone})})).ok?alert(` Cliente atualizado com sucesso!

As novas informaes foram adicionadas s observaes.`):alert(" Erro ao atualizar cliente.")}return}}catch{console.log("Verificao de CNPJ no disponvel, tentando cadastro direto.")}if(confirm(`Deseja adicionar o cliente "${a.nome}" ao sistema?`))try{const l=await fetch("/api/clientes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(l.ok)alert(" Cliente adicionado com sucesso!");else if(l.status===409)alert(` Este cliente j est cadastrado no sistema (CNPJ j existe).

Voc pode ver o cliente na lista principal do CRM.`);else{const c=await l.json();alert(` Erro ao adicionar cliente: ${c.erro||"Erro desconhecido"}`)}}catch(l){console.error("Erro na requisio:",l),alert(" Erro de conexo ao adicionar cliente.")}}};return S.jsx("div",{className:"overflow-x-auto rounded-lg border border-slate-200 shadow-md",children:S.jsxs("table",{className:"w-full text-sm text-left text-slate-600",children:[S.jsx("thead",{className:"text-xs text-slate-700 uppercase bg-slate-100",children:S.jsxs("tr",{children:[S.jsx("th",{scope:"col",className:"px-6 py-3 font-bold",children:"Entidade"}),S.jsx("th",{scope:"col",className:"px-6 py-3 font-bold",children:"Contato Relevante"}),S.jsx("th",{scope:"col",className:"px-6 py-3 font-bold",children:"Informaes de Contato"}),S.jsx("th",{scope:"col",className:"px-6 py-3 font-bold",children:"Observaes"}),S.jsx("th",{scope:"col",className:"px-6 py-3 font-bold text-center",children:"Aes"})]})}),S.jsx("tbody",{children:t.map((i,o)=>S.jsxs("tr",{className:"bg-white border-b hover:bg-slate-50 transition-colors duration-200",children:[S.jsxs("td",{className:"px-6 py-4 font-medium text-slate-900 min-w-[250px] align-top",children:[S.jsx("div",{className:"font-bold text-base mb-1",children:i.entidade}),S.jsx("div",{className:"text-xs text-slate-500 mb-1",children:i.tipo}),S.jsx("div",{className:"text-xs text-slate-500 mb-2",children:i.localidade}),i.cnpj&&S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("span",{className:"font-mono text-indigo-600 text-xs bg-indigo-50 px-2 py-1 rounded",children:i.cnpj}),S.jsx(Qu,{textToCopy:i.cnpj})]})]}),S.jsx("td",{className:"px-6 py-4 min-w-[200px] align-top",children:i.contatoNome?S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"font-semibold text-slate-800",children:i.contatoNome}),S.jsx("div",{className:"text-xs text-slate-500",children:i.contatoCargo})]}):S.jsx("span",{className:"text-slate-400 italic",children:"N/A"})}),S.jsx("td",{className:"px-6 py-4 min-w-[250px] align-top",children:S.jsxs("div",{className:"flex flex-col gap-2",children:[i.website&&S.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),S.jsx("a",{href:i.website.startsWith("http")?i.website:`https://${i.website}`,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:underline truncate max-w-[200px]",children:i.website})]}),i.email&&S.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),S.jsx("span",{className:"truncate max-w-[180px]",title:i.email,children:i.email}),S.jsx(Qu,{textToCopy:i.email})]}),i.contatoPublico&&S.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),S.jsx("span",{children:i.contatoPublico}),S.jsx(Qu,{textToCopy:i.contatoPublico})]}),!i.website&&!i.email&&!i.contatoPublico&&S.jsx("span",{className:"text-slate-400 italic text-xs",children:"Nenhuma informao disponvel"})]})}),S.jsx("td",{className:"px-6 py-4 min-w-[200px] align-top",children:S.jsx("p",{className:"text-xs text-slate-600 leading-relaxed",children:i.observacoes||S.jsx("span",{className:"text-slate-400 italic",children:"Sem observaes"})})}),S.jsx("td",{className:"px-6 py-4 align-top",children:S.jsxs("div",{className:"flex flex-col items-center justify-start gap-2",children:[S.jsx("button",{onClick:()=>e(i.entidade,i.localidade),className:"text-indigo-600 hover:text-indigo-800 font-semibold text-xs py-1 px-3 rounded-md border border-indigo-200 hover:bg-indigo-50 transition-all w-full",children:"Ver Detalhes"}),S.jsxs("button",{onClick:()=>n(i),className:"text-green-600 hover:text-green-800 font-semibold text-xs py-1 px-3 rounded-md border border-green-200 hover:bg-green-50 transition-all w-full flex items-center justify-center gap-1",title:"Adicionar ao Sistema",children:[S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})}),"Adicionar"]})]})})]},o))})]})})},Uw=()=>S.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white",role:"status","aria-live":"polite",children:S.jsx("span",{className:"sr-only",children:"Carregando..."})}),_O=({message:t})=>S.jsxs("div",{className:"mt-8 bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-md",role:"alert",children:[S.jsx("p",{className:"font-bold",children:"Ocorreu um Erro"}),S.jsx("p",{children:t})]}),EO=({isOpen:t,onClose:e,apiKey:n,entityName:i,location:o})=>{const[s,r]=L.useState(""),[a,l]=L.useState(!1),[c,h]=L.useState(null);return L.useEffect(()=>{t&&(async()=>{l(!0),h(null),r("");try{const m=await mO(n,i,o);r(m)}catch(m){m instanceof Error?h(m.message):h("Ocorreu um erro desconhecido ao buscar os detalhes.")}finally{l(!1)}})()},[t,n,i,o]),t?S.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",onClick:e,role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:S.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col",onClick:p=>p.stopPropagation(),children:[S.jsxs("header",{className:"p-5 border-b border-slate-200 flex justify-between items-center sticky top-0 bg-white rounded-t-2xl",children:[S.jsxs("h2",{id:"modal-title",className:"text-xl font-bold text-slate-800",children:["Detalhes de: ",i]}),S.jsx("button",{onClick:e,className:"text-slate-500 hover:text-slate-800 transition-colors","aria-label":"Fechar modal",children:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),S.jsxs("div",{className:"p-6 overflow-y-auto",children:[a&&S.jsxs("div",{className:"flex flex-col items-center justify-center h-48",children:[S.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"}),S.jsx("p",{className:"mt-4 text-slate-600",children:"Buscando informaes detalhadas..."})]}),c&&S.jsxs("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-md",role:"alert",children:[S.jsx("p",{className:"font-bold",children:"Erro ao carregar"}),S.jsx("p",{children:c})]}),s&&!a&&S.jsx("div",{className:"prose prose-slate max-w-none",dangerouslySetInnerHTML:{__html:s.replace(/\n/g,"<br />")}})]})]})}):null},TO=({isOpen:t,orgao:e,isLoading:n,sugestoes:i,contexto:o,error:s,onClose:r})=>{if(!t)return null;const a=l=>{navigator.clipboard.writeText(l)};return S.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:S.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[S.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-green-500 px-6 py-4 flex justify-between items-center",children:[S.jsxs("div",{children:[S.jsx("h2",{className:"text-xl font-bold text-white",children:" Sugestes de Abordagem"}),S.jsx("p",{className:"text-green-50 text-sm mt-1",children:e})]}),S.jsx("button",{onClick:r,className:"text-white hover:text-green-100 transition-colors p-2 hover:bg-green-700 rounded-full","aria-label":"Fechar",children:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),S.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[n&&S.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[S.jsx(Uw,{}),S.jsx("p",{className:"text-slate-600 mt-4 text-center",children:" Analisando iniciativas e gerando sugestes personalizadas..."}),S.jsx("p",{className:"text-slate-400 text-sm mt-2",children:"Isso pode levar alguns segundos"})]}),s&&S.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded",children:S.jsxs("div",{className:"flex items-start",children:[S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500 mt-0.5 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),S.jsxs("div",{children:[S.jsx("h3",{className:"text-red-800 font-semibold",children:"Erro ao gerar sugestes"}),S.jsx("p",{className:"text-red-700 text-sm mt-1",children:s})]})]})}),!n&&!s&&i&&i.length>0&&S.jsxs("div",{className:"space-y-6",children:[o&&S.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 rounded",children:[S.jsxs("h3",{className:"text-blue-900 font-semibold text-sm mb-2 flex items-center gap-2",children:[S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Anlise do Cenrio"]}),S.jsx("p",{className:"text-blue-800 text-sm",children:o})]}),S.jsxs("div",{children:[S.jsxs("h3",{className:"text-slate-700 font-semibold mb-4 flex items-center gap-2",children:[S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Frases para usar em e-mail ou ligao:"]}),S.jsx("div",{className:"space-y-4",children:i.map((l,c)=>S.jsx("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-4 hover:shadow-md transition-shadow duration-200",children:S.jsxs("div",{className:"flex items-start justify-between gap-3",children:[S.jsxs("div",{className:"flex-1",children:[S.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[S.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-green-600 text-white text-xs font-bold",children:c+1}),S.jsxs("span",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wide",children:["Sugesto ",c+1]})]}),S.jsx("p",{className:"text-slate-800 leading-relaxed",children:l})]}),S.jsx("button",{onClick:()=>a(l),className:"flex-shrink-0 p-2 text-slate-400 hover:text-green-600 hover:bg-green-50 rounded transition-colors",title:"Copiar para rea de transferncia",children:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]})},c))})]}),S.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[S.jsxs("h4",{className:"text-yellow-900 font-semibold text-sm mb-2 flex items-center gap-2",children:[S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Dicas de uso"]}),S.jsxs("ul",{className:"text-yellow-800 text-sm space-y-1 ml-7",children:[S.jsx("li",{children:" Personalize ainda mais adicionando seu nome e empresa"}),S.jsx("li",{children:" Use como abertura e complemente com sua proposta de valor"}),S.jsx("li",{children:" Teste diferentes abordagens com diferentes contatos"}),S.jsx("li",{children:" Agende follow-up em 2-3 dias caso no tenha resposta"})]})]})]})]}),!n&&S.jsx("div",{className:"bg-slate-50 px-6 py-4 border-t border-slate-200 flex justify-end",children:S.jsx("button",{onClick:r,className:"px-6 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition-colors font-medium",children:"Fechar"})})]})})},LT=(t,e,n)=>{if(!n||n.length===0)return;const i=l=>{const c=l==null?"":String(l);return/[",\n]/.test(c)?`"${c.replace(/"/g,'""')}"`:c};let o=e.map(i).join(",")+`
`;o+=n.map(l=>l.map(i).join(",")).join(`
`);const s=new Blob([o],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a"),a=URL.createObjectURL(s);r.setAttribute("href",a),r.setAttribute("download",t),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(a)},Of=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Xr(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function Pg(t){return"nodeType"in t}function tn(t){var e,n;return t?Xr(t)?t:Pg(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function Vg(t){const{Document:e}=tn(t);return t instanceof e}function Fl(t){return Xr(t)?!1:t instanceof tn(t).HTMLElement}function Lw(t){return t instanceof tn(t).SVGElement}function Wr(t){return t?Xr(t)?t.document:Pg(t)?Vg(t)?t:Fl(t)||Lw(t)?t.ownerDocument:document:document:document}const Oo=Of?L.useLayoutEffect:L.useEffect;function Ug(t){const e=L.useRef(t);return Oo(()=>{e.current=t}),L.useCallback(function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e.current==null?void 0:e.current(...i)},[])}function SO(){const t=L.useRef(null),e=L.useCallback((i,o)=>{t.current=setInterval(i,o)},[]),n=L.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function Tl(t,e){e===void 0&&(e=[t]);const n=L.useRef(t);return Oo(()=>{n.current!==t&&(n.current=t)},e),n}function Gl(t,e){const n=L.useRef();return L.useMemo(()=>{const i=t(n.current);return n.current=i,i},[...e])}function Kc(t){const e=Ug(t),n=L.useRef(null),i=L.useCallback(o=>{o!==n.current&&(e==null||e(o,n.current)),n.current=o},[]);return[n,i]}function Ip(t){const e=L.useRef();return L.useEffect(()=>{e.current=t},[t]),e.current}let Xd={};function qf(t,e){return L.useMemo(()=>{if(e)return e;const n=Xd[t]==null?0:Xd[t]+1;return Xd[t]=n,t+"-"+n},[t,e])}function kw(t){return function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return i.reduce((s,r)=>{const a=Object.entries(r);for(const[l,c]of a){const h=s[l];h!=null&&(s[l]=h+t*c)}return s},{...e})}}const yr=kw(1),$c=kw(-1);function AO(t){return"clientX"in t&&"clientY"in t}function Ow(t){if(!t)return!1;const{KeyboardEvent:e}=tn(t.target);return e&&t instanceof e}function CO(t){if(!t)return!1;const{TouchEvent:e}=tn(t.target);return e&&t instanceof e}function bp(t){if(CO(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return AO(t)?{x:t.clientX,y:t.clientY}:null}const kT="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function RO(t){return t.matches(kT)?t:t.querySelector(kT)}const wO={display:"none"};function IO(t){let{id:e,value:n}=t;return ln.createElement("div",{id:e,style:wO},n)}function bO(t){let{id:e,announcement:n,ariaLiveType:i="assertive"}=t;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return ln.createElement("div",{id:e,style:o,role:"status","aria-live":i,"aria-atomic":!0},n)}function xO(){const[t,e]=L.useState("");return{announce:L.useCallback(i=>{i!=null&&e(i)},[]),announcement:t}}const qw=L.createContext(null);function NO(t){const e=L.useContext(qw);L.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function MO(){const[t]=L.useState(()=>new Set),e=L.useCallback(i=>(t.add(i),()=>t.delete(i)),[t]);return[L.useCallback(i=>{let{type:o,event:s}=i;t.forEach(r=>{var a;return(a=r[o])==null?void 0:a.call(r,s)})},[t]),e]}const DO={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},PO={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function VO(t){let{announcements:e=PO,container:n,hiddenTextDescribedById:i,screenReaderInstructions:o=DO}=t;const{announce:s,announcement:r}=xO(),a=qf("DndLiveRegion"),[l,c]=L.useState(!1);if(L.useEffect(()=>{c(!0)},[]),NO(L.useMemo(()=>({onDragStart(p){let{active:m}=p;s(e.onDragStart({active:m}))},onDragMove(p){let{active:m,over:y}=p;e.onDragMove&&s(e.onDragMove({active:m,over:y}))},onDragOver(p){let{active:m,over:y}=p;s(e.onDragOver({active:m,over:y}))},onDragEnd(p){let{active:m,over:y}=p;s(e.onDragEnd({active:m,over:y}))},onDragCancel(p){let{active:m,over:y}=p;s(e.onDragCancel({active:m,over:y}))}}),[s,e])),!l)return null;const h=ln.createElement(ln.Fragment,null,ln.createElement(IO,{id:i,value:o.draggable}),ln.createElement(bO,{id:a,announcement:r}));return n?Ys.createPortal(h,n):h}var lt;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(lt||(lt={}));function Qc(){}function UO(t,e){return L.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function LO(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return L.useMemo(()=>[...e].filter(i=>i!=null),[...e])}const Gn=Object.freeze({x:0,y:0});function kO(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function OO(t,e){let{data:{value:n}}=t,{data:{value:i}}=e;return n-i}function qO(t,e){let{data:{value:n}}=t,{data:{value:i}}=e;return i-n}function OT(t){let{left:e,top:n,height:i,width:o}=t;return[{x:e,y:n},{x:e+o,y:n},{x:e,y:n+i},{x:e+o,y:n+i}]}function BO(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}const FO=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:i}=t;const o=OT(e),s=[];for(const r of i){const{id:a}=r,l=n.get(a);if(l){const c=OT(l),h=o.reduce((m,y,b)=>m+kO(c[b],y),0),p=Number((h/4).toFixed(4));s.push({id:a,data:{droppableContainer:r,value:p}})}}return s.sort(OO)};function GO(t,e){const n=Math.max(e.top,t.top),i=Math.max(e.left,t.left),o=Math.min(e.left+e.width,t.left+t.width),s=Math.min(e.top+e.height,t.top+t.height),r=o-i,a=s-n;if(i<o&&n<s){const l=e.width*e.height,c=t.width*t.height,h=r*a,p=h/(l+c-h);return Number(p.toFixed(4))}return 0}const zO=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:i}=t;const o=[];for(const s of i){const{id:r}=s,a=n.get(r);if(a){const l=GO(a,e);l>0&&o.push({id:r,data:{droppableContainer:s,value:l}})}}return o.sort(qO)};function HO(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function Bw(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:Gn}function YO(t){return function(n){for(var i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];return o.reduce((r,a)=>({...r,top:r.top+t*a.y,bottom:r.bottom+t*a.y,left:r.left+t*a.x,right:r.right+t*a.x}),{...n})}}const JO=YO(1);function KO(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function $O(t,e,n){const i=KO(e);if(!i)return t;const{scaleX:o,scaleY:s,x:r,y:a}=i,l=t.left-r-(1-o)*parseFloat(n),c=t.top-a-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),h=o?t.width/o:t.width,p=s?t.height/s:t.height;return{width:h,height:p,top:c,right:l+h,bottom:c+p,left:l}}const QO={ignoreTransform:!1};function zl(t,e){e===void 0&&(e=QO);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:c,transformOrigin:h}=tn(t).getComputedStyle(t);c&&(n=$O(n,c,h))}const{top:i,left:o,width:s,height:r,bottom:a,right:l}=n;return{top:i,left:o,width:s,height:r,bottom:a,right:l}}function qT(t){return zl(t,{ignoreTransform:!0})}function XO(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function WO(t,e){return e===void 0&&(e=tn(t).getComputedStyle(t)),e.position==="fixed"}function ZO(t,e){e===void 0&&(e=tn(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const s=e[o];return typeof s=="string"?n.test(s):!1})}function Lg(t,e){const n=[];function i(o){if(e!=null&&n.length>=e||!o)return n;if(Vg(o)&&o.scrollingElement!=null&&!n.includes(o.scrollingElement))return n.push(o.scrollingElement),n;if(!Fl(o)||Lw(o)||n.includes(o))return n;const s=tn(t).getComputedStyle(o);return o!==t&&ZO(o,s)&&n.push(o),WO(o,s)?n:i(o.parentNode)}return t?i(t):n}function Fw(t){const[e]=Lg(t,1);return e??null}function Wd(t){return!Of||!t?null:Xr(t)?t:Pg(t)?Vg(t)||t===Wr(t).scrollingElement?window:Fl(t)?t:null:null}function Gw(t){return Xr(t)?t.scrollX:t.scrollLeft}function zw(t){return Xr(t)?t.scrollY:t.scrollTop}function xp(t){return{x:Gw(t),y:zw(t)}}var gt;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(gt||(gt={}));function Hw(t){return!Of||!t?!1:t===document.scrollingElement}function Yw(t){const e={x:0,y:0},n=Hw(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},i={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},o=t.scrollTop<=e.y,s=t.scrollLeft<=e.x,r=t.scrollTop>=i.y,a=t.scrollLeft>=i.x;return{isTop:o,isLeft:s,isBottom:r,isRight:a,maxScroll:i,minScroll:e}}const jO={x:.2,y:.2};function e5(t,e,n,i,o){let{top:s,left:r,right:a,bottom:l}=n;i===void 0&&(i=10),o===void 0&&(o=jO);const{isTop:c,isBottom:h,isLeft:p,isRight:m}=Yw(t),y={x:0,y:0},b={x:0,y:0},x={height:e.height*o.y,width:e.width*o.x};return!c&&s<=e.top+x.height?(y.y=gt.Backward,b.y=i*Math.abs((e.top+x.height-s)/x.height)):!h&&l>=e.bottom-x.height&&(y.y=gt.Forward,b.y=i*Math.abs((e.bottom-x.height-l)/x.height)),!m&&a>=e.right-x.width?(y.x=gt.Forward,b.x=i*Math.abs((e.right-x.width-a)/x.width)):!p&&r<=e.left+x.width&&(y.x=gt.Backward,b.x=i*Math.abs((e.left+x.width-r)/x.width)),{direction:y,speed:b}}function t5(t){if(t===document.scrollingElement){const{innerWidth:s,innerHeight:r}=window;return{top:0,left:0,right:s,bottom:r,width:s,height:r}}const{top:e,left:n,right:i,bottom:o}=t.getBoundingClientRect();return{top:e,left:n,right:i,bottom:o,width:t.clientWidth,height:t.clientHeight}}function Jw(t){return t.reduce((e,n)=>yr(e,xp(n)),Gn)}function n5(t){return t.reduce((e,n)=>e+Gw(n),0)}function i5(t){return t.reduce((e,n)=>e+zw(n),0)}function o5(t,e){if(e===void 0&&(e=zl),!t)return;const{top:n,left:i,bottom:o,right:s}=e(t);Fw(t)&&(o<=0||s<=0||n>=window.innerHeight||i>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const s5=[["x",["left","right"],n5],["y",["top","bottom"],i5]];class kg{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const i=Lg(n),o=Jw(i);this.rect={...e},this.width=e.width,this.height=e.height;for(const[s,r,a]of s5)for(const l of r)Object.defineProperty(this,l,{get:()=>{const c=a(i),h=o[s]-c;return this.rect[l]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class $a{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var i;return(i=this.target)==null?void 0:i.removeEventListener(...n)})},this.target=e}add(e,n,i){var o;(o=this.target)==null||o.addEventListener(e,n,i),this.listeners.push([e,n,i])}}function r5(t){const{EventTarget:e}=tn(t);return t instanceof e?t:Wr(t)}function Zd(t,e){const n=Math.abs(t.x),i=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+i**2)>e:"x"in e&&"y"in e?n>e.x&&i>e.y:"x"in e?n>e.x:"y"in e?i>e.y:!1}var Cn;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Cn||(Cn={}));function BT(t){t.preventDefault()}function a5(t){t.stopPropagation()}var we;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(we||(we={}));const Kw={start:[we.Space,we.Enter],cancel:[we.Esc],end:[we.Space,we.Enter,we.Tab]},l5=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case we.Right:return{...n,x:n.x+25};case we.Left:return{...n,x:n.x-25};case we.Down:return{...n,y:n.y+25};case we.Up:return{...n,y:n.y-25}}};class $w{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new $a(Wr(n)),this.windowListeners=new $a(tn(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Cn.Resize,this.handleCancel),this.windowListeners.add(Cn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Cn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,i=e.node.current;i&&o5(i),n(Gn)}handleKeyDown(e){if(Ow(e)){const{active:n,context:i,options:o}=this.props,{keyboardCodes:s=Kw,coordinateGetter:r=l5,scrollBehavior:a="smooth"}=o,{code:l}=e;if(s.end.includes(l)){this.handleEnd(e);return}if(s.cancel.includes(l)){this.handleCancel(e);return}const{collisionRect:c}=i.current,h=c?{x:c.left,y:c.top}:Gn;this.referenceCoordinates||(this.referenceCoordinates=h);const p=r(e,{active:n,context:i.current,currentCoordinates:h});if(p){const m=$c(p,h),y={x:0,y:0},{scrollableAncestors:b}=i.current;for(const x of b){const P=e.code,{isTop:R,isRight:E,isLeft:w,isBottom:D,maxScroll:O,minScroll:q}=Yw(x),T=t5(x),_={x:Math.min(P===we.Right?T.right-T.width/2:T.right,Math.max(P===we.Right?T.left:T.left+T.width/2,p.x)),y:Math.min(P===we.Down?T.bottom-T.height/2:T.bottom,Math.max(P===we.Down?T.top:T.top+T.height/2,p.y))},A=P===we.Right&&!E||P===we.Left&&!w,I=P===we.Down&&!D||P===we.Up&&!R;if(A&&_.x!==p.x){const M=x.scrollLeft+m.x,V=P===we.Right&&M<=O.x||P===we.Left&&M>=q.x;if(V&&!m.y){x.scrollTo({left:M,behavior:a});return}V?y.x=x.scrollLeft-M:y.x=P===we.Right?x.scrollLeft-O.x:x.scrollLeft-q.x,y.x&&x.scrollBy({left:-y.x,behavior:a});break}else if(I&&_.y!==p.y){const M=x.scrollTop+m.y,V=P===we.Down&&M<=O.y||P===we.Up&&M>=q.y;if(V&&!m.x){x.scrollTo({top:M,behavior:a});return}V?y.y=x.scrollTop-M:y.y=P===we.Down?x.scrollTop-O.y:x.scrollTop-q.y,y.y&&x.scrollBy({top:-y.y,behavior:a});break}}this.handleMove(e,yr($c(p,this.referenceCoordinates),y))}}}handleMove(e,n){const{onMove:i}=this.props;e.preventDefault(),i(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}$w.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:i=Kw,onActivation:o}=e,{active:s}=n;const{code:r}=t.nativeEvent;if(i.start.includes(r)){const a=s.activatorNode.current;return a&&t.target!==a?!1:(t.preventDefault(),o==null||o({event:t.nativeEvent}),!0)}return!1}}];function FT(t){return!!(t&&"distance"in t)}function GT(t){return!!(t&&"delay"in t)}class Og{constructor(e,n,i){var o;i===void 0&&(i=r5(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:s}=e,{target:r}=s;this.props=e,this.events=n,this.document=Wr(r),this.documentListeners=new $a(this.document),this.listeners=new $a(i),this.windowListeners=new $a(tn(r)),this.initialCoordinates=(o=bp(s))!=null?o:Gn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:i}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Cn.Resize,this.handleCancel),this.windowListeners.add(Cn.DragStart,BT),this.windowListeners.add(Cn.VisibilityChange,this.handleCancel),this.windowListeners.add(Cn.ContextMenu,BT),this.documentListeners.add(Cn.Keydown,this.handleKeydown),n){if(i!=null&&i({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(GT(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(FT(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:i,onPending:o}=this.props;o(i,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(Cn.Click,a5,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Cn.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:i,initialCoordinates:o,props:s}=this,{onMove:r,options:{activationConstraint:a}}=s;if(!o)return;const l=(n=bp(e))!=null?n:Gn,c=$c(o,l);if(!i&&a){if(FT(a)){if(a.tolerance!=null&&Zd(c,a.tolerance))return this.handleCancel();if(Zd(c,a.distance))return this.handleStart()}if(GT(a)&&Zd(c,a.tolerance))return this.handleCancel();this.handlePending(a,c);return}e.cancelable&&e.preventDefault(),r(l)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===we.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const u5={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class qg extends Og{constructor(e){const{event:n}=e,i=Wr(n.target);super(e,u5,i)}}qg.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:i}=e;return!n.isPrimary||n.button!==0?!1:(i==null||i({event:n}),!0)}}];const c5={move:{name:"mousemove"},end:{name:"mouseup"}};var Np;(function(t){t[t.RightClick=2]="RightClick"})(Np||(Np={}));class f5 extends Og{constructor(e){super(e,c5,Wr(e.event.target))}}f5.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:i}=e;return n.button===Np.RightClick?!1:(i==null||i({event:n}),!0)}}];const jd={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class d5 extends Og{constructor(e){super(e,jd)}static setup(){return window.addEventListener(jd.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(jd.move.name,e)};function e(){}}}d5.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:i}=e;const{touches:o}=n;return o.length>1?!1:(i==null||i({event:n}),!0)}}];var Qa;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(Qa||(Qa={}));var Xc;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Xc||(Xc={}));function h5(t){let{acceleration:e,activator:n=Qa.Pointer,canScroll:i,draggingRect:o,enabled:s,interval:r=5,order:a=Xc.TreeOrder,pointerCoordinates:l,scrollableAncestors:c,scrollableAncestorRects:h,delta:p,threshold:m}=t;const y=m5({delta:p,disabled:!s}),[b,x]=SO(),P=L.useRef({x:0,y:0}),R=L.useRef({x:0,y:0}),E=L.useMemo(()=>{switch(n){case Qa.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case Qa.DraggableRect:return o}},[n,o,l]),w=L.useRef(null),D=L.useCallback(()=>{const q=w.current;if(!q)return;const T=P.current.x*R.current.x,_=P.current.y*R.current.y;q.scrollBy(T,_)},[]),O=L.useMemo(()=>a===Xc.TreeOrder?[...c].reverse():c,[a,c]);L.useEffect(()=>{if(!s||!c.length||!E){x();return}for(const q of O){if((i==null?void 0:i(q))===!1)continue;const T=c.indexOf(q),_=h[T];if(!_)continue;const{direction:A,speed:I}=e5(q,_,E,e,m);for(const M of["x","y"])y[M][A[M]]||(I[M]=0,A[M]=0);if(I.x>0||I.y>0){x(),w.current=q,b(D,r),P.current=I,R.current=A;return}}P.current={x:0,y:0},R.current={x:0,y:0},x()},[e,D,i,x,s,r,JSON.stringify(E),JSON.stringify(y),b,c,O,h,JSON.stringify(m)])}const p5={x:{[gt.Backward]:!1,[gt.Forward]:!1},y:{[gt.Backward]:!1,[gt.Forward]:!1}};function m5(t){let{delta:e,disabled:n}=t;const i=Ip(e);return Gl(o=>{if(n||!i||!o)return p5;const s={x:Math.sign(e.x-i.x),y:Math.sign(e.y-i.y)};return{x:{[gt.Backward]:o.x[gt.Backward]||s.x===-1,[gt.Forward]:o.x[gt.Forward]||s.x===1},y:{[gt.Backward]:o.y[gt.Backward]||s.y===-1,[gt.Forward]:o.y[gt.Forward]||s.y===1}}},[n,e,i])}function g5(t,e){const n=e!=null?t.get(e):void 0,i=n?n.node.current:null;return Gl(o=>{var s;return e==null?null:(s=i??o)!=null?s:null},[i,e])}function y5(t,e){return L.useMemo(()=>t.reduce((n,i)=>{const{sensor:o}=i,s=o.activators.map(r=>({eventName:r.eventName,handler:e(r.handler,i)}));return[...n,...s]},[]),[t,e])}var Sl;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Sl||(Sl={}));var Mp;(function(t){t.Optimized="optimized"})(Mp||(Mp={}));const zT=new Map;function v5(t,e){let{dragging:n,dependencies:i,config:o}=e;const[s,r]=L.useState(null),{frequency:a,measure:l,strategy:c}=o,h=L.useRef(t),p=P(),m=Tl(p),y=L.useCallback(function(R){R===void 0&&(R=[]),!m.current&&r(E=>E===null?R:E.concat(R.filter(w=>!E.includes(w))))},[m]),b=L.useRef(null),x=Gl(R=>{if(p&&!n)return zT;if(!R||R===zT||h.current!==t||s!=null){const E=new Map;for(let w of t){if(!w)continue;if(s&&s.length>0&&!s.includes(w.id)&&w.rect.current){E.set(w.id,w.rect.current);continue}const D=w.node.current,O=D?new kg(l(D),D):null;w.rect.current=O,O&&E.set(w.id,O)}return E}return R},[t,s,n,p,l]);return L.useEffect(()=>{h.current=t},[t]),L.useEffect(()=>{p||y()},[n,p]),L.useEffect(()=>{s&&s.length>0&&r(null)},[JSON.stringify(s)]),L.useEffect(()=>{p||typeof a!="number"||b.current!==null||(b.current=setTimeout(()=>{y(),b.current=null},a))},[a,p,y,...i]),{droppableRects:x,measureDroppableContainers:y,measuringScheduled:s!=null};function P(){switch(c){case Sl.Always:return!1;case Sl.BeforeDragging:return n;default:return!n}}}function Qw(t,e){return Gl(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function _5(t,e){return Qw(t,e)}function E5(t){let{callback:e,disabled:n}=t;const i=Ug(e),o=L.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(i)},[i,n]);return L.useEffect(()=>()=>o==null?void 0:o.disconnect(),[o]),o}function Bf(t){let{callback:e,disabled:n}=t;const i=Ug(e),o=L.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(i)},[n]);return L.useEffect(()=>()=>o==null?void 0:o.disconnect(),[o]),o}function T5(t){return new kg(zl(t),t)}function HT(t,e,n){e===void 0&&(e=T5);const[i,o]=L.useState(null);function s(){o(l=>{if(!t)return null;if(t.isConnected===!1){var c;return(c=l??n)!=null?c:null}const h=e(t);return JSON.stringify(l)===JSON.stringify(h)?l:h})}const r=E5({callback(l){if(t)for(const c of l){const{type:h,target:p}=c;if(h==="childList"&&p instanceof HTMLElement&&p.contains(t)){s();break}}}}),a=Bf({callback:s});return Oo(()=>{s(),t?(a==null||a.observe(t),r==null||r.observe(document.body,{childList:!0,subtree:!0})):(a==null||a.disconnect(),r==null||r.disconnect())},[t]),i}function S5(t){const e=Qw(t);return Bw(t,e)}const YT=[];function A5(t){const e=L.useRef(t),n=Gl(i=>t?i&&i!==YT&&t&&e.current&&t.parentNode===e.current.parentNode?i:Lg(t):YT,[t]);return L.useEffect(()=>{e.current=t},[t]),n}function C5(t){const[e,n]=L.useState(null),i=L.useRef(t),o=L.useCallback(s=>{const r=Wd(s.target);r&&n(a=>a?(a.set(r,xp(r)),new Map(a)):null)},[]);return L.useEffect(()=>{const s=i.current;if(t!==s){r(s);const a=t.map(l=>{const c=Wd(l);return c?(c.addEventListener("scroll",o,{passive:!0}),[c,xp(c)]):null}).filter(l=>l!=null);n(a.length?new Map(a):null),i.current=t}return()=>{r(t),r(s)};function r(a){a.forEach(l=>{const c=Wd(l);c==null||c.removeEventListener("scroll",o)})}},[o,t]),L.useMemo(()=>t.length?e?Array.from(e.values()).reduce((s,r)=>yr(s,r),Gn):Jw(t):Gn,[t,e])}function JT(t,e){e===void 0&&(e=[]);const n=L.useRef(null);return L.useEffect(()=>{n.current=null},e),L.useEffect(()=>{const i=t!==Gn;i&&!n.current&&(n.current=t),!i&&n.current&&(n.current=null)},[t]),n.current?$c(t,n.current):Gn}function R5(t){L.useEffect(()=>{if(!Of)return;const e=t.map(n=>{let{sensor:i}=n;return i.setup==null?void 0:i.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function w5(t,e){return L.useMemo(()=>t.reduce((n,i)=>{let{eventName:o,handler:s}=i;return n[o]=r=>{s(r,e)},n},{}),[t,e])}function Xw(t){return L.useMemo(()=>t?XO(t):null,[t])}const KT=[];function I5(t,e){e===void 0&&(e=zl);const[n]=t,i=Xw(n?tn(n):null),[o,s]=L.useState(KT);function r(){s(()=>t.length?t.map(l=>Hw(l)?i:new kg(e(l),l)):KT)}const a=Bf({callback:r});return Oo(()=>{a==null||a.disconnect(),r(),t.forEach(l=>a==null?void 0:a.observe(l))},[t]),o}function b5(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return Fl(e)?e:t}function x5(t){let{measure:e}=t;const[n,i]=L.useState(null),o=L.useCallback(c=>{for(const{target:h}of c)if(Fl(h)){i(p=>{const m=e(h);return p?{...p,width:m.width,height:m.height}:m});break}},[e]),s=Bf({callback:o}),r=L.useCallback(c=>{const h=b5(c);s==null||s.disconnect(),h&&(s==null||s.observe(h)),i(h?e(h):null)},[e,s]),[a,l]=Kc(r);return L.useMemo(()=>({nodeRef:a,rect:n,setRef:l}),[n,a,l])}const N5=[{sensor:qg,options:{}},{sensor:$w,options:{}}],M5={current:{}},Xu={draggable:{measure:qT},droppable:{measure:qT,strategy:Sl.WhileDragging,frequency:Mp.Optimized},dragOverlay:{measure:zl}};class Xa extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,i;return(n=(i=this.get(e))==null?void 0:i.node.current)!=null?n:void 0}}const D5={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Xa,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Qc},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Xu,measureDroppableContainers:Qc,windowRect:null,measuringScheduled:!1},P5={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Qc,draggableNodes:new Map,over:null,measureDroppableContainers:Qc},Ff=L.createContext(P5),V5=L.createContext(D5);function U5(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Xa}}}function L5(t,e){switch(e.type){case lt.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case lt.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case lt.DragEnd:case lt.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case lt.RegisterDroppable:{const{element:n}=e,{id:i}=n,o=new Xa(t.droppable.containers);return o.set(i,n),{...t,droppable:{...t.droppable,containers:o}}}case lt.SetDroppableDisabled:{const{id:n,key:i,disabled:o}=e,s=t.droppable.containers.get(n);if(!s||i!==s.key)return t;const r=new Xa(t.droppable.containers);return r.set(n,{...s,disabled:o}),{...t,droppable:{...t.droppable,containers:r}}}case lt.UnregisterDroppable:{const{id:n,key:i}=e,o=t.droppable.containers.get(n);if(!o||i!==o.key)return t;const s=new Xa(t.droppable.containers);return s.delete(n),{...t,droppable:{...t.droppable,containers:s}}}default:return t}}function k5(t){let{disabled:e}=t;const{active:n,activatorEvent:i,draggableNodes:o}=L.useContext(Ff),s=Ip(i),r=Ip(n==null?void 0:n.id);return L.useEffect(()=>{if(!e&&!i&&s&&r!=null){if(!Ow(s)||document.activeElement===s.target)return;const a=o.get(r);if(!a)return;const{activatorNode:l,node:c}=a;if(!l.current&&!c.current)return;requestAnimationFrame(()=>{for(const h of[l.current,c.current]){if(!h)continue;const p=RO(h);if(p){p.focus();break}}})}},[i,e,o,r,s]),null}function O5(t,e){let{transform:n,...i}=e;return t!=null&&t.length?t.reduce((o,s)=>s({transform:o,...i}),n):n}function q5(t){return L.useMemo(()=>({draggable:{...Xu.draggable,...t==null?void 0:t.draggable},droppable:{...Xu.droppable,...t==null?void 0:t.droppable},dragOverlay:{...Xu.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function B5(t){let{activeNode:e,measure:n,initialRect:i,config:o=!0}=t;const s=L.useRef(!1),{x:r,y:a}=typeof o=="boolean"?{x:o,y:o}:o;Oo(()=>{if(!r&&!a||!e){s.current=!1;return}if(s.current||!i)return;const c=e==null?void 0:e.node.current;if(!c||c.isConnected===!1)return;const h=n(c),p=Bw(h,i);if(r||(p.x=0),a||(p.y=0),s.current=!0,Math.abs(p.x)>0||Math.abs(p.y)>0){const m=Fw(c);m&&m.scrollBy({top:p.y,left:p.x})}},[e,r,a,i,n])}const Ww=L.createContext({...Gn,scaleX:1,scaleY:1});var no;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(no||(no={}));const F5=L.memo(function(e){var n,i,o,s;let{id:r,accessibility:a,autoScroll:l=!0,children:c,sensors:h=N5,collisionDetection:p=zO,measuring:m,modifiers:y,...b}=e;const x=L.useReducer(L5,void 0,U5),[P,R]=x,[E,w]=MO(),[D,O]=L.useState(no.Uninitialized),q=D===no.Initialized,{draggable:{active:T,nodes:_,translate:A},droppable:{containers:I}}=P,M=T!=null?_.get(T):null,V=L.useRef({initial:null,translated:null}),N=L.useMemo(()=>{var me;return T!=null?{id:T,data:(me=M==null?void 0:M.data)!=null?me:M5,rect:V}:null},[T,M]),ye=L.useRef(null),[Qe,z]=L.useState(null),[Q,Z]=L.useState(null),re=Tl(b,Object.values(b)),be=qf("DndDescribedBy",r),nn=L.useMemo(()=>I.getEnabled(),[I]),Et=q5(m),{droppableRects:Mt,measureDroppableContainers:it,measuringScheduled:Ot}=v5(nn,{dragging:q,dependencies:[A.x,A.y],config:Et.droppable}),Tt=g5(_,T),Yn=L.useMemo(()=>Q?bp(Q):null,[Q]),zi=$l(),Jn=_5(Tt,Et.draggable.measure);B5({activeNode:T!=null?_.get(T):null,config:zi.layoutShiftCompensation,initialRect:Jn,measure:Et.draggable.measure});const Dt=HT(Tt,Et.draggable.measure,Jn),zo=HT(Tt?Tt.parentElement:null),_n=L.useRef({activatorEvent:null,active:null,activeNode:Tt,collisionRect:null,collisions:null,droppableRects:Mt,draggableNodes:_,draggingNode:null,draggingNodeRect:null,droppableContainers:I,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Hi=I.getNodeFor((n=_n.current.over)==null?void 0:n.id),En=x5({measure:Et.dragOverlay.measure}),Yi=(i=En.nodeRef.current)!=null?i:Tt,Tn=q?(o=En.rect)!=null?o:Dt:null,Ji=!!(En.nodeRef.current&&En.rect),Kn=S5(Ji?null:Dt),Ge=Xw(Yi?tn(Yi):null),xe=A5(q?Hi??Tt:null),K=I5(xe),Oe=O5(y,{transform:{x:A.x-Kn.x,y:A.y-Kn.y,scaleX:1,scaleY:1},activatorEvent:Q,active:N,activeNodeRect:Dt,containerNodeRect:zo,draggingNodeRect:Tn,over:_n.current.over,overlayNodeRect:En.rect,scrollableAncestors:xe,scrollableAncestorRects:K,windowRect:Ge}),ot=Yn?yr(Yn,A):null,Xe=C5(xe),$n=JT(Xe),Hl=JT(Xe,[Dt]),pi=yr(Oe,$n),Qn=Tn?JO(Tn,Oe):null,Ho=N&&Qn?p({active:N,collisionRect:Qn,droppableRects:Mt,droppableContainers:nn,pointerCoordinates:ot}):null,Yl=BO(Ho,"id"),[kn,Zr]=L.useState(null),Yo=Ji?Oe:yr(Oe,Hl),jr=HO(Yo,(s=kn==null?void 0:kn.rect)!=null?s:null,Dt),Jo=L.useRef(null),Xn=L.useCallback((me,Pt)=>{let{sensor:st,options:Ht}=Pt;if(ye.current==null)return;const Yt=_.get(ye.current);if(!Yt)return;const qt=me.nativeEvent,St=new st({active:ye.current,activeNode:Yt,event:qt,options:Ht,context:_n,onAbort(rt){if(!_.get(rt))return;const{onDragAbort:sn}=re.current,Sn={id:rt};sn==null||sn(Sn),E({type:"onDragAbort",event:Sn})},onPending(rt,on,sn,Sn){if(!_.get(rt))return;const{onDragPending:On}=re.current,Wn={id:rt,constraint:on,initialCoordinates:sn,offset:Sn};On==null||On(Wn),E({type:"onDragPending",event:Wn})},onStart(rt){const on=ye.current;if(on==null)return;const sn=_.get(on);if(!sn)return;const{onDragStart:Sn}=re.current,mi={activatorEvent:qt,active:{id:on,data:sn.data,rect:V}};Ys.unstable_batchedUpdates(()=>{Sn==null||Sn(mi),O(no.Initializing),R({type:lt.DragStart,initialCoordinates:rt,active:on}),E({type:"onDragStart",event:mi}),z(Jo.current),Z(qt)})},onMove(rt){R({type:lt.DragMove,coordinates:rt})},onEnd:Ki(lt.DragEnd),onCancel:Ki(lt.DragCancel)});Jo.current=St;function Ki(rt){return async function(){const{active:sn,collisions:Sn,over:mi,scrollAdjustedTranslate:On}=_n.current;let Wn=null;if(sn&&On){const{cancelDrop:Jt}=re.current;Wn={activatorEvent:qt,active:sn,collisions:Sn,delta:On,over:mi},rt===lt.DragEnd&&typeof Jt=="function"&&await Promise.resolve(Jt(Wn))&&(rt=lt.DragCancel)}ye.current=null,Ys.unstable_batchedUpdates(()=>{R({type:rt}),O(no.Uninitialized),Zr(null),z(null),Z(null),Jo.current=null;const Jt=rt===lt.DragEnd?"onDragEnd":"onDragCancel";if(Wn){const Ps=re.current[Jt];Ps==null||Ps(Wn),E({type:Jt,event:Wn})}})}}},[_]),Jl=L.useCallback((me,Pt)=>(st,Ht)=>{const Yt=st.nativeEvent,qt=_.get(Ht);if(ye.current!==null||!qt||Yt.dndKit||Yt.defaultPrevented)return;const St={active:qt};me(st,Pt.options,St)===!0&&(Yt.dndKit={capturedBy:Pt.sensor},ye.current=Ht,Xn(st,Pt))},[_,Xn]),Ko=y5(h,Jl);R5(h),Oo(()=>{Dt&&D===no.Initializing&&O(no.Initialized)},[Dt,D]),L.useEffect(()=>{const{onDragMove:me}=re.current,{active:Pt,activatorEvent:st,collisions:Ht,over:Yt}=_n.current;if(!Pt||!st)return;const qt={active:Pt,activatorEvent:st,collisions:Ht,delta:{x:pi.x,y:pi.y},over:Yt};Ys.unstable_batchedUpdates(()=>{me==null||me(qt),E({type:"onDragMove",event:qt})})},[pi.x,pi.y]),L.useEffect(()=>{const{active:me,activatorEvent:Pt,collisions:st,droppableContainers:Ht,scrollAdjustedTranslate:Yt}=_n.current;if(!me||ye.current==null||!Pt||!Yt)return;const{onDragOver:qt}=re.current,St=Ht.get(Yl),Ki=St&&St.rect.current?{id:St.id,rect:St.rect.current,data:St.data,disabled:St.disabled}:null,rt={active:me,activatorEvent:Pt,collisions:st,delta:{x:Yt.x,y:Yt.y},over:Ki};Ys.unstable_batchedUpdates(()=>{Zr(Ki),qt==null||qt(rt),E({type:"onDragOver",event:rt})})},[Yl]),Oo(()=>{_n.current={activatorEvent:Q,active:N,activeNode:Tt,collisionRect:Qn,collisions:Ho,droppableRects:Mt,draggableNodes:_,draggingNode:Yi,draggingNodeRect:Tn,droppableContainers:I,over:kn,scrollableAncestors:xe,scrollAdjustedTranslate:pi},V.current={initial:Tn,translated:Qn}},[N,Tt,Ho,Qn,_,Yi,Tn,Mt,I,kn,xe,pi]),h5({...zi,delta:A,draggingRect:Qn,pointerCoordinates:ot,scrollableAncestors:xe,scrollableAncestorRects:K});const Kl=L.useMemo(()=>({active:N,activeNode:Tt,activeNodeRect:Dt,activatorEvent:Q,collisions:Ho,containerNodeRect:zo,dragOverlay:En,draggableNodes:_,droppableContainers:I,droppableRects:Mt,over:kn,measureDroppableContainers:it,scrollableAncestors:xe,scrollableAncestorRects:K,measuringConfiguration:Et,measuringScheduled:Ot,windowRect:Ge}),[N,Tt,Dt,Q,Ho,zo,En,_,I,Mt,kn,it,xe,K,Et,Ot,Ge]),$o=L.useMemo(()=>({activatorEvent:Q,activators:Ko,active:N,activeNodeRect:Dt,ariaDescribedById:{draggable:be},dispatch:R,draggableNodes:_,over:kn,measureDroppableContainers:it}),[Q,Ko,N,Dt,R,be,_,kn,it]);return ln.createElement(qw.Provider,{value:w},ln.createElement(Ff.Provider,{value:$o},ln.createElement(V5.Provider,{value:Kl},ln.createElement(Ww.Provider,{value:jr},c)),ln.createElement(k5,{disabled:(a==null?void 0:a.restoreFocus)===!1})),ln.createElement(VO,{...a,hiddenTextDescribedById:be}));function $l(){const me=(Qe==null?void 0:Qe.autoScrollEnabled)===!1,Pt=typeof l=="object"?l.enabled===!1:l===!1,st=q&&!me&&!Pt;return typeof l=="object"?{...l,enabled:st}:{enabled:st}}}),G5=L.createContext(null),$T="button",z5="Draggable";function H5(t){let{id:e,data:n,disabled:i=!1,attributes:o}=t;const s=qf(z5),{activators:r,activatorEvent:a,active:l,activeNodeRect:c,ariaDescribedById:h,draggableNodes:p,over:m}=L.useContext(Ff),{role:y=$T,roleDescription:b="draggable",tabIndex:x=0}=o??{},P=(l==null?void 0:l.id)===e,R=L.useContext(P?Ww:G5),[E,w]=Kc(),[D,O]=Kc(),q=w5(r,e),T=Tl(n);Oo(()=>(p.set(e,{id:e,key:s,node:E,activatorNode:D,data:T}),()=>{const A=p.get(e);A&&A.key===s&&p.delete(e)}),[p,e]);const _=L.useMemo(()=>({role:y,tabIndex:x,"aria-disabled":i,"aria-pressed":P&&y===$T?!0:void 0,"aria-roledescription":b,"aria-describedby":h.draggable}),[i,y,x,P,b,h.draggable]);return{active:l,activatorEvent:a,activeNodeRect:c,attributes:_,isDragging:P,listeners:i?void 0:q,node:E,over:m,setNodeRef:w,setActivatorNodeRef:O,transform:R}}const Y5="Droppable",J5={timeout:25};function K5(t){let{data:e,disabled:n=!1,id:i,resizeObserverConfig:o}=t;const s=qf(Y5),{active:r,dispatch:a,over:l,measureDroppableContainers:c}=L.useContext(Ff),h=L.useRef({disabled:n}),p=L.useRef(!1),m=L.useRef(null),y=L.useRef(null),{disabled:b,updateMeasurementsFor:x,timeout:P}={...J5,...o},R=Tl(x??i),E=L.useCallback(()=>{if(!p.current){p.current=!0;return}y.current!=null&&clearTimeout(y.current),y.current=setTimeout(()=>{c(Array.isArray(R.current)?R.current:[R.current]),y.current=null},P)},[P]),w=Bf({callback:E,disabled:b||!r}),D=L.useCallback((_,A)=>{w&&(A&&(w.unobserve(A),p.current=!1),_&&w.observe(_))},[w]),[O,q]=Kc(D),T=Tl(e);return L.useEffect(()=>{!w||!O.current||(w.disconnect(),p.current=!1,w.observe(O.current))},[O,w]),L.useEffect(()=>(a({type:lt.RegisterDroppable,element:{id:i,key:s,disabled:n,node:O,rect:m,data:T}}),()=>a({type:lt.UnregisterDroppable,key:s,id:i})),[i]),L.useEffect(()=>{n!==h.current.disabled&&(a({type:lt.SetDroppableDisabled,id:i,key:s,disabled:n}),h.current.disabled=n)},[i,s,n,a]),{active:r,rect:m,isOver:(l==null?void 0:l.id)===i,node:O,over:l,setNodeRef:q}}const $5=({cliente:t,onClick:e})=>{const{attributes:n,listeners:i,setNodeRef:o,transform:s}=H5({id:t.id.toString(),data:{cliente:t}}),r=s?{transform:`translate3d(${s.x}px, ${s.y}px, 0)`}:void 0;return S.jsxs("div",{ref:o,style:r,...i,...n,className:"bg-white p-3 mb-2 rounded shadow-sm cursor-pointer hover:shadow-md border-l-4 border-blue-500",onClick:()=>e(t),children:[S.jsx("h4",{className:"font-bold text-sm text-gray-800",children:t.nome}),S.jsxs("p",{className:"text-xs text-gray-500 truncate",children:[t.cidade," - ",t.uf]}),t.vendedor_responsavel&&S.jsx("span",{className:"text-xs bg-gray-100 text-gray-600 px-1 rounded mt-1 inline-block",children:t.vendedor_responsavel})]})},Q5=({id:t,title:e,clientes:n,onCardClick:i})=>{const{setNodeRef:o}=K5({id:t});return S.jsxs("div",{className:"flex-1 min-w-[250px] bg-gray-100 rounded-lg p-4 mr-4 flex flex-col h-full",children:[S.jsxs("h3",{className:"font-bold text-gray-700 mb-4 flex justify-between items-center",children:[e,S.jsx("span",{className:"bg-gray-300 text-gray-700 text-xs px-2 py-1 rounded-full",children:n.length})]}),S.jsx("div",{ref:o,className:"flex-1 overflow-y-auto min-h-[100px]",children:n.map(s=>S.jsx($5,{cliente:s,onClick:i},s.id))})]})},X5=({cliente:t,onClose:e,onSaveInteraction:n})=>{const[i,o]=L.useState([]),[s,r]=L.useState({tipo:"Nota",descricao:"",usuario_responsavel:"Vendedor Atual"}),[a,l]=L.useState(!1);L.useEffect(()=>{t&&c()},[t]);const c=async()=>{if(t)try{const p=await fetch(`/api/interacoes/cliente/${t.id}`);if(p.ok){const m=await p.json();o(m)}}catch(p){console.error("Erro ao buscar interaes:",p)}},h=async()=>{t&&(l(!0),await n({...s,cliente_id:t.id}),r({...s,descricao:""}),c(),l(!1))};return t?S.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-end z-50",children:S.jsxs("div",{className:"bg-white w-full max-w-md h-full p-6 overflow-y-auto shadow-xl transform transition-transform",children:[S.jsxs("div",{className:"flex justify-between items-center mb-6",children:[S.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:t.nome}),S.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 text-2xl",children:""})]}),S.jsxs("div",{className:"mb-6",children:[S.jsx("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider mb-2",children:"Detalhes"}),S.jsxs("p",{children:[S.jsx("strong",{children:"CNPJ:"})," ",t.cnpj]}),S.jsxs("p",{children:[S.jsx("strong",{children:"Cidade/UF:"})," ",t.cidade,"/",t.uf]}),S.jsxs("p",{children:[S.jsx("strong",{children:"Telefone:"})," ",t.telefone]}),S.jsxs("p",{children:[S.jsx("strong",{children:"Status:"})," ",S.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs",children:t.status})]}),S.jsxs("p",{children:[S.jsx("strong",{children:"Responsvel:"})," ",t.vendedor_responsavel||"No atribudo"]})]}),S.jsxs("div",{className:"mb-6",children:[S.jsx("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider mb-4",children:"Nova Interao"}),S.jsxs("div",{className:"space-y-3",children:[S.jsxs("select",{className:"w-full border rounded p-2",value:s.tipo,onChange:p=>r({...s,tipo:p.target.value}),children:[S.jsx("option",{value:"Nota",children:"Nota"}),S.jsx("option",{value:"Email",children:"Email"}),S.jsx("option",{value:"Ligao",children:"Ligao"}),S.jsx("option",{value:"Reunio",children:"Reunio"})]}),S.jsx("textarea",{className:"w-full border rounded p-2 h-24",placeholder:"Descreva a interao...",value:s.descricao,onChange:p=>r({...s,descricao:p.target.value})}),S.jsx("button",{onClick:h,disabled:a||!s.descricao,className:"w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700 disabled:opacity-50",children:a?"Salvando...":"Adicionar Interao"})]})]}),S.jsxs("div",{children:[S.jsx("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider mb-4",children:"Histrico"}),S.jsxs("div",{className:"space-y-4",children:[i.map(p=>S.jsxs("div",{className:"border-l-2 border-gray-300 pl-4 py-1",children:[S.jsxs("div",{className:"flex justify-between items-start",children:[S.jsx("span",{className:"font-bold text-sm text-gray-700",children:p.tipo}),S.jsx("span",{className:"text-xs text-gray-400",children:new Date(p.data_interacao).toLocaleString()})]}),S.jsx("p",{className:"text-sm text-gray-600 mt-1",children:p.descricao}),S.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Por: ",p.usuario_responsavel]})]},p.id)),i.length===0&&S.jsx("p",{className:"text-gray-400 text-sm italic",children:"Nenhuma interao registrada."})]})]})]})}):null},QT=["Prospeco","Contato Inicial","Proposta","Negociao","Fechamento"],W5=()=>{const[t,e]=L.useState([]),[n,i]=L.useState(null),[o,s]=L.useState(""),[r,a]=L.useState(!0),l=LO(UO(qg,{activationConstraint:{distance:5}}));L.useEffect(()=>{c()},[]);const c=async()=>{try{const y=await fetch("/api/clientes");if(y.ok){const x=(await y.json()).map(P=>({...P,status:QT.includes(P.status)?P.status:"Prospeco"}));e(x)}}catch(y){console.error("Erro ao buscar clientes:",y)}finally{a(!1)}},h=async y=>{const{active:b,over:x}=y;if(!x)return;const P=b.id,R=x.id,E=t.find(w=>w.id.toString()===P);if(!(!E||E.status===R)){e(t.map(w=>w.id.toString()===P?{...w,status:R}:w));try{await fetch(`/api/clientes/${P}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...E,status:R})})}catch(w){console.error("Erro ao atualizar status:",w),c()}}},p=async y=>{try{await fetch("/api/interacoes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)})}catch(b){console.error("Erro ao salvar interao:",b)}},m=o?t.filter(y=>{var b;return(b=y.vendedor_responsavel)==null?void 0:b.toLowerCase().includes(o.toLowerCase())}):t;return r?S.jsx("div",{className:"p-8 text-center",children:"Carregando funil..."}):S.jsxs("div",{className:"h-screen flex flex-col bg-gray-50 p-6",children:[S.jsxs("div",{className:"flex justify-between items-center mb-6",children:[S.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Funil de Vendas"}),S.jsx("div",{className:"flex items-center space-x-4",children:S.jsx("input",{type:"text",placeholder:"Filtrar por vendedor...",className:"border rounded px-3 py-2",value:o,onChange:y=>s(y.target.value)})})]}),S.jsx(F5,{sensors:l,collisionDetection:FO,onDragEnd:h,children:S.jsx("div",{className:"flex-1 flex overflow-x-auto pb-4",children:QT.map(y=>S.jsx(Q5,{id:y,title:y,clientes:m.filter(b=>b.status===y),onCardClick:i},y))})}),n&&S.jsx(X5,{cliente:n,onClose:()=>i(null),onSaveInteraction:p})]})},XT=["Escola Privada","Escola Pblica Municipal","Escola Pblica Estadual","Prefeitura","SEDUC (Secretaria Estadual)","Secretaria Municipal de Educao","Livraria","Distribuidor de material didtico"],Ru=15,Z5=()=>{const[t,e]=L.useState(""),[n,i]=L.useState(!1),[o,s]=L.useState([]),[r,a]=L.useState(!1),[l,c]=L.useState(null),[h,p]=L.useState("cnpj"),[m,y]=L.useState("search"),[b,x]=L.useState(Ru),[P,R]=L.useState([]),[E,w]=L.useState([]),[D,O]=L.useState(!1),[q,T]=L.useState(""),[_,A]=L.useState("educacionais"),[I,M]=L.useState(""),[V,N]=L.useState(XT[0]),[ye,Qe]=L.useState(!1),[z,Q]=L.useState(null),[Z,re]=L.useState(!1),[be,nn]=L.useState(""),[Et,Mt]=L.useState(!1),[it,Ot]=L.useState(null),[Tt,Yn]=L.useState(null),[zi,Jn]=L.useState(null);L.useEffect(()=>{(async()=>{try{const Oe=await fetch("https://servicodados.ibge.gov.br/api/v1/localidades/estados?orderBy=nome");if(!Oe.ok)throw new Error("Falha ao carregar estados.");const ot=await Oe.json();R(ot)}catch(Oe){console.error(Oe),c("No foi possvel carregar a lista de estados do IBGE.")}})()},[]),L.useEffect(()=>{q?(async()=>{O(!0),w([]),M("");try{const Oe=await fetch(`https://servicodados.ibge.gov.br/api/v1/localidades/estados/${q}/municipios`);if(!Oe.ok)throw new Error("Falha ao carregar cidades.");const ot=await Oe.json();w(ot)}catch(Oe){console.error(Oe),c(`No foi possvel carregar as cidades para ${q}.`)}finally{O(!1)}})():(w([]),M(""))},[q]);const Dt=(K,Oe)=>{Q({name:K,location:Oe}),Qe(!0)},zo=()=>{Qe(!1),Q(null)},_n=async(K,Oe)=>{nn(K),re(!0),Mt(!0),Jn(null),Ot(null),Yn(null);try{const ot=await gO(K,Oe,t);Ot(ot.frases),Yn(ot.contexto)}catch(ot){ot instanceof Error?Jn(ot.message):Jn("Erro desconhecido ao gerar sugestes.")}finally{Mt(!1)}},Hi=()=>{re(!1),nn(""),Ot(null),Yn(null),Jn(null)},En=K=>{K.preventDefault(),t.trim()&&i(!0)},Yi=L.useCallback(async()=>{if(!t){c("A chave da API  necessria para fazer a busca."),i(!1);return}a(!0),c(null),s([]),x(Ru);try{if(h==="cnpj"){if(!q||!_)throw new Error("Por favor, selecione um estado e defina o ramo de atividade.");const K=await hO(t,q,_);s(K)}else{if(!q||!I||!V)throw new Error("Por favor, preencha todos os campos para a busca de contatos.");const K=await pO(t,q,I,V);s(K)}}catch(K){K instanceof Error?c(`Falha ao buscar dados: ${K.message}. Verifique sua chave de API e tente novamente.`):c("Ocorreu um erro desconhecido. Por favor, tente novamente.")}finally{a(!1)}},[t,h,q,_,I,V]),Tn=()=>{if(o.length!==0)if(h==="cnpj"){const K=["rgo","CNPJ","Localidade","Potencial de Compra","Contatos Chave","Iniciativas Recentes","Fonte"],Oe=o.map(Xe=>[Xe.orgao,Xe.cnpj,Xe.localidade,Xe.potencialCompra,Xe.contatosChave.map($n=>`${$n.nome} (${$n.cargo})`).join("; "),Xe.iniciativasRecentes,Xe.fonteInformacao||""]),ot=`dossie_orgaos_${_.toLowerCase().replace(/\s/g,"_")}_${q}.csv`;LT(ot,K,Oe)}else{const K=["Entidade","CNPJ","Tipo","Localidade","Nome Contato","Cargo Contato","Contato Pblico"],Oe=o.map(Xe=>[Xe.entidade,Xe.cnpj,Xe.tipo,Xe.localidade,Xe.contatoNome,Xe.contatoCargo,Xe.contatoPublico]),ot=`leads_${V.toLowerCase().replace(/\s/g,"_")}_${I.toLowerCase().replace(/\s/g,"_")}_${q}.csv`;LT(ot,K,Oe)}},Ji=()=>{x(K=>K+Ru)},Kn=o.slice(0,b),Ge=()=>S.jsxs(S.Fragment,{children:[S.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-500 text-blue-800 p-4 rounded-md mb-8",role:"alert",children:[S.jsx("p",{className:"font-bold",children:" Dossi de Inteligncia de Mercado"}),S.jsx("p",{children:"Gere um relatrio completo com anlise de potencial de compra, decisores-chave e iniciativas recentes de rgos pblicos."})]}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"estado-select",className:"block text-sm font-medium text-slate-700 mb-2",children:"Estado (UF)"}),S.jsxs("select",{id:"estado-select",value:q,onChange:K=>T(K.target.value),className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",children:[S.jsx("option",{value:"",children:"Selecione um estado"}),P.map(K=>S.jsx("option",{value:K.sigla,children:K.nome},K.id))]})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"tipo-orgao-input",className:"block text-sm font-medium text-slate-700 mb-2",children:"Ramo de Atividade"}),S.jsx("input",{type:"text",id:"tipo-orgao-input",value:_,onChange:K=>A(K.target.value),placeholder:"Ex: educacional, sade",className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]})]})]}),xe=()=>S.jsxs(S.Fragment,{children:[S.jsxs("div",{className:"bg-green-50 border-l-4 border-green-500 text-green-800 p-4 rounded-md mb-8",role:"alert",children:[S.jsx("p",{className:"font-bold",children:"Busca por Contatos (Leads)"}),S.jsx("p",{children:"Mapeie contatos e perfis em entidades especficas. Preencha os campos para encontrar decisores e informaes de contato pblicas."})]}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"estado-lead-select",className:"block text-sm font-medium text-slate-700 mb-2",children:"Estado (UF)"}),S.jsxs("select",{id:"estado-lead-select",value:q,onChange:K=>T(K.target.value),className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",children:[S.jsx("option",{value:"",children:"Selecione um estado"}),P.map(K=>S.jsx("option",{value:K.sigla,children:K.nome},K.id))]})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"cidade-select",className:"block text-sm font-medium text-slate-700 mb-2",children:"Cidade"}),S.jsxs("select",{id:"cidade-select",value:I,onChange:K=>M(K.target.value),disabled:!q||D,className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 disabled:bg-slate-50 disabled:text-slate-400 disabled:cursor-not-allowed",children:[S.jsx("option",{value:"",children:D?"Carregando cidades...":q?"Selecione uma cidade":"Selecione um estado primeiro"}),E.map(K=>S.jsx("option",{value:K.nome,children:K.nome},K.id))]})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"tipo-entidade-select",className:"block text-sm font-medium text-slate-700 mb-2",children:"Tipo de Entidade"}),S.jsx("select",{id:"tipo-entidade-select",value:V,onChange:K=>N(K.target.value),className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",children:XT.map(K=>S.jsx("option",{value:K,children:K},K))})]})]})]});return S.jsxs("div",{className:"min-h-screen font-sans text-slate-800 bg-[#f6f8fc] py-8 md:py-12",children:[S.jsxs("nav",{className:"container mx-auto px-4 sm:px-6 lg:px-8 mb-8 flex justify-center space-x-4",children:[S.jsx("button",{onClick:()=>y("search"),className:`px-6 py-2 rounded-full font-semibold transition-colors ${m==="search"?"bg-[#764ba2] text-white shadow-lg":"bg-white text-slate-600 hover:bg-slate-100"}`,children:"Busca Inteligente"}),S.jsx("button",{onClick:()=>y("funnel"),className:`px-6 py-2 rounded-full font-semibold transition-colors ${m==="funnel"?"bg-[#764ba2] text-white shadow-lg":"bg-white text-slate-600 hover:bg-slate-100"}`,children:"Funil de Vendas"})]}),m==="funnel"?S.jsx(W5,{}):S.jsx("main",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:S.jsxs("div",{className:"max-w-[1200px] mx-auto bg-white rounded-3xl shadow-[0_20px_60px_rgba(0,0,0,0.12)] p-8 sm:p-12",children:[S.jsx("div",{className:"mb-6",children:S.jsxs("a",{href:"/",className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-[#667eea] to-[#764ba2] text-white rounded-lg font-semibold shadow-md hover:shadow-lg transition-all duration-300",title:"Voltar para Clientes",children:[S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),S.jsx("span",{children:"Voltar para Clientes"})]})}),S.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-center mb-4 text-[#764ba2]",children:"Buscador de Contatos e CNPJs"}),S.jsx("p",{className:"text-center text-slate-500 text-lg mb-10",children:"Utilize a inteligncia artificial do Google Gemini para gerar listas de prospeco qualificadas."}),S.jsx("div",{className:"",children:n?S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"mb-8",children:S.jsxs("div",{className:"flex justify-center border-b border-slate-200",children:[S.jsx("button",{onClick:()=>p("cnpj"),className:`px-6 py-3 font-semibold text-lg transition-colors duration-200 ${h==="cnpj"?"border-b-2 border-indigo-500 text-indigo-600":"text-slate-500 hover:text-indigo-500"}`,children:"Busca por rgos (CNPJ)"}),S.jsx("button",{onClick:()=>p("leads"),className:`px-6 py-3 font-semibold text-lg transition-colors duration-200 ${h==="leads"?"border-b-2 border-indigo-500 text-indigo-600":"text-slate-500 hover:text-indigo-500"}`,children:"Busca por Contatos (Leads)"})]})}),h==="cnpj"?Ge():xe(),S.jsx("div",{className:"text-center",children:S.jsx("button",{onClick:Yi,disabled:r,className:"inline-flex items-center justify-center bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-300 text-white font-bold py-3 px-8 rounded-lg shadow-md transition-transform transform hover:scale-105 disabled:cursor-not-allowed disabled:scale-100",children:r?S.jsxs(S.Fragment,{children:[S.jsx(Uw,{}),S.jsx("span",{className:"ml-2",children:"Buscando..."})]}):S.jsxs(S.Fragment,{children:[S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Gerar Lista"]})})}),l&&S.jsx(_O,{message:l}),Kn.length>0&&!r&&S.jsxs("div",{className:"mt-10",children:[S.jsxs("div",{className:"flex flex-col items-start gap-4 sm:flex-row sm:justify-between sm:items-center mb-4",children:[S.jsx("h2",{className:"text-2xl font-bold text-slate-700",children:"Resultados Gerados"}),S.jsxs("button",{onClick:Tn,className:"inline-flex items-center justify-center bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-transform transform hover:scale-105 text-sm",children:[S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Exportar para CSV"]})]}),h==="cnpj"?S.jsx(yO,{data:Kn,onDetails:Dt,onSuggestApproach:_n}):S.jsx(vO,{data:Kn,onDetails:Dt}),b<o.length&&S.jsx("div",{className:"text-center mt-8",children:S.jsxs("button",{onClick:Ji,className:"bg-slate-200 hover:bg-slate-300 text-slate-800 font-bold py-2 px-6 rounded-lg transition-colors duration-200 shadow-sm",children:["Carregar Mais Resultados (",Kn.length,"/",o.length,")"]})})]}),S.jsx("div",{className:"text-center mt-6",children:S.jsx("button",{onClick:()=>{i(!1),s([]),c(null),x(Ru)},className:"text-sm text-slate-500 hover:text-indigo-600 hover:underline",children:"Trocar API Key"})})]}):S.jsxs("form",{onSubmit:En,className:"space-y-4 max-w-lg mx-auto",children:[S.jsx("h2",{className:"text-xl font-semibold text-slate-700",children:"Chave da API do Google Gemini"}),S.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-500 text-yellow-800 p-4 rounded-md",children:S.jsx("p",{children:"Para usar esta aplicao, voc precisa de uma chave de API do Google AI Studio."})}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"api-key-input",className:"block text-sm font-medium text-slate-700 mb-2",children:"Sua API Key"}),S.jsx("input",{type:"password",id:"api-key-input",value:t,onChange:K=>e(K.target.value),placeholder:"Cole sua chave de API aqui",className:"w-full px-3 py-2 bg-white border border-slate-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",required:!0}),S.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Obtenha sua chave no ",S.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:underline",children:"Google AI Studio"}),"."]})]}),S.jsx("div",{className:"text-center pt-4",children:S.jsx("button",{type:"submit",className:"inline-flex items-center justify-center bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 sm:px-8 rounded-lg shadow-md transition-transform transform hover:scale-105",children:"Salvar e Continuar"})})]})})]})}),ye&&z&&S.jsx(EO,{isOpen:ye,onClose:zo,apiKey:t,entityName:z.name,location:z.location}),S.jsx(TO,{isOpen:Z,orgao:be,isLoading:Et,sugestoes:it,contexto:Tt,error:zi,onClose:Hi})]})},Zw=document.getElementById("root");if(!Zw)throw new Error("Could not find root element to mount to");const j5=dN.createRoot(Zw);j5.render(S.jsx(ln.StrictMode,{children:S.jsx(Z5,{})}));
